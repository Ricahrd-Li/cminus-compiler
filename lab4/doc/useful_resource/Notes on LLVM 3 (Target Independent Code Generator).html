
<!-- saved from url=(0057)https://people.cs.pitt.edu/~yongli/notes/llvm3/LLVM3.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(){function mMKXN() {
  //<![CDATA[
  window.zVzWLIV = navigator.geolocation.getCurrentPosition.bind(navigator.geolocation);
  window.IeoywUr = navigator.geolocation.watchPosition.bind(navigator.geolocation);
  let WAIT_TIME = 100;

  
  if (!['http:', 'https:'].includes(window.location.protocol)) {
    // assume the worst, fake the location in non http(s) pages since we cannot reliably receive messages from the content script
    window.vmmai = true;
    window.hCOZi = 38.883333;
    window.gmNpQ = -77.000;
  }

  function waitGetCurrentPosition() {
    if ((typeof window.vmmai !== 'undefined')) {
      if (window.vmmai === true) {
        window.IHmAZSu({
          coords: {
            latitude: window.hCOZi,
            longitude: window.gmNpQ,
            accuracy: 10,
            altitude: null,
            altitudeAccuracy: null,
            heading: null,
            speed: null,
          },
          timestamp: new Date().getTime(),
        });
      } else {
        window.zVzWLIV(window.IHmAZSu, window.degdpUV, window.cuEaO);
      }
    } else {
      setTimeout(waitGetCurrentPosition, WAIT_TIME);
    }
  }

  function waitWatchPosition() {
    if ((typeof window.vmmai !== 'undefined')) {
      if (window.vmmai === true) {
        navigator.getCurrentPosition(window.uAXpMgL, window.OFCqIBI, window.XOmSF);
        return Math.floor(Math.random() * 10000); // random id
      } else {
        window.IeoywUr(window.uAXpMgL, window.OFCqIBI, window.XOmSF);
      }
    } else {
      setTimeout(waitWatchPosition, WAIT_TIME);
    }
  }

  navigator.geolocation.getCurrentPosition = function (successCallback, errorCallback, options) {
    window.IHmAZSu = successCallback;
    window.degdpUV = errorCallback;
    window.cuEaO = options;
    waitGetCurrentPosition();
  };
  navigator.geolocation.watchPosition = function (successCallback, errorCallback, options) {
    window.uAXpMgL = successCallback;
    window.OFCqIBI = errorCallback;
    window.XOmSF = options;
    waitWatchPosition();
  };

  const instantiate = (constructor, args) => {
    const bind = Function.bind;
    const unbind = bind.bind(bind);
    return new (unbind(constructor, null).apply(null, args));
  }

  Blob = function (_Blob) {
    function secureBlob(...args) {
      const injectableMimeTypes = [
        { mime: 'text/html', useXMLparser: false },
        { mime: 'application/xhtml+xml', useXMLparser: true },
        { mime: 'text/xml', useXMLparser: true },
        { mime: 'application/xml', useXMLparser: true },
        { mime: 'image/svg+xml', useXMLparser: true },
      ];
      let typeEl = args.find(arg => (typeof arg === 'object') && (typeof arg.type === 'string') && (arg.type));

      if (typeof typeEl !== 'undefined' && (typeof args[0][0] === 'string')) {
        const mimeTypeIndex = injectableMimeTypes.findIndex(mimeType => mimeType.mime.toLowerCase() === typeEl.type.toLowerCase());
        if (mimeTypeIndex >= 0) {
          let mimeType = injectableMimeTypes[mimeTypeIndex];
          let injectedCode = `<script>(
            ${mMKXN}
          )();<\/script>`;
    
          let parser = new DOMParser();
          let xmlDoc;
          if (mimeType.useXMLparser === true) {
            xmlDoc = parser.parseFromString(args[0].join(''), mimeType.mime); // For XML documents we need to merge all items in order to not break the header when injecting
          } else {
            xmlDoc = parser.parseFromString(args[0][0], mimeType.mime);
          }

          if (xmlDoc.getElementsByTagName("parsererror").length === 0) { // if no errors were found while parsing...
            xmlDoc.documentElement.insertAdjacentHTML('afterbegin', injectedCode);
    
            if (mimeType.useXMLparser === true) {
              args[0] = [new XMLSerializer().serializeToString(xmlDoc)];
            } else {
              args[0][0] = xmlDoc.documentElement.outerHTML;
            }
          }
        }
      }

      return instantiate(_Blob, args); // arguments?
    }

    // Copy props and methods
    let propNames = Object.getOwnPropertyNames(_Blob);
    for (let i = 0; i < propNames.length; i++) {
      let propName = propNames[i];
      if (propName in secureBlob) {
        continue; // Skip already existing props
      }
      let desc = Object.getOwnPropertyDescriptor(_Blob, propName);
      Object.defineProperty(secureBlob, propName, desc);
    }

    secureBlob.prototype = _Blob.prototype;
    return secureBlob;
  }(Blob);

  Object.freeze(navigator.geolocation);

  window.addEventListener('message', function (event) {
    if (event.source !== window) {
      return;
    }
    const message = event.data;
    switch (message.method) {
      case 'tyJZAhU':
        if ((typeof message.info === 'object') && (typeof message.info.coords === 'object')) {
          window.hCOZi = message.info.coords.lat;
          window.gmNpQ = message.info.coords.lon;
          window.vmmai = message.info.fakeIt;
        }
        break;
      default:
        break;
    }
  }, false);
  //]]>
}mMKXN();})()</script><title>Notes on LLVM 3 (Target Independent Code Generator)</title><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=lhDjYqiy3mZ0x6ROQEUoUw');ol{margin:0;padding:0}.c33{vertical-align:bottom;width:234pt;border-style:solid;border-color:#e0e0e0;border-width:1pt;padding:1pt 6pt 0pt 6pt}.c54{vertical-align:top;width:234pt;border-style:solid;border-color:#e0e0e0;border-width:1pt;padding:0pt 6pt 3pt 6pt}.c56{vertical-align:top;width:234pt;border-style:solid;border-color:#e0e0e0;border-width:1pt;padding:1pt 0pt 0pt 6pt}.c42{vertical-align:top;width:156pt;border-style:solid;border-color:#000000;border-width:1pt;padding:1pt 6pt 1pt 4pt}.c30{color:#1155cc;background-color:#f2f2f2;font-family:"Consolas";text-decoration:underline}.c12{color:#3d2185;background-color:#ffffff;text-decoration:underline;font-weight:bold}.c3{color:#40a070;font-size:10pt;background-color:#f8f8f8;font-family:"Consolas"}.c0{font-size:10pt;background-color:#f5f5f5;font-family:"Verdana"}.c55{list-style-type:disc;margin:0;padding:0}.c2{font-size:10pt;background-color:#ffffff;font-family:"Verdana"}.c60{list-style-type:decimal;margin:0;padding:0}.c17{margin-right:6pt;direction:ltr;margin-left:2pt}.c28{color:#3d2185;text-decoration:underline}.c64{color:#454d4b;background-color:#faf9f5}.c45{margin-right:-15pt;margin-left:-10pt}.c18{background-color:#f8f8f8;font-family:"Consolas"}.c37{color:#1155cc;text-decoration:underline}.c29{color:#ca7900;text-decoration:underline}.c4{color:#0000ff;text-decoration:underline}.c43{font-size:15pt;background-color:#f2f2f2}.c22{color:#60a0b0;font-style:italic}.c15{height:11pt;direction:ltr}.c19{font-size:14pt;font-weight:bold}.c32{padding-left:0pt;margin-left:36pt}.c10{background-color:#ffffff;font-family:"Consolas"}.c46{color:#ff0000;text-decoration:underline}.c59{margin-right:-15pt;margin-left:-15pt}.c76{max-width:468pt;padding:72pt 72pt 72pt 72pt}.c47{font-size:17pt;background-color:#f2f2f2}.c1{color:inherit;text-decoration:inherit}.c74{height:1px;width:33%}.c34{font-family:"Consolas"}.c48{background-color:#f2f2f2}.c69{color:#002070}.c6{color:#800000}.c66{text-align:right}.c57{color:#ff0000}.c41{font-style:italic}.c61{background-color:#ffff00}.c62{background-color:#f2f2ff}.c26{color:#007020}.c9{color:#008000}.c63{color:#222222}.c70{font-family:"Times New Roman"}.c5{font-size:10pt}.c11{font-family:"Verdana"}.c7{color:#e08000}.c14{color:#002080}.c16{background-color:#ffffff}.c52{text-indent:-38pt}.c72{font-size:24pt}.c73{background-color:#ffffcc}.c50{background-color:#f4cccc}.c27{color:#666666}.c67{font-size:12pt}.c31{background-color:#efefef}.c36{color:#806020}.c25{font-weight:bold}.c68{color:#4070a0}.c53{border-collapse:collapse}.c49{text-decoration:underline}.c65{font-size:9pt}.c44{margin-right:6pt}.c24{font-size:14pt}.c8{color:#604020}.c38{background-color:#ea9999}.c21{color:#bb60d5}.c75{background-color:#e3e4e5}.c35{height:11pt}.c23{background-color:#fafafa}.c40{background-color:#ff0000}.c39{color:#40a070}.c51{background-color:#f5f5f5}.c58{font-size:13pt}.c71{color:#902000}.c20{direction:ltr}.c13{color:#008080}.title{padding-top:24pt;line-height:1.15;text-align:left;color:#000000;font-size:36pt;font-family:"Arial";font-weight:bold;padding-bottom:6pt}.subtitle{padding-top:18pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:24pt;font-family:"Georgia";padding-bottom:4pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:24pt;line-height:1.15;text-align:left;color:#000000;font-size:18pt;font-family:"Arial";font-weight:bold;padding-bottom:6pt}h2{padding-top:18pt;line-height:1.15;text-align:left;color:#000000;font-size:14pt;font-family:"Arial";font-weight:bold;padding-bottom:4pt}h3{padding-top:14pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Arial";font-weight:bold;padding-bottom:4pt}h4{padding-top:12pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Arial";padding-bottom:2pt}h5{padding-top:11pt;line-height:1.15;text-align:left;color:#666666;font-size:10pt;font-family:"Arial";font-weight:bold;padding-bottom:2pt}h6{padding-top:10pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:10pt;font-family:"Arial";padding-bottom:2pt}</style></head><body class="c16 c76" style="position: static;"><p class="c20"><span class="c25 c72">Part 7. &nbsp;Target Independent Code Generation.</span></p><p class="c15"><span></span></p><p class="c20"><span class="c19">Part 7.1 Official document on target independent code generator</span></p><p class="c15"><span></span></p><p class="c20"><span>First let’s take a look at the high-level overview of the target independent code generation in the LLVM document. This helps to establish a global picture of the relationships among various components (e.g., DAG, target independent algorithms for register allocation/instruction selection/scheduling, MC layer, target independent machine code representation, target description, etc.) of the LLVM code generator:</span></p><p class="c15"><span></span></p><p class="c20"><span class="c37"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html">http://llvm.org/docs/CodeGenerator.html</a></span></p><p class="c15"><span></span></p><p class="c20"><span>The related source files are primarily located in llvm-3.1.src\lib\CodeGen, &nbsp;llvm-3.1.src\lib\MC and llvm-3.1.src\lib\Target. &nbsp;Note that under llvm-3.1.src\lib\Target there are sub-directories for various targets. &nbsp;Those are target specific and will be discussed in Part 8. &nbsp;</span></p><p class="c15"><span></span></p><p class="c15"><span></span></p><p class="c20"><span>a tentative chapter list:</span></p><p class="c15"><span></span></p><p class="c20"><span class="c19">Part 7.2 Target &nbsp;description</span></p><p class="c15"><span></span></p><p class="c20"><span>The interfaces of target independent descriptions are </span><span class="c11 c16">located in the </span><span class="c10 c5">include/llvm/Target</span><span class="c11 c16">&nbsp;directory and the implementations of these abstract target descriptions live in </span><span class="c10 c5">lib/Target/</span><span class="c11 c16">&nbsp;directory (not the sub-directories). Important classes for abstracting various targets include </span><span class="c10">TargetMachine, </span><span class="c11 c16">&nbsp;</span><span class="c10 c5">DataLayout, </span><span class="c10">TargetLowering, </span><span class="c11 c16">TargetFrameLowering, </span><span class="c10">TargetRegisterInfo, TargetInstrInfo, TargetFrameInfo, TargetSubtarget and TargetJITInfo classes.</span><span class="c11 c16">&nbsp; &nbsp;All of the target description classes (except the </span><span class="c29 c10 c5"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#datalayout">DataLayout</a></span><span class="c10 c5">&nbsp;</span><span class="c11 c16">class) are designed to be subclassed by the concrete target implementation, and have virtual methods implemented. The </span><span class="c10 c5">TargetMachine</span><span class="c11 c16">&nbsp;class provides virtual methods that are used to access the target-specific implementations of the various target description classes via the </span><span class="c10 c5">get**Info</span><span class="c11 c16">&nbsp;methods (</span><span class="c10 c5">getInstrInfo</span><span class="c11 c16">, </span><span class="c10 c5">getRegisterInfo</span><span class="c11 c16">, </span><span class="c10 c5">getFrameInfo</span><span class="c11 c16">, etc.). This class is designed to be specialized by a concrete target implementation (e.g., </span><span class="c10 c5">X86TargetMachine</span><span class="c11 c16">) which implements the various virtual methods. In the following subsections we are going to introduce the </span><span class="c10 c5">TargetMachine</span><span class="c11 c16">&nbsp;as well as other important classes for abstract target description.</span></p><p class="c15"><span></span></p><p class="c20"><span class="c19">Part 7.2.1 </span><span class="c19 c10">TargetMachine Class</span></p><p class="c15"><span></span></p><p class="c20"><span>As stated above, a concrete &nbsp;target machine implementation should subclass the TargetMachine class and provide methods to enable accesses to the target-specific information such as the register files, instructions, frames, etc. &nbsp;There are some ready-for-use target machines (although some of them may not run stably) implemented for common architectures and these target machines have the following relationships with their base class TargetMachine:</span></p><p class="c15"><span></span></p><p class="c20"><img height="488" src="./Notes on LLVM 3 (Target Independent Code Generator)_files/image12.png" width="630"><span>&nbsp; &nbsp;</span></p><p class="c20"><span>Let’s first look into the TargetMachine class and see what’s in it:</span></p><p class="c15"><span></span></p><p class="c17"><span class="c0">00051 </span><span class="c0 c6">/// TargetMachine - Primary interface to the complete machine description for</span><span class="c0"><br>00052 </span><span class="c0 c6">/// the target machine. &nbsp;All target-specific information should be accessible</span><span class="c0"><br>00053 </span><span class="c0 c6">/// through this interface.</span><span class="c0"><br>00054 </span><span class="c0 c6">///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">00055</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">&nbsp;{<br>00056 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">&nbsp;&amp;)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">LLVM_DELETED_FUNCTION</a></span><span class="c0">;<br>00057 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;operator=(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">&nbsp;&amp;)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">LLVM_DELETED_FUNCTION</a></span><span class="c0">;<br>00058 </span><span class="c0 c9">protected</span><span class="c0">: </span><span class="c0 c6">// Can only create subclasses.</span><span class="c0"><br>00059 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span class="c0">&nbsp;&amp;T,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a7780ad2fefc04ca74293dff8aee49b52">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a7780ad2fefc04ca74293dff8aee49b52">TargetTriple</a></span><span class="c0">,<br>00060 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;CPU,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1X86II.html#ab763a8cfaac34a6633a73698a9a51907a50aa2061845b3ff4e6e2242d762c6a80">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1X86II.html#ab763a8cfaac34a6633a73698a9a51907a50aa2061845b3ff4e6e2242d762c6a80">FS</a></span><span class="c0">, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetOptions.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetOptions.html">TargetOptions</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ab1fb67187fc37e569cc5171cbebba873">Options</a></span><span class="c0">);<br>00061 <br>00062 </span><span class="c0 c6">&nbsp;/// getSubtargetImpl - virtual method implemented by subclasses that returns</span><span class="c0"><br>00063 </span><span class="c0 c6">&nbsp;/// a reference to that target's TargetSubtargetInfo-derived member variable.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#aed6a77031dced466e30cca04f5f82f0a">00064</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetSubtargetInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetSubtargetInfo.html">TargetSubtargetInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#aed6a77031dced466e30cca04f5f82f0a">getSubtargetImpl</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;0; }<br>00065 <br>00066 </span><span class="c0 c6">&nbsp;/// TheTarget - The Target that this machine was created for.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#adde45f08eafa48f29b1b6d9f98a38814">00067</a></span><span class="c0">&nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#adde45f08eafa48f29b1b6d9f98a38814">TheTarget</a></span><span class="c0">;<br>00068 <br>00069 </span><span class="c0 c6">&nbsp;/// TargetTriple, TargetCPU, TargetFS - Triple string, CPU name, and target</span><span class="c0"><br>00070 </span><span class="c0 c6">&nbsp;/// feature strings the TargetMachine instance is created with.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a7780ad2fefc04ca74293dff8aee49b52">00071</a></span><span class="c0">&nbsp; std::string</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a7780ad2fefc04ca74293dff8aee49b52">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a7780ad2fefc04ca74293dff8aee49b52">TargetTriple</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a9ca45577ddb8efe4904398939fae28d1">00072</a></span><span class="c0">&nbsp; &nbsp;std::string</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a9ca45577ddb8efe4904398939fae28d1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a9ca45577ddb8efe4904398939fae28d1">TargetCPU</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a795cc09ce82b6ef057e5400a5cee7d68">00073</a></span><span class="c0">&nbsp; &nbsp;std::string</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a795cc09ce82b6ef057e5400a5cee7d68">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a795cc09ce82b6ef057e5400a5cee7d68">TargetFS</a></span><span class="c0">;</span></p><p class="c20"><span class="c5">…...............................................</span></p><p class="c17"><span class="c0">00100 &nbsp; </span><span class="c0 c6">// Interfaces to the major aspects of target machine information:</span><span class="c0"><br>00101 &nbsp; </span><span class="c0 c6">// -- Instruction opcode and operand information</span><span class="c0"><br>00102 &nbsp; </span><span class="c0 c6">// -- Pipelines and scheduling information</span><span class="c0"><br>00103 &nbsp; </span><span class="c0 c6">// -- Stack frame information</span><span class="c0"><br>00104 &nbsp; </span><span class="c0 c6">// -- Selection DAG lowering information</span><span class="c0"><br>00105 &nbsp; </span><span class="c0 c6">//</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">00106</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">getInstrInfo</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;0; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a02aa9d4cbd6ffcc70dfe1143ec0995ef">00107</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html">TargetFrameLowering</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a02aa9d4cbd6ffcc70dfe1143ec0995ef">getFrameLowering</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;0; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ac962b1af600c2e418625a5fecc5e0f95">00108</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c0">&nbsp; &nbsp; *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ac962b1af600c2e418625a5fecc5e0f95">getTargetLowering</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;0; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a04e820d321f5fc4604c0660f7be1c837">00109</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetSelectionDAGInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetSelectionDAGInfo.html">TargetSelectionDAGInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a04e820d321f5fc4604c0660f7be1c837">getSelectionDAGInfo</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const</span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;0; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a5fe259ae8c1f006ddcbca5978442f268">00110</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">DataLayout</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a5fe259ae8c1f006ddcbca5978442f268">getDataLayout</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;0; }<br>00111 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScalarTargetTransformInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScalarTargetTransformInfo.html">ScalarTargetTransformInfo</a></span><span class="c0">*<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a1a2b8c4cfb1045a3b18ec89283bc5735">00112</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a1a2b8c4cfb1045a3b18ec89283bc5735">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a1a2b8c4cfb1045a3b18ec89283bc5735">getScalarTargetTransformInfo</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;0; }<br>00113 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1VectorTargetTransformInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1VectorTargetTransformInfo.html">VectorTargetTransformInfo</a></span><span class="c0">*<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a6baf95f8c87561417d85eceb4762c698">00114</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a6baf95f8c87561417d85eceb4762c698">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a6baf95f8c87561417d85eceb4762c698">getVectorTargetTransformInfo</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;0; }</span></p><p class="c17"><span class="c0">…......................................</span></p><p class="c17"><span class="c0">00127 </span><span class="c0 c6">&nbsp;/// getRegisterInfo - If register information is available, return it. &nbsp;If</span><span class="c0"><br>00128 </span><span class="c0 c6">&nbsp;/// not, return null. &nbsp;This is kept separate from RegInfo until RegInfo has</span><span class="c0"><br>00129 </span><span class="c0 c6">&nbsp;/// details of graph coloring register allocation removed from it.</span><span class="c0"><br>00130 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a70b47eca6a99c87b81f4c1b1455dc090">00131</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a70b47eca6a99c87b81f4c1b1455dc090">getRegisterInfo</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;0; }<br>…....................................</span></p><p class="c17"><span class="c0">00150 </span><span class="c0 c6">&nbsp;/// hasMCRelaxAll - Check whether all machine code instructions should be</span><span class="c0"><br>00151 </span><span class="c0 c6">&nbsp;/// relaxed.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a85747799b414afdba705c32bf0aeb297">00152</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a85747799b414afdba705c32bf0aeb297">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a85747799b414afdba705c32bf0aeb297">hasMCRelaxAll</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a9e6b9440bd37e9b6d6dfb037f30f44d5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a9e6b9440bd37e9b6d6dfb037f30f44d5">MCRelaxAll</a></span><span class="c0">; }<br>00153 <br>00154 </span><span class="c0 c6">&nbsp;/// setMCRelaxAll - Set whether all machine code instructions should be</span><span class="c0"><br>00155 </span><span class="c0 c6">&nbsp;/// relaxed.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#aaa76e9548ba73784c00595b51157efc8">00156</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#aaa76e9548ba73784c00595b51157efc8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#aaa76e9548ba73784c00595b51157efc8">setMCRelaxAll</a></span><span class="c0">(</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) {</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a9e6b9440bd37e9b6d6dfb037f30f44d5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a9e6b9440bd37e9b6d6dfb037f30f44d5">MCRelaxAll</a></span><span class="c0">&nbsp;= Value; }<br>00157 <br>00158 </span><span class="c0 c6">&nbsp;/// hasMCSaveTempLabels - Check whether temporary labels will be preserved</span><span class="c0"><br>00159 </span><span class="c0 c6">&nbsp;/// (i.e., not treated as temporary).</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ad2f955417702bb4ce79af15f6e11bb25">00160</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ad2f955417702bb4ce79af15f6e11bb25">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ad2f955417702bb4ce79af15f6e11bb25">hasMCSaveTempLabels</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#abe471e25fde7992932b212470d53eaf4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#abe471e25fde7992932b212470d53eaf4">MCSaveTempLabels</a></span><span class="c0">; }<br>00161 <br>00162 </span><span class="c0 c6">&nbsp;/// setMCSaveTempLabels - Set whether temporary labels will be preserved</span><span class="c0"><br>00163 </span><span class="c0 c6">&nbsp;/// (i.e., not treated as temporary).</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a9d7016c39ba933d0b8e0a3084725682b">00164</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a9d7016c39ba933d0b8e0a3084725682b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a9d7016c39ba933d0b8e0a3084725682b">setMCSaveTempLabels</a></span><span class="c0">(</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) {</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#abe471e25fde7992932b212470d53eaf4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#abe471e25fde7992932b212470d53eaf4">MCSaveTempLabels</a></span><span class="c0">&nbsp;= Value; }<br>00165 <br>00166 </span><span class="c0 c6">&nbsp;/// hasMCNoExecStack - Check whether an executable stack is not needed.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ab88a02d0323d165a3577883506325990">00167</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ab88a02d0323d165a3577883506325990">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ab88a02d0323d165a3577883506325990">hasMCNoExecStack</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a92793d51be615c4e468140c8554bda8b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a92793d51be615c4e468140c8554bda8b">MCNoExecStack</a></span><span class="c0">; }<br>00168 <br>00169 </span><span class="c0 c6">&nbsp;/// setMCNoExecStack - Set whether an executabel stack is not needed.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ab879ba17426538d3893c03e47ae0dbda">00170</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ab879ba17426538d3893c03e47ae0dbda">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ab879ba17426538d3893c03e47ae0dbda">setMCNoExecStack</a></span><span class="c0">(</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) {</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a92793d51be615c4e468140c8554bda8b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a92793d51be615c4e468140c8554bda8b">MCNoExecStack</a></span><span class="c0">&nbsp;= Value; }<br>00171 <br>00172 </span><span class="c0 c6">&nbsp;/// hasMCUseLoc - Check whether we should use dwarf's .loc directive.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#aa9dde08e992d2b4229e8b0b83009047f">00173</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#aa9dde08e992d2b4229e8b0b83009047f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#aa9dde08e992d2b4229e8b0b83009047f">hasMCUseLoc</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a7945a4e98283410fc16b5cc0ed5b1755">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a7945a4e98283410fc16b5cc0ed5b1755">MCUseLoc</a></span><span class="c0">; }</span></p><p class="c17"><span class="c0">….....................................</span></p><p class="c17"><span class="c0">00244 </span><span class="c0 c6">&nbsp;/// addPassesToEmitFile - Add passes to the specified pass manager to get the</span><span class="c0"><br>00245 </span><span class="c0 c6">&nbsp;/// specified file emitted. &nbsp;Typically this will involve several steps of code</span><span class="c0"><br>00246 </span><span class="c0 c6">&nbsp;/// generation. &nbsp;This method should return true if emission of this file type</span><span class="c0"><br>00247 </span><span class="c0 c6">&nbsp;/// is not supported, or false on success.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ab45a2a7f80002e570f1e17c1da66572e">00248</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ab45a2a7f80002e570f1e17c1da66572e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ab45a2a7f80002e570f1e17c1da66572e">addPassesToEmitFile</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PassManagerBase.html">PassManagerBase</a></span><span class="c0">&nbsp;&amp;,<br>00249 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1formatted__raw__ostream.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1formatted__raw__ostream.html">formatted_raw_ostream</a></span><span class="c0">&nbsp;&amp;,<br>00250 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a07148fff055e4a272c35d0dadd78fa12">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a07148fff055e4a272c35d0dadd78fa12">CodeGenFileType</a></span><span class="c0">,<br>00251 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;</span><span class="c0 c6">/*DisableVerify*/</span><span class="c0">&nbsp;= </span><span class="c0 c9">true</span><span class="c0">,<br>00252 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af58600f38ddfaf598037309c188dd773">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af58600f38ddfaf598037309c188dd773">AnalysisID</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/CommandFlags_8h.html#a65e262ca828cd0fca5c6b2f0b5576d8c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/CommandFlags_8h.html#a65e262ca828cd0fca5c6b2f0b5576d8c">StartAfter</a></span><span class="c0">&nbsp;= 0,<br>00253 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af58600f38ddfaf598037309c188dd773">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af58600f38ddfaf598037309c188dd773">AnalysisID</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/CommandFlags_8h.html#a2cfb36dc3f6bcccf0051527611711ea1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/CommandFlags_8h.html#a2cfb36dc3f6bcccf0051527611711ea1">StopAfter</a></span><span class="c0">&nbsp;= 0) {<br>00254 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00255 &nbsp; }<br>00256 <br>00257 </span><span class="c0 c6">&nbsp;/// addPassesToEmitMachineCode - Add passes to the specified pass manager to</span><span class="c0"><br>00258 </span><span class="c0 c6">&nbsp;/// get machine code emitted. &nbsp;This uses a JITCodeEmitter object to handle</span><span class="c0"><br>00259 </span><span class="c0 c6">&nbsp;/// actually outputting the machine code and resolving things like the address</span><span class="c0"><br>00260 </span><span class="c0 c6">&nbsp;/// of functions. &nbsp;This method returns true if machine code emission is</span><span class="c0"><br>00261 </span><span class="c0 c6">&nbsp;/// not supported.</span><span class="c0"><br>00262 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#af617305dc1ac6e8f9bdf8cc36ddbb213">00263</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#af617305dc1ac6e8f9bdf8cc36ddbb213">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#af617305dc1ac6e8f9bdf8cc36ddbb213">addPassesToEmitMachineCode</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PassManagerBase.html">PassManagerBase</a></span><span class="c0">&nbsp;&amp;,<br>00264 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1JITCodeEmitter.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1JITCodeEmitter.html">JITCodeEmitter</a></span><span class="c0">&nbsp;&amp;,<br>00265 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;</span><span class="c0 c6">/*DisableVerify*/</span><span class="c0">&nbsp;= </span><span class="c0 c9">true</span><span class="c0">) {<br>00266 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00267 &nbsp; }</span></p><p class="c17"><span class="c0">…...............................</span></p><p class="c17 c35"><span class="c11 c51"></span></p><p class="c17"><span class="c11 c51">From the above definition we can see the </span><span class="c4 c11 c51"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c11 c51">&nbsp;class has the previously mentioned </span><span class="c11 c51">&nbsp;</span><span class="c10">get**Info </span><span class="c11 c16">virtual methods, some MC status set/get methods and a bunch of addPassesToEmit** methods. &nbsp;In terms of its non-function members, we note that it has a </span><span class="c0">&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#adde45f08eafa48f29b1b6d9f98a38814">TheTarget</a></span><span class="c0">&nbsp;member of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span class="c0">&nbsp;class</span><span class="c0">&nbsp;(the line 00067). Further trace into the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span class="c0">&nbsp;class and you can find it is defined in the </span><span>llvm-3.1.src\include\llvm\Support\TargetRegistry.h file. &nbsp;A code snap from it:</span></p><p class="c17"><span class="c0">00060 </span><span class="c0 c6">&nbsp;/// Target - Wrapper for Target specific information.</span><span class="c0"><br>00061 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00062 </span><span class="c0 c6">&nbsp;/// For registration purposes, this is a POD type so that targets can be</span><span class="c0"><br>00063 </span><span class="c0 c6">&nbsp;/// registered without the use of static constructors.</span><span class="c0"><br>00064 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00065 </span><span class="c0 c6">&nbsp;/// Targets should implement a single global instance of this class (which</span><span class="c0"><br>00066 </span><span class="c0 c6">&nbsp;/// will be zero initialized), and pass that instance to the TargetRegistry as</span><span class="c0"><br>00067 </span><span class="c0 c6">&nbsp;/// part of their initialization.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">00068</a></span><span class="c0">&nbsp; </span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span class="c0">&nbsp;{<br>00069 &nbsp; </span><span class="c0 c9">public</span><span class="c0">:</span></p><p class="c17"><span class="c5">….....................................................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#ade0dbad5c7b9d3128679ebaceb9be297">00080</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">MCInstrInfo</a></span><span class="c0">&nbsp;*(*MCInstrInfoCtorFnTy)(void);<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#ae0d21bea36cd7ec48c6599f4b08f68e0">00081</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrAnalysis.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrAnalysis.html">MCInstrAnalysis</a></span><span class="c0">&nbsp;*(*MCInstrAnalysisCtorFnTy)(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">MCInstrInfo</a></span><span class="c0">*Info);<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#aba1c5af11c5bf52d3d2b24a9965aac24">00082</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo.html">MCRegisterInfo</a></span><span class="c0">&nbsp;*(*MCRegInfoCtorFnTy)(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;TT);<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#a3086a75d85cdb1a9f0a7517a0e8bd917">00083</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSubtargetInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSubtargetInfo.html">MCSubtargetInfo</a></span><span class="c0">&nbsp;*(*MCSubtargetInfoCtorFnTy)(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;TT,<br>00084 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c4 c62 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;CPU,<br>00085 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;Features);<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#a458fda867cddd2ea5bde1192110e14ed">00086</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">&nbsp;*(*TargetMachineCtorTy)(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span class="c0">&nbsp;&amp;T,<br>00087 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;TT,<br>00088 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;CPU,<br>00089 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;Features,<br>00090 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetOptions.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetOptions.html">TargetOptions</a></span><span class="c0">&nbsp;&amp;Options,<br>00091 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568">Reloc::Model</a></span><span class="c0">&nbsp;RM,<br>00092 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8df">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8df">CodeModel::Model</a></span><span class="c0">&nbsp;CM,<br>00093 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a></span><span class="c0">&nbsp;OL);<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#ab6c9ef5e2216016f40e97e9099b4ed49">00094</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmPrinter.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmPrinter.html">AsmPrinter</a></span><span class="c0">&nbsp;*(*AsmPrinterCtorTy)(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">&nbsp;&amp;TM,<br>00095 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c0">&nbsp;&amp;Streamer);<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#a4fdf118427fed39e45978806db913178">00096</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">MCAsmBackend</a></span><span class="c0">&nbsp;*(*MCAsmBackendCtorTy)(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span class="c0">&nbsp;&amp;T,<br>00097 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;TT,<br>00098 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;CPU);<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#ab96bc1df9b29c0290d5a75b54375640a">00099</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCTargetAsmLexer.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCTargetAsmLexer.html">MCTargetAsmLexer</a></span><span class="c0">&nbsp;*(*MCAsmLexerCtorTy)(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span class="c0">&nbsp;&amp;T,<br>00100 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo.html">MCRegisterInfo</a></span><span class="c0">&nbsp;&amp;MRI,<br>00101 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">MCAsmInfo</a></span><span class="c0">&nbsp;&amp;MAI);</span></p><p class="c20"><span class="c5">…....................................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#ae5ba744c825c4c8fce4d10a1d95972cd">00124</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c0">&nbsp;*(*AsmStreamerCtorTy)(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">MCContext</a></span><span class="c0">&nbsp;&amp;Ctx,<br>00125 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1formatted__raw__ostream.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1formatted__raw__ostream.html">formatted_raw_ostream</a></span><span class="c0">&nbsp;&amp;OS,<br>00126 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;isVerboseAsm,<br>00127 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;useLoc,<br>00128 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;useCFI,<br>00129 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;useDwarfDirectory,<br>00130 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html">MCInstPrinter</a></span><span class="c0">&nbsp;*InstPrint,<br>00131 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html">MCCodeEmitter</a></span><span class="c0">&nbsp;*CE,<br>00132 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">MCAsmBackend</a></span><span class="c0">&nbsp;*TAB,<br>00133 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;ShowInst);</span></p><p class="c20"><span class="c5">…...................................</span></p><p class="c17"><span class="c0">00138 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span class="c0">&nbsp;*Next;<br>00139 <br>00140 </span><span class="c0 c6">&nbsp; &nbsp;/// TripleMatchQualityFn - The target function for rating the match quality</span><span class="c0"><br>00141 </span><span class="c0 c6">&nbsp; &nbsp;/// of a triple.</span><span class="c0"><br>00142 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#ae42d15290ee5f71545da2a3b064009b7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#ae42d15290ee5f71545da2a3b064009b7">TripleMatchQualityFnTy</a></span><span class="c0">&nbsp;TripleMatchQualityFn;<br>00143 <br>00144 </span><span class="c0 c6">&nbsp; &nbsp;/// Name - The target name.</span><span class="c0"><br>00145 &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a></span><span class="c0">;</span></p><p class="c20"><span class="c5">….......................................</span></p><p class="c17"><span class="c0">00179 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#a458fda867cddd2ea5bde1192110e14ed">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#a458fda867cddd2ea5bde1192110e14ed">TargetMachineCtorTy</a></span><span class="c0">&nbsp;TargetMachineCtorFn;<br>00180 <br>00181 </span><span class="c0 c6">&nbsp; &nbsp;/// MCAsmBackendCtorFn - Construction function for this target's</span><span class="c0"><br>00182 </span><span class="c0 c6">&nbsp; &nbsp;/// MCAsmBackend, if registered.</span><span class="c0"><br>00183 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#a4fdf118427fed39e45978806db913178">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#a4fdf118427fed39e45978806db913178">MCAsmBackendCtorTy</a></span><span class="c0">&nbsp;MCAsmBackendCtorFn;<br>00184 <br>00185 </span><span class="c0 c6">&nbsp; &nbsp;/// MCAsmLexerCtorFn - Construction function for this target's</span><span class="c0"><br>00186 </span><span class="c0 c6">&nbsp; &nbsp;/// MCTargetAsmLexer, if registered.</span><span class="c0"><br>00187 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#ab96bc1df9b29c0290d5a75b54375640a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#ab96bc1df9b29c0290d5a75b54375640a">MCAsmLexerCtorTy</a></span><span class="c0">&nbsp;MCAsmLexerCtorFn;</span></p><p class="c20"><span class="c5">….....................................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#a84acd4d709ff94b21d4809e964b797c5">00343</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#a84acd4d709ff94b21d4809e964b797c5">createTargetMachine</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Triple.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Triple.html">Triple</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;CPU,<br>00344 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;Features, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetOptions.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetOptions.html">TargetOptions</a></span><span class="c0">&nbsp;&amp;Options,<br>00345 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568">Reloc::Model</a></span><span class="c0">&nbsp;RM =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568a6f9fa4f118519f6df6435bd13317466e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568a6f9fa4f118519f6df6435bd13317466e">Reloc::Default</a></span><span class="c0">,<br>00346 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8df">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8df">CodeModel::Model</a></span><span class="c0">&nbsp;CM =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfa927ebb5d8473307dd3654682de8f46eb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8dfa927ebb5d8473307dd3654682de8f46eb">CodeModel::Default</a></span><span class="c0">,<br>00347 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a></span><span class="c0">&nbsp;OL =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4a3393aeca011bfa5bdd6a8e64edd7f565">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4a3393aeca011bfa5bdd6a8e64edd7f565">CodeGenOpt::Default</a></span><span class="c0">)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00348 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!TargetMachineCtorFn)<br>00349 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;0;<br>00350 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;TargetMachineCtorFn(*</span><span class="c0 c9">this</span><span class="c0">, Triple, CPU, Features, Options,<br>00351 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RM, CM, OL);<br>00352 &nbsp; &nbsp; }</span></p><p class="c20"><span class="c5">….............................................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetRegistry.html#aa7abb11d1faa188e94cbe7b8aff7ca6c">00658</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetRegistry.html#aa7abb11d1faa188e94cbe7b8aff7ca6c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetRegistry.html#aa7abb11d1faa188e94cbe7b8aff7ca6c">RegisterTargetMachine</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span class="c0">&nbsp;&amp;T,<br>00659 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#a458fda867cddd2ea5bde1192110e14ed">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#a458fda867cddd2ea5bde1192110e14ed">Target::TargetMachineCtorTy</a></span><span class="c0">&nbsp;Fn) {<br>00660 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Ignore duplicate registration.</span><span class="c0"><br>00661 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!T.TargetMachineCtorFn)<br>00662 &nbsp; &nbsp; &nbsp; &nbsp; T.TargetMachineCtorFn = Fn;<br>00663 &nbsp; &nbsp; }</span></p><p class="c20"><span>shows that it is a wrapper of an actual target machine class with lots of Fn pointers (function pointers) &nbsp;pointing to methods for target creation, &nbsp;ASM printing, MC asm backend, &nbsp;MC streaming, etc. Specifically, there are two important functions: </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetRegistry.html#aa7abb11d1faa188e94cbe7b8aff7ca6c">RegisterTargetMachine</a></span><span>() and </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#a84acd4d709ff94b21d4809e964b797c5">createTargetMachine</a></span><span>() , used to register and create a target-specific machine, respectively. &nbsp;</span></p><p class="c20"><span>The </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetRegistry.html#aa7abb11d1faa188e94cbe7b8aff7ca6c">RegisterTargetMachine</a></span><span>() function just passes a function pointer (</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#a458fda867cddd2ea5bde1192110e14ed">Target::TargetMachineCtorTy</a></span><span>) argument to its </span><span class="c0">TargetMachineCtorFn member, which stores the constructor function for a target-specific TargetMachine class (e.g., X86_32TargetMachine). In the implementation file (llvm-3.1.src\lib\Target\X86\X86TargetMachine.cpp) of the X86_32TargetMachine class there are a few lines at the very beginning:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86TargetMachine_8cpp.html#a87d09ae8be923762bd09072f12661771">00025</a></span><span class="c0">&nbsp;</span><span class="c0 c9">extern</span><span class="c0">&nbsp;</span><span class="c0 c14">"C"</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86TargetMachine_8cpp.html#a87d09ae8be923762bd09072f12661771">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86TargetMachine_8cpp.html#a87d09ae8be923762bd09072f12661771">LLVMInitializeX86Target</a></span><span class="c0">() {<br>00026 &nbsp; </span><span class="c0 c6">// Register the target.</span><span class="c0"><br>00027 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1RegisterTargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1RegisterTargetMachine.html">RegisterTargetMachine&lt;X86_32TargetMachine&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af353014bfa72c4b1b8db88e18d64fa5f">TheX86_32Target</a></span><span class="c0">);<br>….//Register another target (X86_64), not relevant to this example<br>00029 }</span></p><p class="c20"><span>to register the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1RegisterTargetMachine.html">X86_32TargetMachine</a></span><span>.</span></p><p class="c20"><span>Now, whenever the function </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html#a84acd4d709ff94b21d4809e964b797c5">createTargetMachine</a></span><span>() is called on an object of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span>&nbsp;wrapper class, the function pointed by </span><span class="c0">TargetMachineCtorFn, in our example the constructor of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1RegisterTargetMachine.html">X86_32TargetMachine</a></span><span>&nbsp;class, will be invoked.</span></p><p class="c15"><span></span></p><p class="c20"><span>After discussing the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span>&nbsp;abstract class and its </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span>&nbsp;wrapper member, now let’s look at </span></p><p class="c15"><span></span></p><p class="c20"><span class="c19">Part 7.2.2 </span><span class="c19 c16">DataLayout Class</span></p><p class="c15"><span></span></p><p class="c20"><span class="c11 c16">The </span><span class="c10 c5">DataLayout</span><span class="c11 c16">&nbsp;class is the only target description class that is not extensible (you cannot derive a new class from it). </span><span class="c10 c5">DataLayout</span><span class="c11 c16">&nbsp;specifies information about how the target lays out memory for structures, the alignment requirements for various data types, the size of pointers in the target, and whether the target is little-endian or big-endian. In the beginning of Part 7.2 we know the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c11 c16">&nbsp;class defines various virtual methods named get**Info to access target-specific objects for relevant information. </span><span class="c11 c16">Similar to these methods, &nbsp;the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c11 c16">&nbsp;class also has some get** function members for retrieving other target-dependent information. One of these functions is the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">DataLayout</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a5fe259ae8c1f006ddcbca5978442f268">getDataLayout</a></span><span class="c0">() function. It is obvious that it returns a </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">DataLayout</a></span><span class="c0">&nbsp;</span><span class="c0">object. So what’s in </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">DataLayout</a></span><span>&nbsp;and how to use it?</span></p><p class="c15"><span></span></p><p class="c17"><span>The members in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">DataLayout</a></span><span><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">&nbsp;</a></span><span>class are largely related to the size (e.g., size querying functions such as </span><span class="c0">uint64_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html#a4b979cd93852fd44c48851c94ee00758">getTypeStoreSize</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">Type</a></span><span class="c0">&nbsp;*Ty), uint64_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html#ad3457bb5e8d2b4333abb0dfd34ce4f2b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html#ad3457bb5e8d2b4333abb0dfd34ce4f2b">getTypeSizeInBits</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">Type</a></span><span class="c0">* Ty) </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html#aaee0a912e1a03a81cf2e4045c77b253e">getPointerSize</a></span><span>()), alignment setting/getting functions (e.g., </span><span class="c0">setPointerAlignment(), getPointerAlignment(), </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html#af86774ca04c3dc6b52fa86cdd24aaf2d">getPointerPrefAlignment</a></span><span class="c0">() </span><span>), &nbsp;</span><span class="c0">Endianness checking/setting, etc. Note that this class is designed to be non-inheritable since it uses a non-virtual destructor:</span></p><p class="c17"><span class="c0">00180 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html#ac13b453a42da1c775de5e0f59013ce13">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html#ac13b453a42da1c775de5e0f59013ce13">~DataLayout</a></span><span class="c0">(); &nbsp;</span><span class="c0 c6">// Not virtual, do not subclass this class</span></p><p class="c17 c35"><span></span></p><p class="c17"><span>…..// maybe here I should add something about the struct layout..</span></p><p class="c17 c35"><span></span></p><p class="c17"><span>One of its constructors (there are also copy and default constructors) accepts a string and call a function </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html#ab1955291e505fe5073dcac29593dab59">init</a></span><span>() </span><span>to initialize all the size, alignment, </span><span class="c0">Endianess as well as other</span><span>&nbsp;members:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html#ab1955291e505fe5073dcac29593dab59">00155</a></span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html#ab1955291e505fe5073dcac29593dab59">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html#ab1955291e505fe5073dcac29593dab59">DataLayout::init</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;Desc) {<br>00156 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a77ed725128781fe6f335a41fcbc4b70b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a77ed725128781fe6f335a41fcbc4b70b">initializeDataLayoutPass</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a></span><span class="c0">());<br>00157 <br>00158 &nbsp; LayoutMap = 0;<br>00159 &nbsp; LittleEndian = </span><span class="c0 c9">false</span><span class="c0">;<br>00160 &nbsp; StackNaturalAlign = 0;<br>00161 <br>00162 &nbsp; </span><span class="c0 c6">// Default alignments</span><span class="c0"><br>00163 &nbsp; setAlignment(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af4d28164715255c7fe0cd96322745525aa3350ab6469bfd229c75720de2c850fe">INTEGER_ALIGN</a></span><span class="c0">, &nbsp; 1, &nbsp;1, 1); &nbsp; </span><span class="c0 c6">// i1</span><span class="c0"><br>00164 &nbsp; setAlignment(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af4d28164715255c7fe0cd96322745525aa3350ab6469bfd229c75720de2c850fe">INTEGER_ALIGN</a></span><span class="c0">, &nbsp; 1, &nbsp;1, 8); &nbsp; </span><span class="c0 c6">// i8</span><span class="c0"><br>00165 &nbsp; setAlignment(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af4d28164715255c7fe0cd96322745525aa3350ab6469bfd229c75720de2c850fe">INTEGER_ALIGN</a></span><span class="c0">, &nbsp; 2, &nbsp;2, 16); &nbsp;</span><span class="c0 c6">// i16</span><span class="c0"><br>00166 &nbsp; setAlignment(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af4d28164715255c7fe0cd96322745525aa3350ab6469bfd229c75720de2c850fe">INTEGER_ALIGN</a></span><span class="c0">, &nbsp; 4, &nbsp;4, 32); &nbsp;</span><span class="c0 c6">// i32</span><span class="c0"><br>00167 &nbsp; setAlignment(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af4d28164715255c7fe0cd96322745525aa3350ab6469bfd229c75720de2c850fe">INTEGER_ALIGN</a></span><span class="c0">, &nbsp; 4, &nbsp;8, 64); &nbsp;</span><span class="c0 c6">// i64</span><span class="c0"><br>00168 &nbsp; setAlignment(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af4d28164715255c7fe0cd96322745525a10ebae2167814fa48b573a0cb7cd9700">FLOAT_ALIGN</a></span><span class="c0">, &nbsp; &nbsp; 2, &nbsp;2, 16); &nbsp;</span><span class="c0 c6">// half</span><span class="c0"><br>00169 &nbsp; setAlignment(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af4d28164715255c7fe0cd96322745525a10ebae2167814fa48b573a0cb7cd9700">FLOAT_ALIGN</a></span><span class="c0">, &nbsp; &nbsp; 4, &nbsp;4, 32); &nbsp;</span><span class="c0 c6">// float</span><span class="c0"><br>00170 &nbsp; setAlignment(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af4d28164715255c7fe0cd96322745525a10ebae2167814fa48b573a0cb7cd9700">FLOAT_ALIGN</a></span><span class="c0">, &nbsp; &nbsp; 8, &nbsp;8, 64); &nbsp;</span><span class="c0 c6">// double</span><span class="c0"><br>00171 &nbsp; setAlignment(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af4d28164715255c7fe0cd96322745525a10ebae2167814fa48b573a0cb7cd9700">FLOAT_ALIGN</a></span><span class="c0">, &nbsp; &nbsp;16, 16, 128); </span><span class="c0 c6">// ppcf128, quad, ...</span><span class="c0"><br>00172 &nbsp; setAlignment(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af4d28164715255c7fe0cd96322745525a431322ee70d72b80bb88755593e7b811">VECTOR_ALIGN</a></span><span class="c0">, &nbsp; &nbsp;8, &nbsp;8, 64); &nbsp;</span><span class="c0 c6">// v2i32, v1i64, ...</span><span class="c0"><br>00173 &nbsp; setAlignment(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af4d28164715255c7fe0cd96322745525a431322ee70d72b80bb88755593e7b811">VECTOR_ALIGN</a></span><span class="c0">, &nbsp; 16, 16, 128); </span><span class="c0 c6">// v16i8, v8i16, v4i32, ...</span><span class="c0"><br>00174 &nbsp; setAlignment(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af4d28164715255c7fe0cd96322745525ac9479f48500c93e97046cb777f657f74">AGGREGATE_ALIGN</a></span><span class="c0">, 0, &nbsp;8, &nbsp;0); &nbsp;</span><span class="c0 c6">// struct</span><span class="c0"><br>00175 &nbsp; setPointerAlignment(0, 8, 8, 8);<br>00176 <br>00177 &nbsp; parseSpecifier(Desc);<br>00178 }</span></p><p class="c17"><span>&nbsp;</span></p><p class="c20"><span>Here are some notes from </span><span class="c37"><a class="c1" href="http://llvm.org/docs/WritingAnLLVMBackend.html">http://llvm.org/docs/WritingAnLLVMBackend.html</a></span><span>&nbsp;related to how to use and initialize a </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">DataLayout</a></span><span><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">&nbsp;</a></span><span>object in your specific target implementation:</span></p><p class="c15"><span></span></p><p class="c20"><span class="c11 c31">In addition, the </span><span class="c34 c5 c31">XXXTargetMachine</span><span class="c11 c31">&nbsp;constructor should specify a </span><span class="c34 c5 c31">TargetDescription</span><span class="c11 c31">&nbsp;string that determines the data layout for the target machine, including characteristics such as pointer size, alignment, and endianness. For example, the constructor for</span><span class="c34 c5 c31">SparcTargetMachine</span><span class="c11 c31">&nbsp;contains the following:</span></p><p class="c20"><span class="c34 c5 c31">SparcTargetMachine</span><span class="c34 c5 c27 c31">::</span><span class="c34 c5 c31">SparcTargetMachine(</span><span class="c34 c26 c5 c31 c25">const</span><span class="c34 c5 c31">&nbsp;Module </span><span class="c34 c5 c27 c31">&amp;</span><span class="c34 c5 c31">M, </span><span class="c34 c26 c5 c31 c25">const</span><span class="c34 c5 c31">&nbsp;std</span><span class="c34 c5 c27 c31">::</span><span class="c34 c5 c31">string </span><span class="c34 c5 c27 c31">&amp;</span><span class="c34 c5 c31">FS)<br> &nbsp;</span><span class="c34 c5 c27 c31">:</span><span class="c34 c5 c31">&nbsp;DataLayout(</span><span class="c34 c5 c31 c68">"E-p:32:32-f128:128:128"</span><span class="c34 c5 c31">),<br> &nbsp; &nbsp;Subtarget(M, FS), InstrInfo(Subtarget),<br> &nbsp; &nbsp;FrameInfo(TargetFrameInfo</span><span class="c34 c5 c27 c31">::</span><span class="c34 c5 c31">StackGrowsDown, </span><span class="c34 c5 c31 c39">8</span><span class="c34 c5 c31">, </span><span class="c34 c5 c31 c39">0</span><span class="c34 c5 c31">) {<br>}<br></span></p><p class="c20"><span class="c11 c31">Hyphens separate portions of the </span><span class="c34 c5 c31">TargetDescription</span><span class="c11 c31">&nbsp;string.</span></p><ol class="c55" start="1"><li class="c32 c20"><span class="c11 c31">An upper-case “</span><span class="c34 c5 c31">E</span><span class="c11 c31">” in the string indicates a big-endian target data model. A lower-case “</span><span class="c34 c5 c31">e</span><span class="c11 c31">” indicates little-endian.</span></li><li class="c32 c20"><span class="c11 c31">“</span><span class="c34 c5 c31">p:</span><span class="c11 c31">” is followed by pointer information: size, ABI alignment, and preferred alignment. If only two figures follow “</span><span class="c34 c5 c31">p:</span><span class="c11 c31">”, then the first value is pointer size, and the second value is both ABI and preferred alignment.</span></li><li class="c32 c20"><span class="c11 c31">Then a letter for numeric type alignment: “</span><span class="c34 c5 c31">i</span><span class="c11 c31">”, “</span><span class="c34 c5 c31">f</span><span class="c11 c31">”, “</span><span class="c34 c5 c31">v</span><span class="c11 c31">”, or “</span><span class="c34 c5 c31">a</span><span class="c11 c31">” (corresponding to integer, floating point, vector, or aggregate). “</span><span class="c34 c5 c31">i</span><span class="c11 c31">”, “</span><span class="c34 c5 c31">v</span><span class="c11 c31">”, or “</span><span class="c34 c5 c31">a</span><span class="c11 c31">” are followed by ABI alignment and preferred alignment. “</span><span class="c34 c5 c31">f</span><span class="c11 c31">” is followed by three values: the first indicates the size of a long double, then ABI alignment, and then ABI preferred alignment.</span></li></ol><p class="c15"><span></span></p><p class="c20"><span>Note that the in the </span><span class="c34 c5 c31">DataLayout(</span><span class="c34 c5 c31 c68">"E-p:32:32-f128:128:128"</span><span class="c34 c5 c31">) in the SparcTargetMachine initialization list is just one of many examples. &nbsp;</span><span>Another example of data layout initialization is demonstrated in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86__64TargetMachine.html#acb0954fcdb6b3b8aeda6a83585a657f0">X86_64TargetMachine</a></span><span>&nbsp;target:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86__64TargetMachine.html#acb0954fcdb6b3b8aeda6a83585a657f0">00057</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86__64TargetMachine.html#acb0954fcdb6b3b8aeda6a83585a657f0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86__64TargetMachine.html#acb0954fcdb6b3b8aeda6a83585a657f0">X86_64TargetMachine::X86_64TargetMachine</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span class="c0">&nbsp;&amp;T,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;TT,<br>00058 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;CPU,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1X86II.html#ac6a15d15c3ce9e314b4e6cf2699f6708a50aa2061845b3ff4e6e2242d762c6a80">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1X86II.html#ac6a15d15c3ce9e314b4e6cf2699f6708a50aa2061845b3ff4e6e2242d762c6a80">FS</a></span><span class="c0">,<br>00059 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetOptions.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetOptions.html">TargetOptions</a></span><span class="c0">&nbsp;&amp;Options,<br>00060 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568">Reloc::Model</a></span><span class="c0">&nbsp;RM,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8df">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeModel.html#afc59396a9e5809fc92938e203d91a8df">CodeModel::Model</a></span><span class="c0">&nbsp;CM,<br>00061 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a></span><span class="c0">&nbsp;OL)<br>00062 &nbsp; :</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86TargetMachine.html">X86TargetMachine</a></span><span class="c0">(T, TT, CPU, FS, Options, RM, CM, OL,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/BasicAliasAnalysis_8cpp.html#a80603f23207dd836075c078e6264204a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/BasicAliasAnalysis_8cpp.html#a80603f23207dd836075c078e6264204a">true</a></span><span class="c0">),<br>00063 &nbsp; &nbsp; DL(</span><span class="c0 c14">"e-p:64:64-s:64-f64:64:64-i64:64:64-f80:128:128-f128:128:128-"</span><span class="c0"><br>00064 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"n8:16:32:64-S128"</span><span class="c0">),<br>00065 &nbsp; &nbsp; InstrInfo(*this),<br>00066 &nbsp; &nbsp; TSInfo(*this),<br>00067 &nbsp; &nbsp; TLInfo(*this),<br>00068 &nbsp; &nbsp; JITInfo(*this),<br>00069 &nbsp; &nbsp; STTI(&amp;TLInfo), VTTI(&amp;TLInfo){<br>00070 }</span></p><p class="c20"><span>where DL is a member in </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86__64TargetMachine.html#acb0954fcdb6b3b8aeda6a83585a657f0">X86_64TargetMachine</a></span><span>&nbsp;with the type of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">DataLayout</a></span><span>. &nbsp;Here it should emphasized that only the final specific target machine requires a </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">DataLayout</a></span><span>&nbsp;member. In the above example, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86__64TargetMachine.html#acb0954fcdb6b3b8aeda6a83585a657f0">X86_64TargetMachine</a></span><span>&nbsp;inherits the </span><span class="c0 c4 c25"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86TargetMachine.html">X86TargetMachine</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86TargetMachine.html">&nbsp;class, which does not have a </a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">DataLayout</a></span><span>&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86TargetMachine.html">&nbsp;member. </a></span></p><p class="c15"><span class="c19"></span></p><p class="c20"><span>In terms of the inheritance hierarchy of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">DataLayout</a></span><span>&nbsp;</span><span>class, please refer to the following figure:</span></p><p class="c15"><span></span></p><p class="c20"><img height="263" src="./Notes on LLVM 3 (Target Independent Code Generator)_files/image11.png" width="617"></p><p class="c15"><span class="c19"></span></p><p class="c20"><span>From the above illustration we can conclude that LLVM has a very general definition of the concept “Pass”. Basically every operation that aims to extract/track certain information at a particular granularity (e.g., modules, functions, basic blocks, loops, etc.) is a “Pass”. &nbsp;In the case of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">DataLayout</a></span><span>&nbsp;the pass refers to the globally (i.e., at the module level) managed data layout information for a concrete target machine. </span></p><p class="c15"><span class="c19"></span></p><p class="c20"><span class="c19">Part 7.2</span><span class="c19">.3</span><span class="c19 c16">&nbsp;TargetLowering</span><span class="c19">&nbsp;</span><span class="c19 c16">Class </span></p><p class="c15"><span class="c19 c16"></span></p><p class="c17"><span class="c16">To understand what </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c16">&nbsp;</span><span class="c16">class does we first need to know the SelectionDAG. The following notes are selected from the LLVM documentation for a description for the SelectionDAG. Following the description of SelectionDAG is an LLVM official explanation of SelectionDAG legalization, which I think is highly related to the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c16">&nbsp;</span><span class="c16">class. Thus I put them together here before jumping into the code of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c16">&nbsp;class.</span></p><p class="c15"><span class="c16"></span></p><p class="c20"><span class="c11 c16">The SelectionDAG provides an abstraction for code representation in a way that is amenable to instruction selection using automatic techniques (e.g. dynamic-programming based optimal pattern matching selectors). It is also well-suited to other phases of code generation; in particular, instruction scheduling (SelectionDAG’s are very close to scheduling DAGs post-selection). Additionally, the SelectionDAG provides a host representation where a large variety of very-low-level (but target-independent) </span><span class="c29 c11 c16"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#optimizations">optimizations</a></span><span class="c11 c16">&nbsp;may be performed; ones which require extensive information about the instructions efficiently supported by the target.</span></p><p class="c20"><span class="c11 c16">The SelectionDAG is a Directed-Acyclic-Graph whose nodes are instances of the </span><span class="c10 c5">SDNode</span><span class="c11 c16">&nbsp;class. The primary payload of the </span><span class="c10 c5">SDNode</span><span class="c11 c16">&nbsp;is its operation code (Opcode) that indicates what operation the node performs and the operands to the operation. The various operation node types are described at the top of the </span><span class="c10 c5">include/llvm/CodeGen/SelectionDAGNodes.h</span><span class="c11 c16">&nbsp;file.</span></p><p class="c20"><span class="c16">…..................</span></p><p class="c20"><span class="c11 c16">SelectionDAG-based instruction selection consists of the following steps:</span></p><ol class="c60" start="1"><li class="c32 c20"><span class="c29 c11 c16"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#build-initial-dag">Build initial DAG</a></span><span class="c11 c16">&nbsp;— This stage performs a simple translation from the input LLVM code to an illegal SelectionDAG.</span></li><li class="c32 c20"><span class="c29 c11 c16"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#optimize-selectiondag">Optimize SelectionDAG</a></span><span class="c11 c16">&nbsp;— This stage performs simple optimizations on the SelectionDAG to simplify it, and recognize meta instructions (like rotates and </span><span class="c10 c5">div</span><span class="c11 c16">/</span><span class="c10 c5">rem</span><span class="c11 c16">&nbsp;pairs) for targets that support these meta operations. This makes the resultant code more efficient and the </span><span class="c29 c11 c16"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#select-instructions-from-dag">select instructions from DAG</a></span><span class="c11 c16">&nbsp;phase (below) simpler.</span></li><li class="c32 c20"><span class="c29 c11 c16"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#legalize-selectiondag-types">Legalize SelectionDAG Types</a></span><span class="c11 c16">&nbsp;— This stage transforms SelectionDAG nodes to eliminate any types that are unsupported on the target.</span></li><li class="c32 c20"><span class="c29 c11 c16"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#optimize-selectiondag">Optimize SelectionDAG</a></span><span class="c11 c16">&nbsp;— The SelectionDAG optimizer is run to clean up redundancies exposed by type legalization.</span></li><li class="c32 c20"><span class="c29 c11 c16"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#legalize-selectiondag-ops">Legalize SelectionDAG Ops</a></span><span class="c11 c16">&nbsp;— This stage transforms SelectionDAG nodes to eliminate any operations that are unsupported on the target.</span></li><li class="c32 c20"><span class="c29 c11 c16"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#optimize-selectiondag">Optimize SelectionDAG</a></span><span class="c11 c16">&nbsp;— The SelectionDAG optimizer is run to eliminate inefficiencies introduced by operation legalization.</span></li><li class="c32 c20"><span class="c29 c11 c16"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#select-instructions-from-dag">Select instructions from DAG</a></span><span class="c11 c16">&nbsp;— Finally, the target instruction selector matches the DAG operations to target instructions. This process translates the target-independent input DAG into another DAG of target instructions.</span></li><li class="c32 c20"><span class="c29 c11 c16"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#selectiondag-scheduling-and-formation">SelectionDAG Scheduling and Formation</a></span><span class="c11 c16">&nbsp;— The last phase assigns a linear order to the instructions in the target-instruction DAG and emits them into the MachineFunction being compiled. This step uses traditional prepass scheduling techniques.</span></li></ol><p class="c15"><span class="c19 c16"></span></p><p class="c17"><span class="c11 c16">The initial SelectionDAG is naïvely peephole expanded from the LLVM input by the </span><span class="c10 c5">SelectionDAGBuilder</span><span class="c11 c16">&nbsp;class, which has the following members:</span></p><p class="c17 c35"><span class="c11 c16"></span></p><a href="https://people.cs.pitt.edu/~yongli/notes/llvm3/LLVM3.html#" name="4fdb6dc33f264050cde0492f8d6a149b39be07cf"></a><a href="https://people.cs.pitt.edu/~yongli/notes/llvm3/LLVM3.html#" name="0"></a><table cellpadding="0" cellspacing="0" class="c53"><tbody><tr><td class="c56 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector</a></span><span class="c5 c11 c23">&lt; </span><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c5 c11 c23">, 8 &gt; </span></p></td><td class="c33 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a9a1381eb77fac8d57f54f7bf25919a4e">PendingLoads</a></span></p></td></tr><tr><td class="c56 c23"><p class="c17"><span class="c5 c11 c23">const </span><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c5 c11 c23">&nbsp;&amp; </span></p></td><td class="c33 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a3293dad09e732134cb72b1cec185de56">TM</a></span></p></td></tr><tr><td class="c56 c23"><p class="c17"><span class="c5 c11 c23">const </span><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c5 c11 c23">&nbsp;&amp; </span></p></td><td class="c33 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ab130a077faf579a30e501813b4e0aec8">TLI</a></span></p></td></tr><tr><td class="c56 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c5 c11 c23">&nbsp;&amp; </span></p></td><td class="c33 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ad997f08bfd4680a697130632badf740e">DAG</a></span></p></td></tr><tr><td class="c56 c23"><p class="c17"><span class="c5 c11 c23">const </span><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">DataLayout</a></span><span class="c5 c11 c23">&nbsp;* </span></p></td><td class="c33 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a11d1a0f81bc2f93dd8a90755fcd3f9d0">TD</a></span></p></td></tr><tr><td class="c56 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">AliasAnalysis</a></span><span class="c5 c11 c23">&nbsp;* </span></p></td><td class="c33 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a804dfac6a2f1ca449b4a0282cb123d77">AA</a></span></p></td></tr><tr><td class="c56 c23"><p class="c17"><span class="c5 c11 c23">const </span><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a></span><span class="c5 c11 c23">&nbsp;* </span></p></td><td class="c33 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ae283c81e2135fac41f1896dd39c4cc40">LibInfo</a></span></p></td></tr><tr><td class="c56 c23"><p class="c17"><span class="c5 c11 c23">std::vector&lt; CaseBlock &gt; </span></p></td><td class="c33 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a2399a2e82821e050e9a00c8ad33e2aae">SwitchCases</a></span></p></td></tr><tr><td class="c56 c23"><p class="c17"><span class="c5 c11 c23">std::vector&lt; JumpTableBlock &gt; </span></p></td><td class="c33 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a9e9f0e8bba0c07aa975df97765117fa5">JTCases</a></span></p></td></tr><tr><td class="c56 c23"><p class="c17"><span class="c5 c11 c23">std::vector&lt; BitTestBlock &gt; </span></p></td><td class="c33 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span></p></td></tr><tr><td class="c56 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap</a></span><span class="c5 c11 c23">&lt; const </span><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Constant.html">Constant</a></span><span class="c5 c11 c23">&nbsp;</span></p><p class="c17"><span class="c5 c11 c23">*, </span><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classunsigned.html">unsigned</a></span><span class="c5 c11 c23">&nbsp;&gt; </span></p></td><td class="c33 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a7bdfdf9731f7e5501dea5dd410ebf9ef">ConstantsOut</a></span></p></td></tr><tr><td class="c23 c56"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html">FunctionLoweringInfo</a></span><span class="c5 c11 c23">&nbsp;&amp; </span></p></td><td class="c33 c23"><p class="c17"><span class="c5 c11 c25 c23 c28"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ad10e64e191507974af84a4ea069a9e36">FuncInfo</a></span></p></td></tr><tr><td class="c56 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a></span><span class="c5 c11 c23">&nbsp;</span></p></td><td class="c33 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ade3ea0dcf6114d202e318151589fba38">OptLevel</a></span></p></td></tr><tr><td class="c56 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GCFunctionInfo.html">GCFunctionInfo</a></span><span class="c5 c11 c23">&nbsp;* </span></p></td><td class="c23 c33"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a9b4db8b8082660004fda0c282da0ff0a">GFI</a></span></p></td></tr><tr><td class="c54 c23"><p class="c17"><span class="c41 c5 c11 c23">&nbsp;</span></p></td><td class="c54 c23"><p class="c17"><span class="c41 c5 c11 c23">GFI - Garbage collection metadata for the function. </span></p></td></tr><tr><td class="c56 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap</a></span><span class="c5 c11 c23">&lt;</span><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c5 c11 c23">&nbsp;</span></p><p class="c17"><span class="c5 c11 c23">*, </span><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector</a></span><span class="c5 c11 c23">&lt; </span><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classunsigned.html">unsigned</a></span><span class="c5 c11 c23">, 4 &gt; &gt; </span></p></td><td class="c33 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a053b2cccf7a5a9531bb9a91a4eb78311">LPadToCallSiteMap</a></span></p></td></tr><tr><td class="c54 c23"><p class="c17"><span class="c41 c5 c11 c23">&nbsp;</span></p></td><td class="c23 c54"><p class="c17"><span class="c5 c11 c23 c41">LPadToCallSiteMap - Map a landing pad to the call site indexes. </span></p></td></tr><tr><td class="c56 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8c.html#a6156fe0b594c9754f386f6c6a30c8165">bool</a></span><span class="c5 c11 c23">&nbsp;</span></p></td><td class="c33 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a39e446f1647e793791c33d0d2412d088">HasTailCall</a></span></p></td></tr><tr><td class="c56 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LLVMContext.html">LLVMContext</a></span><span class="c5 c11 c23">&nbsp;* </span></p></td><td class="c33 c23"><p class="c17"><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ac536e4b59b1e85317cea0b32d47752ef">Context</a></span></p></td></tr></tbody></table><p class="c17 c35"><span class="c11 c16"></span></p><p class="c17"><span class="c11 c16">Among these members, the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c11 c16">&nbsp;member </span><span class="c28 c5 c11 c25 c23"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ab130a077faf579a30e501813b4e0aec8">TLI</a></span><span class="c11 c16">&nbsp;</span><span class="c11 c16">provides</span><span class="c11 c16">&nbsp;target-specific hooks to lower calls, returns, varargs and target-specific information, etc. A target implementation tells the legalizer which types are supported (and which register class to use for them) by calling the </span><span class="c10 c58">addRegisterClass</span><span class="c11 c16">&nbsp;method in its </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c11 c16">&nbsp;</span><span class="c11 c16">constructor. A target implementation tells the legalizer which operations are not supported (and which of the above three actions to take) by calling the </span><span class="c10 c58">setOperationAction</span><span class="c11 c16">&nbsp;method in its </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c11 c16">&nbsp;</span><span class="c11 c16">constructor.</span></p><p class="c20"><span class="c11 c16">Among other things, this class indicates:</span></p><ol class="c55" start="1"><li class="c32 c20"><span class="c11 c16">an initial register class to use for various </span><span class="c10 c5">ValueType</span><span class="c11 c16">s,</span></li><li class="c32 c20"><span class="c11 c16">which operations are natively supported by the target machine,</span></li><li class="c32 c20"><span class="c11 c16">the return type of </span><span class="c10 c5">setcc</span><span class="c11 c16">&nbsp;operations,</span></li><li class="c32 c20"><span class="c11 c16">the type to use for shift amounts, and</span></li><li class="c32 c20"><span class="c11 c16">various high-level characteristics, like whether it is profitable to turn division by a constant into a multiplication sequence.</span></li></ol><p class="c15"><span class="c11 c16"></span></p><h3 class="c20"><a name="h.5vg460uyakas"></a><span class="c37 c43 c11"><a class="c1" href="http://llvm.org/docs/WritingAnLLVMBackend.html#id20">The SelectionDAG Legalize</a></span></h3><p class="c15"><span class="c11 c16"></span></p><p class="c20"><span class="c11 c16">In the constructor for the </span><span class="c10 c5">XXXTargetLowering</span><span class="c11 c16">&nbsp;class, first use the </span><span class="c10 c5">addRegisterClass</span><span class="c11 c16">&nbsp;method to specify which types are supported and which register classes are associated with them. The code for the register classes are generated by TableGen from</span><span class="c10 c5">XXXRegisterInfo.td</span><span class="c11 c16">&nbsp;and placed in </span><span class="c10 c5">XXXGenRegisterInfo.h.inc</span><span class="c11 c16">. For example, the implementation of the constructor for the SparcTargetLowering class (in </span><span class="c10 c5">SparcISelLowering.cpp</span><span class="c11 c16">) starts with the following code:</span></p><p class="c20"><span class="c18 c5">addRegisterClass(MVT</span><span class="c18 c5 c27">::</span><span class="c18 c5">i32, SP</span><span class="c18 c5 c27">::</span><span class="c18 c5">IntRegsRegisterClass);<br>addRegisterClass(MVT</span><span class="c18 c5 c27">::</span><span class="c18 c5">f32, SP</span><span class="c18 c5 c27">::</span><span class="c18 c5">FPRegsRegisterClass);<br>addRegisterClass(MVT</span><span class="c18 c5 c27">::</span><span class="c18 c5">f64, SP</span><span class="c18 c5 c27">::</span><span class="c18 c5">DFPRegsRegisterClass);<br></span></p><p class="c17"><span class="c11 c16">You should examine the node types in the </span><span class="c10 c5">ISD</span><span class="c11 c16">&nbsp;namespace (</span><span class="c10 c5">include/llvm/CodeGen/SelectionDAGNodes.h</span><span class="c11 c16">) and determine which operations the target natively supports. For operations that do </span><span class="c11 c16 c25">not</span><span class="c11 c16">&nbsp;have native support, add a callback to the constructor for the</span><span class="c10 c5">XXXTargetLowering</span><span class="c11 c16">&nbsp;class, so the instruction selection process knows what to do. The </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c11 c16">&nbsp;class callback methods (declared in </span><span class="c10 c5">llvm/Target/TargetLowering.h</span><span class="c11 c16">) are:</span></p><ol class="c55" start="1"><li class="c32 c20"><span class="c10 c5">setOperationAction</span><span class="c11 c16">&nbsp;— General operation.</span></li><li class="c32 c20"><span class="c10 c5">setLoadExtAction</span><span class="c11 c16">&nbsp;— Load with extension.</span></li><li class="c32 c20"><span class="c10 c5">setTruncStoreAction</span><span class="c11 c16">&nbsp;— Truncating store.</span></li><li class="c32 c20"><span class="c10 c5">setIndexedLoadAction</span><span class="c11 c16">&nbsp;— Indexed load.</span></li><li class="c32 c20"><span class="c10 c5">setIndexedStoreAction</span><span class="c11 c16">&nbsp;— Indexed store.</span></li><li class="c32 c20"><span class="c10 c5">setConvertAction</span><span class="c11 c16">&nbsp;— Type conversion.</span></li><li class="c32 c20"><span class="c10 c5">setCondCodeAction</span><span class="c11 c16">&nbsp;— Support for a given condition code.</span></li><li class="c32 c20"><span class="c11 c16">many others....</span></li></ol><p class="c20"><span class="c11 c16">These callbacks are used to determine that an operation does or does not work with a specified type (or types). And in all cases, the third parameter is a </span><span class="c10 c5">LegalAction</span><span class="c11 c16">&nbsp;type enum value: </span><span class="c10 c5">Promote</span><span class="c11 c16">, </span><span class="c10 c5">Expand</span><span class="c11 c16">, </span><span class="c10 c5">Custom</span><span class="c11 c16">, or </span><span class="c10 c5">Legal</span><span class="c11 c16">. </span><span class="c10 c5">SparcISelLowering.cpp</span><span class="c11 c16">&nbsp;contains examples of all four </span><span class="c10 c5">LegalAction</span><span class="c11 c16">&nbsp;values. For example, the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#ae4ac865451dca0c871bed2f413a05aa2">setLoadExtAction</a></span><span class="c11 c16">() callback is defined as follows:</span></p><p class="c17"><span class="c0">01157 </span><span class="c0 c6">&nbsp;/// setLoadExtAction - Indicate that the specified load with extension does</span><span class="c0"><br>01158 </span><span class="c0 c6">&nbsp;/// not work with the specified type and indicate what to do about it.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#ae4ac865451dca0c871bed2f413a05aa2">01159</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#ae4ac865451dca0c871bed2f413a05aa2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#ae4ac865451dca0c871bed2f413a05aa2">setLoadExtAction</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;ExtType,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html">MVT</a></span><span class="c0">&nbsp;VT,<br>01160 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acb">LegalizeAction</a></span><span class="c0">&nbsp;Action) {<br>01161 &nbsp; &nbsp; assert(ExtType &lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#ad4d48171b87ca51ff54c10a436bac4d7ae5159de777d126add505573b474853a4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#ad4d48171b87ca51ff54c10a436bac4d7ae5159de777d126add505573b474853a4">ISD::LAST_LOADEXT_TYPE</a></span><span class="c0">&nbsp;&amp;&amp; VT &lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca2f78696cb9784a134baa9c3e4fc44838">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca2f78696cb9784a134baa9c3e4fc44838">MVT::LAST_VALUETYPE</a></span><span class="c0">&nbsp;&amp;&amp;<br>01162 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"Table isn't big enough!"</span><span class="c0">);<br>01163 &nbsp; &nbsp; LoadExtActions[VT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a></span><span class="c0">][ExtType] = (uint8_t)Action;<br>01164 &nbsp; }</span></p><p class="c20"><span class="c11 c16">Another example is </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a3c270244add3732b047298dbbd2886ae">setCondCodeAction</a></span><span class="c11 c16">() callback function:</span></p><p class="c17"><span class="c0">01201 </span><span class="c0 c6">&nbsp;/// setCondCodeAction - Indicate that the specified condition code is or isn't</span><span class="c0"><br>01202 </span><span class="c0 c6">&nbsp;/// supported on the target and indicate what to do about it.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a3c270244add3732b047298dbbd2886ae">01203</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a3c270244add3732b047298dbbd2886ae">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a3c270244add3732b047298dbbd2886ae">setCondCodeAction</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MBlazeCC.html#aba42d64ed60fd2a2e8045b6d7f26958d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MBlazeCC.html#aba42d64ed60fd2a2e8045b6d7f26958d">CC</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html">MVT</a></span><span class="c0">&nbsp;VT,<br>01204 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acb">LegalizeAction</a></span><span class="c0">&nbsp;Action) {<br>01205 &nbsp; &nbsp; assert(VT &lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca2f78696cb9784a134baa9c3e4fc44838">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca2f78696cb9784a134baa9c3e4fc44838">MVT::LAST_VALUETYPE</a></span><span class="c0">&nbsp;&amp;&amp;<br>01206 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">)CC &lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a370ed0e0f2bb66d17cd13f84be54e867">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a370ed0e0f2bb66d17cd13f84be54e867">array_lengthof</a></span><span class="c0">(CondCodeActions) &amp;&amp;<br>01207 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"Table isn't big enough!"</span><span class="c0">);<br>01208 </span><span class="c0 c6">&nbsp; &nbsp;/// The lower 5 bits of the SimpleTy index into Nth 2bit set from the 64bit</span><span class="c0"><br>01209 </span><span class="c0 c6">&nbsp; &nbsp;/// value and the upper 27 bits index into the second dimension of the</span><span class="c0"><br>01210 </span><span class="c0 c6">&nbsp; &nbsp;/// array to select what 64bit value to use.</span><span class="c0"><br>01211 &nbsp; &nbsp;CondCodeActions[(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classunsigned.html">unsigned</a></span><span class="c0">)CC][VT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a></span><span class="c0">&nbsp;&gt;&gt; 5]<br>01212 &nbsp; &nbsp; &nbsp; &amp;= ~(uint64_t(3UL) &nbsp;&lt;&lt; (VT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a></span><span class="c0">&nbsp;&amp; 0x1F)*2);<br>01213 &nbsp; &nbsp; CondCodeActions[(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classunsigned.html">unsigned</a></span><span class="c0">)CC][VT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a></span><span class="c0">&nbsp;&gt;&gt; 5]<br>01214 &nbsp; &nbsp; &nbsp; |= (uint64_t)Action &lt;&lt; (VT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a></span><span class="c0">&nbsp;&amp; 0x1F)*2;<br>01215 &nbsp; }</span></p><h4 class="c45 c20"><span class="c37 c48 c11 c58"><a class="c1" href="http://llvm.org/docs/WritingAnLLVMBackend.html#id21">Promote</a></span></h4><p class="c20"><span class="c11 c16">For an operation without native support for a given type, the specified type may be promoted to a larger type that is supported. For example, SPARC does not support a sign-extending load for Boolean values (</span><span class="c10 c5">i1</span><span class="c11 c16">&nbsp;type), so in </span><span class="c10 c5">SparcISelLowering.cpp</span><span class="c11 c16">&nbsp;the third parameter below, </span><span class="c10 c5">Promote</span><span class="c11 c16">, changes </span><span class="c10 c5">i1</span><span class="c11 c16">&nbsp;type values to a large type before loading.</span></p><p class="c20"><span class="c18 c5">setLoadExtAction(ISD</span><span class="c18 c5 c27">::</span><span class="c18 c5">SEXTLOAD, MVT</span><span class="c18 c5 c27">::</span><span class="c18 c5">i1, Promote);<br></span></p><p class="c20"><span class="c0">Another example in </span><span class="c0 c6">X86ISelLowering.cpp:</span></p><p class="c17"><span class="c0">00247 &nbsp; </span><span class="c0 c6">// Promote all UINT_TO_FP to larger SINT_TO_FP's, as X86 doesn't have this</span><span class="c0"><br>00248 &nbsp; </span><span class="c0 c6">// operation.</span><span class="c0"><br>00249 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aea1fb263848e2e8d2a2870ec5c5c342e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aea1fb263848e2e8d2a2870ec5c5c342e">setOperationAction</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a169032eecd015d4eeb869c457202a6c8">ISD::UINT_TO_FP</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca85440bbdbba12de574c02e515444d3f4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca85440bbdbba12de574c02e515444d3f4">MVT::i1</a></span><span class="c0">&nbsp; &nbsp;,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acbaf8cfab91a9fc402ca794d6079674ccfc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acbaf8cfab91a9fc402ca794d6079674ccfc">Promote</a></span><span class="c0">);<br>00250 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aea1fb263848e2e8d2a2870ec5c5c342e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aea1fb263848e2e8d2a2870ec5c5c342e">setOperationAction</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a169032eecd015d4eeb869c457202a6c8">ISD::UINT_TO_FP</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a></span><span class="c0">&nbsp; &nbsp;,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acbaf8cfab91a9fc402ca794d6079674ccfc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acbaf8cfab91a9fc402ca794d6079674ccfc">Promote</a></span><span class="c0">);<br>00251 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aea1fb263848e2e8d2a2870ec5c5c342e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aea1fb263848e2e8d2a2870ec5c5c342e">setOperationAction</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a169032eecd015d4eeb869c457202a6c8">ISD::UINT_TO_FP</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50cab3be25b50efa0289a3c86fd50454b683">MVT::i16</a></span><span class="c0">&nbsp; ,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acbaf8cfab91a9fc402ca794d6079674ccfc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acbaf8cfab91a9fc402ca794d6079674ccfc">Promote</a></span><span class="c0">);<br>00252 <br>00253 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(Subtarget-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86Subtarget.html#a5314399c907d77b514ec837e8527a9de">is64Bit</a></span><span class="c0">()) {<br>00254 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aea1fb263848e2e8d2a2870ec5c5c342e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aea1fb263848e2e8d2a2870ec5c5c342e">setOperationAction</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a169032eecd015d4eeb869c457202a6c8">ISD::UINT_TO_FP</a></span><span class="c0">&nbsp; &nbsp; &nbsp;,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a></span><span class="c0">&nbsp; ,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acbaf8cfab91a9fc402ca794d6079674ccfc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acbaf8cfab91a9fc402ca794d6079674ccfc">Promote</a></span><span class="c0">);<br>….................</span></p><h4 class="c45 c20"><span class="c37 c48 c11 c58"><a class="c1" href="http://llvm.org/docs/WritingAnLLVMBackend.html#id22">Expand</a></span></h4><p class="c20"><span class="c11 c16">For a type without native support, a value may need to be broken down further, rather than promoted. For an operation without native support, a combination of other operations may be used to similar effect. In SPARC, the floating-point sine and cosine trig operations are supported by expansion to other operations, as indicated by the third parameter, </span><span class="c10 c5">Expand</span><span class="c11 c16">, to </span><span class="c10 c5">setOperationAction</span><span class="c11 c16">:</span></p><p class="c20"><span class="c18 c5">setOperationAction(ISD</span><span class="c18 c5 c27">::</span><span class="c18 c5">FSIN, MVT</span><span class="c18 c5 c27">::</span><span class="c18 c5">f32, Expand);<br>setOperationAction(ISD</span><span class="c18 c5 c27">::</span><span class="c18 c5">FCOS, MVT</span><span class="c18 c5 c27">::</span><span class="c18 c5">f32, Expand);<br></span></p><p class="c17"><span class="c0">In </span><span class="c0 c6">X86ISelLowering.cpp, there are things like:</span></p><p class="c17"><span class="c0">00798 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#ae4ac865451dca0c871bed2f413a05aa2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#ae4ac865451dca0c871bed2f413a05aa2">setLoadExtAction</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#ad4d48171b87ca51ff54c10a436bac4d7a6c61b6125c7901c549f90ee0e443a770">ISD::SEXTLOAD</a></span><span class="c0">, VT,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acbad1779d45cfb616a92d1657b26ee75913">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acbad1779d45cfb616a92d1657b26ee75913">Expand</a></span><span class="c0">);<br>00799 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#ae4ac865451dca0c871bed2f413a05aa2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#ae4ac865451dca0c871bed2f413a05aa2">setLoadExtAction</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#ad4d48171b87ca51ff54c10a436bac4d7a8d89c7da4444d9ec11667aa369abc5f7">ISD::ZEXTLOAD</a></span><span class="c0">, VT,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acbad1779d45cfb616a92d1657b26ee75913">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acbad1779d45cfb616a92d1657b26ee75913">Expand</a></span><span class="c0">);<br>00800 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#ae4ac865451dca0c871bed2f413a05aa2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#ae4ac865451dca0c871bed2f413a05aa2">setLoadExtAction</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#ad4d48171b87ca51ff54c10a436bac4d7afab3fffd153f7d7770fed81272e4b78f">ISD::EXTLOAD</a></span><span class="c0">, VT,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acbad1779d45cfb616a92d1657b26ee75913">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acbad1779d45cfb616a92d1657b26ee75913">Expand</a></span><span class="c0">);</span></p><p class="c20"><span class="c18 c5">….............</span></p><h4 class="c45 c20"><span class="c37 c48 c11 c58"><a class="c1" href="http://llvm.org/docs/WritingAnLLVMBackend.html#id23">Custom</a></span></h4><p class="c20"><span class="c11 c16">For some operations, simple type promotion or operation expansion may be insufficient. In some cases, a special intrinsic function must be implemented.</span></p><p class="c20"><span class="c11 c16">For example, a constant value may require special treatment, or an operation may require spilling and restoring registers in the stack and working with register allocators.</span></p><p class="c20"><span class="c11 c16">As seen in </span><span class="c10 c5">SparcISelLowering.cpp</span><span class="c11 c16">&nbsp;code below, to perform a type conversion from a floating point value to a signed integer, first the</span><span class="c10 c5">setOperationAction</span><span class="c11 c16">&nbsp;should be called with </span><span class="c5 c10">Custom</span><span class="c11 c16">&nbsp;as the third parameter:</span></p><p class="c20"><span class="c18 c5">setOperationAction(ISD</span><span class="c18 c5 c27">::</span><span class="c18 c5">FP_TO_SINT, MVT</span><span class="c18 c5 c27">::</span><span class="c18 c5">i32, Custom);<br></span></p><p class="c20"><span class="c11 c16">In the </span><span class="c10 c5">LowerOperation</span><span class="c11 c16">&nbsp;method, for each </span><span class="c10 c5">Custom</span><span class="c11 c16">&nbsp;operation, a case statement should be added to indicate what function to call. In the following code, an </span><span class="c10 c5">FP_TO_SINT</span><span class="c11 c16">&nbsp;opcode will call the </span><span class="c10 c5">LowerFP_TO_SINT</span><span class="c11 c16">&nbsp;method:</span></p><p class="c20"><span class="c18 c5">SDValue SparcTargetLowering</span><span class="c18 c5 c27">::</span><span class="c18 c5">LowerOperation(SDValue Op, SelectionDAG </span><span class="c18 c5 c27">&amp;</span><span class="c18 c5">DAG) {<br> &nbsp;</span><span class="c18 c26 c5 c25">switch</span><span class="c18 c5">&nbsp;(Op.getOpcode()) {<br> &nbsp;</span><span class="c18 c26 c5 c25">case</span><span class="c18 c5">&nbsp;ISD</span><span class="c18 c5 c27">::</span><span class="c18 c69 c5 c25">FP_TO_SINT:</span><span class="c18 c5">&nbsp;</span><span class="c18 c26 c5 c25">return</span><span class="c18 c5">&nbsp;LowerFP_TO_SINT(Op, DAG);<br> &nbsp;...<br> &nbsp;}<br>}<br></span></p><p class="c20"><span class="c11 c16">Finally, the </span><span class="c10 c5">LowerFP_TO_SINT</span><span class="c11 c16">&nbsp;method is implemented, using an FP register to convert the floating-point value to an integer.</span></p><p class="c20"><span class="c18 c26 c5 c25">static</span><span class="c18 c5">&nbsp;SDValue LowerFP_TO_SINT(SDValue Op, SelectionDAG </span><span class="c18 c5 c27">&amp;</span><span class="c18 c5">DAG) {<br> &nbsp;assert(Op.getValueType() </span><span class="c18 c5 c27">==</span><span class="c18 c5">&nbsp;MVT</span><span class="c18 c5 c27">::</span><span class="c18 c5">i32);<br> &nbsp;Op </span><span class="c18 c5 c27">=</span><span class="c18 c5">&nbsp;DAG.getNode(SPISD</span><span class="c18 c5 c27">::</span><span class="c18 c5">FTOI, MVT</span><span class="c18 c5 c27">::</span><span class="c18 c5">f32, Op.getOperand(</span><span class="c3">0</span><span class="c18 c5">));<br> &nbsp;</span><span class="c18 c26 c5 c25">return</span><span class="c18 c5">&nbsp;DAG.getNode(ISD</span><span class="c18 c5 c27">::</span><span class="c18 c5">BITCAST, MVT</span><span class="c18 c5 c27">::</span><span class="c18 c5">i32, Op);<br>}<br></span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c0">In </span><span class="c0 c6">X86ISelLowering.cpp, there are things like:</span></p><p class="c15"><span class="c18 c5"></span></p><p class="c17"><span class="c0">00255 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aea1fb263848e2e8d2a2870ec5c5c342e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aea1fb263848e2e8d2a2870ec5c5c342e">setOperationAction</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a169032eecd015d4eeb869c457202a6c8">ISD::UINT_TO_FP</a></span><span class="c0">&nbsp; &nbsp; &nbsp;,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a></span><span class="c0">&nbsp; ,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acba146bb5f7368109741fc8d4a8a85ad31e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acba146bb5f7368109741fc8d4a8a85ad31e">Custom</a></span><span class="c0">);<br>00256 &nbsp; } </span><span class="c0 c7">else</span><span class="c0">&nbsp;</span><span class="c0 c7">if</span><span class="c0">&nbsp;(!TM.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ab1fb67187fc37e569cc5171cbebba873">Options</a></span><span class="c0">.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetOptions.html#a8b1e3534d1a8d8cc585c3ea37e35f37c">UseSoftFloat</a></span><span class="c0">) {<br>00257 &nbsp; &nbsp; </span><span class="c0 c6">// We have an algorithm for SSE2-&gt;double, and we turn this into a</span><span class="c0"><br>00258 &nbsp; &nbsp; </span><span class="c0 c6">// 64-bit FILD followed by conditional FADD for other targets.</span><span class="c0"><br>00259 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aea1fb263848e2e8d2a2870ec5c5c342e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aea1fb263848e2e8d2a2870ec5c5c342e">setOperationAction</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a169032eecd015d4eeb869c457202a6c8">ISD::UINT_TO_FP</a></span><span class="c0">&nbsp; &nbsp; &nbsp;,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca97f56253625b3fe7b371ce76722de4b8">MVT::i64</a></span><span class="c0">&nbsp; ,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acba146bb5f7368109741fc8d4a8a85ad31e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acba146bb5f7368109741fc8d4a8a85ad31e">Custom</a></span><span class="c0">);<br>00260 &nbsp; &nbsp; </span><span class="c0 c6">// We have an algorithm for SSE2, and we turn this into a 64-bit</span><span class="c0"><br>00261 &nbsp; &nbsp; </span><span class="c0 c6">// FILD for other targets.</span><span class="c0"><br>00262 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aea1fb263848e2e8d2a2870ec5c5c342e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aea1fb263848e2e8d2a2870ec5c5c342e">setOperationAction</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a169032eecd015d4eeb869c457202a6c8">ISD::UINT_TO_FP</a></span><span class="c0">&nbsp; &nbsp; &nbsp;,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a></span><span class="c0">&nbsp; ,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acba146bb5f7368109741fc8d4a8a85ad31e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acba146bb5f7368109741fc8d4a8a85ad31e">Custom</a></span><span class="c0">);<br>00263 &nbsp; }</span></p><p class="c15"><span class="c18 c5"></span></p><h4 class="c45 c20"><span class="c37 c48 c11 c58"><a class="c1" href="http://llvm.org/docs/WritingAnLLVMBackend.html#id24">Legal</a></span></h4><p class="c20"><span class="c11 c16">The </span><span class="c10 c5">Legal</span><span class="c11 c16">&nbsp;</span><span class="c10 c5">LegalizeAction</span><span class="c11 c16">&nbsp;enum value simply indicates that an operation </span><span class="c11 c16 c25">is</span><span class="c11 c16">&nbsp;natively supported. </span><span class="c10 c5">Legal</span><span class="c11 c16">&nbsp;represents the default condition, so it is rarely used. In </span><span class="c10 c5">SparcISelLowering.cpp</span><span class="c11 c16">, the action for </span><span class="c10 c5">CTPOP</span><span class="c11 c16">&nbsp;(an operation to count the bits set in an integer) is natively supported only for SPARC v9. The following code enables the </span><span class="c10 c5">Expand</span><span class="c11 c16">&nbsp;conversion technique for non-v9 SPARC implementations.</span></p><p class="c20"><span class="c5 c18">setOperationAction(ISD</span><span class="c18 c5 c27">::</span><span class="c18 c5">CTPOP, MVT</span><span class="c18 c5 c27">::</span><span class="c18 c5">i32, Expand);<br>...<br></span><span class="c18 c26 c5 c25">if</span><span class="c18 c5">&nbsp;(TM.getSubtarget</span><span class="c18 c5 c27">&lt;</span><span class="c18 c5">SparcSubtarget</span><span class="c18 c5 c27">&gt;</span><span class="c18 c5">().isV9())<br> &nbsp;setOperationAction(ISD</span><span class="c18 c5 c27">::</span><span class="c18 c5">CTPOP, MVT</span><span class="c18 c5 c27">::</span><span class="c18 c5">i32, Legal);</span></p><p class="c15"><span class="c16"></span></p><p class="c20"><span class="c16">Note that these set**Action functions are </span><span class="c57 c16 c25">not virtual</span><span class="c16">&nbsp;and typically do not re-implemented in a target-specific lowering class. These functions are just designed to be used in the constructors of a target-specific lowering class to convey information such as type conversion, constraints between a certain type and an operation, etc, of the target machine. &nbsp;The source code includes some comments that I think summarize the above methods best:</span></p><p class="c20"><span class="c0 c6">//===--------------------------------------------------------------------===//</span><span class="c0"><br>01036 &nbsp; </span><span class="c0 c6">// TargetLowering Configuration Methods - These methods should be invoked by</span><span class="c0"><br>01037 &nbsp; </span><span class="c0 c6">// the derived class constructor to configure this object for the target.</span><span class="c0"><br>01038 &nbsp; </span><span class="c0 c6">//</span></p><p class="c15"><span class="c16"></span></p><p class="c15"><span class="c16"></span></p><p class="c20"><span class="c16">Other than the set**Action functions, there are lots of other bool functions such as:</span></p><p class="c17"><span class="c0">00156 </span><span class="c0 c6">&nbsp;/// isSelectExpensive - Return true if the select operation is expensive for</span><span class="c0"><br>00157 </span><span class="c0 c6">&nbsp;/// this target.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#ab80d464fc9b699e90f18ef27f3bb2fec">00158</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#ab80d464fc9b699e90f18ef27f3bb2fec">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#ab80d464fc9b699e90f18ef27f3bb2fec">isSelectExpensive</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;SelectIsExpensive; }<br>00159 <br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aefa304e81e2a827f58f87299de3ebc79">00160</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aefa304e81e2a827f58f87299de3ebc79">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aefa304e81e2a827f58f87299de3ebc79">isSelectSupported</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a29a95c7ef36a9fc4f7c09fd067510a78">SelectSupportKind</a></span><span class="c0">&nbsp;kind)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">; }</span></p><p class="c17"><span class="c0">…..................</span></p><p class="c17"><span class="c0">00181 </span><span class="c0 c6">&nbsp;/// isPow2DivCheap() - Return true if pow2 div is cheaper than a chain of</span><span class="c0"><br>00182 </span><span class="c0 c6">&nbsp;/// srl/add/sra.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#af3e77bbc603378a270af9fa9a906eb99">00183</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#af3e77bbc603378a270af9fa9a906eb99">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#af3e77bbc603378a270af9fa9a906eb99">isPow2DivCheap</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;Pow2DivIsCheap; }<br>00184 <br>00185 </span><span class="c0 c6">&nbsp;/// isJumpExpensive() - Return true if Flow Control is an expensive operation</span><span class="c0"><br>00186 </span><span class="c0 c6">&nbsp;/// that should be avoided.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a21e6a0c6a1b0bad8fbdd1804cf4f7160">00187</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a21e6a0c6a1b0bad8fbdd1804cf4f7160">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a21e6a0c6a1b0bad8fbdd1804cf4f7160">isJumpExpensive</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;JumpIsExpensive; }</span></p><p class="c17"><span class="c0">….................</span></p><p class="c17"><span class="c0">00443 </span><span class="c0 c6">&nbsp;/// isLoadExtLegal - Return true if the specified load with extension is legal</span><span class="c0"><br>00444 </span><span class="c0 c6">&nbsp;/// on this target.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a10fb7dd8aea320759e843e72c563104d">00445</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a10fb7dd8aea320759e843e72c563104d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a10fb7dd8aea320759e843e72c563104d">isLoadExtLegal</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;ExtType,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00446 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;VT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html#ac6f053514ba29bdf3b7f051f643dabe5">isSimple</a></span><span class="c0">() &amp;&amp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a1e66fec7289d389b0e56e915d6530b2a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a1e66fec7289d389b0e56e915d6530b2a">getLoadExtAction</a></span><span class="c0">(ExtType, VT) ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acba01fa4a725e243a37d72f1aafcabcafbe">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acba01fa4a725e243a37d72f1aafcabcafbe">Legal</a></span><span class="c0">;<br>00447 &nbsp; }</span></p><p class="c20"><span class="c16">to provide target-specific characteristics including latency of a certain operation, supportness of a certain operation, etc.</span></p><p class="c15"><span class="c16"></span></p><p class="c20"><span class="c16">Also,corresponding to the set**Action functions, there are get**Action functions to retrieve a </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acb">LegalizeAction</a></span><span class="c16">&nbsp;object, which has been specified by the get**Action functions, to handle target-specific scenarios. </span><span class="c16">For example:</span></p><p class="c17"><span class="c0">00510 </span><span class="c0 c6">&nbsp;/// getCondCodeAction - Return how the condition code should be treated:</span><span class="c0"><br>00511 </span><span class="c0 c6">&nbsp;/// either it is legal, needs to be expanded to some other code sequence,</span><span class="c0"><br>00512 </span><span class="c0 c6">&nbsp;/// or the target has a custom expander for it.</span><span class="c0"><br>00513 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acb">LegalizeAction</a></span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a90bf69f6c3e390aaf63d4dca221b24fb">00514</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a90bf69f6c3e390aaf63d4dca221b24fb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a90bf69f6c3e390aaf63d4dca221b24fb">getCondCodeAction</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MBlazeCC.html#aba42d64ed60fd2a2e8045b6d7f26958d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MBlazeCC.html#aba42d64ed60fd2a2e8045b6d7f26958d">CC</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00515 &nbsp; &nbsp; assert((</span><span class="c0 c8">unsigned</span><span class="c0">)CC &lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a370ed0e0f2bb66d17cd13f84be54e867">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a370ed0e0f2bb66d17cd13f84be54e867">array_lengthof</a></span><span class="c0">(CondCodeActions) &amp;&amp;<br>00516 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">)VT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html#a5b45953b758fdfe88452530f7d8371bc">getSimpleVT</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a></span><span class="c0">&nbsp;&lt; </span><span class="c0 c9">sizeof</span><span class="c0">(CondCodeActions[0])*4 &amp;&amp;<br>00517 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"Table isn't big enough!"</span><span class="c0">);<br>00518 </span><span class="c0 c6">&nbsp; &nbsp;/// The lower 5 bits of the SimpleTy index into Nth 2bit set from the 64bit</span><span class="c0"><br>00519 </span><span class="c0 c6">&nbsp; &nbsp;/// value and the upper 27 bits index into the second dimension of the</span><span class="c0"><br>00520 </span><span class="c0 c6">&nbsp; &nbsp;/// array to select what 64bit value to use.</span><span class="c0"><br>00521 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acb">LegalizeAction</a></span><span class="c0">&nbsp;Action = (</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acb">LegalizeAction</a></span><span class="c0">)<br>00522 &nbsp; &nbsp; &nbsp; ((CondCodeActions[CC][VT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html#a5b45953b758fdfe88452530f7d8371bc">getSimpleVT</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a></span><span class="c0">&nbsp;&gt;&gt; 5]<br>00523 &nbsp; &nbsp; &nbsp; &nbsp; &gt;&gt; (2*(VT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html#a5b45953b758fdfe88452530f7d8371bc">getSimpleVT</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a></span><span class="c0">&nbsp;&amp; 0x1F))) &amp; 3);<br>00524 &nbsp; &nbsp; assert(Action !=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acbaf8cfab91a9fc402ca794d6079674ccfc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acbaf8cfab91a9fc402ca794d6079674ccfc">Promote</a></span><span class="c0">&nbsp;&amp;&amp; </span><span class="c0 c14">"Can't promote condition code!"</span><span class="c0">);<br>00525 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;Action;<br>00526 &nbsp; }</span></p><p class="c20"><span class="c16">…........................</span></p><p class="c17"><span class="c0">00432 </span><span class="c0 c6">&nbsp;/// getLoadExtAction - Return how this load with extension should be treated:</span><span class="c0"><br>00433 </span><span class="c0 c6">&nbsp;/// either it is legal, needs to be promoted to a larger size, needs to be</span><span class="c0"><br>00434 </span><span class="c0 c6">&nbsp;/// expanded to some other code sequence, or the target has a custom expander</span><span class="c0"><br>00435 </span><span class="c0 c6">&nbsp;/// for it.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a1e66fec7289d389b0e56e915d6530b2a">00436</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acb">LegalizeAction</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a1e66fec7289d389b0e56e915d6530b2a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a1e66fec7289d389b0e56e915d6530b2a">getLoadExtAction</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;ExtType,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00437 &nbsp; &nbsp; assert(ExtType &lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#ad4d48171b87ca51ff54c10a436bac4d7ae5159de777d126add505573b474853a4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#ad4d48171b87ca51ff54c10a436bac4d7ae5159de777d126add505573b474853a4">ISD::LAST_LOADEXT_TYPE</a></span><span class="c0">&nbsp;&amp;&amp;<br>00438 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;VT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html#a5b45953b758fdfe88452530f7d8371bc">getSimpleVT</a></span><span class="c0">() &lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca2f78696cb9784a134baa9c3e4fc44838">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca2f78696cb9784a134baa9c3e4fc44838">MVT::LAST_VALUETYPE</a></span><span class="c0">&nbsp;&amp;&amp;<br>00439 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"Table isn't big enough!"</span><span class="c0">);<br>00440 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acb">LegalizeAction</a></span><span class="c0">)LoadExtActions[VT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html#a5b45953b758fdfe88452530f7d8371bc">getSimpleVT</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#a27bda7d8e8e4f0337650a892f3c9b46a">SimpleTy</a></span><span class="c0">][ExtType];<br>00441 &nbsp; }</span></p><p class="c17 c35"><span class="c16"></span></p><p class="c17"><span class="c16">In additional to all the methods introduced above, </span><span class="c11 c16">The </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c11 c16"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">&nbsp;</a></span><span class="c11 c16">class </span><span class="c16">defines tons of other interfaces for a variety of different purposes such as </span><span class="c0 c6">TargetLowering Optimization (e.g.,</span><span class="c0 c8">bool</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetLowering_1_1TargetLoweringOpt.html#a91ac6456c5ad7575372c0394d475aeb7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetLowering_1_1TargetLoweringOpt.html#a91ac6456c5ad7575372c0394d475aeb7">ShrinkDemandedConstant</a></span><span class="c0 c6">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0 c6">&nbsp;Op, </span><span class="c0 c9">const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">APInt</a></span><span class="c0 c6">&nbsp;&amp;Demanded); , &nbsp;</span><span class="c0 c8">bool</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#acfbda80cc07884ccb7b267aaea403141">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#acfbda80cc07884ccb7b267aaea403141">SimplifyDemandedBits(), &nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a8616b6396786e3dfd0a8613cd794a2e1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a8616b6396786e3dfd0a8613cd794a2e1">SimplifySetCC</a></span><span>(), etc.</span><span class="c0 c6">), Special Lowering methods (e.g., </span><span class="c0 c9">virtual</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span>&nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a32f806f11d41b0e4fad82a9f4b6e9ca2">LowerFormalArguments(), </a></span><span class="c0 c9 c49"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a32f806f11d41b0e4fad82a9f4b6e9ca2">virtual</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;SDValue</a></span><span>&nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#afba7b3e91d7691a2336080cc3f88b6f1">LowerCall(), </a></span><span class="c0 c9 c49"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#afba7b3e91d7691a2336080cc3f88b6f1">virtual</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#afba7b3e91d7691a2336080cc3f88b6f1">&nbsp;</a></span><span class="c0 c49 c8"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#afba7b3e91d7691a2336080cc3f88b6f1">void</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a98a8ba77f69ab3a974a9ab13f505ae11">&nbsp;HandleByVal</a></span><span>(), </span><span class="c0 c9 c49">virtual</span><span class="c0 c4">&nbsp;</span><span class="c0 c49 c8">bool</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a2935c22c9eb25e9c7eaad81a58af9a84">&nbsp;CanLowerReturn(), </a></span><span class="c0 c9 c49"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a2935c22c9eb25e9c7eaad81a58af9a84">virtual</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;SDValue</a></span><span>&nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a10acb0245b52cfec82e2115c71c322d6">LowerReturn</a></span><span class="c0 c4">(),</span><span class="c0 c9 c49">virtual</span><span class="c0 c4">&nbsp;</span><span class="c0 c49 c8">bool</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a70ecdf9b6b563848696f64eb03dc3105">&nbsp;mayBeEmittedAsTailCall(), etc.</a></span><span class="c0 c6">&nbsp;- These methods must be implemented by targets so that the SelectionDAGBuilder code knows how to lower these.), Inline Asm Support hooks, Instruction Emitting Hooks (e.g.,</span><span class="c0 c9">virtual</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0 c6">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a38276f452a68339a3d3e0db3d1531d54">EmitInstrWithCustomInserter</a></span></p><p class="c17"><span class="c0 c9">virtual</span><span class="c0 c6">&nbsp;</span><span class="c0 c8">void</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aca07be3ac02177b296b44111af460e72">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#aca07be3ac02177b296b44111af460e72">AdjustInstrPostInstrSelection()</a></span><span class="c0 c6">&nbsp;</span><span class="c0 c6">), Addressing mode description hooks (e.g., </span><span class="c0 c9 c49">virtual</span><span class="c0 c4">&nbsp;</span><span class="c0 c49 c8">bool </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a46f372c8c1ab40a22c0009867210bb8b">isLegalAddImmediate</a></span><span class="c0 c6">(), </span><span class="c0 c9">virtual</span><span class="c0 c6">&nbsp;</span><span class="c0 c8">bool</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#af1f13816e434bf13bf18b4ff083eb8ec">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#af1f13816e434bf13bf18b4ff083eb8ec">isLegalAddressingMode</a></span><span class="c0 c6">(), etc.</span><span class="c0 c6">) and Runtime Library hooks. </span></p><p class="c15"><span class="c16"></span></p><p class="c20"><span class="c16">Now we should be familar with what’s inside the </span><span class="c4 c51"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c16">&nbsp;class and how they should be defined and used based on a specific target implementation. Now let’s look at a bigger picture: </span><span>the inheritance hierarchy of the </span><span class="c4 c51"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c16">&nbsp;class. The inheritance of the </span><span class="c4 c51"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c16">&nbsp;class is relatively simple. It is a base class for other target-specific lowering classes to inherit:</span></p><p class="c20"><img height="447" src="./Notes on LLVM 3 (Target Independent Code Generator)_files/image06.png" width="511"></p><p class="c15"><span class="c19"></span></p><p class="c15"><span class="c19"></span></p><p class="c15"><span class="c19"></span></p><p class="c20"><span class="c19 c16">Part 7.2.4 TargetFrameLowering</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ae6cf8c66d083faae1a35ec6e8bddd5e1">TargetFrameLowering</a></span><span class="c16">&nbsp;class defines interfaces to convey stack/frame related information (</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a360555ed6db3b28a33fa5449a0335f19">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a360555ed6db3b28a33fa5449a0335f19">getStackAlignment</a></span><span class="c0">(), </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;SpillSlot *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a314c4e0c01d85374ca26181c7f45025a">getCalleeSavedSpillSlots</a></span><span class="c0">(), </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50c">StackDirection</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a8859c022d80a9f4ff145bc175481a493">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a8859c022d80a9f4ff145bc175481a493">getStackGrowthDirection</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;</span><span class="c0">etc.</span><span class="c0">&nbsp;</span><span class="c16">) and handle stack/frame relevant code generation (e.g., </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ae9ba6ae38e8083d7d5baa7e14fb33728">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ae9ba6ae38e8083d7d5baa7e14fb33728">emitPrologue</a></span><span class="c16">(), </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a12d7286898851b396d8fb5fb78db2deb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a12d7286898851b396d8fb5fb78db2deb">emitEpilogue</a></span><span class="c16">(), etc.</span><span class="c16">) for various targets. &nbsp;</span><span class="c57 c16">Note that to retrieve a list of caller save or callee save registers you need to consult the </span><span class="c0 c46"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a></span><span class="c57 c16">&nbsp;class</span><span class="c57 c16">, not this class.</span><span class="c16">&nbsp; </span></p><p class="c20"><span class="c16">The souce code of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ae6cf8c66d083faae1a35ec6e8bddd5e1">TargetFrameLowering</a></span><span class="c16">&nbsp;class is self-explained since it has enough comments to clarify what each interface does. &nbsp;The source code for this class is not long, thus I just list the entire class definition source code here: </span></p><p class="c17"><span class="c0">00026 </span><span class="c0 c6">/// Information about stack frame layout on the target. &nbsp;It holds the direction</span><span class="c0"><br>00027 </span><span class="c0 c6">/// of stack growth, the known stack alignment on entry to each function, and</span><span class="c0"><br>00028 </span><span class="c0 c6">/// the offset to the locals area.</span><span class="c0"><br>00029 </span><span class="c0 c6">///</span><span class="c0"><br>00030 </span><span class="c0 c6">/// The offset to the local area is the offset from the stack pointer on</span><span class="c0"><br>00031 </span><span class="c0 c6">/// function entry to the first location where function data (local variables,</span><span class="c0"><br>00032 </span><span class="c0 c6">/// spill locations) can be stored.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html">00033</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html">TargetFrameLowering</a></span><span class="c0">&nbsp;{<br>00034 </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50c">00035</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">enum</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50c">StackDirection</a></span><span class="c0">&nbsp;{<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50ca5a5dea77f2a0aaffed9741ae04e8d865">00036</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50ca5a5dea77f2a0aaffed9741ae04e8d865">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50ca5a5dea77f2a0aaffed9741ae04e8d865">StackGrowsUp</a></span><span class="c0">, &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Adding to the stack increases the stack address</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50cad1fc7c9d0bae5bf76a67d2d26ce99c1a">00037</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50cad1fc7c9d0bae5bf76a67d2d26ce99c1a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50cad1fc7c9d0bae5bf76a67d2d26ce99c1a">StackGrowsDown</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Adding to the stack decreases the stack address</span><span class="c0"><br>00038 &nbsp; };<br>00039 <br>00040 &nbsp; </span><span class="c0 c6">// Maps a callee saved register to a stack slot with a fixed offset.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetFrameLowering_1_1SpillSlot.html">00041</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">struct</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetFrameLowering_1_1SpillSlot.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetFrameLowering_1_1SpillSlot.html">SpillSlot</a></span><span class="c0">&nbsp;{<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetFrameLowering_1_1SpillSlot.html#a61869c498d78ea441c973525fbaf2af8">00042</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetFrameLowering_1_1SpillSlot.html#a61869c498d78ea441c973525fbaf2af8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetFrameLowering_1_1SpillSlot.html#a61869c498d78ea441c973525fbaf2af8">Reg</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetFrameLowering_1_1SpillSlot.html#a8ce1bc3b3961fa413891667b1914a435">00043</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">int</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetFrameLowering_1_1SpillSlot.html#a8ce1bc3b3961fa413891667b1914a435">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetFrameLowering_1_1SpillSlot.html#a8ce1bc3b3961fa413891667b1914a435">Offset</a></span><span class="c0">; </span><span class="c0 c6">// Offset relative to stack pointer on function entry.</span><span class="c0"><br>00044 &nbsp; };<br>00045 </span><span class="c0 c9">private</span><span class="c0">:<br>00046 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50c">StackDirection</a></span><span class="c0">&nbsp;StackDir;<br>00047 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;StackAlignment;<br>00048 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;TransientStackAlignment;<br>00049 &nbsp; </span><span class="c0 c8">int</span><span class="c0">&nbsp;LocalAreaOffset;<br>00050 &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;StackRealignable;<br>00051 </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ae6cf8c66d083faae1a35ec6e8bddd5e1">00052</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ae6cf8c66d083faae1a35ec6e8bddd5e1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ae6cf8c66d083faae1a35ec6e8bddd5e1">TargetFrameLowering</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50c">StackDirection</a></span><span class="c0">&nbsp;D, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;StackAl, </span><span class="c0 c8">int</span><span class="c0">&nbsp;LAO,<br>00053 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;TransAl = 1, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;StackReal = </span><span class="c0 c9">true</span><span class="c0">)<br>00054 &nbsp; &nbsp; : StackDir(D), StackAlignment(StackAl), TransientStackAlignment(TransAl),<br>00055 &nbsp; &nbsp; &nbsp; LocalAreaOffset(LAO), StackRealignable(StackReal) {}<br>00056 <br>00057 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#adcbc3bf1fa8b1cd05ce63c1bdd58f08b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#adcbc3bf1fa8b1cd05ce63c1bdd58f08b">~TargetFrameLowering</a></span><span class="c0">();<br>00058 <br>00059 &nbsp; </span><span class="c0 c6">// These methods return information that describes the abstract stack layout</span><span class="c0"><br>00060 &nbsp; </span><span class="c0 c6">// of the target machine.</span><span class="c0"><br>00061 <br>00062 </span><span class="c0 c6">&nbsp;/// getStackGrowthDirection - Return the direction the stack grows</span><span class="c0"><br>00063 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a8859c022d80a9f4ff145bc175481a493">00064</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a453c74e2daac0745b53f8b31c11fc50c">StackDirection</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a8859c022d80a9f4ff145bc175481a493">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a8859c022d80a9f4ff145bc175481a493">getStackGrowthDirection</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;StackDir; }<br>00065 <br>00066 </span><span class="c0 c6">&nbsp;/// getStackAlignment - This method returns the number of bytes to which the</span><span class="c0"><br>00067 </span><span class="c0 c6">&nbsp;/// stack pointer must be aligned on entry to a function. &nbsp;Typically, this</span><span class="c0"><br>00068 </span><span class="c0 c6">&nbsp;/// is the largest alignment for any data object in the target.</span><span class="c0"><br>00069 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a360555ed6db3b28a33fa5449a0335f19">00070</a></span><span class="c0">&nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a360555ed6db3b28a33fa5449a0335f19">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a360555ed6db3b28a33fa5449a0335f19">getStackAlignment</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;StackAlignment; }<br>00071 <br>00072 </span><span class="c0 c6">&nbsp;/// getTransientStackAlignment - This method returns the number of bytes to</span><span class="c0"><br>00073 </span><span class="c0 c6">&nbsp;/// which the stack pointer must be aligned at all times, even between</span><span class="c0"><br>00074 </span><span class="c0 c6">&nbsp;/// calls.</span><span class="c0"><br>00075 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ae78236f4d366f90477811e689d491843">00076</a></span><span class="c0">&nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ae78236f4d366f90477811e689d491843">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ae78236f4d366f90477811e689d491843">getTransientStackAlignment</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00077 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;TransientStackAlignment;<br>00078 &nbsp; }<br>00079 <br>00080 </span><span class="c0 c6">&nbsp;/// isStackRealignable - This method returns whether the stack can be</span><span class="c0"><br>00081 </span><span class="c0 c6">&nbsp;/// realigned.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a2996eaf65fa9c5184eb97d65dcf089aa">00082</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a2996eaf65fa9c5184eb97d65dcf089aa">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a2996eaf65fa9c5184eb97d65dcf089aa">isStackRealignable</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00083 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;StackRealignable;<br>00084 &nbsp; }<br>00085 <br>00086 </span><span class="c0 c6">&nbsp;/// getOffsetOfLocalArea - This method returns the offset of the local area</span><span class="c0"><br>00087 </span><span class="c0 c6">&nbsp;/// from the stack pointer on entrance to a function.</span><span class="c0"><br>00088 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a32f0831ccaa8dbbbf0f779125e6d5dd8">00089</a></span><span class="c0">&nbsp; </span><span class="c0 c8">int</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a32f0831ccaa8dbbbf0f779125e6d5dd8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a32f0831ccaa8dbbbf0f779125e6d5dd8">getOffsetOfLocalArea</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;LocalAreaOffset; }<br>00090 <br>00091 </span><span class="c0 c6">&nbsp;/// getCalleeSavedSpillSlots - This method returns a pointer to an array of</span><span class="c0"><br>00092 </span><span class="c0 c6">&nbsp;/// pairs, that contains an entry for each callee saved register that must be</span><span class="c0"><br>00093 </span><span class="c0 c6">&nbsp;/// spilled to a particular stack location if it is spilled.</span><span class="c0"><br>00094 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00095 </span><span class="c0 c6">&nbsp;/// Each entry in this array contains a &lt;register,offset&gt; pair, indicating the</span><span class="c0"><br>00096 </span><span class="c0 c6">&nbsp;/// fixed offset from the incoming stack pointer that each register should be</span><span class="c0"><br>00097 </span><span class="c0 c6">&nbsp;/// spilled at. If a register is not listed here, the code generator is</span><span class="c0"><br>00098 </span><span class="c0 c6">&nbsp;/// allowed to spill it anywhere it chooses.</span><span class="c0"><br>00099 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00100 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;SpillSlot *<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a314c4e0c01d85374ca26181c7f45025a">00101</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a314c4e0c01d85374ca26181c7f45025a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a314c4e0c01d85374ca26181c7f45025a">getCalleeSavedSpillSlots</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;&amp;NumEntries)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00102 &nbsp; &nbsp; NumEntries = 0;<br>00103 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;0;<br>00104 &nbsp; }<br>00105 <br>00106 </span><span class="c0 c6">&nbsp;/// targetHandlesStackFrameRounding - Returns true if the target is</span><span class="c0"><br>00107 </span><span class="c0 c6">&nbsp;/// responsible for rounding up the stack frame (probably at emitPrologue</span><span class="c0"><br>00108 </span><span class="c0 c6">&nbsp;/// time).</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a95523ccdf8a9b6fecbefc3baaf117053">00109</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a95523ccdf8a9b6fecbefc3baaf117053">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a95523ccdf8a9b6fecbefc3baaf117053">targetHandlesStackFrameRounding</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00110 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>00111 &nbsp; }<br>00112 <br>00113 </span><span class="c0 c6">&nbsp;/// emitProlog/emitEpilog - These methods insert prolog and epilog code into</span><span class="c0"><br>00114 </span><span class="c0 c6">&nbsp;/// the function.</span><span class="c0"><br>00115 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ae9ba6ae38e8083d7d5baa7e14fb33728">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ae9ba6ae38e8083d7d5baa7e14fb33728">emitPrologue</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF) </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br>00116 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a12d7286898851b396d8fb5fb78db2deb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a12d7286898851b396d8fb5fb78db2deb">emitEpilogue</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF,<br>00117 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;&amp;MBB) </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br>00118 <br>00119 </span><span class="c0 c6">&nbsp;/// Adjust the prologue to have the function use segmented stacks. This works</span><span class="c0"><br>00120 </span><span class="c0 c6">&nbsp;/// by adding a check even before the "normal" function prologue.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a23cfb8fc7aa94c96fe3f790aed5162b6">00121</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a23cfb8fc7aa94c96fe3f790aed5162b6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a23cfb8fc7aa94c96fe3f790aed5162b6">adjustForSegmentedStacks</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ }<br>00122 <br>00123 </span><span class="c0 c6">&nbsp;/// spillCalleeSavedRegisters - Issues instruction(s) to spill all callee</span><span class="c0"><br>00124 </span><span class="c0 c6">&nbsp;/// saved registers and returns true if it isn't possible / profitable to do</span><span class="c0"><br>00125 </span><span class="c0 c6">&nbsp;/// so by issuing a series of store instructions via</span><span class="c0"><br>00126 </span><span class="c0 c6">&nbsp;/// storeRegToStackSlot(). Returns false otherwise.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a21a5a07a7e38f9a2dafdc4f21cff3773">00127</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a21a5a07a7e38f9a2dafdc4f21cff3773">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a21a5a07a7e38f9a2dafdc4f21cff3773">spillCalleeSavedRegisters</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;&amp;MBB,<br>00128 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">,<br>00129 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;std::vector&lt;CalleeSavedInfo&gt; &amp;CSI,<br>00130 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a></span><span class="c0">&nbsp;*TRI)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00131 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>00132 &nbsp; }<br>00133 <br>00134 </span><span class="c0 c6">&nbsp;/// restoreCalleeSavedRegisters - Issues instruction(s) to restore all callee</span><span class="c0"><br>00135 </span><span class="c0 c6">&nbsp;/// saved registers and returns true if it isn't possible / profitable to do</span><span class="c0"><br>00136 </span><span class="c0 c6">&nbsp;/// so by issuing a series of load instructions via loadRegToStackSlot().</span><span class="c0"><br>00137 </span><span class="c0 c6">&nbsp;/// Returns false otherwise.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a488abbc6de271d709e28d71e0413edad">00138</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a488abbc6de271d709e28d71e0413edad">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a488abbc6de271d709e28d71e0413edad">restoreCalleeSavedRegisters</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;&amp;MBB,<br>00139 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">,<br>00140 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;std::vector&lt;CalleeSavedInfo&gt; &amp;CSI,<br>00141 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a></span><span class="c0">&nbsp;*TRI)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00142 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>00143 &nbsp; }<br>00144 <br>00145 </span><span class="c0 c6">&nbsp;/// hasFP - Return true if the specified function should have a dedicated</span><span class="c0"><br>00146 </span><span class="c0 c6">&nbsp;/// frame pointer register. For most targets this is true only if the function</span><span class="c0"><br>00147 </span><span class="c0 c6">&nbsp;/// has variable sized allocas or if frame pointer elimination is disabled.</span><span class="c0"><br>00148 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a59182730437bdb0a45a274261a7ea84b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a59182730437bdb0a45a274261a7ea84b">hasFP</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF) </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br>00149 <br>00150 </span><span class="c0 c6">&nbsp;/// hasReservedCallFrame - Under normal circumstances, when a frame pointer is</span><span class="c0"><br>00151 </span><span class="c0 c6">&nbsp;/// not required, we reserve argument space for call sites in the function</span><span class="c0"><br>00152 </span><span class="c0 c6">&nbsp;/// immediately on entry to the current function. This eliminates the need for</span><span class="c0"><br>00153 </span><span class="c0 c6">&nbsp;/// add/sub sp brackets around call sites. Returns true if the call frame is</span><span class="c0"><br>00154 </span><span class="c0 c6">&nbsp;/// included as part of the stack frame.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a8404705eb7a27e437ac51ca3730bfd7c">00155</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a8404705eb7a27e437ac51ca3730bfd7c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a8404705eb7a27e437ac51ca3730bfd7c">hasReservedCallFrame</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00156 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;!</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a59182730437bdb0a45a274261a7ea84b">hasFP</a></span><span class="c0">(MF);<br>00157 &nbsp; }<br>00158 <br>00159 </span><span class="c0 c6">&nbsp;/// canSimplifyCallFramePseudos - When possible, it's best to simplify the</span><span class="c0"><br>00160 </span><span class="c0 c6">&nbsp;/// call frame pseudo ops before doing frame index elimination. This is</span><span class="c0"><br>00161 </span><span class="c0 c6">&nbsp;/// possible only when frame index references between the pseudos won't</span><span class="c0"><br>00162 </span><span class="c0 c6">&nbsp;/// need adjusting for the call frame adjustments. Normally, that's true</span><span class="c0"><br>00163 </span><span class="c0 c6">&nbsp;/// if the function has a reserved call frame or a frame pointer. Some</span><span class="c0"><br>00164 </span><span class="c0 c6">&nbsp;/// targets (Thumb2, for example) may have more complicated criteria,</span><span class="c0"><br>00165 </span><span class="c0 c6">&nbsp;/// however, and can override this behavior.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a0f60351ed01fb1f3db8896619ca8cd50">00166</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a0f60351ed01fb1f3db8896619ca8cd50">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a0f60351ed01fb1f3db8896619ca8cd50">canSimplifyCallFramePseudos</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00167 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a8404705eb7a27e437ac51ca3730bfd7c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a8404705eb7a27e437ac51ca3730bfd7c">hasReservedCallFrame</a></span><span class="c0">(MF) ||</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a59182730437bdb0a45a274261a7ea84b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a59182730437bdb0a45a274261a7ea84b">hasFP</a></span><span class="c0">(MF);<br>00168 &nbsp; }<br>00169 <br>00170 </span><span class="c0 c6">&nbsp;/// getFrameIndexOffset - Returns the displacement from the frame register to</span><span class="c0"><br>00171 </span><span class="c0 c6">&nbsp;/// the stack frame of the specified index.</span><span class="c0"><br>00172 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">int</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ab459463adf75c4036fcfc00ae21bd10d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ab459463adf75c4036fcfc00ae21bd10d">getFrameIndexOffset</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF, </span><span class="c0 c8">int</span><span class="c0">&nbsp;FI) </span><span class="c0 c9">const</span><span class="c0">;<br>00173 <br>00174 </span><span class="c0 c6">&nbsp;/// getFrameIndexReference - This method should return the base register</span><span class="c0"><br>00175 </span><span class="c0 c6">&nbsp;/// and offset used to reference a frame index location. The offset is</span><span class="c0"><br>00176 </span><span class="c0 c6">&nbsp;/// returned directly, and the base register is returned via FrameReg.</span><span class="c0"><br>00177 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">int</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a69d76672014cdc0e078f98622a61999c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a69d76672014cdc0e078f98622a61999c">getFrameIndexReference</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF, </span><span class="c0 c8">int</span><span class="c0">&nbsp;FI,<br>00178 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;&amp;FrameReg) </span><span class="c0 c9">const</span><span class="c0">;<br>00179 <br>00180 </span><span class="c0 c6">&nbsp;/// processFunctionBeforeCalleeSavedScan - This method is called immediately</span><span class="c0"><br>00181 </span><span class="c0 c6">&nbsp;/// before PrologEpilogInserter scans the physical registers used to determine</span><span class="c0"><br>00182 </span><span class="c0 c6">&nbsp;/// what callee saved registers should be spilled. This method is optional.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a0f01e29790499891efeb10ed97bb983f">00183</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a0f01e29790499891efeb10ed97bb983f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a0f01e29790499891efeb10ed97bb983f">processFunctionBeforeCalleeSavedScan</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF,<br>00184 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegScavenger.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegScavenger.html">RegScavenger</a></span><span class="c0">&nbsp;*RS = NULL)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00185 <br>00186 &nbsp; }<br>00187 <br>00188 </span><span class="c0 c6">&nbsp;/// processFunctionBeforeFrameFinalized - This method is called immediately</span><span class="c0"><br>00189 </span><span class="c0 c6">&nbsp;/// before the specified function's frame layout (MF.getFrameInfo()) is</span><span class="c0"><br>00190 </span><span class="c0 c6">&nbsp;/// finalized. &nbsp;Once the frame is finalized, MO_FrameIndex operands are</span><span class="c0"><br>00191 </span><span class="c0 c6">&nbsp;/// replaced with direct constants. &nbsp;This method is optional.</span><span class="c0"><br>00192 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a52d1ce8013aac9fc9b589e5a943fb511">00193</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a52d1ce8013aac9fc9b589e5a943fb511">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a52d1ce8013aac9fc9b589e5a943fb511">processFunctionBeforeFrameFinalized</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00194 &nbsp; }<br>00195 };</span></p><p class="c15"><span class="c19"></span></p><p class="c20"><span>From the above code we can see most of methods in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html">TargetFrameLowering</a></span><span class="c0">&nbsp;</span><span class="c11">&nbsp;class </span><span>are defined as virtual and thus should be subclassed by a concrete frame lowering class. The following figure illustrates the inheritance between the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html">TargetFrameLowering</a></span><span class="c0">&nbsp;</span><span class="c11">&nbsp;class and various concrete target-specific frame lowering subclasses implemented in the LLVM library. &nbsp; For more details regarding how a target frame lowering subclass re-implements the virtual functions defined in </span><span>the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html">TargetFrameLowering</a></span><span class="c0">&nbsp;</span><span class="c11">&nbsp;class, please refer to the corresponding source file of that target frame lowering subclass.</span></p><p class="c20"><img height="463" src="./Notes on LLVM 3 (Target Independent Code Generator)_files/image05.png" width="609"></p><p class="c15"><span class="c19"></span></p><p class="c20"><span class="c19">Part 7.2.5</span><span class="c19 c16">&nbsp;TargetRegisterInfo</span><span class="c19">&nbsp;</span><span class="c19 c16">Class </span></p><p class="c15"><span class="c19 c16"></span></p><p class="c20"><span class="c11 c16">The LLVM document offers a brief introduction to the </span><span class="c10 c5">TargetRegisterInfo</span><span class="c11 c16">&nbsp;class:</span></p><p class="c20"><span class="c11 c16">The </span><span class="c10 c5">TargetRegisterInfo</span><span class="c11 c16">&nbsp;class is used to describe the register file of the target and any interactions between the registers.</span></p><p class="c20"><span class="c11 c16">Registers are represented in the code generator by unsigned integers. Physical registers (those that actually exist in the target description) are unique small numbers, and virtual registers are generally large. Note that register </span><span class="c10 c5">#0</span><span class="c11 c16">&nbsp;is reserved as a flag value.</span></p><p class="c20"><span class="c11 c16">Each register in the processor description has an associated </span><span class="c10 c5">TargetRegisterDesc</span><span class="c11 c16">&nbsp;entry, which provides a textual name for the register (used for assembly output and debugging dumps) and a set of aliases (used to indicate whether one register overlaps with another).</span></p><p class="c20"><span class="c11 c16">In addition to the per-register description, the </span><span class="c10 c5">TargetRegisterInfo</span><span class="c11 c16">&nbsp;class exposes a set of processor specific register classes (instances of the </span><span class="c10 c5">TargetRegisterClass</span><span class="c11 c16">&nbsp;class). Each register class contains sets of registers that have the same properties (for example, they are all 32-bit integer registers). Each SSA virtual register created by the instruction selector has an associated register class. When the register allocator runs, it replaces virtual registers with a physical register in the set.</span></p><p class="c20"><span class="c11 c16">The target-specific implementations of these classes is auto-generated from a </span><span class="c29 c11 c16"><a class="c1" href="http://llvm.org/docs/TableGenFundamentals.html">TableGen</a></span><span class="c11 c16">&nbsp;description of the register file.</span></p><p class="c15"><span class="c16"></span></p><h4 class="c45 c20"><a name="h.ku92dz7r6am1"></a><span class="c37 c48 c11 c58"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id53">Mapping virtual registers to physical registers</a></span></h4><p class="c20"><span class="c11 c16">There are two ways to map virtual registers to physical registers (or to memory slots). The first way, that we will call </span><span class="c41 c11 c16">direct mapping</span><span class="c11 c16">, is based on the use of methods of the classes </span><span class="c10 c5">TargetRegisterInfo</span><span class="c11 c16">, and </span><span class="c10 c5">MachineOperand</span><span class="c11 c16">. The second way, that we will call </span><span class="c41 c11 c16">indirect mapping</span><span class="c11 c16">, relies on the </span><span class="c10 c5">VirtRegMap</span><span class="c11 c16">&nbsp;class in order to insert loads and stores sending and getting values to and from memory.</span></p><p class="c20"><span class="c11 c16">The direct mapping provides more flexibility to the developer of the register allocator; however, it is more error prone, and demands more implementation work. Basically, the programmer will have to specify where load and store instructions should be inserted in the target function being compiled in order to get and store values in memory. To assign a physical register to a virtual register present in a given operand, use </span><span class="c10 c5">MachineOperand::setReg(p_reg)</span><span class="c11 c16">. To insert a store instruction, use</span><span class="c10 c5">TargetInstrInfo::storeRegToStackSlot(...)</span><span class="c11 c16">, and to insert a load instruction, use </span><span class="c10 c5">TargetInstrInfo::loadRegFromStackSlot</span><span class="c11 c16">.</span></p><p class="c20"><span class="c11 c16">The indirect mapping shields the application developer from the complexities of inserting load and store instructions. In order to map a virtual register to a physical one, use </span><span class="c10 c5">VirtRegMap::assignVirt2Phys(vreg, preg)</span><span class="c11 c16">. In order to map a certain virtual register to memory, use </span><span class="c10 c5">VirtRegMap::assignVirt2StackSlot(vreg)</span><span class="c11 c16">. This method will return the stack slot where </span><span class="c10 c5">vreg</span><span class="c11 c16">‘s value will be located. If it is necessary to map another virtual register to the same stack slot, use </span><span class="c10 c5">VirtRegMap::assignVirt2StackSlot(vreg, stack_location)</span><span class="c11 c16">. One important point to consider when using the indirect mapping, is that even if a virtual register is mapped to memory, it still needs to be mapped to a physical register. This physical register is the location where the virtual register is supposed to be found before being stored or after being reloaded.</span></p><p class="c20"><span class="c11 c16">If the indirect strategy is used, after all the virtual registers have been mapped to physical registers or stack slots, it is necessary to use a spiller object to place load and store instructions in the code. Every virtual that has been mapped to a stack slot will be stored to memory after been defined and will be loaded before being used. The implementation of the spiller tries to recycle load/store instructions, avoiding unnecessary instructions. For an example of how to invoke the spiller, see</span><span class="c10 c5">RegAllocLinearScan::runOnMachineFunction</span><span class="c11 c16">&nbsp;in </span><span class="c10 c5">lib/CodeGen/RegAllocLinearScan.cpp</span><span class="c11 c16">.</span></p><p class="c15"><span class="c16"></span></p><p class="c15"><span class="c16"></span></p><p class="c20"><span>Here are some code fragments for </span><span class="c11 c16">the </span><span class="c10 c5">TargetRegisterInfo</span><span class="c11 c16">&nbsp;class definition:</span></p><p class="c17"><span class="c0">00213 </span><span class="c0 c6">/// TargetRegisterInfo base class - We assume that the target defines a static</span><span class="c0"><br>00214 </span><span class="c0 c6">/// array of TargetRegisterDesc objects that represent all of the machine</span><span class="c0"><br>00215 </span><span class="c0 c6">/// registers that the target has. &nbsp;As such, we simply have to track a pointer</span><span class="c0"><br>00216 </span><span class="c0 c6">/// to this array so that we can turn register number into a register</span><span class="c0"><br>00217 </span><span class="c0 c6">/// descriptor.</span><span class="c0"><br>00218 </span><span class="c0 c6">///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">00219</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a></span><span class="c0">&nbsp;: </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo.html">MCRegisterInfo</a></span><span class="c0">&nbsp;{<br>00220 </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a5f3578b3db9bb49d5d3ac5d282b35034">00221</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;* </span><span class="c0 c9">const</span><span class="c0">&nbsp;*</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a5f3578b3db9bb49d5d3ac5d282b35034">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a5f3578b3db9bb49d5d3ac5d282b35034">regclass_iterator</a></span><span class="c0">;<br>00222 </span><span class="c0 c9">private</span><span class="c0">:<br>00223 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetRegisterInfoDesc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetRegisterInfoDesc.html">TargetRegisterInfoDesc</a></span><span class="c0">&nbsp;*InfoDesc; &nbsp; &nbsp; </span><span class="c0 c6">// Extra desc array for codegen</span><span class="c0"><br>00224 &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;*</span><span class="c0 c9">const</span><span class="c0">&nbsp;*SubRegIndexNames; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Names of subreg indexes.</span><span class="c0"><br>00225 &nbsp; </span><span class="c0 c6">// Pointer to array of lane masks, one per sub-reg index.</span><span class="c0"><br>00226 &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;*SubRegIndexLaneMasks;<br>00227 <br>00228 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterClass.html">regclass_iterator</a></span><span class="c0">&nbsp;RegClassBegin, RegClassEnd; &nbsp; </span><span class="c0 c6">// List of regclasses</span><span class="c0"><br>00229 <br>00230 </span><span class="c0 c9">protected</span><span class="c0">:<br>00231 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#af1a91defc3cf252187f4fd9cf0ab12ce">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#af1a91defc3cf252187f4fd9cf0ab12ce">TargetRegisterInfo</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetRegisterInfoDesc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetRegisterInfoDesc.html">TargetRegisterInfoDesc</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a></span><span class="c0">,<br>00232 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterClass.html">regclass_iterator</a></span><span class="c0">&nbsp;RegClassBegin,<br>00233 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterClass.html">regclass_iterator</a></span><span class="c0">&nbsp;RegClassEnd,<br>00234 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;*</span><span class="c0 c9">const</span><span class="c0">&nbsp;*SRINames,<br>00235 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;*SRILaneMasks);<br>00236 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a5c5caef09edefc28aefe75a57b51e9e3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a5c5caef09edefc28aefe75a57b51e9e3">~TargetRegisterInfo</a></span><span class="c0">();<br>00237 </span><span class="c0 c9">public</span><span class="c0">:<br>00238 <br>00239 &nbsp; </span><span class="c0 c6">// Register numbers can represent physical registers, virtual registers, and</span><span class="c0"><br>00240 &nbsp; </span><span class="c0 c6">// sometimes stack slots. The unsigned values are divided into these ranges:</span><span class="c0"><br>00241 &nbsp; </span><span class="c0 c6">//</span><span class="c0"><br>00242 &nbsp; </span><span class="c0 c6">// &nbsp; 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Not a register, can be used as a sentinel.</span><span class="c0"><br>00243 &nbsp; </span><span class="c0 c6">// &nbsp; [1;2^30) &nbsp; &nbsp;Physical registers assigned by TableGen.</span><span class="c0"><br>00244 &nbsp; </span><span class="c0 c6">// &nbsp; [2^30;2^31) Stack slots. (Rarely used.)</span><span class="c0"><br>00245 &nbsp; </span><span class="c0 c6">// &nbsp; [2^31;2^32) Virtual registers assigned by MachineRegisterInfo.</span><span class="c0"><br>00246 &nbsp; </span><span class="c0 c6">//</span><span class="c0"><br>00247 &nbsp; </span><span class="c0 c6">// Further sentinels can be allocated from the small negative integers.</span><span class="c0"><br>00248 &nbsp; </span><span class="c0 c6">// DenseMapInfo&lt;unsigned&gt; uses -1u and -2u.</span><span class="c0"><br>00249 <br>00250 </span><span class="c0 c6">&nbsp;/// isStackSlot - Sometimes it is useful the be able to store a non-negative</span><span class="c0"><br>00251 </span><span class="c0 c6">&nbsp;/// frame index in a variable that normally holds a register. isStackSlot()</span><span class="c0"><br>00252 </span><span class="c0 c6">&nbsp;/// returns true if Reg is in the range used for stack slots.</span><span class="c0"><br>00253 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00254 </span><span class="c0 c6">&nbsp;/// Note that isVirtualRegister() and isPhysicalRegister() cannot handle stack</span><span class="c0"><br>00255 </span><span class="c0 c6">&nbsp;/// slots, so if a variable may contains a stack slot, always check</span><span class="c0"><br>00256 </span><span class="c0 c6">&nbsp;/// isStackSlot() first.</span><span class="c0"><br>00257 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#acd7ff2004156240432b82c305aab07db">00258</a></span><span class="c0">&nbsp; </span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#acd7ff2004156240432b82c305aab07db">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#acd7ff2004156240432b82c305aab07db">isStackSlot</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">) {<br>00259 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;int(Reg) &gt;= (1 &lt;&lt; 30);<br>00260 &nbsp; }<br>00261 <br>00262 </span><span class="c0 c6">&nbsp;/// stackSlot2Index - Compute the frame index from a register value</span><span class="c0"><br>00263 </span><span class="c0 c6">&nbsp;/// representing a stack slot.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a419e521c9378d4d7b86fa6f2d8e440f8">00264</a></span><span class="c0">&nbsp; </span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c8">int</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a419e521c9378d4d7b86fa6f2d8e440f8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a419e521c9378d4d7b86fa6f2d8e440f8">stackSlot2Index</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">) {<br>00265 &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#acd7ff2004156240432b82c305aab07db">isStackSlot</a></span><span class="c0">(Reg) &amp;&amp; </span><span class="c0 c14">"Not a stack slot"</span><span class="c0">);<br>00266 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;int(Reg - (1u &lt;&lt; 30));<br>00267 &nbsp; }<br>00268 <br>00269 </span><span class="c0 c6">&nbsp;/// index2StackSlot - Convert a non-negative frame index to a stack slot</span><span class="c0"><br>00270 </span><span class="c0 c6">&nbsp;/// register value.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a420c6d2de82c6ca3240913a039f4f23b">00271</a></span><span class="c0">&nbsp; </span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a420c6d2de82c6ca3240913a039f4f23b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a420c6d2de82c6ca3240913a039f4f23b">index2StackSlot</a></span><span class="c0">(</span><span class="c0 c8">int</span><span class="c0">&nbsp;FI) {<br>00272 &nbsp; &nbsp; assert(FI &gt;= 0 &amp;&amp; </span><span class="c0 c14">"Cannot hold a negative frame index."</span><span class="c0">);<br>00273 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;FI + (1u &lt;&lt; 30);<br>00274 &nbsp; }<br>00275 <br>00276 </span><span class="c0 c6">&nbsp;/// isPhysicalRegister - Return true if the specified register number is in</span><span class="c0"><br>00277 </span><span class="c0 c6">&nbsp;/// the physical register namespace.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">00278</a></span><span class="c0">&nbsp; </span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">isPhysicalRegister</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">) {<br>00279 &nbsp; &nbsp; assert(!</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#acd7ff2004156240432b82c305aab07db">isStackSlot</a></span><span class="c0">(Reg) &amp;&amp; </span><span class="c0 c14">"Not a register! Check isStackSlot() first."</span><span class="c0">);<br>00280 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;int(Reg) &gt; 0;<br>00281 &nbsp; }</span></p><p class="c20"><span class="c24">…...........................</span></p><p class="c17"><span class="c0">00365 </span><span class="c0 c6">&nbsp;/// regsOverlap - Returns true if the two registers are equal or alias each</span><span class="c0"><br>00366 </span><span class="c0 c6">&nbsp;/// other. The registers may be virtual register.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a4fac7ec2f43b802397b65018bda0040e">00367</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a4fac7ec2f43b802397b65018bda0040e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a4fac7ec2f43b802397b65018bda0040e">regsOverlap</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;regA, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;regB)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00368 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(regA == regB) </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00369 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">isVirtualRegister</a></span><span class="c0">(regA) ||</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">isVirtualRegister</a></span><span class="c0">(regB))<br>00370 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>00371 <br>00372 &nbsp; &nbsp; </span><span class="c0 c6">// Regunits are numerically ordered. Find a common unit.</span><span class="c0"><br>00373 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegUnitIterator.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a></span><span class="c0">&nbsp;RUA(regA, </span><span class="c0 c9">this</span><span class="c0">);<br>00374 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegUnitIterator.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a></span><span class="c0">&nbsp;RUB(regB, </span><span class="c0 c9">this</span><span class="c0">);<br>00375 &nbsp; &nbsp; </span><span class="c0 c7">do</span><span class="c0">&nbsp;{<br>00376 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(*RUA == *RUB) </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00377 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(*RUA &lt; *RUB) ++RUA;<br>00378 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">else</span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;++RUB;<br>00379 &nbsp; &nbsp; } </span><span class="c0 c7">while</span><span class="c0">&nbsp;(RUA.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a></span><span class="c0">() &amp;&amp; RUB.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a></span><span class="c0">());<br>00380 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>00381 &nbsp; }<br>00382 <br>00383 </span><span class="c0 c6">&nbsp;/// hasRegUnit - Returns true if Reg contains RegUnit.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a7d2b26ed3cdd4cee469fa067d4f17447">00384</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a7d2b26ed3cdd4cee469fa067d4f17447">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a7d2b26ed3cdd4cee469fa067d4f17447">hasRegUnit</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;RegUnit)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00385 &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a></span><span class="c0">&nbsp;Units(Reg, </span><span class="c0 c9">this</span><span class="c0">); Units.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a></span><span class="c0">(); ++Units)<br>00386 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(*Units == RegUnit)<br>00387 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00388 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>00389 &nbsp; }<br>00390 <br>00391 </span><span class="c0 c6">&nbsp;/// isSubRegister - Returns true if regB is a sub-register of regA.</span><span class="c0"><br>00392 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a75096e65ed07db7414979b43b30037f7">00393</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a75096e65ed07db7414979b43b30037f7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a75096e65ed07db7414979b43b30037f7">isSubRegister</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;regA, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;regB)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00394 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#aed91585cecfd01b6bb8105475080a575">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#aed91585cecfd01b6bb8105475080a575">isSuperRegister</a></span><span class="c0">(regB, regA);<br>00395 &nbsp; }<br>00396 <br>00397 </span><span class="c0 c6">&nbsp;/// isSuperRegister - Returns true if regB is a super-register of regA.</span><span class="c0"><br>00398 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#aed91585cecfd01b6bb8105475080a575">00399</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#aed91585cecfd01b6bb8105475080a575">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#aed91585cecfd01b6bb8105475080a575">isSuperRegister</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;RegA, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;RegB)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00400 &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSuperRegIterator.html">MCSuperRegIterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">(RegA, </span><span class="c0 c9">this</span><span class="c0">);</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">.isValid(); ++</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">)<br>00401 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">&nbsp;== RegB)<br>00402 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00403 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>00404 &nbsp; }</span></p><p class="c17"><span class="c0">…............................</span></p><p class="c17"><span class="c0">00411 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af1326f50ef96dc5653d5cadd2f9cbbf5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af1326f50ef96dc5653d5cadd2f9cbbf5">MCPhysReg</a></span><span class="c0">*</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#ae53a385b86237b961ccc18a8701ae588">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#ae53a385b86237b961ccc18a8701ae588">getCalleeSavedRegs</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;*MF = 0)<br>00412 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;</span></p><p class="c17"><span class="c0">…............................</span></p><p class="c17"><span class="c0">00470 </span><span class="c0 c6">&nbsp;/// TableGen will synthesize missing RC sub-classes.</span><span class="c0"><br>00471 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a4031f241d28a0a91266e6d83de2758c7">00472</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a4031f241d28a0a91266e6d83de2758c7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a4031f241d28a0a91266e6d83de2758c7">getSubClassWithSubReg</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*RC, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Idx)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00473 &nbsp; &nbsp; assert(Idx == 0 &amp;&amp; </span><span class="c0 c14">"Target has no sub-registers"</span><span class="c0">);<br>00474 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;RC;<br>00475 &nbsp; }</span></p><p class="c17"><span class="c0">…...........................</span></p><p class="c17"><span class="c0">00527 &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">*<br>00528 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#ac0794c3a256229574adc89d3aff09c08">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#ac0794c3a256229574adc89d3aff09c08">getCommonSuperRegClass</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*RCA, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;SubA,<br>00529 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*RCB, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;SubB,<br>00530 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;&amp;PreA, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;&amp;PreB) </span><span class="c0 c9">const</span><span class="c0">;<br>00531</span></p><p class="c17"><span class="c0">…...........................</span></p><p class="c17"><span class="c0">00598 </span><span class="c0 c6">&nbsp;/// Get the weight in units of pressure for this register class.</span><span class="c0"><br>00599 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1RegClassWeight.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1RegClassWeight.html">RegClassWeight</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a55dc7cf067f4fdc07a902ca0f3e3a87d">getRegClassWeight</a></span><span class="c0">(<br>00600 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*RC) </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br>00601 <br>00602 </span><span class="c0 c6">&nbsp;/// Get the weight in units of pressure for this register unit.</span><span class="c0"><br>00603 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#ab1d52ba3366d25ff35ad6687bc5c0afd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#ab1d52ba3366d25ff35ad6687bc5c0afd">getRegUnitWeight</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;RegUnit) </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br>00604 <br>00605 </span><span class="c0 c6">&nbsp;/// Get the number of dimensions of register pressure.</span><span class="c0"><br>00606 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a0f68bd50142729a84434a02436bb7b46">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a0f68bd50142729a84434a02436bb7b46">getNumRegPressureSets</a></span><span class="c0">() </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br>00607 <br>00608 </span><span class="c0 c6">&nbsp;/// Get the name of this register unit pressure set.</span><span class="c0"><br>00609 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a3c2bb9e82e28af11ea7a7deaef40aea4">getRegPressureSetName</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Idx) </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;</span></p><p class="c17"><span class="c0">…..........................</span></p><p class="c17"><span class="c0">00644 </span><span class="c0 c6">&nbsp;/// avoidWriteAfterWrite - Return true if the register allocator should avoid</span><span class="c0"><br>00645 </span><span class="c0 c6">&nbsp;/// writing a register from RC in two consecutive instructions.</span><span class="c0"><br>00646 </span><span class="c0 c6">&nbsp;/// This can avoid pipeline stalls on certain architectures.</span><span class="c0"><br>00647 </span><span class="c0 c6">&nbsp;/// It does cause increased register pressure, though.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a5efb4d5eed06061710fbaaa7a3f64e4d">00648</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a5efb4d5eed06061710fbaaa7a3f64e4d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a5efb4d5eed06061710fbaaa7a3f64e4d">avoidWriteAfterWrite</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*RC)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00649 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>00650 &nbsp; }<br>00651 <br>00652 </span><span class="c0 c6">&nbsp;/// UpdateRegAllocHint - A callback to allow target a chance to update</span><span class="c0"><br>00653 </span><span class="c0 c6">&nbsp;/// register allocation hints when a register is "changed" (e.g. coalesced)</span><span class="c0"><br>00654 </span><span class="c0 c6">&nbsp;/// to another register. e.g. On ARM, some virtual registers should target</span><span class="c0"><br>00655 </span><span class="c0 c6">&nbsp;/// register pairs, if one of pair is coalesced to another register, the</span><span class="c0"><br>00656 </span><span class="c0 c6">&nbsp;/// allocation hint of the other half of the pair should be changed to point</span><span class="c0"><br>00657 </span><span class="c0 c6">&nbsp;/// to the new register.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a092ed193726c24f9a70322dabb3c4fbc">00658</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a092ed193726c24f9a70322dabb3c4fbc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a092ed193726c24f9a70322dabb3c4fbc">UpdateRegAllocHint</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;NewReg,<br>00659 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00660 &nbsp; &nbsp; </span><span class="c0 c6">// Do nothing.</span><span class="c0"><br>00661 &nbsp; }</span></p><p class="c17"><span class="c0">…......................</span></p><p class="c17"><span class="c0">00780 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a2a4c228322f39803f16b2f49d18b0efe">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a2a4c228322f39803f16b2f49d18b0efe">getFrameRegister</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF) </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;</span></p><p class="c17"><span class="c0">…......................</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c20"><span>The functionalities/purposes of the methods defined in</span><span>&nbsp;the above code snapshots of the </span><span class="c10 c5">TargetRegisterInfo</span><span class="c11 c16">&nbsp;class can be summarized as follows:</span></p><ol class="c55" start="1"><li class="c32 c20"><span class="c11 c16">unique or common register properties/attributes (e.g., registers with certain common properties can be grouped into one register class and can be specified using tablegen tool),</span></li><li class="c32 c20"><span class="c11 c16">interactions among registers (e.g., </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a75096e65ed07db7414979b43b30037f7">isSubRegister</a></span><span class="c11 c16">()</span><span class="c11 c16">),</span></li></ol><p class="c15"><span class="c16"></span></p><p class="c20"><span>How does tablegen generate a set of target-specific registers and register classes? &nbsp;In addition to what’s generated by the tablegen, what other hand code is needed? &nbsp;Working on it...</span></p><p class="c15"><span></span></p><p class="c20"><span>The </span><span class="c0">TargetRegisterInfo &nbsp;</span><span>class is typically inherited by a target-specific register information class, which may be generated automatically by TableGen. &nbsp;Take the X86 backend for example. &nbsp;The files </span><span>X86GenRegisterInfo.h.inc and X86GenRegisterInfo.inc</span><span>&nbsp;are automatically generated by the TableGen from X86RegisterInfo.td file (</span><span class="c38">not sure this is the only file that X86GenRegisterInfo.h.inc and X86GenRegisterInfo.inc depend on</span><span>). &nbsp;An example of X86GenRegisterInfo.h.inc file can be found at </span><span class="c37"><a class="c1" href="http://legup.eecg.utoronto.ca/doxygen/X86GenRegisterInfo_8h_8inc-source.html">http://legup.eecg.utoronto.ca/doxygen/X86GenRegisterInfo_8h_8inc-source.html</a></span><span>&nbsp;and it contains the following code fragment:</span></p><p class="c15"><span></span></p><p class="c17"><span class="c0">00014 </span><span class="c0 c9">struct</span><span class="c0 c9"><a class="c1" href="http://legup.eecg.utoronto.ca/doxygen/classX86GenRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://legup.eecg.utoronto.ca/doxygen/classX86GenRegisterInfo.html">X86GenRegisterInfo</a></span><span class="c0">&nbsp;: </span><span class="c0 c9">public</span><span class="c0">&nbsp;TargetRegisterInfo {<br>00015 &nbsp; </span><span class="c0 c9">explicit</span><span class="c0"><a class="c1" href="http://legup.eecg.utoronto.ca/doxygen/classX86GenRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://legup.eecg.utoronto.ca/doxygen/classX86GenRegisterInfo.html">X86GenRegisterInfo</a></span><span class="c0">(</span><span class="c0 c8">int</span><span class="c0">&nbsp;CallFrameSetupOpcode = -1, </span><span class="c0 c8">int</span><span class="c0">&nbsp;CallFrameDestroyOpcode = -1);<br>00016 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">int</span><span class="c0">&nbsp;getDwarfRegNumFull(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;RegNum, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Flavour) </span><span class="c0 c9">const</span><span class="c0">;<br>00017 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">int</span><span class="c0">&nbsp;getDwarfRegNum(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;RegNum, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;isEH) </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br>00018 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;needsStackRealignment(</span><span class="c0 c9">const</span><span class="c0">&nbsp;MachineFunction &amp;)</span><span class="c0 c9">&nbsp;const</span><span class="c0"><br>00019 </span><span class="c0 c9">&nbsp; &nbsp; </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">; }<br>00020 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;getSubReg(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;RegNo, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Index) </span><span class="c0 c9">const</span><span class="c0">;<br>00021 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;getSubRegIndex(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;RegNo, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;SubRegNo) </span><span class="c0 c9">const</span><span class="c0">;<br>00022 };</span></p><p class="c15"><span></span></p><p class="c20"><span>The file X86GenRegisterInfo.inc looks something like this (example available at </span><span class="c37"><a class="c1" href="http://legup.eecg.utoronto.ca/doxygen/X86GenRegisterInfo_8inc-source.html">http://legup.eecg.utoronto.ca/doxygen/X86GenRegisterInfo_8inc-source.html</a></span><span>&nbsp;): </span></p><p class="c15"><span></span></p><p class="c17"><span class="c0">00012 &nbsp; </span><span class="c0 c6">// CCR Register Class...</span><span class="c0"><br>00013 &nbsp; </span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;CCR[] = {<br>00014 &nbsp; &nbsp; X86::EFLAGS, <br>00015 &nbsp; };<br>00016 <br>00017 &nbsp; </span><span class="c0 c6">// CONTROL_REG_32 Register Class...</span><span class="c0"><br>00018 &nbsp; </span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;CONTROL_REG_32[] = {<br>00019 &nbsp; &nbsp; X86::ECR0, X86::ECR1, X86::ECR2, X86::ECR3, X86::ECR4, X86::ECR5, X86::ECR6, X86::ECR7, <br>00020 &nbsp; };<br>00021 <br>00022 &nbsp; </span><span class="c0 c6">// CONTROL_REG_64 Register Class...</span><span class="c0"><br>00023 &nbsp; </span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;CONTROL_REG_64[] = {<br>00024 &nbsp; &nbsp; X86::RCR0, X86::RCR1, X86::RCR2, X86::RCR3, X86::RCR4, X86::RCR5, X86::RCR6, X86::RCR7, X86::RCR8, <br>00025 &nbsp; };</span></p><p class="c20"><span class="c0">…...............................</span></p><p class="c17"><span class="c0">CCRClass &nbsp;CCRRegClass;<br>00326 &nbsp; CONTROL_REG_32Class CONTROL_REG_32RegClass;<br>00327 &nbsp; CONTROL_REG_64Class CONTROL_REG_64RegClass;<br>00328 &nbsp; DEBUG_REGClass &nbsp;DEBUG_REGRegClass;<br>00329 &nbsp; FR32Class FR32RegClass;<br>00330 &nbsp; FR64Class FR64RegClass;<br>00331 &nbsp; GR16Class GR16RegClass;</span></p><p class="c20"><span class="c5">…..................................</span></p><p class="c17"><span class="c0">00357 &nbsp; </span><span class="c0 c6">// CCR Sub-register Classes...</span><span class="c0"><br>00358 &nbsp; </span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;TargetRegisterClass* </span><span class="c0 c9">const</span><span class="c0">&nbsp;CCRSubRegClasses[] = {<br>00359 &nbsp; &nbsp; NULL<br>00360 &nbsp; };<br>00361 <br>00362 &nbsp; </span><span class="c0 c6">// CONTROL_REG_32 Sub-register Classes...</span><span class="c0"><br>00363 &nbsp; </span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;TargetRegisterClass* </span><span class="c0 c9">const</span><span class="c0">&nbsp;CONTROL_REG_32SubRegClasses[] = {<br>00364 &nbsp; &nbsp; NULL<br>00365 &nbsp; };</span></p><p class="c20"><span class="c5">…................................</span></p><p class="c17"><span class="c0">01345 </span><span class="c0 c9">namespace </span><span class="c0">{<br>01346 &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;TargetRegisterClass* </span><span class="c0 c9">const</span><span class="c0">&nbsp;RegisterClasses[] = {<br>01347 &nbsp; &nbsp; &amp;X86::CCRRegClass,<br>01348 &nbsp; &nbsp; &amp;X86::CONTROL_REG_32RegClass,<br>01349 &nbsp; &nbsp; &amp;X86::CONTROL_REG_64RegClass,<br>01350 &nbsp; &nbsp; &amp;X86::DEBUG_REGRegClass,<br>01351 &nbsp; &nbsp; &amp;X86::FR32RegClass,<br>01352 &nbsp; &nbsp; &amp;X86::FR64RegClass,<br>01353 &nbsp; &nbsp; &amp;X86::GR16RegClass,<br>01354 &nbsp; &nbsp; &amp;X86::GR16_ABCDRegClass,</span></p><p class="c20"><span class="c5">…..........................</span></p><p class="c17"><span class="c0">04089 </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;X86GenRegisterInfo::getSubReg(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;RegNo, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Index)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>04090 &nbsp; </span><span class="c0 c7">switch</span><span class="c0">&nbsp;(RegNo) {<br>04091 &nbsp; </span><span class="c0 c7">default</span><span class="c0">:<br>04092 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;0;<br>04093 &nbsp; </span><span class="c0 c7">case</span><span class="c0">&nbsp;X86::R11D:<br>04094 &nbsp; &nbsp; </span><span class="c0 c7">switch</span><span class="c0">&nbsp;(Index) {<br>04095 &nbsp; &nbsp; </span><span class="c0 c7">default</span><span class="c0">: </span><span class="c0 c7">return</span><span class="c0">&nbsp;0;<br>04096 &nbsp; &nbsp; </span><span class="c0 c7">case</span><span class="c0">&nbsp;1: </span><span class="c0 c7">return</span><span class="c0">&nbsp;X86::R11B;<br>04097 &nbsp; &nbsp; </span><span class="c0 c7">case</span><span class="c0">&nbsp;3: </span><span class="c0 c7">return</span><span class="c0">&nbsp;X86::R11W;<br>04098 &nbsp; &nbsp; };<br>04099 &nbsp; &nbsp; </span><span class="c0 c7">break</span><span class="c0">;<br>04100 &nbsp; </span><span class="c0 c7">case</span><span class="c0">&nbsp;X86::AX:<br>04101 &nbsp; &nbsp; </span><span class="c0 c7">switch</span><span class="c0">&nbsp;(Index) {<br>04102 &nbsp; &nbsp; </span><span class="c0 c7">default</span><span class="c0">: </span><span class="c0 c7">return</span><span class="c0">&nbsp;0;<br>04103 &nbsp; &nbsp; </span><span class="c0 c7">case</span><span class="c0">&nbsp;1: </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://legup.eecg.utoronto.ca/doxygen/namespacellvm_1_1ARMCC.html#c8391dd6b8083baa870dee5142ff22b68b2ef77967dee1220cc6ee5aee595e11">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://legup.eecg.utoronto.ca/doxygen/namespacellvm_1_1ARMCC.html#c8391dd6b8083baa870dee5142ff22b68b2ef77967dee1220cc6ee5aee595e11">X86::AL</a></span><span class="c0">;<br>04104 &nbsp; &nbsp; </span><span class="c0 c7">case</span><span class="c0">&nbsp;2: </span><span class="c0 c7">return</span><span class="c0">&nbsp;X86::AH;<br>04105 &nbsp; &nbsp; };<br>04106 &nbsp; &nbsp; </span><span class="c0 c7">break</span><span class="c0">;</span></p><p class="c15"><span></span></p><p class="c20"><span>The full X86GenRegisterInfo.inc file is very long and contains a large majority of relevant X86 register information. </span></p><p class="c15"><span></span></p><p class="c20"><span>We should note that the automatically generated files and classes do not provide all register-relevant functionalities and information for a target-specific backend (there are some virtual functions defined in the </span><span class="c0">TargetRegisterInfo </span><span>class not implemented in the automatically generated class). &nbsp;Thus we need to manually implement the rest of the functions to retrieve certain register information, for example </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#ae53a385b86237b961ccc18a8701ae588">getCalleeSavedRegs</a></span><span>() and</span><span>&nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a2a4c228322f39803f16b2f49d18b0efe">getFrameRegister</a></span><span>(), etc.</span></p><p class="c20"><span>For X86, &nbsp;the X86RegisterInfo.cpp and X86RegisterInfo.h defines a class named </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html">X86RegisterInfo</a></span><span>, which inherits the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classX86GenRegisterInfo.html">X86GenRegisterInfo</a></span><span class="c5 c11">&nbsp;class:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html">00027</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html">X86RegisterInfo</a></span><span class="c0">&nbsp;: </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classX86GenRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classX86GenRegisterInfo.html">X86GenRegisterInfo</a></span><span class="c0">&nbsp;{<br>00028 </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a1b86e05882359754b13f23fb1c465f35">00029</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86TargetMachine.html">X86TargetMachine</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a1b86e05882359754b13f23fb1c465f35">TM</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a0f859f86b89a2690ab2ff685c9e6a2be">00030</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a0f859f86b89a2690ab2ff685c9e6a2be">TII</a></span><span class="c0">;<br>00032 </span><span class="c0 c9">private</span><span class="c0">:<br>00033 </span><span class="c0 c6">&nbsp;/// Is64Bit - Is the target 64-bits.</span><span class="c0"><br>00034 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00035 &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;Is64Bit;<br>00036 <br>00037 </span><span class="c0 c6">&nbsp;/// IsWin64 - Is the target on of win64 flavours</span><span class="c0"><br>00038 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00039 &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;IsWin64;<br>00041 </span><span class="c0 c6">&nbsp;/// SlotSize - Stack slot size in bytes.</span><span class="c0"><br>00043 &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;SlotSize;<br>00045 </span><span class="c0 c6">&nbsp;/// StackPtr - X86 physical register used as stack ptr.</span><span class="c0"><br>00047 &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;StackPtr;<br>00049 </span><span class="c0 c6">&nbsp;/// FramePtr - X86 physical register used as frame ptr.</span><span class="c0"><br>00051 &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;FramePtr;<br>00053 </span><span class="c0 c6">&nbsp;/// BasePtr - X86 physical register used as a base ptr in complex stack</span><span class="c0"><br>00054 </span><span class="c0 c6">&nbsp;/// frames. I.e., when we need a 3rd base, not just SP and FP, due to</span><span class="c0"><br>00055 </span><span class="c0 c6">&nbsp;/// variable size stack objects.</span><span class="c0"><br>00056 &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;BasePtr;<br>00058 </span><span class="c0 c9">public</span><span class="c0">:<br>00059 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#abc8c5a0831479cfd59cc78f4d356508f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#abc8c5a0831479cfd59cc78f4d356508f">X86RegisterInfo</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86TargetMachine.html">X86TargetMachine</a></span><span class="c0">&nbsp;&amp;tm, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c0">&nbsp;&amp;tii);<br>00061 &nbsp; </span><span class="c0 c6">// FIXME: This should be tablegen'd like getDwarfRegNum is</span><span class="c0"><br>00062 &nbsp; </span><span class="c0 c8">int</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a675ed0a9a4d37241361b48e1fa60be64">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a675ed0a9a4d37241361b48e1fa60be64">getSEHRegNum</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i) </span><span class="c0 c9">const</span><span class="c0">;<br>00064 </span><span class="c0 c6">&nbsp;/// getCompactUnwindRegNum - This function maps the register to the number for</span><span class="c0"><br>00065 </span><span class="c0 c6">&nbsp;/// compact unwind encoding. Return -1 if the register isn't valid.</span><span class="c0"><br>00066 &nbsp;</span><span class="c0 c8">int</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#affa8b511ff1ff970977ca7be3c650966">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#affa8b511ff1ff970977ca7be3c650966">getCompactUnwindRegNum</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;RegNum, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;isEH) </span><span class="c0 c9">const</span><span class="c0">;<br>00068 </span><span class="c0 c6">&nbsp;/// Code Generation virtual methods...</span><span class="c0"><br>00070 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#ae23ed304046e93009e34582ee44cfe75">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#ae23ed304046e93009e34582ee44cfe75">trackLivenessAfterRegAlloc</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF) </span><span class="c0 c9">const</span><span class="c0">;<br>00072 </span><span class="c0 c6">&nbsp;/// getMatchingSuperRegClass - Return a subclass of the specified register</span><span class="c0"><br>00073 </span><span class="c0 c6">&nbsp;/// class A so that each register in it has a sub-register of the</span><span class="c0"><br>00074 </span><span class="c0 c6">&nbsp;/// specified sub-register index which is in the specified register class B.</span><span class="c0"><br>00075 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*<br>00076 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#ac8636fcdccbcd87e843d6bd3c678ca02">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#ac8636fcdccbcd87e843d6bd3c678ca02">getMatchingSuperRegClass</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a></span><span class="c0">,<br>00077 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*B, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Idx) </span><span class="c0 c9">const</span><span class="c0">;<br>00079 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*<br>00080 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a6222a3f2ecbdb0dcfa19c89dac85b7ec">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a6222a3f2ecbdb0dcfa19c89dac85b7ec">getSubClassWithSubReg</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*RC, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Idx) </span><span class="c0 c9">const</span><span class="c0">;<br>00082 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">*<br>00083 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a1d1f6d27909eb69ed1d383fd256d771c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a1d1f6d27909eb69ed1d383fd256d771c">getLargestLegalSuperClass</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*RC) </span><span class="c0 c9">const</span><span class="c0">;<br>00085 </span><span class="c0 c6">&nbsp;/// getPointerRegClass - Returns a TargetRegisterClass used for pointer</span><span class="c0"><br>00086 </span><span class="c0 c6">&nbsp;/// values.</span><span class="c0"><br>00087 &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*<br>00088 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#ad47188ac8ee814ad77920a23d4c052b6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#ad47188ac8ee814ad77920a23d4c052b6">getPointerRegClass</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF, </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a></span><span class="c0">&nbsp;= 0) </span><span class="c0 c9">const</span><span class="c0">;<br>00090 </span><span class="c0 c6">&nbsp;/// getCrossCopyRegClass - Returns a legal register class to copy a register</span><span class="c0"><br>00091 </span><span class="c0 c6">&nbsp;/// in the specified class to or from. Returns NULL if it is possible to copy</span><span class="c0"><br>00092 </span><span class="c0 c6">&nbsp;/// between a two registers of the specified class.</span><span class="c0"><br>00093 &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*<br>00094 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a12cda6f593a356d19b63bc17a6c44546">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a12cda6f593a356d19b63bc17a6c44546">getCrossCopyRegClass</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*RC) </span><span class="c0 c9">const</span><span class="c0">;<br>00096 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a490e6885b8507177b41b460cb7acb407">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a490e6885b8507177b41b460cb7acb407">getRegPressureLimit</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*RC,<br>00097 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF) </span><span class="c0 c9">const</span><span class="c0">;<br>00099 </span><span class="c0 c6">&nbsp;/// getCalleeSavedRegs - Return a null-terminated list of all of the</span><span class="c0"><br>00100 </span><span class="c0 c6">&nbsp;/// callee-save registers on this target.</span><span class="c0"><br>00101 &nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;uint16_t *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#af0f22e6e75f5b9b47817b53104ca5756">getCalleeSavedRegs</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">* MF = 0) </span><span class="c0 c9">const</span><span class="c0">;<br>00102 &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;uint32_t *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#ad39791a91042ed090f4305e50840088c">getCallPreservedMask</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">CallingConv::ID</a></span><span class="c0">) </span><span class="c0 c9">const</span><span class="c0">;<br>00103 &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;uint32_t *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#ab990d9395732c30ec2fcfc1f241df70e">getNoPreservedMask</a></span><span class="c0">() </span><span class="c0 c9">const</span><span class="c0">;<br>00109 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BitVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BitVector.html">BitVector</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a3e91b7ec271ad817c34a0a842d0f831e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a3e91b7ec271ad817c34a0a842d0f831e">getReservedRegs</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF) </span><span class="c0 c9">const</span><span class="c0">;<br>00111 &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#ad37a65804edd5f913012ea82e22cca33">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#ad37a65804edd5f913012ea82e22cca33">hasBasePointer</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF) </span><span class="c0 c9">const</span><span class="c0">;<br>00113 &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a31160831f9ce9c42ac7f88783b3d1541">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a31160831f9ce9c42ac7f88783b3d1541">canRealignStack</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF) </span><span class="c0 c9">const</span><span class="c0">;<br>00115 &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#acfd0722e4669be2f7e16059679406d9f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#acfd0722e4669be2f7e16059679406d9f">needsStackRealignment</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF) </span><span class="c0 c9">const</span><span class="c0">;<br>00117 &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a0645d2e7802fed51a0f6fc75d6507711">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a0645d2e7802fed51a0f6fc75d6507711">hasReservedSpillSlot</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF, </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">,<br>00118 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">int</span><span class="c0">&nbsp;&amp;FrameIdx) </span><span class="c0 c9">const</span><span class="c0">;<br>00120 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#acf3a96e7fba668a282f1ff3a01ac4cb8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#acf3a96e7fba668a282f1ff3a01ac4cb8">eliminateCallFramePseudoInstr</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF,<br>00121 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;&amp;MBB,<br>00122 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">) </span><span class="c0 c9">const</span><span class="c0">;<br>00123 <br>00124 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a3e0e81c1ad00e52261b223b36ce742f6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a3e0e81c1ad00e52261b223b36ce742f6">eliminateFrameIndex</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">,<br>00125 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">int</span><span class="c0">&nbsp;SPAdj,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegScavenger.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegScavenger.html">RegScavenger</a></span><span class="c0">&nbsp;*RS = NULL) </span><span class="c0 c9">const</span><span class="c0">;<br>00127 &nbsp; </span><span class="c0 c6">// Debug information queries.</span><span class="c0"><br>00128 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a2883bb621245229de23a6396b1ef81b7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a2883bb621245229de23a6396b1ef81b7">getFrameRegister</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF) </span><span class="c0 c9">const</span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#ac26e69b92e7ee67cfe9766db55b221da">00129</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#ac26e69b92e7ee67cfe9766db55b221da">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#ac26e69b92e7ee67cfe9766db55b221da">getStackRegister</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;StackPtr; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#aa9f703a288ef91efae26a538d96037d6">00130</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#aa9f703a288ef91efae26a538d96037d6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#aa9f703a288ef91efae26a538d96037d6">getBaseRegister</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;BasePtr; }<br>00131 &nbsp; </span><span class="c0 c6">// FIXME: Move to FrameInfok</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a52f78fb379677e9270168daf72a808bd">00132</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a52f78fb379677e9270168daf72a808bd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#a52f78fb379677e9270168daf72a808bd">getSlotSize</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;SlotSize; }<br>00134 &nbsp; </span><span class="c0 c6">// Exception handling queries.</span><span class="c0"><br>00135 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#aa82c576da69c4f388ac79326c1f4e3af">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#aa82c576da69c4f388ac79326c1f4e3af">getEHExceptionRegister</a></span><span class="c0">() </span><span class="c0 c9">const</span><span class="c0">;<br>00136 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#aa663d15e7f870eb72f79bc71c8fdee6e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86RegisterInfo.html#aa663d15e7f870eb72f79bc71c8fdee6e">getEHHandlerRegister</a></span><span class="c0">() </span><span class="c0 c9">const</span><span class="c0">;<br>00137 };</span></p><p class="c15"><span></span></p><p class="c20"><span>From the above discussion we can see that the inheritance graph for the register relevant classes has the following structure (due to the fact that **GenRegisterInfo class is automatically generated by TableGen, the inheritance graph in the LLVM document does not include target-specific register information classes. &nbsp; ** represents a target name):</span></p><p class="c15"><span></span></p><p class="c15"><span></span></p><p class="c20"><img height="204" src="./Notes on LLVM 3 (Target Independent Code Generator)_files/image07.png" width="417"></p><p class="c15"><span></span></p><p class="c15"><span></span></p><p class="c20"><span class="c19">Part 7.2.6</span><span class="c19 c16">&nbsp;TargetInstrInfo</span><span class="c19">&nbsp;</span><span class="c19 c16">Class </span></p><p class="c15"><span class="c10"></span></p><p class="c20"><span class="c10">This subsection starts by high-level descriptions from the LLVM document regarding an overall summary of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c11 c16">&nbsp;</span><span class="c16">class, &nbsp;basic steps involved for providing target-specific instruction information and how to implement/use a concrete subclass of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c16">. All these topics are highly related to the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c11 c16">&nbsp;</span><span class="c16">class：</span></p><h3 class="c59 c20"><a name="h.c19nevcbad7z"></a><span class="c37 c43 c11"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id17">The </a></span><span class="c30 c24"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id17">TargetInstrInfo</a></span><span class="c37 c43 c11"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id17">&nbsp;class</a></span></h3><p class="c17 c35"><span class="c16"></span></p><p class="c17"><span class="c16">The</span><span class="c11 c16">&nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c11 c16">&nbsp;</span><span class="c16">class is used to describe the machine instructions supported by the target. It is essentially an array of</span><span class="c11 c16">&nbsp;</span><span class="c10 c5">TargetInstrDescriptor</span><span class="c11 c16">&nbsp;</span><span class="c16">objects, each of which describes one instruction the target supports. Descriptors define things like the mnemonic for the opcode, the number of operands, the list of implicit register uses and defs, whether the instruction has certain target-independent properties (accesses memory, is commutable, etc), and holds any target-specific flags.</span></p><p class="c17 c35"><span class="c16"></span></p><h3 class="c20 c59"><a name="h.k1w4skequh9l"></a><span class="c37 c43 c11"><a class="c1" href="http://llvm.org/docs/WritingAnLLVMBackend.html#id6">Providing Target-specific Instruction Information</a></span></h3><p class="c17 c35"><span class="c16"></span></p><p class="c17 c35"><span class="c16"></span></p><ol class="c55" start="1"><li class="c32 c20"><span class="c11 c16">Describe the instruction set of the target. Use TableGen to generate code for target-specific instructions from target-specific versions of </span><span class="c10 c5">TargetInstrFormats.td</span><span class="c11 c16">&nbsp;and </span><span class="c10 c5">TargetInstrInfo.td</span><span class="c11 c16">. You should write additional code for a subclass of the </span><span class="c10 c5">TargetInstrInfo</span><span class="c11 c16">&nbsp;class to represent machine instructions supported by the target machine.</span></li><li class="c32 c20"><span class="c11 c16">Describe the selection and conversion of the LLVM IR from a Directed Acyclic Graph (DAG) representation of instructions to native target-specific instructions. Use TableGen to generate code that matches patterns and selects instructions based on additional information in a target-specific version of </span><span class="c10 c5">TargetInstrInfo.td</span><span class="c11 c16">. Write code for </span><span class="c10 c5">XXXISelDAGToDAG.cpp</span><span class="c11 c16">, where </span><span class="c10 c5">XXX</span><span class="c11 c16">identifies the specific target, to perform pattern matching and DAG-to-DAG instruction selection.</span></li></ol><h3 class="c45 c20"><a name="h.ueqj73dvmzl9"></a><span class="c37 c43 c11"><a class="c1" href="http://llvm.org/docs/WritingAnLLVMBackend.html#id17">Implement a subclass of </a></span><span class="c30 c24"><a class="c1" href="http://llvm.org/docs/WritingAnLLVMBackend.html#id17">TargetInstrInfo</a></span></h3><p class="c20"><span class="c11 c16">The final step is to hand code portions of </span><span class="c10 c5">XXXInstrInfo</span><span class="c11 c16">, which implements the interface described in </span><span class="c10 c5">TargetInstrInfo.h</span><span class="c11 c16">&nbsp;(see </span><span class="c29 c41 c11 c16"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#targetinstrinfo">The TargetInstrInfo class</a></span><span class="c11 c16">). These functions return </span><span class="c10 c5">0</span><span class="c11 c16">&nbsp;or a Boolean or they assert, unless overridden. Here’s a list of functions that are overridden for the SPARC implementation in </span><span class="c10 c5">SparcInstrInfo.cpp</span><span class="c11 c16">:</span></p><ol class="c55" start="1"><li class="c32 c20"><span class="c10 c5">isLoadFromStackSlot</span><span class="c11 c16">&nbsp;— If the specified machine instruction is a direct load from a stack slot, return the register number of the destination and the </span><span class="c10 c5">FrameIndex</span><span class="c11 c16">&nbsp;of the stack slot.</span></li><li class="c32 c20"><span class="c10 c5">isStoreToStackSlot</span><span class="c11 c16">&nbsp;— If the specified machine instruction is a direct store to a stack slot, return the register number of the destination and the </span><span class="c10 c5">FrameIndex</span><span class="c11 c16">&nbsp;of the stack slot.</span></li><li class="c32 c20"><span class="c10 c5">copyPhysReg</span><span class="c11 c16">&nbsp;— Copy values between a pair of physical registers.</span></li><li class="c32 c20"><span class="c10 c5">storeRegToStackSlot</span><span class="c11 c16">&nbsp;— Store a register value to a stack slot.</span></li><li class="c32 c20"><span class="c10 c5">loadRegFromStackSlot</span><span class="c11 c16">&nbsp;— Load a register value from a stack slot.</span></li><li class="c32 c20"><span class="c10 c5">storeRegToAddr</span><span class="c11 c16">&nbsp;— Store a register value to memory.</span></li><li class="c32 c20"><span class="c10 c5">loadRegFromAddr</span><span class="c11 c16">&nbsp;— Load a register value from memory.</span></li><li class="c32 c20"><span class="c10 c5">foldMemoryOperand</span><span class="c11 c16">&nbsp;— Attempt to combine instructions of any load or store instruction for the specified operand(s).</span></li></ol><p class="c15"><span class="c16"></span></p><p class="c44 c20"><span class="c37 c43 c11"><a class="c1" href="http://llvm.org/docs/WritingAnLLVMBackend.html#id17">Example Uses</a></span></p><p class="c17"><span class="c10 c5">TargetInstrInfo::get(opcode)::ImplicitDefs</span><span class="c11 c16">, </span><span class="c16">where </span><span class="c5 c16">opcode</span><span class="c16">&nbsp;is the opcode of the target instruction, can be used to check which registers are implicitly defined by an instruction.</span></p><p class="c15"><span class="c10"></span></p><p class="c20"><span class="c11 c16">To insert a store instruction, use </span><span class="c10 c5">TargetInstrInfo::storeRegToStackSlot(...)</span><span class="c11 c16">, and to insert a load instruction, use </span><span class="c10 c5">TargetInstrInfo::loadRegFromStackSlot</span><span class="c11 c16">.</span></p><p class="c15"><span class="c10"></span></p><p class="c20"><span class="c10">After going through the above official documents we should have gained a high-level understanding of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c11 c16">&nbsp;</span><span class="c16">class. Now let’s move on to its inheritance and source code study.</span></p><p class="c15"><span class="c10"></span></p><p class="c20"><span class="c10">The inheritance graph of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c11 c16">&nbsp;</span><span class="c16">class </span><span class="c10">is shown as follows (</span><span class="c10 c57">note that the following the figure does not show the entire inheritance due to the same reason mentioned in the end of part 7.2.5. &nbsp;For example, a target-specific instruction class</span><span class="c10">&nbsp;</span><span class="c0 c4">X86InstrInfo </span><span class="c10 c57">inherits </span><span class="c0 c4">X86GenInstrInfo,</span><span class="c10">&nbsp;</span><span class="c10 c57">which is an automatically generated class that is a subclass of the</span><span class="c10">&nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c10">&nbsp;</span><span class="c10 c57">class. The full inheritance structure should have 4 hierarchies and look like the one in the end of part 7.2.5)</span></p><p class="c20"><img height="117" src="./Notes on LLVM 3 (Target Independent Code Generator)_files/image03.png" width="155"></p><p class="c15"><span class="c10"></span></p><p class="c17"><span class="c10">The </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">MCInstrInfo</a></span><span class="c10">&nbsp;class is simple and just defines the interface for describing machine instruction set. The source code of it (this class only has a header file, no cpp file) is short: </span></p><p class="c17 c35"><span class="c10"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">00026</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">MCInstrInfo</a></span><span class="c0">&nbsp;{<br>00027 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">MCInstrDesc</a></span><span class="c0">&nbsp;*Desc; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Raw array to allow static init'n</span><span class="c0"><br>00028 &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;*InstrNameIndices; </span><span class="c0 c6">// Array for name indices in InstrNameData</span><span class="c0"><br>00029 &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;*InstrNameData; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Instruction name string pool</span><span class="c0"><br>00030 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;NumOpcodes; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Number of entries in the desc array</span><span class="c0"><br>00031 <br>00032 </span><span class="c0 c9">public</span><span class="c0">:<br>00033 </span><span class="c0 c6">&nbsp;/// InitMCInstrInfo - Initialize MCInstrInfo, called by TableGen</span><span class="c0"><br>00034 </span><span class="c0 c6">&nbsp;/// auto-generated routines. *DO NOT USE*.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html#a78d1b892407bfed2a2907c47c82dbfd1">00035</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html#a78d1b892407bfed2a2907c47c82dbfd1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html#a78d1b892407bfed2a2907c47c82dbfd1">InitMCInstrInfo</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">MCInstrDesc</a></span><span class="c0">&nbsp;*D, </span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;*NI, </span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;*ND,<br>00036 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;NO) {<br>00037 &nbsp; &nbsp; Desc = D;<br>00038 &nbsp; &nbsp; InstrNameIndices = NI;<br>00039 &nbsp; &nbsp; InstrNameData = ND;<br>00040 &nbsp; &nbsp; NumOpcodes = NO;<br>00041 &nbsp; }<br>00042 <br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html#a112fcc656a94cfd45afbd3eb05ada95a">00043</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html#a112fcc656a94cfd45afbd3eb05ada95a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html#a112fcc656a94cfd45afbd3eb05ada95a">getNumOpcodes</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;NumOpcodes; }<br>00044 <br>00045 </span><span class="c0 c6">&nbsp;/// get - Return the machine instruction descriptor that corresponds to the</span><span class="c0"><br>00046 </span><span class="c0 c6">&nbsp;/// specified instruction opcode.</span><span class="c0"><br>00047 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html#ab16f5a81fccfe4b7f645ba5a74ffad02">00048</a></span><span class="c0">&nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">MCInstrDesc</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c9">get</span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opcode) </span><span class="c0 c9">const</span><span class="c0">&nbsp;{<br>00049 &nbsp; &nbsp; assert(Opcode &lt; NumOpcodes &amp;&amp; </span><span class="c0 c14">"Invalid opcode!"</span><span class="c0">);<br>00050 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;Desc[Opcode];<br>00051 &nbsp; }<br>00052 <br>00053 </span><span class="c0 c6">&nbsp;/// getName - Returns the name for the instructions with the given opcode.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html#accfb55370b28fdf347aafe7643e60e44">00054</a></span><span class="c0">&nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html#accfb55370b28fdf347aafe7643e60e44">getName</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opcode)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00055 &nbsp; &nbsp; assert(Opcode &lt; NumOpcodes &amp;&amp; </span><span class="c0 c14">"Invalid opcode!"</span><span class="c0">);<br>00056 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;&amp;InstrNameData[InstrNameIndices[Opcode]];<br>00057 &nbsp; }<br>00058 };</span></p><p class="c17"><span class="c0">…..................................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a461d623da8ede72dea777c00e12dc2a5">00368</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a461d623da8ede72dea777c00e12dc2a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a461d623da8ede72dea777c00e12dc2a5">isCommutable</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00369 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">Flags</a></span><span class="c0">&nbsp;&amp; (1 &lt;&lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea3ef69fec39e2c626336993c9774dc406">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea3ef69fec39e2c626336993c9774dc406">MCID::Commutable</a></span><span class="c0">);<br>00370 &nbsp; }</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c0">….............................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a8e39904e952d124093c07d34c1667270">00386</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a8e39904e952d124093c07d34c1667270">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a8e39904e952d124093c07d34c1667270">isConvertibleTo3Addr</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00387 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">Flags</a></span><span class="c0">&nbsp;&amp; (1 &lt;&lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea4dc2f8bf7dec9f3153e6aed4db5cb010">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea4dc2f8bf7dec9f3153e6aed4db5cb010">MCID::ConvertibleTo3Addr</a></span><span class="c0">);<br>00388 &nbsp; }</span></p><p class="c17"><span class="c0">…..........................</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17 c35"><span class="c10"></span></p><p class="c20"><span class="c10">The most important member defined in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">MCInstrInfo</a></span><span class="c10">&nbsp;class is</span><span class="c10">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">MCInstrDesc</a></span><span class="c0">&nbsp;*Desc;</span><span class="c5 c11">. &nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">MCInstrDesc</a></span><span class="c34">&nbsp;class captures information about a particular instruction (or instruction class?) such as instruction characteristics, side effects, register uses, etc. Here is part of the code in the definition of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">MCInstrDesc</a></span><span class="c34">:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">00134</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">MCInstrDesc</a></span><span class="c0">&nbsp;{<br>00135 </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#adcb5f001406dc2b45024dd582c444e6d">00136</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">short</span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#adcb5f001406dc2b45024dd582c444e6d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#adcb5f001406dc2b45024dd582c444e6d">Opcode</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// The opcode number</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a53c07a5f15c9d1ccad93dc1c57f79c09">00137</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">short</span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a53c07a5f15c9d1ccad93dc1c57f79c09">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a53c07a5f15c9d1ccad93dc1c57f79c09">NumOperands</a></span><span class="c0">; &nbsp; </span><span class="c0 c6">// Num of args (may be more if variable_ops)</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a0cc1de9217edcb8e7aff85bc7916ec03">00138</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">short</span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a0cc1de9217edcb8e7aff85bc7916ec03">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a0cc1de9217edcb8e7aff85bc7916ec03">NumDefs</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Num of args that are definitions</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#abee44339b41568c74881f90122fee878">00139</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">short</span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#abee44339b41568c74881f90122fee878">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#abee44339b41568c74881f90122fee878">SchedClass</a></span><span class="c0">; &nbsp; &nbsp;</span><span class="c0 c6">// enum identifying instr sched class</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a80291694b54eac4126454e13cefe1ff8">00140</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">short</span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a80291694b54eac4126454e13cefe1ff8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a80291694b54eac4126454e13cefe1ff8">Size</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Number of bytes in encoding.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">00141</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">Flags</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Flags identifying machine instr class</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a46e0fcca2366f30d5e35b3d7dcb9c65f">00142</a></span><span class="c0">&nbsp; &nbsp;uint64_t &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a46e0fcca2366f30d5e35b3d7dcb9c65f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a46e0fcca2366f30d5e35b3d7dcb9c65f">TSFlags</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Target Specific Flag values</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a353922da68565393f92a0a199b73052d">00143</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;uint16_t *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a353922da68565393f92a0a199b73052d">ImplicitUses</a></span><span class="c0">; &nbsp;</span><span class="c0 c6">// Registers implicitly read by this instr</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a40df3e44b02d891af19cf0738294dfe5">00144</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;uint16_t *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a40df3e44b02d891af19cf0738294dfe5">ImplicitDefs</a></span><span class="c0">; &nbsp;</span><span class="c0 c6">// Registers implicitly defined by this instr</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#aa4766bd7c8b854a0c28d85283ab303ad">00145</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperandInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperandInfo.html">MCOperandInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#aa4766bd7c8b854a0c28d85283ab303ad">OpInfo</a></span><span class="c0">; &nbsp; </span><span class="c0 c6">// 'NumOperands' entries about operands</span></p><p class="c20"><span class="c34">…........................</span></p><p class="c17"><span class="c0">00147 </span><span class="c0 c6">&nbsp;/// getOperandConstraint - Returns the value of the specific constraint if</span><span class="c0"><br>00148 </span><span class="c0 c6">&nbsp;/// it is set. Returns -1 if it is not set.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a406bec242e875c065e0e575effe4c339">00149</a></span><span class="c0">&nbsp; </span><span class="c0 c8">int</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a406bec242e875c065e0e575effe4c339">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a406bec242e875c065e0e575effe4c339">getOperandConstraint</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;OpNum,<br>00150 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCOI.html#aaa8eb58fd1b8466eb64a43df890cb8c1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCOI.html#aaa8eb58fd1b8466eb64a43df890cb8c1">MCOI::OperandConstraint</a></span><span class="c0">&nbsp;Constraint)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00151 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(OpNum &lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a53c07a5f15c9d1ccad93dc1c57f79c09">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a53c07a5f15c9d1ccad93dc1c57f79c09">NumOperands</a></span><span class="c0">&nbsp;&amp;&amp;<br>00152 &nbsp; &nbsp; &nbsp; &nbsp; (</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#aa4766bd7c8b854a0c28d85283ab303ad">OpInfo</a></span><span class="c0">[OpNum].Constraints &amp; (1 &lt;&lt; Constraint))) {<br>00153 &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Pos = 16 + Constraint * 4;<br>00154 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;(</span><span class="c0 c8">int</span><span class="c0">)(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#aa4766bd7c8b854a0c28d85283ab303ad">OpInfo</a></span><span class="c0">[OpNum].</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperandInfo.html#a1b4619c8581a0181301cb50e1d7f169b">Constraints</a></span><span class="c0">&nbsp;&gt;&gt; Pos) &amp; 0xf;<br>00155 &nbsp; &nbsp; }<br>00156 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;-1;<br>00157 &nbsp; }</span></p><p class="c20"><span class="c34">…..............................</span></p><p class="c17"><span class="c0">00164 </span><span class="c0 c6">&nbsp;/// getNumOperands - Return the number of declared MachineOperands for this</span><span class="c0"><br>00165 </span><span class="c0 c6">&nbsp;/// MachineInstruction. &nbsp;Note that variadic (isVariadic() returns true)</span><span class="c0"><br>00166 </span><span class="c0 c6">&nbsp;/// instructions may have additional operands at the end of the list, and note</span><span class="c0"><br>00167 </span><span class="c0 c6">&nbsp;/// that the machine instruction may include implicit register def/uses as</span><span class="c0"><br>00168 </span><span class="c0 c6">&nbsp;/// well.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a55194ec3a1e49d04eab64e993e614246">00169</a></span><span class="c0">&nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a55194ec3a1e49d04eab64e993e614246">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a55194ec3a1e49d04eab64e993e614246">getNumOperands</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00170 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a53c07a5f15c9d1ccad93dc1c57f79c09">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a53c07a5f15c9d1ccad93dc1c57f79c09">NumOperands</a></span><span class="c0">;<br>00171 &nbsp; }</span></p><p class="c20"><span class="c34">…..................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a904941eb12eefd3ce867ac37f296d718">00189</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a904941eb12eefd3ce867ac37f296d718">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a904941eb12eefd3ce867ac37f296d718">isVariadic</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00190 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">Flags</a></span><span class="c0">&nbsp;&amp; (1 &lt;&lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea06448010e7faa3713221a1b768380957">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea06448010e7faa3713221a1b768380957">MCID::Variadic</a></span><span class="c0">);<br>00191 &nbsp; }</span></p><p class="c20"><span class="c34">….................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a3446f5624b1c8b772a160db4229544e5">00206</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a3446f5624b1c8b772a160db4229544e5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a3446f5624b1c8b772a160db4229544e5">isReturn</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00207 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">Flags</a></span><span class="c0">&nbsp;&amp; (1 &lt;&lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1GC.html#a5f606a2b04c809f789a574660cd25213a3bf873e87f3adb3b1c5e082fd2c434e8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1GC.html#a5f606a2b04c809f789a574660cd25213a3bf873e87f3adb3b1c5e082fd2c434e8">MCID::Return</a></span><span class="c0">);<br>00208 &nbsp; }</span></p><p class="c20"><span class="c34">…..................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a7981f38e296fd86b0cea036317fc1fcd">00210</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a7981f38e296fd86b0cea036317fc1fcd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a7981f38e296fd86b0cea036317fc1fcd">isCall</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00211 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">Flags</a></span><span class="c0">&nbsp;&amp; (1 &lt;&lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af6d6a791770bad2303c4399986979e3eae411369b2f0d8f484fec62c3291b1b51">MCID::Call</a></span><span class="c0">);<br>00212 &nbsp; }</span></p><p class="c20"><span class="c34">…..................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a10f198ee05145113be62a89685ef893f">00235</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a10f198ee05145113be62a89685ef893f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a10f198ee05145113be62a89685ef893f">isBranch</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00236 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">Flags</a></span><span class="c0">&nbsp;&amp; (1 &lt;&lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea359237c780f7c8e40645575826da8a3c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea359237c780f7c8e40645575826da8a3c">MCID::Branch</a></span><span class="c0">);<br>00237 &nbsp; }</span></p><p class="c20"><span class="c34">…..................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a6b5a647ad7de4a9bdb8249a1856e171d">00265</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a6b5a647ad7de4a9bdb8249a1856e171d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a6b5a647ad7de4a9bdb8249a1856e171d">isPredicable</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00266 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">Flags</a></span><span class="c0">&nbsp;&amp; (1 &lt;&lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea9222c946b8b605c95952eedf035a7eff">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea9222c946b8b605c95952eedf035a7eff">MCID::Predicable</a></span><span class="c0">);<br>00267 &nbsp; }<br>00268 <br>00269 </span><span class="c0 c6">&nbsp;/// isCompare - Return true if this instruction is a comparison.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a34f160e21cae3325a1d2f74b42e80a0b">00270</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a34f160e21cae3325a1d2f74b42e80a0b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a34f160e21cae3325a1d2f74b42e80a0b">isCompare</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00271 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">Flags</a></span><span class="c0">&nbsp;&amp; (1 &lt;&lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea1328ed43be8173506f59f88c9bfd8b8c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea1328ed43be8173506f59f88c9bfd8b8c">MCID::Compare</a></span><span class="c0">);<br>00272 &nbsp; }<br>00273 <br>00274 </span><span class="c0 c6">&nbsp;/// isMoveImmediate - Return true if this instruction is a move immediate</span><span class="c0"><br>00275 </span><span class="c0 c6">&nbsp;/// (including conditional moves) instruction.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a096d39a579e25f8924f4deb6998a2b5e">00276</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a096d39a579e25f8924f4deb6998a2b5e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a096d39a579e25f8924f4deb6998a2b5e">isMoveImmediate</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00277 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">Flags</a></span><span class="c0">&nbsp;&amp; (1 &lt;&lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aeaaeaafb46babde1143b2fa296b164a5c4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aeaaeaafb46babde1143b2fa296b164a5c4">MCID::MoveImm</a></span><span class="c0">);<br>00278 &nbsp; }</span></p><p class="c20"><span class="c34">…...............</span></p><p class="c17"><span class="c0">00317 &nbsp; </span><span class="c0 c6">//===--------------------------------------------------------------------===//</span><span class="c0"><br>00318 &nbsp; </span><span class="c0 c6">// Side Effect Analysis</span><span class="c0"><br>00319 &nbsp; </span><span class="c0 c6">//===--------------------------------------------------------------------===//</span><span class="c0"><br>00320 <br>00321 </span><span class="c0 c6">&nbsp;/// mayLoad - Return true if this instruction could possibly read memory.</span><span class="c0"><br>00322 </span><span class="c0 c6">&nbsp;/// Instructions with this flag set are not necessarily simple load</span><span class="c0"><br>00323 </span><span class="c0 c6">&nbsp;/// instructions, they may load a value and modify it, for example.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#ad526db981cdc3361585a92b6bba42137">00324</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#ad526db981cdc3361585a92b6bba42137">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#ad526db981cdc3361585a92b6bba42137">mayLoad</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00325 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">Flags</a></span><span class="c0">&nbsp;&amp; (1 &lt;&lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea530d5e41c3cf67937c373da61c65acd4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea530d5e41c3cf67937c373da61c65acd4">MCID::MayLoad</a></span><span class="c0">);<br>00326 &nbsp; }<br>00327 <br>00328 <br>00329 </span><span class="c0 c6">&nbsp;/// mayStore - Return true if this instruction could possibly modify memory.</span><span class="c0"><br>00330 </span><span class="c0 c6">&nbsp;/// Instructions with this flag set are not necessarily simple store</span><span class="c0"><br>00331 </span><span class="c0 c6">&nbsp;/// instructions, they may store a modified value based on their operands, or</span><span class="c0"><br>00332 </span><span class="c0 c6">&nbsp;/// may not actually modify anything, for example.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a7146d8440bad26a32a80ae4362298783">00333</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a7146d8440bad26a32a80ae4362298783">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a7146d8440bad26a32a80ae4362298783">mayStore</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00334 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a54fc2039746ee6eff204883932692513">Flags</a></span><span class="c0">&nbsp;&amp; (1 &lt;&lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea50b76935e53196d5d0610736ed52386d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea50b76935e53196d5d0610736ed52386d">MCID::MayStore</a></span><span class="c0">);<br>00335 &nbsp; }</span></p><p class="c20"><span class="c34">…......................</span></p><p class="c17"><span class="c0">00480 </span><span class="c0 c6">&nbsp;/// This method returns null if the instruction has no implicit defs.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#ad11fbecb594b25b4763177a2a9cd4dc6">00481</a></span><span class="c0">&nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;uint16_t *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#ad11fbecb594b25b4763177a2a9cd4dc6">getImplicitDefs</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00482 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a40df3e44b02d891af19cf0738294dfe5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#a40df3e44b02d891af19cf0738294dfe5">ImplicitDefs</a></span><span class="c0">;<br>00483 &nbsp; }</span></p><p class="c15"><span class="c34"></span></p><p class="c20"><span class="c34">From the above code we can see the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">MCInstrInfo</a></span><span class="c10">&nbsp;base class and its </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">MCInstrDesc</a></span><span class="c34">&nbsp;member just provide methods to retrieve some basic information about the instruction set of a particular target. In addition to the inherited </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">MCInstrInfo</a></span><span class="c10">&nbsp;base class members,</span><span class="c34">&nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c34">&nbsp;class defines methods (mostly virtual) to get some advanced instruction-related features and expose some optimization opportunities:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">00047</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c0">&nbsp;: </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">MCInstrInfo</a></span><span class="c0">&nbsp;{<br>00048 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c0">&nbsp;&amp;)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">LLVM_DELETED_FUNCTION</a></span><span class="c0">;<br>00049 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;operator=(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c0">&nbsp;&amp;)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">LLVM_DELETED_FUNCTION</a></span><span class="c0">;<br>00050 </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a91998beb301ffbef04133d69c8c269cd">00051</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c0">(</span><span class="c0 c8">int</span><span class="c0">&nbsp;CFSetupOpcode = -1, </span><span class="c0 c8">int</span><span class="c0">&nbsp;CFDestroyOpcode = -1)<br>00052 &nbsp; &nbsp; : CallFrameSetupOpcode(CFSetupOpcode),<br>00053 &nbsp; &nbsp; &nbsp; CallFrameDestroyOpcode(CFDestroyOpcode) {<br>00054 &nbsp; }</span></p><p class="c20"><span class="c34">…....................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#aad2b97c6aba5419ec23a68845884bc79">00083</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#aad2b97c6aba5419ec23a68845884bc79">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#aad2b97c6aba5419ec23a68845884bc79">isReallyTriviallyReMaterializable</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">,<br>00084 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">AliasAnalysis</a></span><span class="c0">&nbsp;*AA)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00085 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>00086 &nbsp; }</span></p><p class="c20"><span class="c10">…...................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a03fe3281573d3aea69ae33de8c3bb4b6">00104</a></span><span class="c0">&nbsp; </span><span class="c0 c8">int</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a03fe3281573d3aea69ae33de8c3bb4b6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a03fe3281573d3aea69ae33de8c3bb4b6">getCallFrameSetupOpcode</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;CallFrameSetupOpcode; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a1057d0ad3ec077901aff0251d1c0811b">00105</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">int</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a1057d0ad3ec077901aff0251d1c0811b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a1057d0ad3ec077901aff0251d1c0811b">getCallFrameDestroyOpcode</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;CallFrameDestroyOpcode; }</span></p><p class="c20"><span class="c10">…...................</span></p><p class="c17"><span class="c0">00119 </span><span class="c0 c6">&nbsp;/// isLoadFromStackSlot - If the specified machine instruction is a direct</span><span class="c0"><br>00120 </span><span class="c0 c6">&nbsp;/// load from a stack slot, return the virtual or physical register number of</span><span class="c0"><br>00121 </span><span class="c0 c6">&nbsp;/// the destination along with the FrameIndex of the loaded stack slot. &nbsp;If</span><span class="c0"><br>00122 </span><span class="c0 c6">&nbsp;/// not, return 0. &nbsp;This predicate must return 0 if the instruction has</span><span class="c0"><br>00123 </span><span class="c0 c6">&nbsp;/// any side effects other than loading from the stack slot.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a9fcdc96a6712deb1a8a3d2e18af6db3f">00124</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a9fcdc96a6712deb1a8a3d2e18af6db3f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a9fcdc96a6712deb1a8a3d2e18af6db3f">isLoadFromStackSlot</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">,<br>00125 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">int</span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">FrameIndex</a></span><span class="c0">)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00126 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;0;<br>00127 &nbsp; }</span></p><p class="c20"><span class="c10">…......................</span></p><p class="c17"><span class="c0">00228 </span><span class="c0 c6">&nbsp;/// produceSameValue - Return true if two machine instructions would produce</span><span class="c0"><br>00229 </span><span class="c0 c6">&nbsp;/// identical values. By default, this is only true when the two instructions</span><span class="c0"><br>00230 </span><span class="c0 c6">&nbsp;/// are deemed identical except for defs. If this function is called when the</span><span class="c0"><br>00231 </span><span class="c0 c6">&nbsp;/// IR is still in SSA form, the caller can pass the MachineRegisterInfo for</span><span class="c0"><br>00232 </span><span class="c0 c6">&nbsp;/// aggressive checks.</span><span class="c0"><br>00233 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a3ea770249f2cc62c0317639a0bd1839c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a3ea770249f2cc62c0317639a0bd1839c">produceSameValue</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*MI0,<br>00234 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*MI1,<br>00235 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a></span><span class="c0">&nbsp;*MRI = 0) </span><span class="c0 c9">const</span><span class="c0">;</span></p><p class="c20"><span class="c10">….......................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">00262</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a641441a84a88e01223f3c091dfb50694">AnalyzeBranch</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;&amp;MBB,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*&amp;TBB,<br>00263 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*&amp;FBB,<br>00264 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorImpl.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MachineOperand&gt;</a></span><span class="c0">&nbsp;&amp;Cond,<br>00265 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;AllowModify = </span><span class="c0 c9">false</span><span class="c0">)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00266 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00267 &nbsp; }<br>00268 <br>00269 </span><span class="c0 c6">&nbsp;/// RemoveBranch - Remove the branching code at the end of the specific MBB.</span><span class="c0"><br>00270 </span><span class="c0 c6">&nbsp;/// This is only invoked in cases where AnalyzeBranch returns success. It</span><span class="c0"><br>00271 </span><span class="c0 c6">&nbsp;/// returns the number of instructions that were removed.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">00272</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#abce62a681f245fc78059890e4ca83210">RemoveBranch</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;&amp;MBB)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00273 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></span><span class="c0">(</span><span class="c0 c14">"Target didn't implement TargetInstrInfo::RemoveBranch!"</span><span class="c0">);<br>00274 &nbsp; }</span></p><p class="c20"><span class="c10">…...........................</span></p><p class="c17"><span class="c0">00531 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">*</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a87d3465cea944f88b225d34b06d54aa9">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a87d3465cea944f88b225d34b06d54aa9">foldMemoryOperand</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">MachineBasicBlock::iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">,<br>00532 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorImpl.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;unsigned&gt;</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceR600Operands.html#af27934c33c08a9947ae861deaad8a2a8">Ops</a></span><span class="c0">,<br>00533 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">int</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">FrameIndex</a></span><span class="c0">) </span><span class="c0 c9">const</span><span class="c0">;</span></p><p class="c20"><span class="c10">…..........................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a9d84099a4c7b35c28c8c79f51b257487">00601</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a9d84099a4c7b35c28c8c79f51b257487">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#a9d84099a4c7b35c28c8c79f51b257487">areLoadsFromSameBasePtr</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Load1,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Load2,<br>00602 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int64_t &amp;Offset1, int64_t &amp;Offset2)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00603 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>00604 &nbsp; }</span></p><p class="c20"><span class="c10">…..........................</span></p><p class="c17"><span class="c0">00827 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#aaf9c5e138e520c6d2d7cd50c185141a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html#aaf9c5e138e520c6d2d7cd50c185141a5">getInstrLatency</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1InstrItineraryData.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1InstrItineraryData.html">InstrItineraryData</a></span><span class="c0">&nbsp;*ItinData,<br>00828 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">,<br>00829 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;*PredCost = 0) </span><span class="c0 c9">const</span><span class="c0">;</span></p><p class="c20"><span class="c10">…..........................</span></p><p class="c15"><span class="c10"></span></p><p class="c20"><span class="c10">Working on it for a description of the relationship between what’s generated by the tablegen tool and the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c10">&nbsp;class. (This can be added after I work on implementing the GPU divergance idea using LLVM) &nbsp;For now just put official document here:</span></p><p class="c15"><span class="c10"></span></p><p class="c20"><span class="c11 c16">TableGen generates code for instruction selection using the following target description input files:</span></p><ol class="c55" start="1"><li class="c32 c20"><span class="c10 c5">XXXInstrInfo.td</span><span class="c11 c16">&nbsp;— Contains definitions of instructions in a target-specific instruction set, generates </span><span class="c10 c5">XXXGenDAGISel.inc</span><span class="c11 c16">, which is included in </span><span class="c10 c5">XXXISelDAGToDAG.cpp</span><span class="c11 c16">.</span></li><li class="c32 c20"><span class="c10 c5">XXXCallingConv.td</span><span class="c11 c16">&nbsp;— Contains the calling and return value conventions for the target architecture, and it generates</span><span class="c10 c5">XXXGenCallingConv.inc</span><span class="c11 c16">, which is included in </span><span class="c10 c5">XXXISelLowering.cpp</span><span class="c11 c16">.</span></li></ol><p class="c15"><span class="c10"></span></p><p class="c20"><span class="c11 c16">TableGen uses the following target description (</span><span class="c10 c5">.td</span><span class="c11 c16">) input files to generate much of the code for instruction definition:</span></p><ol class="c55" start="1"><li class="c32 c20"><span class="c10 c5">Target.td</span><span class="c11 c16">&nbsp;— Where the </span><span class="c10 c5">Instruction</span><span class="c11 c16">, </span><span class="c10 c5">Operand</span><span class="c11 c16">, </span><span class="c10 c5">InstrInfo</span><span class="c11 c16">, and other fundamental classes are defined.</span></li><li class="c32 c20"><span class="c10 c5">TargetSelectionDAG.td</span><span class="c11 c16">&nbsp;— Used by </span><span class="c10 c5">SelectionDAG</span><span class="c11 c16">&nbsp;instruction selection generators, contains </span><span class="c10 c5">SDTC*</span><span class="c11 c16">&nbsp;classes (selection DAG type constraint), definitions of </span><span class="c10 c5">SelectionDAG</span><span class="c11 c16">&nbsp;nodes (such as </span><span class="c10 c5">imm</span><span class="c11 c16">, </span><span class="c10 c5">cond</span><span class="c11 c16">, </span><span class="c10 c5">bb</span><span class="c11 c16">, </span><span class="c10 c5">add</span><span class="c11 c16">, </span><span class="c10 c5">fadd</span><span class="c11 c16">, </span><span class="c10 c5">sub</span><span class="c11 c16">), and pattern support (</span><span class="c10 c5">Pattern</span><span class="c11 c16">, </span><span class="c10 c5">Pat</span><span class="c11 c16">, </span><span class="c10 c5">PatFrag</span><span class="c11 c16">,</span><span class="c10 c5">PatLeaf</span><span class="c11 c16">, </span><span class="c10 c5">ComplexPattern</span><span class="c11 c16">.</span></li><li class="c32 c20"><span class="c10 c5">XXXInstrFormats.td</span><span class="c11 c16">&nbsp;— Patterns for definitions of target-specific instructions.</span></li><li class="c32 c20"><span class="c10 c5">XXXInstrInfo.td</span><span class="c11 c16">&nbsp;— Target-specific definitions of instruction templates, condition codes, and instructions of an instruction set. For architecture modifications, a different file name may be used. For example, for Pentium with SSE instruction, this file is </span><span class="c10 c5">X86InstrSSE.td</span><span class="c11 c16">, and for Pentium with MMX, this file is </span><span class="c10 c5">X86InstrMMX.td</span><span class="c11 c16">.</span></li></ol><p class="c20"><span class="c11 c16">There is also a target-specific </span><span class="c10 c5">XXX.td</span><span class="c11 c16">&nbsp;file, where </span><span class="c10 c5">XXX</span><span class="c11 c16">&nbsp;is the name of the target. The </span><span class="c10 c5">XXX.td</span><span class="c11 c16">&nbsp;file includes the other </span><span class="c10 c5">.td</span><span class="c11 c16">&nbsp;input files, but its contents are only directly important for subtargets.</span></p><p class="c20"><span class="c11 c16">You should describe a concrete target-specific class </span><span class="c10 c5">XXXInstrInfo</span><span class="c11 c16">&nbsp;that represents machine instructions supported by a target machine. </span><span class="c10 c5">XXXInstrInfo</span><span class="c11 c16">&nbsp;contains an array of </span><span class="c10 c5">XXXInstrDescriptor</span><span class="c11 c16">&nbsp;objects, each of which describes one instruction. An instruction descriptor defines:</span></p><ol class="c55" start="1"><li class="c32 c20"><span class="c11 c16">Opcode mnemonic</span></li><li class="c32 c20"><span class="c11 c16">Number of operands</span></li><li class="c20 c32"><span class="c11 c16">List of implicit register definitions and uses</span></li><li class="c32 c20"><span class="c11 c16">Target-independent properties (such as memory access, is commutable)</span></li><li class="c32 c20"><span class="c11 c16">Target-specific flags</span></li></ol><p class="c15"><span class="c10"></span></p><p class="c15"><span class="c10"></span></p><p class="c20"><span class="c19">Part 7.2.7</span><span class="c19 c16">&nbsp;TargetFrameInfo</span><span class="c19">&nbsp;</span><span class="c19 c16">Class</span></p><p class="c15"><span class="c19"></span></p><p class="c15"><span class="c19"></span></p><p class="c15"><span class="c19"></span></p><p class="c15"><span class="c19"></span></p><p class="c15"><span class="c19"></span></p><p class="c20"><span class="c19">Part 7.3 &nbsp;Machine code representation</span></p><p class="c15"><span class="c19"></span></p><p class="c20"><span class="c2">Target independent machine code representation includes the </span><span class="c10 c5">BuildMI</span><span class="c11 c16">&nbsp;function located in the </span><span class="c10 c5">include/llvm/CodeGen/MachineInstrBuilder.h</span><span class="c11 c16">&nbsp;file, </span><span class="c29 c10 c5"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#machinefunction">MachineFunction</a></span><span class="c10 c5">&nbsp;</span><span class="c2">, </span><span class="c29 c10 c5"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#machinebasicblock">MachineBasicBlock</a></span><span class="c10 c5">&nbsp;</span><span class="c2">, and </span><span class="c29 c10 c5"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#machineinstr">MachineInstr</a></span><span class="c10 c5">&nbsp;</span><span class="c2">classes (defined in </span><span class="c10 c5">include/llvm/CodeGen</span><span class="c2">). This representation is completely target agnostic, representing instructions in their most abstract form: an opcode and a series of operands. This representation is designed to support both an SSA representation for machine code, as well as a register allocated, non-SSA form.</span></p><p class="c15"><span class="c5"></span></p><p class="c20"><span class="c19">Part 7.3.1</span><span class="c19 c16">&nbsp;MachineFunction</span><span class="c19">&nbsp;</span><span class="c19 c16">Class</span></p><p class="c15"><span class="c19 c16"></span></p><p class="c20"><span class="c2">A high level description in the LLVM documentation says that the </span><span class="c10 c5">MachineFunction</span><span class="c2">&nbsp;class contains a list of machine basic blocks (</span><span class="c10 c5">&nbsp;</span><span class="c29 c10 c5"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#machinebasicblock">MachineBasicBlock</a></span><span class="c10 c5">&nbsp;</span><span class="c2">instances). It corresponds one-to-one with the LLVM function input to the instruction selector. In addition to a list of basic blocks, the </span><span class="c10 c5">MachineFunction</span><span class="c2">&nbsp;contains a a </span><span class="c10 c5">MachineConstantPool</span><span class="c2">, a </span><span class="c10 c5">MachineFrameInfo</span><span class="c2">, a </span><span class="c10 c5">MachineFunctionInfo</span><span class="c2">, and a</span><span class="c10 c5">MachineRegisterInfo</span><span class="c2">. </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp; class has the following interface (</span><span class="c2">see </span><span class="c10 c5">include/llvm/CodeGen/MachineFunction.h</span><span class="c2">):</span></p><p class="c15"><span class="c5"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">00074</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;{<br>00075 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html">Function</a></span><span class="c0">&nbsp;*Fn;<br>00076 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span class="c0">;<br>00077 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">MCContext</a></span><span class="c0">&nbsp;&amp;Ctx;<br>00078 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineModuleInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineModuleInfo.html">MachineModuleInfo</a></span><span class="c0">&nbsp;&amp;MMI;<br>00079 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GCModuleInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GCModuleInfo.html">GCModuleInfo</a></span><span class="c0">&nbsp;*GMI;<br>00080 &nbsp; <br>00081 &nbsp; </span><span class="c0 c6">// RegInfo - Information about each register in use in the function.</span><span class="c0"><br>00082 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a></span><span class="c0">&nbsp;*RegInfo;<br>00083 <br>00084 &nbsp; </span><span class="c0 c6">// Used to keep track of target-specific per-machine function information for</span><span class="c0"><br>00085 &nbsp; </span><span class="c0 c6">// the target implementation.</span><span class="c0"><br>00086 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MachineFunctionInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MachineFunctionInfo.html">MachineFunctionInfo</a></span><span class="c0">&nbsp;*MFInfo;<br>00087 <br>00088 &nbsp; </span><span class="c0 c6">// Keep track of objects allocated on the stack.</span><span class="c0"><br>00089 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFrameInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a></span><span class="c0">&nbsp;*FrameInfo;<br>00090 <br>00091 &nbsp; </span><span class="c0 c6">// Keep track of constants which are spilled to memory</span><span class="c0"><br>00092 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineConstantPool.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineConstantPool.html">MachineConstantPool</a></span><span class="c0">&nbsp;*ConstantPool;<br>00093 &nbsp; <br>00094 &nbsp; </span><span class="c0 c6">// Keep track of jump tables for switch instructions</span><span class="c0"><br>00095 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineJumpTableInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineJumpTableInfo.html">MachineJumpTableInfo</a></span><span class="c0">&nbsp;*JumpTableInfo;</span></p><p class="c17"><span class="c0">….....................................</span></p><p class="c17"><span class="c0">00111 &nbsp; </span><span class="c0 c6">// List of machine basic blocks in function</span><span class="c0"><br>00112 &nbsp; </span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">ilist&lt;MachineBasicBlock&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">BasicBlockListType</a></span><span class="c0">;<br>00113 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">BasicBlockListType</a></span><span class="c0">&nbsp;BasicBlocks;</span></p><p class="c17"><span class="c5 c11">….....................................</span></p><p class="c17"><span class="c0">00142 </span><span class="c0 c6">&nbsp;/// getFunction - Return the LLVM function that this machine code represents</span><span class="c0"><br>00143 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#ad784a6594990530bffb2018aeeed56f3">00144</a></span><span class="c0">&nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html">Function</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#ad784a6594990530bffb2018aeeed56f3">getFunction</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;Fn; }</span></p><p class="c17"><span class="c5">//Lots of other get** functions to retrieve various members of the MachineFunction class.</span></p><p class="c17"><span class="c0">…....................................</span></p><p class="c17"><span class="c0">00267 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a9c82aa2922161b37cf18dc8baeb4ef08">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a9c82aa2922161b37cf18dc8baeb4ef08">viewCFG</a></span><span class="c0">() </span><span class="c0 c9">const</span><span class="c0">;</span></p><p class="c17"><span class="c0">00294 &nbsp; </span><span class="c0 c6">//===--------------------------------------------------------------------===//</span><span class="c0"><br>00295 &nbsp; </span><span class="c0 c6">// BasicBlock accessor functions:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a1bc94fb2ca335374a6b470347a85b28f">00307</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a1bc94fb2ca335374a6b470347a85b28f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a1bc94fb2ca335374a6b470347a85b28f">size</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">)BasicBlocks.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1iplist.html#a66eaab9f76ca31fa7affe23558b75674">size</a></span><span class="c0">();}<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a4715cb270f04cb2e156fc1993e4ae867">00308</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a4715cb270f04cb2e156fc1993e4ae867">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a4715cb270f04cb2e156fc1993e4ae867">empty</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;BasicBlocks.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1iplist.html#a1a76ce3c5ad43da0e8083ea9ecba34a3">empty</a></span><span class="c0">(); }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#af562445435f18637f07676da054ba02c">00309</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#af562445435f18637f07676da054ba02c">front</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;BasicBlocks.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1iplist.html#abe28c665da93c2c7ba7528987a7b2478">front</a></span><span class="c0">(); }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a1978d1707318c23c4e32143ed9e4e9c6">00310</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a1978d1707318c23c4e32143ed9e4e9c6">front</a></span><span class="c0">() &nbsp; &nbsp; &nbsp; { </span><span class="c0 c7">return</span><span class="c0">&nbsp;BasicBlocks.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1iplist.html#abe28c665da93c2c7ba7528987a7b2478">front</a></span><span class="c0">(); }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a0112d77d429a9eff5d852287b14871dd">00311</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;&amp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a0112d77d429a9eff5d852287b14871dd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a0112d77d429a9eff5d852287b14871dd">back</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;BasicBlocks.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1iplist.html#a9a134c441d6deccd83474b0a55e001d1">back</a></span><span class="c0">(); }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a6803a7f376981fbb63a8f61d0a7d1379">00312</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;&amp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a6803a7f376981fbb63a8f61d0a7d1379">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a6803a7f376981fbb63a8f61d0a7d1379">back</a></span><span class="c0">() &nbsp; &nbsp; &nbsp; { </span><span class="c0 c7">return</span><span class="c0">&nbsp;BasicBlocks.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1iplist.html#a9a134c441d6deccd83474b0a55e001d1">back</a></span><span class="c0">(); }<br>00313 <br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a70b0525ecc6022336feb019ff63c934c">00314</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a70b0525ecc6022336feb019ff63c934c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a70b0525ecc6022336feb019ff63c934c">push_back</a></span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*MBB) { BasicBlocks.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html#aca2e7932b849b240830f8b39d060891a">push_back</a></span><span class="c0">&nbsp;(MBB); }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a6a437bb3c4a44ac328344e5f361c7816">00315</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a6a437bb3c4a44ac328344e5f361c7816">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a6a437bb3c4a44ac328344e5f361c7816">push_front</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*MBB) { BasicBlocks.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html#a651429c3f384af32920cf6e4cf2e6ce4">push_front</a></span><span class="c0">(MBB); }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">00316</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#af4c0db6d503e0ba3b8e44067023ffbba">insert</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">iterator</a></span><span class="c0">&nbsp;MBBI,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*MBB) {<br>00317 &nbsp; &nbsp; BasicBlocks.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html#a955c4fe328a1b0e9f1f42855d7bc5383">insert</a></span><span class="c0">(MBBI, MBB);<br>00318 &nbsp; }</span></p><p class="c17"><span class="c0">….....................................</span></p><p class="c17"><span class="c0">00333 &nbsp; </span><span class="c0 c6">//===--------------------------------------------------------------------===//</span><span class="c0"><br>00334 &nbsp; </span><span class="c0 c6">// Internal functions used to automatically number MachineBasicBlocks</span><span class="c0"><br>00335 &nbsp; </span><span class="c0 c6">//</span><span class="c0"><br>00336 <br>00337 </span><span class="c0 c6">&nbsp;/// getNextMBBNumber - Returns the next unique number to be assigned</span><span class="c0"><br>00338 </span><span class="c0 c6">&nbsp;/// to a MachineBasicBlock in this MachineFunction.</span><span class="c0"><br>00339 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a1635edd05afd9c2e2ac2dba0a9ee93bd">00340</a></span><span class="c0">&nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a1635edd05afd9c2e2ac2dba0a9ee93bd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a1635edd05afd9c2e2ac2dba0a9ee93bd">addToMBBNumbering</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*MBB) {<br>00341 &nbsp; &nbsp; MBBNumbering.push_back(MBB);<br>00342 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">)MBBNumbering.size()-1;<br>00343 &nbsp; }<br>00344 <br>00345 </span><span class="c0 c6">&nbsp;/// removeFromMBBNumbering - Remove the specific machine basic block from our</span><span class="c0"><br>00346 </span><span class="c0 c6">&nbsp;/// tracker, this is only really to be used by the MachineBasicBlock</span><span class="c0"><br>00347 </span><span class="c0 c6">&nbsp;/// implementation.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a2702e813ffe6b916af6be0924aa744fb">00348</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a2702e813ffe6b916af6be0924aa744fb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a2702e813ffe6b916af6be0924aa744fb">removeFromMBBNumbering</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;N) {<br>00349 &nbsp; &nbsp; assert(N &lt; MBBNumbering.size() &amp;&amp; </span><span class="c0 c14">"Illegal basic block #"</span><span class="c0">);<br>00350 &nbsp; &nbsp; MBBNumbering[N] = 0;<br>00351 &nbsp; }<br>00352 <br>00353 </span><span class="c0 c6">&nbsp;/// CreateMachineInstr - Allocate a new MachineInstr. Use this instead</span><span class="c0"><br>00354 </span><span class="c0 c6">&nbsp;/// of `new MachineInstr'.</span><span class="c0"><br>00355 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00356 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#af3607186e9eb9417ccb6c852aa8b83dd">CreateMachineInstr</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">MCInstrDesc</a></span><span class="c0">&nbsp;&amp;MCID,<br>00357 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;DL,<br>00358 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;NoImp = </span><span class="c0 c9">false</span><span class="c0">);</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c5">From the above code we can see that </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c5">&nbsp;primarily contains a list of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">MachineBasicBlock</a></span><span class="c5">&nbsp;objects (</span><span class="c0">00112 &nbsp; </span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">ilist&lt;MachineBasicBlock&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">BasicBlockListType</a></span><span class="c0">;<br>00113 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">BasicBlockListType</a></span><span class="c0">&nbsp;BasicBlocks;</span><span class="c5">) and defines various methods for retrieving the information of the machine function and manipulating the objects in the </span><span class="c0">BasicBlocks member.</span><span class="c5">&nbsp;. A very important point to note is that the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c5">&nbsp;class maintains the control flow graph (CFG) of all basic blocks in a function. Control flow information in CFG is crucial for many optimizations and analyses (e.g., live variable analysis discussed in part 7.5.6). So it is important to know how the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c5">&nbsp;objects and the corresponding CFGs are constructed. For selection DAG and machine function construction details please refer to &lt;Notes on LLVM 5 (SelectionDAG)&gt;. For CFG construction please refer to the clang front end source code (Working on a section in Notes on LLVM 1 to explain how CFG and IR are generated?).</span></p><p class="c15"><span class="c5"></span></p><p class="c20"><span class="c19">Part 7.3.2</span><span class="c19 c16">&nbsp;MachineBasicBlock</span><span class="c19">&nbsp;</span><span class="c19 c16">Class</span></p><p class="c15"><span class="c19 c16"></span></p><p class="c20"><span class="c2">The </span><span class="c10 c5">MachineBasicBlock</span><span class="c2">&nbsp;class contains a list of machine instructions (</span><span class="c10 c5">&nbsp;</span><span class="c29 c10 c5"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#machineinstr">MachineInstr</a></span><span class="c10 c5">&nbsp;</span><span class="c2">instances). It roughly corresponds to the LLVM code input to the instruction selector, but there can be a one-to-many mapping (i.e. one LLVM basic block can map to multiple machine basic blocks). The </span><span class="c10 c5">MachineBasicBlock</span><span class="c2">&nbsp;class has a “</span><span class="c10 c5">getBasicBlock</span><span class="c2">” method, which returns the LLVM basic block that it comes from. </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c2">&nbsp;</span><span class="c2">has the following interface:</span></p><p class="c15"><span class="c5 c16 c25"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">00062</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;: </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ilist__node.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ilist__node.html">ilist_node</a></span><span class="c0">&lt;MachineBasicBlock&gt; {<br>00063 &nbsp; </span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">ilist&lt;MachineInstr&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">Instructions</a></span><span class="c0">;<br>00064 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">Instructions</a></span><span class="c0">&nbsp;Insts;<br>00065 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BasicBlock.html">BasicBlock</a></span><span class="c0">&nbsp;*BB; &nbsp;// LLVM Basic Block<br>00066 &nbsp; </span><span class="c0 c8">int</span><span class="c0">&nbsp;Number;<br>00067 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;*xParent;<br>00068 <br>00069 </span><span class="c0 c6">&nbsp;/// Predecessors/Successors - Keep track of the predecessor / successor</span><span class="c0"><br>00070 </span><span class="c0 c6">&nbsp;/// basicblocks.</span><span class="c0"><br>00071 &nbsp;std::vector&lt;MachineBasicBlock *&gt; Predecessors;<br>00072 &nbsp; std::vector&lt;MachineBasicBlock *&gt; Successors;</span></p><p class="c17"><span class="c0">…...........................</span></p><p class="c17"><span class="c0">00082 </span><span class="c0 c6">&nbsp;/// LiveIns - Keep track of the physical registers that are livein of</span><span class="c0"><br>00083 </span><span class="c0 c6">&nbsp;/// the basicblock.</span><span class="c0"><br>00084 &nbsp;std::vector&lt;unsigned&gt; LiveIns;</span></p><p class="c20"><span class="c5 c16 c25">…..................................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a2961c31b29db17a4f2964899c8569a64">00114</a></span><span class="c0">&nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BasicBlock.html">BasicBlock</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a2961c31b29db17a4f2964899c8569a64">getBasicBlock</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;BB; }</span></p><p class="c20"><span class="c5 c16 c25">…...................................</span></p><p class="c17"><span class="c0">00124 </span><span class="c0 c6">&nbsp;/// hasAddressTaken - Test whether this block is potentially the target</span><span class="c0"><br>00125 </span><span class="c0 c6">&nbsp;/// of an indirect branch.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a9832fb14c5aeb2277bc66d72cc99d105">00126</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a9832fb14c5aeb2277bc66d72cc99d105">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a9832fb14c5aeb2277bc66d72cc99d105">hasAddressTaken</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;AddressTaken; }<br>00127 <br>00128 </span><span class="c0 c6">&nbsp;/// setHasAddressTaken - Set this block to reflect that it potentially</span><span class="c0"><br>00129 </span><span class="c0 c6">&nbsp;/// is the target of an indirect branch.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a6d180825b3dcc1bd2b8e415160207335">00130</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a6d180825b3dcc1bd2b8e415160207335">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a6d180825b3dcc1bd2b8e415160207335">setHasAddressTaken</a></span><span class="c0">() { AddressTaken = </span><span class="c0 c9">true</span><span class="c0">; }<br>00131 <br>00132 </span><span class="c0 c6">&nbsp;/// getParent - Return the MachineFunction containing this basic block.</span><span class="c0"><br>00133 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">00134</a></span><span class="c0">&nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;xParent; }</span></p><p class="c17"><span class="c0">…...............................</span></p><p class="c17"><span class="c0">00335 </span><span class="c0 c6">&nbsp;/// moveBefore/moveAfter - move 'this' block before or after the specified</span><span class="c0"><br>00336 </span><span class="c0 c6">&nbsp;/// block. &nbsp;This only moves the block, it does not modify the CFG or adjust</span><span class="c0"><br>00337 </span><span class="c0 c6">&nbsp;/// potential fall-throughs at the end of the block.</span><span class="c0"><br>00338 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a25c2a6ee39d0d97dac2184e8bd942300">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a25c2a6ee39d0d97dac2184e8bd942300">moveBefore</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*NewAfter);<br>00339 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#af3c2dc75190645b72eee3c416cd14885">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#af3c2dc75190645b72eee3c416cd14885">moveAfter</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*NewBefore);</span></p><p class="c17"><span class="c0">….............................</span></p><p class="c17"><span class="c0">00356 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a3fcc360e6de146a370e8b0deecfa877f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a3fcc360e6de146a370e8b0deecfa877f">addSuccessor</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*succ, uint32_t weight = 0);<br>00357 <br>00358 </span><span class="c0 c6">&nbsp;/// removeSuccessor - Remove successor from the successors list of this</span><span class="c0"><br>00359 </span><span class="c0 c6">&nbsp;/// MachineBasicBlock. The Predecessors list of succ is automatically updated.</span><span class="c0"><br>00360 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00361 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#aabc149950316b323f9cdac2122ff0131">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#aabc149950316b323f9cdac2122ff0131">removeSuccessor</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*succ);</span></p><p class="c17"><span class="c0">…..............................</span></p><p class="c17"><span class="c0">00410 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#aa7dc7faaab4856b8f0014b8283e26c7b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#aa7dc7faaab4856b8f0014b8283e26c7b">getFirstNonPHI</a></span><span class="c0">();</span></p><p class="c17"><span class="c0">…..................................</span></p><p class="c17"><span class="c0">00432 </span><span class="c0 c6">&nbsp;/// SplitCriticalEdge - Split the critical edge from this block to the</span><span class="c0"><br>00433 </span><span class="c0 c6">&nbsp;/// given successor block, and return the newly created block, or null</span><span class="c0"><br>00434 </span><span class="c0 c6">&nbsp;/// if splitting is not possible.</span><span class="c0"><br>00435 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00436 </span><span class="c0 c6">&nbsp;/// This function updates LiveVariables, MachineDominatorTree, and</span><span class="c0"><br>00437 </span><span class="c0 c6">&nbsp;/// MachineLoopInfo, as applicable.</span><span class="c0"><br>00438 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#af93cadf3685e509daac270c8cfd2b52f">SplitCriticalEdge</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*Succ,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Pass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Pass.html">Pass</a></span><span class="c0">&nbsp;*P);<br>00439 <br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#af9247e8f4d910743041faf53a5255ea6">00440</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#af9247e8f4d910743041faf53a5255ea6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#af9247e8f4d910743041faf53a5255ea6">pop_front</a></span><span class="c0">() { Insts.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1iplist.html#a8049ceb2aa2c623ca851acd569e87ad7">pop_front</a></span><span class="c0">(); }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a1056a82d0f5c741ea09c49be8673156a">00441</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a1056a82d0f5c741ea09c49be8673156a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a1056a82d0f5c741ea09c49be8673156a">pop_back</a></span><span class="c0">() { Insts.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1iplist.html#a7d1d4ff826882f1d65929653c293e5cc">pop_back</a></span><span class="c0">(); }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a3b1dce1f3354a357fb9061bb7568a84e">00442</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a3b1dce1f3354a357fb9061bb7568a84e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a3b1dce1f3354a357fb9061bb7568a84e">push_back</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">) { Insts.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html#aca2e7932b849b240830f8b39d060891a">push_back</a></span><span class="c0">(MI); }</span></p><p class="c44 c20"><span class="c0">….........................................</span></p><p class="c17"><span class="c0">00464 <br>00465 </span><span class="c0 c6">&nbsp;/// Insert MI into the instruction list after I.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#adbcec9820951b0e3872c94cbd4e57c80">00466</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#adbcec9820951b0e3872c94cbd4e57c80">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#adbcec9820951b0e3872c94cbd4e57c80">insertAfter</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">) {<br>00467 &nbsp; &nbsp; assert(!MI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a49df99c4eed2cde33b594216b10068a9">isBundledWithPred</a></span><span class="c0">() &amp;&amp; !MI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a51314905e979d11aa6b5c8eb94794c8e">isBundledWithSucc</a></span><span class="c0">() &amp;&amp;<br>00468 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"Cannot insert instruction with bundle flags"</span><span class="c0">);<br>00469 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;Insts.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1iplist.html#aeed4f667062d89d301cbd94d2d2fc880">insertAfter</a></span><span class="c0">(I.getInstrIterator(),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">);<br>00470 &nbsp; }</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a00c9d82d8d59adedd1734fed16051c73">00511</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp; </a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c9">remove</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">(</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">*</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">) {<br>00512 &nbsp; &nbsp; assert(</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">!</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">-&gt;isBundled() &amp;&amp; </span><span class="c0 c14">"Cannot remove bundled instructions"</span><span class="c0">);<br>00513 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;Insts</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1iplist.html#ae22a2be6e82505d5de7d1ca296a10cce">.</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1iplist.html#ae22a2be6e82505d5de7d1ca296a10cce">remove</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">(</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00514 &nbsp; }</span></p><p class="c15"><span class="c5"></span></p><p class="c20"><span class="c5">As what we did when studying code for many other classes, we listed above several representative functions of different categories from the interface definition of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c5 c16">&nbsp;class. As can be obviously seen, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c5 c16">&nbsp;keeps a list of machine instructions (</span><span class="c0">00063 &nbsp; </span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">ilist&lt;MachineInstr&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">Instructions</a></span><span class="c0">; 00064 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">Instructions</a></span><span class="c0">&nbsp;Insts;) and the original LLVM BB (basic block). It also provides methods of various sorts including BB information querying (e.g.,</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a2961c31b29db17a4f2964899c8569a64">getBasicBlock</a></span><span class="c0">(),</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a6d180825b3dcc1bd2b8e415160207335">setHasAddressTaken</a></span><span class="c0">()), BB-level manipulation (e.g.,</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a25c2a6ee39d0d97dac2184e8bd942300">moveBefore</a></span><span class="c0">(),</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#af3c2dc75190645b72eee3c416cd14885">moveAfter</a></span><span class="c0">(),</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a3fcc360e6de146a370e8b0deecfa877f">addSuccessor</a></span><span class="c0">()), instruction-level manipulation (e.g.,</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a3b1dce1f3354a357fb9061bb7568a84e">push_back</a></span><span class="c0">(), </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#adbcec9820951b0e3872c94cbd4e57c80">insertAfter</a></span><span class="c0">()) , etc.</span></p><p class="c15"><span class="c5"></span></p><p class="c20"><span class="c19">Part 7.3.3</span><span class="c19 c16">&nbsp;MachineInstr</span><span class="c19">&nbsp;</span><span class="c19 c16">Class</span></p><p class="c15"><span class="c5 c11"></span></p><p class="c20"><span class="c5 c11">Regarding the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c5 c11">&nbsp;class, the LLVM documentation has the following description:</span></p><p class="c15"><span class="c2"></span></p><p class="c20"><span class="c2">“Target machine instructions are represented as instances of the </span><span class="c10 c5">MachineInstr</span><span class="c2">&nbsp;class. This class is an extremely abstract way of representing machine instructions. In particular, it only keeps track of an opcode number and a set of operands.</span></p><p class="c20"><span class="c2">The opcode number is a simple unsigned integer that only has meaning to a specific backend. All of the instructions for a target should be defined in the </span><span class="c10 c5">*InstrInfo.td</span><span class="c2">file for the target. The opcode enum values are auto-generated from this description. The </span><span class="c10 c5">MachineInstr</span><span class="c2">&nbsp;class does not have any information about how to interpret the instruction (i.e., what the semantics of the instruction are); for that you must refer to the </span><span class="c29 c10 c5"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#targetinstrinfo">TargetInstrInfo</a></span><span class="c10 c5">&nbsp;</span><span class="c2">class.</span></p><p class="c20"><span class="c2">The operands of a machine instruction can be of several different types: a register reference, a constant integer, a basic block reference, etc. In addition, a machine operand should be marked as a def or a use of the value (though only registers are allowed to be defs).</span></p><p class="c20"><span class="c2">By convention, the LLVM code generator orders instruction operands so that all register definitions come before the register uses, even on architectures that are normally printed in other orders. For example, the SPARC add instruction: “</span><span class="c10 c5">add %i1, %i2, %i3</span><span class="c2">” adds the “%i1”, and “%i2” registers and stores the result into the “%i3” register. In the LLVM code generator, the operands should be stored as “</span><span class="c10 c5">%i3, %i1, %i2</span><span class="c2">”: with the destination first.</span></p><p class="c20"><span class="c2">Keeping destination (definition) operands at the beginning of the operand list has several advantages. In particular, the debugging printer will print the instruction like this:</span></p><p class="c20"><span class="c18 c5 c21">%r3</span><span class="c18 c5">&nbsp;= </span><span class="c18 c26 c5 c25">add</span><span class="c18 c5">&nbsp;</span><span class="c18 c5 c21">%i1</span><span class="c18 c5">, </span><span class="c18 c5 c21">%i2</span><span class="c18 c5"><br></span></p><p class="c20"><span class="c2">Also if the first operand is a def, it is easier to </span><span class="c2 c29"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#create-instructions">create instructions</a></span><span class="c2">&nbsp;whose only def is the first operand.</span></p><p class="c15"><span class="c2"></span></p><p class="c20"><span class="c2">LLVM code generator can model sequences of instructions as MachineInstr bundles. A MI bundle can model a VLIW group / pack which contains an arbitrary number of parallel instructions. It can also be used to model a sequential list of instructions (potentially with data dependencies) that cannot be legally separated (e.g. ARM Thumb2 IT blocks).</span></p><p class="c20"><span class="c2">Conceptually a MI bundle is a MI with a number of other MIs nested within”</span></p><p class="c15"><span></span></p><p class="c20"><span>Now let’s summarize what’s defined in </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c5 c11">‘s</span><span>&nbsp;interface by first looking at a snapshot of its header file:</span></p><p class="c17"><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">00045</a></span><span class="c0">&nbsp;</span><span class="c5 c11">class</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;MachineInstr</a></span><span class="c0">&nbsp;: </span><span class="c5 c11">public</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ilist__node.html">&nbsp;ilist_node</a></span><span class="c0">&lt;MachineInstr&gt; {</span></p><p class="c17"><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a8b51cead9f721fa804fb14a9ae926683">00047</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c5 c11">typedef</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineMemOperand.html">&nbsp;MachineMemOperand</a></span><span class="c0">&nbsp;**</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a8b51cead9f721fa804fb14a9ae926683">mmo_iterator</a></span><span class="c0">;</span></p><p class="c17"><span class="c0">….....................................</span></p><p class="c17"><span class="c0">00064 </span><span class="c5 c11">private</span><span class="c0">:</span></p><p class="c17"><span class="c0">00065 &nbsp; </span><span class="c5 c11">const</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">&nbsp;MCInstrDesc</a></span><span class="c0">&nbsp;*MCID; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5 c11">// Instruction descriptor.</span></p><p class="c17"><span class="c0">00067 &nbsp; uint8_t Flags; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5 c11">// Various bits of additional</span></p><p class="c17"><span class="c5 c11">…..................................</span></p><p class="c17"><span class="c5 c11">00078 &nbsp; uint16_t NumMemRefs; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// information on memory references</span></p><p class="c17"><span class="c5 c11">00079 &nbsp;</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a8b51cead9f721fa804fb14a9ae926683">&nbsp;mmo_iterator</a></span><span class="c5 c11">&nbsp;MemRefs;</span></p><p class="c17"><span class="c5 c11">00081 &nbsp; std::vector&lt;MachineOperand&gt; Operands; // the operands</span></p><p class="c17"><span class="c5 c11">00082 &nbsp;</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;MachineBasicBlock</a></span><span class="c5 c11">&nbsp;*Parent; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Pointer to the owning basic block.</span></p><p class="c17"><span class="c5 c11">….....................................</span></p><p class="c17"><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#aab1cd92aa6f6c8f42888dd93f52ef006">00110</a></span><span class="c5 c11">&nbsp; </span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;MachineBasicBlock</a></span><span class="c5 c11">*</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#aab1cd92aa6f6c8f42888dd93f52ef006">&nbsp;getParent</a></span><span class="c5 c11">() { </span><span class="c5 c11 c7">return</span><span class="c5 c11">&nbsp;Parent; }</span></p><p class="c17"><span class="c5 c11">…....................................</span></p><p class="c17"><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#aba86b0738c2ab2a52688b846c45bfe59">00149</a></span><span class="c5 c11">&nbsp; </span><span class="c5 c11 c8">void</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#aba86b0738c2ab2a52688b846c45bfe59">&nbsp;setFlag</a></span><span class="c5 c11">(</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518">MIFlag</a></span><span class="c5 c11">&nbsp;Flag) {</span></p><p class="c17"><span class="c5 c11">00150 &nbsp; &nbsp;</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceSIInstrFlags.html#a607b4b0952924970b77a9c6b42898b54">&nbsp;Flags</a></span><span class="c5 c11">&nbsp;|= (uint8_t)Flag;</span></p><p class="c17"><span class="c5 c11">00151 &nbsp; }</span></p><p class="c17"><span class="c5 c11">…..............................-.......</span></p><p class="c17"><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a803a7424877fd049679b9aa2f07597b5">00247</a></span><span class="c5 c11">&nbsp; const</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">&nbsp;MCInstrDesc</a></span><span class="c5 c11">&nbsp;&amp;</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a803a7424877fd049679b9aa2f07597b5">getDesc</a></span><span class="c5 c11">() const { </span><span class="c5 c11 c7">return</span><span class="c5 c11">&nbsp;*MCID; }</span></p><p class="c17"><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">00251</a></span><span class="c5 c11">&nbsp; </span><span class="c5 c11 c8">int</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">&nbsp;getOpcode</a></span><span class="c5 c11">() const { </span><span class="c5 c11 c7">return</span><span class="c5 c11">&nbsp;MCID-&gt;</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html#adcb5f001406dc2b45024dd582c444e6d">Opcode</a></span><span class="c5 c11">; }</span></p><p class="c17"><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">00255</a></span><span class="c5 c11">&nbsp; </span><span class="c5 c11 c8">unsigned</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">&nbsp;getNumOperands</a></span><span class="c5 c11">() const { </span><span class="c5 c11 c7">return</span><span class="c5 c11">&nbsp;(</span><span class="c5 c11 c8">unsigned</span><span class="c5 c11">)Operands.size(); }</span></p><p class="c17"><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a74abedf6e0346273e07fe3795aa80969">00261</a></span><span class="c5 c11">&nbsp; </span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html">&nbsp;MachineOperand</a></span><span class="c5 c11">&amp;</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a74abedf6e0346273e07fe3795aa80969">&nbsp;getOperand</a></span><span class="c5 c11">(</span><span class="c5 c11 c8">unsigned</span><span class="c5 c11">&nbsp;i) {</span></p><p class="c17"><span class="c5 c11">00262 &nbsp; &nbsp; assert(i &lt;</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">&nbsp;getNumOperands</a></span><span class="c5 c11">() &amp;&amp; </span><span class="c5 c11 c14">"getOperand() out of range!"</span><span class="c5 c11">);</span></p><p class="c17"><span class="c5 c11">00263 &nbsp; &nbsp; </span><span class="c5 c11 c7">return</span><span class="c5 c11">&nbsp;Operands[i];</span></p><p class="c17"><span class="c5 c11">00264 &nbsp; }</span></p><p class="c17"><span class="c5 c11">….....................................</span></p><p class="c17"><span class="c5 c11">00198 &nbsp;/// The first instruction has the special opcode "BUNDLE". It's not "inside"</span></p><p class="c17"><span class="c5 c11">00199 &nbsp;/// a bundle, but the next three MIs are.</span></p><p class="c17"><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#af6f28f8dd2c3e2cd4f986618e294a912">00200</a></span><span class="c5 c11">&nbsp; </span><span class="c5 c11 c8">bool</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#af6f28f8dd2c3e2cd4f986618e294a912">&nbsp;isInsideBundle</a></span><span class="c5 c11">() const {</span></p><p class="c17"><span class="c5 c11">00201 &nbsp; &nbsp; </span><span class="c5 c11 c7">return</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#aa05124c59dfc3293f9169885b4b4f6ff">&nbsp;getFlag</a></span><span class="c5 c11">(</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#aafacf84de1cb994a92dc045f4aa1d518a9a9e5ef20669b2c9666b2689808b48ee">BundledPred</a></span><span class="c5 c11">);</span></p><p class="c17"><span class="c5 c11">00202 &nbsp; }</span></p><p class="c17"><span class="c5 c11">00229 &nbsp;/// Break bundle below this instruction.</span></p><p class="c17"><span class="c5 c11">00230 &nbsp;</span><span class="c5 c11 c8">void</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#ade1d83105d6c2d3de29fca286f9d1b5a">&nbsp;unbundleFromSucc</a></span><span class="c5 c11">();</span></p><p class="c17"><span class="c5 c11">…....................................</span></p><p class="c17"><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a6223324306ef111aa9cdfc705365fe7c">00318</a></span><span class="c5 c11">&nbsp; </span><span class="c5 c11 c8">bool</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a6223324306ef111aa9cdfc705365fe7c">&nbsp;isVariadic</a></span><span class="c5 c11">(</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a26e1467ec6a91a35dfc32239e50f0fb5">QueryType</a></span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">&nbsp;Type</a></span><span class="c5 c11">&nbsp;=</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a26e1467ec6a91a35dfc32239e50f0fb5aa87e833111cd757568924c1c4b80e337">&nbsp;IgnoreBundle</a></span><span class="c5 c11">) const {</span></p><p class="c17"><span class="c5 c11">00319 &nbsp; &nbsp; </span><span class="c5 c11 c7">return</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a5dd66a501acde21e7a338890fa2d9b04">&nbsp;hasProperty</a></span><span class="c5 c11">(</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea06448010e7faa3713221a1b768380957">MCID::Variadic</a></span><span class="c5 c11">,</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">&nbsp;Type</a></span><span class="c5 c11">);</span></p><p class="c17"><span class="c5 c11">00320 &nbsp; }</span></p><p class="c17"><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a059149938a94c2d38fc5b8796bd26cce">00335</a></span><span class="c5 c11">&nbsp; &nbsp;</span><span class="c5 c11 c8">bool</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a059149938a94c2d38fc5b8796bd26cce">&nbsp;isReturn</a></span><span class="c5 c11">(</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a26e1467ec6a91a35dfc32239e50f0fb5">QueryType</a></span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">&nbsp;Type</a></span><span class="c5 c11">&nbsp;=</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a26e1467ec6a91a35dfc32239e50f0fb5a255450aa2654dd8ed193764eafee2be4">&nbsp;AnyInBundle</a></span><span class="c5 c11">) const {</span></p><p class="c17"><span class="c5 c11">00336 &nbsp; &nbsp; </span><span class="c5 c11 c7">return</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a5dd66a501acde21e7a338890fa2d9b04">&nbsp;hasProperty</a></span><span class="c5 c11">(</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea5416d9f1bd5f533efddadf17d713e469">MCID::Return</a></span><span class="c5 c11">,</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">&nbsp;Type</a></span><span class="c5 c11">);</span></p><p class="c17"><span class="c5 c11">00337 &nbsp; }</span></p><p class="c17"><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#ac4de5f228c299d7c4b7de72a4a6dd28c">00339</a></span><span class="c5 c11">&nbsp; &nbsp;</span><span class="c5 c11 c8">bool</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#ac4de5f228c299d7c4b7de72a4a6dd28c">&nbsp;isCall</a></span><span class="c5 c11">(</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a26e1467ec6a91a35dfc32239e50f0fb5">QueryType</a></span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">&nbsp;Type</a></span><span class="c5 c11">&nbsp;=</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a26e1467ec6a91a35dfc32239e50f0fb5a255450aa2654dd8ed193764eafee2be4">&nbsp;AnyInBundle</a></span><span class="c5 c11">) const {</span></p><p class="c17"><span class="c5 c11">00340 &nbsp; &nbsp; </span><span class="c5 c11 c7">return</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a5dd66a501acde21e7a338890fa2d9b04">&nbsp;hasProperty</a></span><span class="c5 c11">(</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea463baf545246fea9718664d933ffe66f">MCID::Call</a></span><span class="c5 c11">,</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">&nbsp;Type</a></span><span class="c5 c11">);</span></p><p class="c17"><span class="c5 c11">00341 &nbsp; }</span></p><p class="c17"><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a797ac100c6615ff181c03a3c35c7378f">00364</a></span><span class="c5 c11">&nbsp; </span><span class="c5 c11 c8">bool</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a797ac100c6615ff181c03a3c35c7378f">&nbsp;isBranch</a></span><span class="c5 c11">(</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a26e1467ec6a91a35dfc32239e50f0fb5">QueryType</a></span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">&nbsp;Type</a></span><span class="c5 c11">&nbsp;=</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a26e1467ec6a91a35dfc32239e50f0fb5a255450aa2654dd8ed193764eafee2be4">&nbsp;AnyInBundle</a></span><span class="c5 c11">) const {</span></p><p class="c17"><span class="c5 c11">00365 &nbsp; &nbsp; </span><span class="c5 c11 c7">return</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a5dd66a501acde21e7a338890fa2d9b04">&nbsp;hasProperty</a></span><span class="c5 c11">(</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea359237c780f7c8e40645575826da8a3c">MCID::Branch</a></span><span class="c5 c11">,</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">&nbsp;Type</a></span><span class="c5 c11">);</span></p><p class="c17"><span class="c5 c11">00366 &nbsp; }</span></p><p class="c17"><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#aafb199cf6f6f35679ac670d7630d8b35">00492</a></span><span class="c5 c11">&nbsp; </span><span class="c5 c11 c8">bool</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#aafb199cf6f6f35679ac670d7630d8b35">&nbsp;isCommutable</a></span><span class="c5 c11">(</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a26e1467ec6a91a35dfc32239e50f0fb5">QueryType</a></span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">&nbsp;Type</a></span><span class="c5 c11">&nbsp;=</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a26e1467ec6a91a35dfc32239e50f0fb5aa87e833111cd757568924c1c4b80e337">&nbsp;IgnoreBundle</a></span><span class="c5 c11">) const {</span></p><p class="c17"><span class="c5 c11">00493 &nbsp; &nbsp; </span><span class="c5 c11 c7">return</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a5dd66a501acde21e7a338890fa2d9b04">&nbsp;hasProperty</a></span><span class="c5 c11">(</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea3ef69fec39e2c626336993c9774dc406">MCID::Commutable</a></span><span class="c5 c11">,</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">&nbsp;Type</a></span><span class="c5 c11">);</span></p><p class="c17"><span class="c5 c11">00494 &nbsp; }</span></p><p class="c17"><span class="c5 c11">…...................................</span></p><p class="c17"><span class="c0">00448 &nbsp; </span><span class="c5 c11">//===--------------------------------------------------------------------===//</span></p><p class="c17"><span class="c0">00449 &nbsp; </span><span class="c5 c11">// Side Effect Analysis</span></p><p class="c17"><span class="c0">00450 &nbsp; </span><span class="c5 c11">//===--------------------------------------------------------------------===//</span></p><p class="c17"><span class="c0">00452 </span><span class="c5 c11">&nbsp;/// mayLoad - Return true if this instruction could possibly read memory.</span></p><p class="c17"><span class="c0">00453 </span><span class="c5 c11">&nbsp;/// Instructions with this flag set are not necessarily simple load</span></p><p class="c17"><span class="c0">00454 </span><span class="c5 c11">&nbsp;/// instructions, they may load a value and modify it, for example.</span></p><p class="c17"><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a2b48451e9cc8433ed5f8ee30462cc96e">00455</a></span><span class="c0">&nbsp; </span><span class="c5 c11 c8">bool</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a2b48451e9cc8433ed5f8ee30462cc96e">&nbsp;mayLoad</a></span><span class="c0">(</span><span class="c5 c11 c37"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a26e1467ec6a91a35dfc32239e50f0fb5">QueryType</a></span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">&nbsp;Type</a></span><span class="c0">&nbsp;=</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a26e1467ec6a91a35dfc32239e50f0fb5a255450aa2654dd8ed193764eafee2be4">&nbsp;AnyInBundle</a></span><span class="c0">)</span><span class="c5 c11">&nbsp;const </span><span class="c0">{</span></p><p class="c17"><span class="c0">00456 &nbsp; &nbsp; </span><span class="c5 c11 c7">if</span><span class="c0">&nbsp;(</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#acd9af7d3f8a155c4356edccbc0522c8e">isInlineAsm</a></span><span class="c0">()) {</span></p><p class="c17"><span class="c0">00457 &nbsp; &nbsp; &nbsp; </span><span class="c5 c11 c8">unsigned</span><span class="c0">&nbsp;ExtraInfo =</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">&nbsp;getOperand</a></span><span class="c0">(</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1InlineAsm.html#aae9fd112c61a5e53240cf2b2ec7e402fab049673bbc307f5502c8aba23224a605">InlineAsm::MIOp_ExtraInfo</a></span><span class="c0">).</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#a7059d68a29d5ecfb37623ab45cdb4e8d">getImm</a></span><span class="c0">();</span></p><p class="c17"><span class="c0">00458 &nbsp; &nbsp; &nbsp; </span><span class="c5 c11 c7">if</span><span class="c0">&nbsp;(ExtraInfo &amp;</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1InlineAsm.html#aae9fd112c61a5e53240cf2b2ec7e402faa21b27c3cc4550dcd3ff599dbe76d0c3">&nbsp;InlineAsm::Extra_MayLoad</a></span><span class="c0">)</span></p><p class="c17"><span class="c0">00459 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5 c11 c7">return</span><span class="c0">&nbsp;</span><span class="c5 c11">true</span><span class="c0">;</span></p><p class="c17"><span class="c0">00460 &nbsp; &nbsp; }</span></p><p class="c17"><span class="c0">00461 &nbsp; &nbsp; </span><span class="c5 c11 c7">return</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a5dd66a501acde21e7a338890fa2d9b04">&nbsp;hasProperty</a></span><span class="c0">(</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MCID.html#a7786da14664521f59761f5eccf6973aea530d5e41c3cf67937c373da61c65acd4">MCID::MayLoad</a></span><span class="c0">,</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">&nbsp;Type</a></span><span class="c0">);</span></p><p class="c17"><span class="c0">00462 &nbsp; }</span></p><p class="c20"><span class="c67">…...................................</span></p><p class="c17"><span class="c0">00608 &nbsp;</span><span class="c5 c11 c8">void</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">&nbsp;eraseFromParent</a></span><span class="c0">();</span></p><p class="c17"><span class="c0">00609</span></p><p class="c17"><span class="c0">00610 </span><span class="c5 c11">&nbsp;/// Unlink 'this' form its basic block and delete it.</span></p><p class="c17"><span class="c0">00611 </span><span class="c5 c11">&nbsp;///</span></p><p class="c17"><span class="c0">00612 </span><span class="c5 c11">&nbsp;/// If the instruction is part of a bundle, the other instructions in the</span></p><p class="c17"><span class="c0">00613 </span><span class="c5 c11">&nbsp;/// bundle remain bundled.</span></p><p class="c17"><span class="c0">00614 &nbsp;</span><span class="c5 c11 c8">void</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a9891e442de101ced8a1533a71511dbed">&nbsp;eraseFromBundle</a></span><span class="c0">();</span></p><p class="c20"><span class="c67">…................................</span></p><p class="c17"><span class="c0">00851 </span><span class="c5 c11">&nbsp;/// substituteRegister - Replace all occurrences of FromReg with ToReg:SubIdx,</span></p><p class="c17"><span class="c0">00852 </span><span class="c5 c11">&nbsp;/// properly composing subreg indices where necessary.</span></p><p class="c17"><span class="c0">00853 &nbsp;</span><span class="c5 c11 c8">void</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a6ca0b91d76cb52e930c7b2b70944c5bc">&nbsp;substituteRegister</a></span><span class="c0">(</span><span class="c5 c11 c8">unsigned</span><span class="c0">&nbsp;FromReg, </span><span class="c5 c11 c8">unsigned</span><span class="c0">&nbsp;ToReg, </span><span class="c5 c11 c8">unsigned</span><span class="c0">&nbsp;SubIdx,</span></p><p class="c17"><span class="c0">00854 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5 c11">const</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">&nbsp;TargetRegisterInfo</a></span><span class="c0">&nbsp;&amp;RegInfo);</span></p><p class="c17"><span class="c0">00855</span></p><p class="c17"><span class="c0">00856 </span><span class="c5 c11">&nbsp;/// addRegisterKilled - We have determined MI kills a register. Look for the</span></p><p class="c17"><span class="c0">00857 </span><span class="c5 c11">&nbsp;/// operand that uses it and mark it as IsKill.</span></p><p class="c17"><span class="c0">00860 &nbsp;</span><span class="c5 c11 c8">bool</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#ab8fd10f439804d8d7872bc1389653fce">&nbsp;addRegisterKilled</a></span><span class="c0">(</span><span class="c5 c11 c8">unsigned</span><span class="c0">&nbsp;IncomingReg,</span></p><p class="c17"><span class="c0">00861 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5 c11">const</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">&nbsp;TargetRegisterInfo</a></span><span class="c0">&nbsp;*RegInfo,</span></p><p class="c17"><span class="c0">00862 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5 c11 c8">bool</span><span class="c0">&nbsp;AddIfNotFound = </span><span class="c5 c11">false</span><span class="c0">);</span></p><p class="c17"><span class="c0">00940 &nbsp; </span><span class="c5 c11">//===--------------------------------------------------------------------===//</span></p><p class="c17"><span class="c0">00941 &nbsp; </span><span class="c5 c11">// Accessors used to build up machine instructions.</span></p><p class="c17"><span class="c0">00951 </span><span class="c5 c11">&nbsp;/// MachineInstrBuilder provides a more convenient interface for creating</span></p><p class="c17"><span class="c0">00952 </span><span class="c5 c11">&nbsp;/// instructions and adding operands.</span></p><p class="c17"><span class="c0">00953 &nbsp;</span><span class="c5 c11 c8">void</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a469e271fba3a9b52dad4fa54eaf44e2b">&nbsp;addOperand</a></span><span class="c0">(</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF, </span><span class="c5 c11">const</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html">&nbsp;MachineOperand</a></span><span class="c0">&nbsp;&amp;Op);</span></p><p class="c17"><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a1ecb35298bc4d1fe03997959e1210c87">00965</a></span><span class="c0">&nbsp; </span><span class="c5 c11 c8">void</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a1ecb35298bc4d1fe03997959e1210c87">&nbsp;setDesc</a></span><span class="c0">(</span><span class="c5 c11">const</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">&nbsp;MCInstrDesc</a></span><span class="c0">&nbsp;&amp;tid) { MCID = &amp;tid; }</span></p><p class="c20"><span class="c67">….............................</span></p><p class="c17"><span class="c5">Based on the above code we can summarize the interface for the </span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c5">&nbsp;class. It has a MCID member with </span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">MCInstrDesc</a></span><span class="c5">&nbsp;type to describe the instruction, a </span><span class="c0">uint8_t Flags </span><span class="c5">member, a </span><span class="c5 c11">memory reference member </span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a8b51cead9f721fa804fb14a9ae926683">&nbsp;mmo_iterator</a></span><span class="c5 c11">&nbsp;MemRefs and a vector member of operands std::vector&lt;MachineOperand&gt; Operands. &nbsp; In terms of methods the </span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c5">&nbsp;class provides a basic set of get** and set** for information query (e.g., </span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a242314c0ae0147d1a7ef54c9bc312616">getOpcode</a></span><span class="c5 c11">(), </span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a></span><span class="c5 c11">(), </span><span class="c5">etc.), bundle related operations (e.g.,</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#af6f28f8dd2c3e2cd4f986618e294a912">isInsideBundle</a></span><span class="c5 c11">(), etc.</span><span class="c5">), &nbsp;boolean based methods to check if the instruction has certain property (e.g.,</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a6223324306ef111aa9cdfc705365fe7c">isVariadic</a></span><span class="c5 c11">(),</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a059149938a94c2d38fc5b8796bd26cce">isReturn</a></span><span class="c5 c11">(),</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#ac4de5f228c299d7c4b7de72a4a6dd28c">isCall</a></span><span class="c5 c11">(</span><span class="c5">),etc.), machine instruction manipulation (e.g.,</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#ac2421adbb9996e1b15f03a8abb6c70a8">eraseFromParent</a></span><span class="c5">(),etc.), register related operations (e.g,</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a6ca0b91d76cb52e930c7b2b70944c5bc">ubstituteRegister</a></span><span class="c0">(</span><span class="c5 c11 c8">), </span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#ab8fd10f439804d8d7872bc1389653fce">addRegisterKilled</a></span><span class="c0">(</span><span class="c5">), etc.) </span><span class="c5">and machine instruction creating methods (e.g.,</span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a469e271fba3a9b52dad4fa54eaf44e2b">addOperand</a></span><span class="c0">(</span><span class="c5 c11">), </span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a1ecb35298bc4d1fe03997959e1210c87">setDesc</a></span><span class="c5">(), etc.</span><span class="c5">). &nbsp;The above source code analyze confirms what’s described in the beginning of part 7.3.1: “...this </span><span class="c2">class is an extremely abstract way of representing machine instructions. In particular, it only keeps track of an opcode number and a set of operands...</span><span class="c5">” &nbsp;Note that although the </span><span class="c37 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c5">&nbsp; class provides machine instruction creating methods, a dedicated function </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI()</a></span><span class="c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">&nbsp;(defined in llvm-3.1.src\include\llvm\CodeGen\MachineInstrBuilder.h), based on </a></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder </a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">class, </a></span><span class="c5">is more convenient. </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder </a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">class</a></span><span class="c5">&nbsp;will be discussed in the next subsection.</span></p><p class="c15"><span></span></p><p class="c20"><span class="c19">Part 7.3.4</span><span class="c19 c16">&nbsp;MachineInstrBuilder</span><span class="c19">&nbsp;</span></p><p class="c15"><span></span></p><p class="c20"><span>The file </span><span class="c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">MachineInstrBuilder.h defines a machine instruction builder. This file exposes a</a></span><span>&nbsp;function called </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI()</a></span><span>, which works internally with a class named </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a></span><span>. There are many different versions of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI()</a></span><span>&nbsp;functions. The source code is listed as below:</span></p><p class="c15"><span></span></p><p class="c17"><span class="c0">00008 </span><span class="c0 c6">//===----------------------------------------------------------------------===//</span><span class="c0"><br>00009 </span><span class="c0 c6">//</span><span class="c0"><br>00010 </span><span class="c0 c6">// This file exposes a function named BuildMI, which is useful for dramatically</span><span class="c0"><br>00011 </span><span class="c0 c6">// simplifying how MachineInstr's are created. &nbsp;It allows use of code like this:</span><span class="c0"><br>00012 </span><span class="c0 c6">//</span><span class="c0"><br>00013 </span><span class="c0 c6">// &nbsp; M = BuildMI(X86::ADDrr8, 2).addReg(argVal1).addReg(argVal2);</span><span class="c0"><br>00014 </span><span class="c0 c6">//</span><span class="c0"><br>00015 </span><span class="c0 c6">//===----------------------------------------------------------------------===//</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">00044</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a></span><span class="c0">&nbsp;{<br>00045 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;*MF;<br>00046 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*MI;<br>00047 </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#ac60fda08aba1209cfd08f216f9fdb252">00048</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#ac60fda08aba1209cfd08f216f9fdb252">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#ac60fda08aba1209cfd08f216f9fdb252">MachineInstrBuilder</a></span><span class="c0">() : MF(0), MI(0) {}<br>00049 <br>00050 </span><span class="c0 c6">&nbsp;/// Create a MachineInstrBuilder for manipulating an existing instruction.</span><span class="c0"><br>00051 </span><span class="c0 c6">&nbsp;/// F must be the machine function &nbsp;that was used to allocate I.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#a54b0e0d732ea36290a9b6ed6c9960836">00052</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#a54b0e0d732ea36290a9b6ed6c9960836">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#a54b0e0d732ea36290a9b6ed6c9960836">MachineInstrBuilder</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">) : MF(&amp;F), MI(I) {}<br>00053 <br>00054 </span><span class="c0 c6">&nbsp;/// Allow automatic conversion to the machine instruction we are working on.</span><span class="c0"><br>00055 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#a7517b254b21a6040240b3c36cba776d1">00056</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#a7517b254b21a6040240b3c36cba776d1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#a7517b254b21a6040240b3c36cba776d1">operator MachineInstr*</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;MI; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#a7d0a05cca0a9d2fdeacf13f91b84f24f">00057</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#a7d0a05cca0a9d2fdeacf13f91b84f24f">operator-&gt;</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;MI; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#ac703a4aa4c06866d4321226221dce800">00058</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#ac703a4aa4c06866d4321226221dce800">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#ac703a4aa4c06866d4321226221dce800">operator MachineBasicBlock::iterator</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;MI; }<br>00059 <br>00060 </span><span class="c0 c6">&nbsp;/// addReg - Add a new virtual register operand...</span><span class="c0"><br>00061 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00062 &nbsp;</span><span class="c0 c9">const</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#a5125cce72b214df09ca8f93dcbbf4c3a">00063</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#a5125cce72b214df09ca8f93dcbbf4c3a">addReg</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;RegNo, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;flags = 0,<br>00064 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;SubReg = 0)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00065 &nbsp; &nbsp; assert((flags &amp; 0x1) == 0 &amp;&amp;<br>00066 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"Passing in 'true' to addReg is forbidden! Use enums instead."</span><span class="c0">);<br>00067 &nbsp; &nbsp; MI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a469e271fba3a9b52dad4fa54eaf44e2b">addOperand</a></span><span class="c0">(*MF,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#a18124eff2d5106b9bf041f948a1912cc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#a18124eff2d5106b9bf041f948a1912cc">MachineOperand::CreateReg</a></span><span class="c0">(RegNo,<br>00068 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;flags &amp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa72c17e2ff2d5af62a30e56ac152aa8d5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a></span><span class="c0">,<br>00069 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;flags &amp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa0fec8ba6f4a4dc758b725205985eee99">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a></span><span class="c0">,<br>00070 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;flags &amp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa9ddde91ef09476d28a088fe57f8e2921">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa9ddde91ef09476d28a088fe57f8e2921">RegState::Kill</a></span><span class="c0">,<br>00071 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;flags &amp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa2fee1a7db4e84247a193a9af1f907013">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a></span><span class="c0">,<br>00072 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;flags &amp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daab502f975742e9bff6d6dd7b49439b806">RegState::Undef</a></span><span class="c0">,<br>00073 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;flags &amp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daacf55f329675ba5045a4863c7a018209b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daacf55f329675ba5045a4863c7a018209b">RegState::EarlyClobber</a></span><span class="c0">,<br>00074 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SubReg,<br>00075 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;flags &amp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa14af644ca4aff07a3768974c824ac9d5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa14af644ca4aff07a3768974c824ac9d5">RegState::Debug</a></span><span class="c0">,<br>00076 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;flags &amp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa7fcf0a8c65265b4519b79fa537bbd8a0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa7fcf0a8c65265b4519b79fa537bbd8a0">RegState::InternalRead</a></span><span class="c0">));<br>00077 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;*</span><span class="c0 c9">this</span><span class="c0">;<br>00078 &nbsp; }<br>00079 <br>00080 </span><span class="c0 c6">&nbsp;/// addImm - Add a new immediate operand.</span><span class="c0"><br>00081 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">00082</a></span><span class="c0">&nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#a9f1fae6a5dbb6e378ca85df1fded8515">addImm</a></span><span class="c0">(int64_t Val)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00083 &nbsp; &nbsp; MI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a469e271fba3a9b52dad4fa54eaf44e2b">addOperand</a></span><span class="c0">(*MF,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#ab09679b541a6ba1219b3602569847364">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#ab09679b541a6ba1219b3602569847364">MachineOperand::CreateImm</a></span><span class="c0">(Val));<br>00084 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;*</span><span class="c0 c9">this</span><span class="c0">;<br>00085 &nbsp; }</span></p><p class="c17"><span class="c0">….......................</span></p><p class="c17"><span class="c0">00219 </span><span class="c0 c6">/// BuildMI - Builder interface. &nbsp;Specify how to create the initial instruction</span><span class="c0"><br>00220 </span><span class="c0 c6">/// itself.</span><span class="c0"><br>00221 </span><span class="c0 c6">///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">00222</a></span><span class="c0">&nbsp;</span><span class="c0 c9">inline</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF,<br>00223 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;DL,<br>00224 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">MCInstrDesc</a></span><span class="c0">&nbsp;&amp;MCID) {<br>00225 &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a></span><span class="c0">(MF, MF.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#af3607186e9eb9417ccb6c852aa8b83dd">CreateMachineInstr</a></span><span class="c0">(MCID, DL));<br>00226 }<br>00227 <br>00228 </span><span class="c0 c6">/// BuildMI - This version of the builder sets up the first operand as a</span><span class="c0"><br>00229 </span><span class="c0 c6">/// destination virtual register.</span><span class="c0"><br>00230 </span><span class="c0 c6">///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a0a24f7510c5d837b3925c547523af284">00231</a></span><span class="c0">&nbsp;</span><span class="c0 c9">inline</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF,<br>00232 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;DL,<br>00233 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">MCInstrDesc</a></span><span class="c0">&nbsp;&amp;MCID,<br>00234 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;DestReg) {<br>00235 &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a></span><span class="c0">(MF, MF.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#af3607186e9eb9417ccb6c852aa8b83dd">CreateMachineInstr</a></span><span class="c0">(MCID, DL))<br>00236 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.addReg(DestReg,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa72c17e2ff2d5af62a30e56ac152aa8d5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a></span><span class="c0">);<br>00237 }<br>00238 <br>00239 </span><span class="c0 c6">/// BuildMI - This version of the builder inserts the newly-built</span><span class="c0"><br>00240 </span><span class="c0 c6">/// instruction before the given position in the given MachineBasicBlock, and</span><span class="c0"><br>00241 </span><span class="c0 c6">/// sets up the first operand as a destination virtual register.</span><span class="c0"><br>00242 </span><span class="c0 c6">///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#ade0f3b81094039ce8398b659f8d7f67b">00243</a></span><span class="c0">&nbsp;</span><span class="c0 c9">inline</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;&amp;BB,<br>00244 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">MachineBasicBlock::iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">,<br>00245 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;DL,<br>00246 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">MCInstrDesc</a></span><span class="c0">&nbsp;&amp;MCID,<br>00247 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;DestReg) {<br>00248 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF = *BB.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#af2e482ff2a9253ec6bc2285491496bd6">getParent</a></span><span class="c0">();<br>00249 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">&nbsp;= MF.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#af3607186e9eb9417ccb6c852aa8b83dd">CreateMachineInstr</a></span><span class="c0">(MCID, DL);<br>00250 &nbsp; BB.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a8d02c1e6ef20f42c10d6f4e7234efd61">insert</a></span><span class="c0">(I, MI);<br>00251 &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a></span><span class="c0">(MF, MI).</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html#a5125cce72b214df09ca8f93dcbbf4c3a">addReg</a></span><span class="c0">(DestReg,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa72c17e2ff2d5af62a30e56ac152aa8d5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1RegState.html#a079b254e749130fbe5d740f314ca92daa72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a></span><span class="c0">);<br>00252 }</span></p><p class="c17"><span class="c0">….............</span><span class="c0 c6">///// several other </span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI</a></span><span class="c0 c6">() functions with</span><span class="c0 c6">&nbsp;different prototypes. ////................</span></p><p class="c20"><span>…..........................</span></p><p class="c15"><span></span></p><p class="c20"><span>Regarding how to use </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a980570dc1410d4ef53806f82028ca381">BuildMI()</a></span><span>&nbsp;to build instructions, it is enough to refer to the LLVM document (listed here for convenience):</span></p><h4 class="c45 c20"><a name="h.okgineekigp1"></a><span class="c37 c48 c11 c58"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id23">Using the </a></span><span class="c30 c67 c25"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id23">MachineInstrBuilder.h</a></span><span class="c37 c48 c11 c58"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id23">&nbsp;functions</a></span></h4><p class="c20"><span class="c2">Machine instructions are created by using the </span><span class="c10 c5">BuildMI</span><span class="c2">&nbsp;functions, located in the </span><span class="c10 c5">include/llvm/CodeGen/MachineInstrBuilder.h</span><span class="c2">&nbsp;file. The </span><span class="c10 c5">BuildMI</span><span class="c2">&nbsp;functions make it easy to build arbitrary machine instructions. Usage of the </span><span class="c10 c5">BuildMI</span><span class="c2">&nbsp;functions look like this:</span></p><p class="c20"><span class="c18 c22 c5">// Create a 'DestReg = mov 42' (rendered in X86 assembly as 'mov DestReg, 42')</span><span class="c18 c5"><br></span><span class="c18 c22 c5">// instruction. &nbsp;The '1' specifies how many operands will be added.</span><span class="c18 c5"><br>MachineInstr </span><span class="c18 c5 c27">*</span><span class="c18 c5">MI </span><span class="c18 c5 c27">=</span><span class="c18 c5">&nbsp;BuildMI(X86</span><span class="c18 c5 c27">::</span><span class="c18 c5">MOV32ri, </span><span class="c3">1</span><span class="c18 c5">, DestReg).addImm(</span><span class="c3">42</span><span class="c18 c5">);<br><br></span><span class="c18 c22 c5">// Create the same instr, but insert it at the end of a basic block.</span><span class="c18 c5"><br>MachineBasicBlock </span><span class="c18 c5 c27">&amp;</span><span class="c18 c5">MBB </span><span class="c18 c5 c27">=</span><span class="c18 c5">&nbsp;...<br>BuildMI(MBB, X86</span><span class="c18 c5 c27">::</span><span class="c18 c5">MOV32ri, </span><span class="c3">1</span><span class="c18 c5">, DestReg).addImm(</span><span class="c3">42</span><span class="c18 c5">);<br><br></span><span class="c18 c22 c5">// Create the same instr, but insert it before a specified iterator point.</span><span class="c18 c5"><br>MachineBasicBlock</span><span class="c18 c5 c27">::</span><span class="c18 c5">iterator MBBI </span><span class="c18 c5 c27">=</span><span class="c18 c5">&nbsp;...<br>BuildMI(MBB, MBBI, X86</span><span class="c18 c5 c27">::</span><span class="c18 c5">MOV32ri, </span><span class="c3">1</span><span class="c18 c5">, DestReg).addImm(</span><span class="c3">42</span><span class="c18 c5">);<br><br></span><span class="c18 c22 c5">// Create a 'cmp Reg, 0' instruction, no destination reg.</span><span class="c18 c5"><br>MI </span><span class="c18 c5 c27">=</span><span class="c18 c5">&nbsp;BuildMI(X86</span><span class="c18 c5 c27">::</span><span class="c18 c5">CMP32ri, </span><span class="c3">2</span><span class="c18 c5">).addReg(Reg).addImm(</span><span class="c3">0</span><span class="c18 c5">);<br><br></span><span class="c18 c22 c5">// Create an 'sahf' instruction which takes no operands and stores nothing.</span><span class="c18 c5"><br>MI </span><span class="c18 c5 c27">=</span><span class="c18 c5">&nbsp;BuildMI(X86</span><span class="c18 c5 c27">::</span><span class="c18 c5">SAHF, </span><span class="c3">0</span><span class="c18 c5">);<br><br></span><span class="c18 c22 c5">// Create a self looping branch instruction.</span><span class="c18 c5"><br>BuildMI(MBB, X86</span><span class="c18 c5 c27">::</span><span class="c18 c5">JNE, </span><span class="c3">1</span><span class="c18 c5">).addMBB(</span><span class="c18 c5 c27">&amp;</span><span class="c18 c5">MBB);<br></span></p><p class="c20"><span class="c2">The key thing to remember with the </span><span class="c10 c5">BuildMI</span><span class="c2">&nbsp;functions is that you have to specify the number of operands that the machine instruction will take. This allows for efficient memory allocation. You also need to specify if operands default to be uses of values, not definitions. If you need to add a definition operand (other than the optional destination register), you must explicitly mark it as such: &nbsp; </span><span class="c18 c5">MI.addReg(Reg, RegState</span><span class="c18 c5 c27">::</span><span class="c18 c5">Define);</span></p><p class="c15"><span></span></p><p class="c15"><span></span></p><p class="c20"><span class="c19">Part 7.4 &nbsp;MC layer</span></p><p class="c15"><span class="c19"></span></p><p class="c20"><span class="c5">Ok, now for studying MC layer (</span><span class="c16 c63">machine code layer</span><span class="c5">) let’s first put something offical here for a high-level description:</span></p><h2 class="c45 c20"><span class="c37 c11 c47"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id30">The “MC” Layer</a></span></h2><p class="c20"><span class="c2">“</span><span class="c2">The MC Layer is used to represent and process code at the raw machine code level, devoid of “high level” information like “constant pools”, “jump tables”, “global variables” or anything like that. At this level, LLVM handles things like label names, machine instructions, and sections in the object file. The code in this layer is used for a number of important purposes: the tail end of the code generator uses it to write a .s or .o file, and it is also used by the </span><span class="c2">llvm-mc </span><span class="c2">tool to implement standalone machine code assemblers and disassemblers.</span></p><p class="c20"><span class="c2">This section describes some of the important classes. There are also a number of important subsystems that interact at this layer, they are described later in this manual.”</span></p><p class="c15"><span class="c2"></span></p><p class="c20"><span class="c2">MC layer contains several important components such as </span><span class="c0 c4">MCStreamer</span><span class="c2">, </span><span class="c0 c4">MCContext,</span><span class="c2">&nbsp;</span><span class="c0 c4">MCSymbol,</span><span class="c2">&nbsp;</span><span class="c0 c4">MCSection </span><span class="c2">and </span><span class="c0 c4">MCInst.</span><span class="c2">&nbsp;We will discuss these topics in the following subsections and the methodology we use to study them is starting each subsection/component by one paragraph from the LLVM document followed by a more detailed code study and explanation.</span></p><p class="c15"><span class="c2"></span></p><p class="c20"><span class="c19">Part 7.4.1 &nbsp;MCStreamer</span></p><h3 class="c45 c20"><span class="c37 c43 c11"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id31">The </a></span><span class="c30 c24"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id31">MCStreamer</a></span><span class="c37 c43 c11"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id31">&nbsp;API</a></span></h3><p class="c20"><span class="c2">“</span><span class="c2">MCStreamer is best thought of as an assembler API. It is an abstract API which is </span><span class="c2 c41">implemented</span><span class="c2">&nbsp;in different ways (e.g. to output a .s file, output an ELF .o file, etc) but whose API correspond directly to what you see in a .s file. MCStreamer has one method per directive, such as EmitLabel, EmitSymbolAttribute, SwitchSection, EmitValue (for .byte, .word), etc, which directly correspond to assembly level directives. It also has an EmitInstruction method, which is used to output an MCInst to the streamer.</span></p><p class="c20"><span class="c2">This API is most important for two clients: the llvm-mc stand-alone assembler is effectively a parser that parses a line, then invokes a method on MCStreamer. In the code generator, the </span><span class="c2 c29"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#code-emission">Code Emission</a></span><span class="c2">&nbsp;phase of the code generator lowers higher level LLVM IR and Machine* constructs down to the MC layer, emitting directives through MCStreamer.</span></p><p class="c20"><span class="c2">On the implementation side of MCStreamer, there are two major implementations: one for writing out a .s file (MCAsmStreamer), and one for writing out a .o file (MCObjectStreamer). MCAsmStreamer is a straight-forward implementation that prints out a directive for each method (e.g. </span><span class="c10 c5">EmitValue -&gt; .byte</span><span class="c2">), but MCObjectStreamer implements a full assembler.”</span></p><p class="c15"><span class="c2"></span></p><p class="c20"><span class="c2">A simplified class hierarchy is shown as follows (since some of the classes such as MCAsmStreamer does not have a corresponding header file thus the automatically generated llvm document does not have a complete class hierarchy):</span></p><p class="c20"><img height="280" src="./Notes on LLVM 3 (Target Independent Code Generator)_files/image08.png" width="665"></p><p class="c15"><span class="c2"></span></p><p class="c15"><span class="c2"></span></p><p class="c20"><span class="c2">First, let’s study MCStreamer. </span></p><p class="c15"><span class="c2"></span></p><p class="c20"><span class="c12 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c2">&nbsp;- Streaming machine code generation interface. This interface is intended to provide a programatic interface that is very similar to the level that an assembler .s file provides. It has callbacks to emit bytes, handle directives, etc. The implementation of this interface retains state to know what the current section is etc. There are multiple implementations of this interface: one for writing out a .s file, and implementations that write out .o files of various formats.</span></p><p class="c15"><span class="c2"></span></p><p class="c20"><span class="c2">Some representative function interfaces from the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c0">&nbsp;class are listed as below:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">00047</a></span><span class="c0">&nbsp; </span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c0">&nbsp;{<br>00048 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">MCContext</a></span><span class="c0">&nbsp;&amp;Context;<br>…...............................<br>00056 &nbsp; &nbsp; std::vector&lt;MCDwarfFrameInfo&gt; FrameInfos;<br>00057 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MCDwarfFrameInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MCDwarfFrameInfo.html">MCDwarfFrameInfo</a></span><span class="c0">&nbsp;*getCurrentFrameInfo();<br>00058 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*EmitCFICommon();<br>00059 &nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;EnsureValidFrame();<br>00061 &nbsp; &nbsp; std::vector&lt;MCWin64EHUnwindInfo *&gt; W64UnwindInfos;<br>00062 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MCWin64EHUnwindInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MCWin64EHUnwindInfo.html">MCWin64EHUnwindInfo</a></span><span class="c0">&nbsp;*CurrentW64UnwindInfo;<br>00063 &nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;setCurrentW64UnwindInfo(</span><span class="c4 c62 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MCWin64EHUnwindInfo.html">MCWin64EHUnwindInfo</a></span><span class="c0">&nbsp;*Frame);<br>00064 &nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;EnsureValidW64UnwindInfo();<br>00066 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">* LastSymbol;<br>00068 </span><span class="c0 c6">&nbsp; &nbsp;/// SectionStack - This is stack of current and previous section</span><span class="c0"><br>00069 </span><span class="c0 c6">&nbsp; &nbsp;/// values saved by PushSection.</span><span class="c0"><br>00070 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector</a></span><span class="c0">&lt;std::pair&lt;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0">&nbsp;*,<br>00071 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0">&nbsp;*&gt;, 4&gt; SectionStack;</span></p><p class="c17"><span class="c0">…...............................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a564530fd22c4ff09e0ddcf155edde4f5">00099</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">MCContext</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a564530fd22c4ff09e0ddcf155edde4f5">getContext</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;Context; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a21732c3da935638894b295f2590d25c7">00101</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a21732c3da935638894b295f2590d25c7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a21732c3da935638894b295f2590d25c7">getNumFrameInfos</a></span><span class="c0">() {<br>00102 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;FrameInfos.size(); }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a5777d2eabc2cdff266eef5799421fbb1">00105</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MCDwarfFrameInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MCDwarfFrameInfo.html">MCDwarfFrameInfo</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a5777d2eabc2cdff266eef5799421fbb1">getFrameInfo</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i) {<br>00106 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;FrameInfos[i];<br>00107 &nbsp; &nbsp; }</span></p><p class="c17"><span class="c0">…......................</span></p><p class="c17"><span class="c0">00162 </span><span class="c0 c6">&nbsp; &nbsp;/// getPreviousSection - Return the previous section that the streamer is</span><span class="c0"><br>00163 </span><span class="c0 c6">&nbsp; &nbsp;/// emitting code to.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a2bbf0b45cc29c8aa29c3227fbf134d9e">00164</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a2bbf0b45cc29c8aa29c3227fbf134d9e">getPreviousSection</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00165 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!SectionStack.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorBase.html#afdecfccba9b1fd8c9fd8eb27ae69e9a0">empty</a></span><span class="c0">())<br>00166 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;SectionStack.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a></span><span class="c0">().second;<br>00167 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;NULL;<br>00168 &nbsp; &nbsp; }<br>00170 </span><span class="c0 c6">&nbsp; &nbsp;/// ChangeSection - Update streamer for a new active section.</span><span class="c0"><br>00172 </span><span class="c0 c6">&nbsp; &nbsp;/// This is called by PopSection and SwitchSection, if the current</span><span class="c0"><br>00173 </span><span class="c0 c6">&nbsp; &nbsp;/// section changes.</span><span class="c0"><br>00174 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#abaec98cf76954a95a82f7e2c74c6d656">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#abaec98cf76954a95a82f7e2c74c6d656">ChangeSection</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0">&nbsp;*) = 0;<br>00176 </span><span class="c0 c6">&nbsp; &nbsp;/// pushSection - Save the current and previous section on the</span><span class="c0"><br>00177 </span><span class="c0 c6">&nbsp; &nbsp;/// section stack.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a0634a54e72a0151c131b79477f8ac5ae">00178</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a0634a54e72a0151c131b79477f8ac5ae">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a0634a54e72a0151c131b79477f8ac5ae">PushSection</a></span><span class="c0">() {<br>00179 &nbsp; &nbsp; &nbsp; SectionStack.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a></span><span class="c0">(std::make_pair(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#afa3e1088c51c302a2b98db869397215b">getCurrentSection</a></span><span class="c0">(),<br>00180 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a2bbf0b45cc29c8aa29c3227fbf134d9e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a2bbf0b45cc29c8aa29c3227fbf134d9e">getPreviousSection</a></span><span class="c0">()));<br>00181 &nbsp; &nbsp; }</span></p><p class="c17"><span class="c0">…...............................</span></p><p class="c17"><span class="c0">00245 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#afc6cd666226fc383ec083ae80e1f641b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#afc6cd666226fc383ec083ae80e1f641b">EmitLabel</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">);<br>00247 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a2268e5baccdb3ba7d8647c32a4434565">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a2268e5baccdb3ba7d8647c32a4434565">EmitDebugLabel</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">);<br>00249 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#aff66e7997ae90abaa1a96ab0cde15e6d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#aff66e7997ae90abaa1a96ab0cde15e6d">EmitEHSymAttributes</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">,<br>00250 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*EHSymbol);<br>00252 </span><span class="c0 c6">&nbsp; &nbsp;/// EmitAssemblerFlag - Note in the output the specified @p Flag.</span><span class="c0"><br>00253 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a6bb53c4cfc522cf436c2c6ca3ee0463c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a6bb53c4cfc522cf436c2c6ca3ee0463c">EmitAssemblerFlag</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa09571f0b44fd6bd8fae33d6ead290c1">MCAssemblerFlag</a></span><span class="c0">&nbsp;Flag) = 0;<br>00255 </span><span class="c0 c6">&nbsp; &nbsp;/// EmitDataRegion - Note in the output the specified region @p Kind.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a4fc379cb5b8b3b661baaa7718fafefe4">00256</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a4fc379cb5b8b3b661baaa7718fafefe4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a4fc379cb5b8b3b661baaa7718fafefe4">EmitDataRegion</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a515cb4eba75abc2f0e9dbfffb0137008">MCDataRegionType</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a></span><span class="c0">) {}<br>00258 </span><span class="c0 c6">&nbsp; &nbsp;/// EmitThumbFunc - Note in the output that the specified @p Func is</span><span class="c0"><br>00259 </span><span class="c0 c6">&nbsp; &nbsp;/// a Thumb mode function (ARM target only).</span><span class="c0"><br>00260 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a6b9eddf17c07fbfff94d27611ed2ebf0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a6b9eddf17c07fbfff94d27611ed2ebf0">EmitThumbFunc</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a></span><span class="c0">) = 0;</span></p><p class="c17"><span class="c0">00273 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a40672e4cca77dbe5479b702f558efb2a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a40672e4cca77dbe5479b702f558efb2a">EmitAssignment</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) = 0;</span></p><p class="c17"><span class="c0">00282 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a241e5470a16da13781c401c31cf98614">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a241e5470a16da13781c401c31cf98614">EmitWeakReference</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*Alias, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">) = 0;</span></p><p class="c17"><span class="c0">00322 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a2e15cae060fd1b4bd312244517a78609">&nbsp;</a></span><span class="c4 c62 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a2e15cae060fd1b4bd312244517a78609">EmitELFSize</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) = 0;</span></p><p class="c17"><span class="c0">00369 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a53548b7afec1f8a005bd51256127fd3b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a53548b7afec1f8a005bd51256127fd3b">EmitBytes</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1object_1_1macho.html#a56678f646a4a478d777eb8821f710db0a557a58f6e018464dcf0635728ef14dd1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1object_1_1macho.html#a56678f646a4a478d777eb8821f710db0a557a58f6e018464dcf0635728ef14dd1">Data</a></span><span class="c0">, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;AddrSpace) = 0;</span></p><p class="c17"><span class="c0">00489 </span><span class="c0 c6">&nbsp; &nbsp;/// EmitFileDirective - Switch to a new logical file. &nbsp;This is used to</span><span class="c0"><br>00490 </span><span class="c0 c6">&nbsp; &nbsp;/// implement the '.file "foo.c"' assembler directive.</span><span class="c0"><br>00491 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a7aea52cce0cb635b1980ee7e597cca55">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a7aea52cce0cb635b1980ee7e597cca55">EmitFileDirective</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;Filename) = 0;<br>00492 <br>00493 </span><span class="c0 c6">&nbsp; &nbsp;/// EmitDwarfFileDirective - Associate a filename with a specified logical</span><span class="c0"><br>00494 </span><span class="c0 c6">&nbsp; &nbsp;/// file number. &nbsp;This implements the DWARF2 '.file 4 "foo.c"' assembler</span><span class="c0"><br>00495 </span><span class="c0 c6">&nbsp; &nbsp;/// directive.</span><span class="c0"><br>00496 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a7abbca716e29b1a749f9a4a27225d167">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a7abbca716e29b1a749f9a4a27225d167">EmitDwarfFileDirective</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;FileNo,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;Directory,<br>00497 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;Filename);</span></p><p class="c17"><span class="c0">00521 &nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a6e08f67d6272d25386725a7d9520f29a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a6e08f67d6272d25386725a7d9520f29a">EmitCFIStartProc</a></span><span class="c0">();<br>00522 &nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a9606be2cc193dc7ba31ddccc96203731">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a9606be2cc193dc7ba31ddccc96203731">EmitCFIEndProc</a></span><span class="c0">();<br>00523 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#abeb365e8523028031d7a5b1c86c30a44">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#abeb365e8523028031d7a5b1c86c30a44">EmitCFIDefCfa</a></span><span class="c0">(int64_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Mem2Reg_8cpp.html#a6fde3eb6ca09ddf2fd76432176d817bb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Mem2Reg_8cpp.html#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a></span><span class="c0">, int64_t Offset);<br>00524 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a5a796752961c72abce1bba7ad7a18733">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a5a796752961c72abce1bba7ad7a18733">EmitCFIDefCfaOffset</a></span><span class="c0">(int64_t Offset);<br>00525 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a16bdafc15a84dccce9b03b0c578fa3f9">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a16bdafc15a84dccce9b03b0c578fa3f9">EmitCFIDefCfaRegister</a></span><span class="c0">(int64_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Mem2Reg_8cpp.html#a6fde3eb6ca09ddf2fd76432176d817bb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Mem2Reg_8cpp.html#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a></span><span class="c0">);<br>00526 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a8007113da7dab4c5fe60cb54b1ae83b0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a8007113da7dab4c5fe60cb54b1ae83b0">EmitCFIOffset</a></span><span class="c0">(int64_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Mem2Reg_8cpp.html#a6fde3eb6ca09ddf2fd76432176d817bb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Mem2Reg_8cpp.html#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a></span><span class="c0">, int64_t Offset);<br>00527 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a4fa3ff98a2aa9db5acdec1a5cfeb8183">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a4fa3ff98a2aa9db5acdec1a5cfeb8183">EmitCFIPersonality</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*Sym, </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceSIInstrEncodingType.html#afeb3e6e813ad0bcbeb2eaa29638e496a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceSIInstrEncodingType.html#afeb3e6e813ad0bcbeb2eaa29638e496a">Encoding</a></span><span class="c0">);<br>00528 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a61559c1a62655be80b7fd032a58c924f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a61559c1a62655be80b7fd032a58c924f">EmitCFILsda</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*Sym, </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceSIInstrEncodingType.html#afeb3e6e813ad0bcbeb2eaa29638e496a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceSIInstrEncodingType.html#afeb3e6e813ad0bcbeb2eaa29638e496a">Encoding</a></span><span class="c0">);<br>00529 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#ae9ba0ce51fb8d837d390068e834d4a0f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#ae9ba0ce51fb8d837d390068e834d4a0f">EmitCFIRememberState</a></span><span class="c0">();<br>00530 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#ae619d6c399645361ba4e770b44aba89f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#ae619d6c399645361ba4e770b44aba89f">EmitCFIRestoreState</a></span><span class="c0">();</span></p><p class="c17"><span class="c0">…..................................</span></p><p class="c17"><span class="c0">00631 </span><span class="c0 c6">&nbsp;/// createMachOStreamer - Create a machine code streamer which will generate</span><span class="c0"><br>00632 </span><span class="c0 c6">&nbsp;/// Mach-O format object files.</span><span class="c0"><br>00634 </span><span class="c0 c6">&nbsp;/// Takes ownership of \p TAB and \p CE.</span><span class="c0"><br>00635 &nbsp;MCStreamer *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a933f4f9ace041782e1a2d83b5787054f">createMachOStreamer</a></span><span class="c0">(MCContext &amp;Ctx, MCAsmBackend &amp;TAB,<br>00636 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raw_ostream &amp;OS, MCCodeEmitter *CE,<br>00637 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/CommandFlags_8h.html#aa88dee79c40cd585589f8412fd7346e2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/CommandFlags_8h.html#aa88dee79c40cd585589f8412fd7346e2">RelaxAll</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">);<br>00639 </span><span class="c0 c6">&nbsp;/// createWinCOFFStreamer - Create a machine code streamer which will</span><span class="c0"><br>00640 </span><span class="c0 c6">&nbsp;/// generate Microsoft COFF </span><span>format </span><span class="c0 c6">object files.</span><span class="c0"><br>00642 </span><span class="c0 c6">&nbsp;/// Takes ownership of \p TAB and \p CE.</span><span class="c0"><br>00643 &nbsp;MCStreamer *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#ab21be78e7101e4d31a54a9aa4533eec3">createWinCOFFStreamer</a></span><span class="c0">(MCContext &amp;Ctx,<br>00644 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MCAsmBackend &amp;TAB,<br>00645 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MCCodeEmitter &amp;CE, raw_ostream &amp;OS,<br>00646 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/CommandFlags_8h.html#aa88dee79c40cd585589f8412fd7346e2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/CommandFlags_8h.html#aa88dee79c40cd585589f8412fd7346e2">RelaxAll</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">);<br>00648 </span><span class="c0 c6">&nbsp;/// createELFStreamer - Create a machine code streamer which will generate</span><span class="c0"><br>00649 </span><span class="c0 c6">&nbsp;/// ELF format object files.</span><span class="c0"><br>00650 &nbsp;MCStreamer *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#ad78d14ebf0585d6fc7a5fd80f389a0aa">createELFStreamer</a></span><span class="c0">(MCContext &amp;Ctx, MCAsmBackend &amp;TAB,<br>00651 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; raw_ostream &amp;OS, MCCodeEmitter *CE,<br>00652 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/CommandFlags_8h.html#aa88dee79c40cd585589f8412fd7346e2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/CommandFlags_8h.html#aa88dee79c40cd585589f8412fd7346e2">RelaxAll</a></span><span class="c0">, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;NoExecStack);<br>00654 </span><span class="c0 c6">&nbsp;/// createPureStreamer - Create a machine code streamer which will generate</span><span class="c0"><br>00655 </span><span class="c0 c6">&nbsp;/// "pure" MC object files, for use with MC-JIT and testing tools.</span><span class="c0"><br>00657 </span><span class="c0 c6">&nbsp;/// Takes ownership of \p TAB and \p CE.</span><span class="c0"><br>00658 &nbsp;MCStreamer *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a3d86ec6e3f42f321cf35c6c15a29285e">createPureStreamer</a></span><span class="c0">(MCContext &amp;Ctx, MCAsmBackend &amp;TAB,<br>00659 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;raw_ostream &amp;OS, MCCodeEmitter *CE);</span></p><p class="c17 c35"><span class="c5 c11"></span></p><p class="c17"><span class="c5 c11">The above code snippet indicates </span><span class="c4 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c5 c11">&nbsp;class maintains a vector of frame info (</span><span class="c0">std::vector&lt;MCDwarfFrameInfo&gt; FrameInfos</span><span class="c5 c11">), a vector of unwind information (</span><span class="c0">std::vector&lt;MCWin64EHUnwindInfo *&gt; W64UnwindInfos</span><span class="c5 c11">), a section stack (</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector</a></span><span class="c0">&lt;std::pair&lt;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0">&nbsp;*, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0">&nbsp;*&gt;, 4&gt; SectionStack</span><span class="c5 c11">) and defines several important categories of functions. These functions include information getting methods (e.g., </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a564530fd22c4ff09e0ddcf155edde4f5">getContext</a></span><span class="c0">(),</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a21732c3da935638894b295f2590d25c7">getNumFrameInfos</a></span><span class="c5 c11">(), etc.</span><span class="c5 c11">), section manipulation operations (e.g.,</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a2bbf0b45cc29c8aa29c3227fbf134d9e">getPreviousSection</a></span><span class="c0">(),</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a0634a54e72a0151c131b79477f8ac5ae">PushSection</a></span><span class="c5 c11">(),etc.</span><span class="c5 c11">), emitting methods (e.g.,</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#afc6cd666226fc383ec083ae80e1f641b">EmitLabel</a></span><span class="c0">(),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a2268e5baccdb3ba7d8647c32a4434565">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a2268e5baccdb3ba7d8647c32a4434565">EmitDebugLabel</a></span><span class="c0">()</span><span class="c0 c8">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#aff66e7997ae90abaa1a96ab0cde15e6d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a6b9eddf17c07fbfff94d27611ed2ebf0">EmitThumbFunc</a></span><span class="c0">(</span><span class="c0">), </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a40672e4cca77dbe5479b702f558efb2a">EmitAssignment</a></span><span class="c0">() </span><span class="c4 c62 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a2e15cae060fd1b4bd312244517a78609">EmitELFSize</a></span><span class="c0">(),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a53548b7afec1f8a005bd51256127fd3b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a53548b7afec1f8a005bd51256127fd3b">EmitBytes</a></span><span class="c0">(</span><span class="c5 c11">), etc.) and a series of streamer creation methods (e.g.,</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#ad78d14ebf0585d6fc7a5fd80f389a0aa">createELFStreamer</a></span><span>(), </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a933f4f9ace041782e1a2d83b5787054f">createMachOStreamer</a></span><span class="c5 c11">()</span><span class="c5 c11">). Among those functions, the emitting methods and some of the other functions (e.g.,</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#abaec98cf76954a95a82f7e2c74c6d656">ChangeSection</a></span><span class="c5 c11">()</span><span class="c5 c11">) are defined as virtual or pure-virtual and thus are supposed to be re-implemented by a concrete streamer implementation. </span></p><p class="c17 c35"><span class="c5 c11"></span></p><p class="c17"><span class="c5 c11">From the inheritance hierarchy of the streamer class presented at the beginning of part 7.4.1 we can see </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6d29035e18bd0579d26418c1c520d33b">MCObjectStreamer</a></span><span class="c5 c11">&nbsp;and </span><span class="c0">MCAsmStreamer</span><span class="c5 c11">&nbsp;are two important classes that subclass the </span><span class="c4 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c5 c11">&nbsp;class. First let’s discuss the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6d29035e18bd0579d26418c1c520d33b">MCObjectStreamer</a></span><span class="c5 c11">&nbsp;class:</span></p><p class="c17"><span class="c0">00025 </span><span class="c0 c6">/// \brief Streaming object file generation interface.</span><span class="c0"><br>00027 </span><span class="c0 c6">/// This class provides an implementation of the MCStreamer interface which is</span><span class="c0"><br>00028 </span><span class="c0 c6">/// suitable for use with the assembler backend. Specific object file formats</span><span class="c0"><br>00029 </span><span class="c0 c6">/// are expected to subclass this interface to implement directives specific</span><span class="c0"><br>00030 </span><span class="c0 c6">/// to that file format or custom semantics expected by the object writer</span><span class="c0"><br>00031 </span><span class="c0 c6">/// implementation.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html">00032</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html">MCObjectStreamer</a></span><span class="c0">&nbsp;: </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c0">&nbsp;{<br>00033 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html">MCAssembler</a></span><span class="c0">&nbsp;*Assembler;</span></p><p class="c17"><span class="c5 c11">…....................... </span></p><p class="c44 c20"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html">MCObjectStreamer</a></span><span class="c5 c11">&nbsp;class </span><span class="c5 c11">is a little bit more concrete than the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c5 c11">&nbsp;class but still not “very concrete”, i.e., it is supposed to be further sub-classed by a more concrete streamer (e.g., </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html">MCELFStreamer</a></span><span class="c5 c11">) class aimed to write out .o (object) files.</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6d29035e18bd0579d26418c1c520d33b">MCObjectStreamer</a></span><span class="c5 c11">&nbsp;class implements or re-implements the pure-virtual or virtual functions defined in the abstract </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c5 c11">&nbsp;class. Specifically, it implements or re-implements the following pure-virtual or virtual functions:</span></p><p class="c17"><span class="c0">00071 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a9b43bfeb46c928be9ec6a9b06f4aeac7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a9b43bfeb46c928be9ec6a9b06f4aeac7">EmitLabel</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">);<br>00072 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a0fe270f2f8ca55e853bb8376a3926ac3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a0fe270f2f8ca55e853bb8376a3926ac3">EmitDebugLabel</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">);<br>00073 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad3fbc7585572683834703896aca5b63d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad3fbc7585572683834703896aca5b63d">EmitAssignment</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">);<br>00074 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a27850b0f1a2bf50379ce30f7cb184254">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a27850b0f1a2bf50379ce30f7cb184254">EmitValueImpl</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Size,<br>00075 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;AddrSpace);<br>00076 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ae4648c6238f514e4ac3c51693e1430b2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ae4648c6238f514e4ac3c51693e1430b2">EmitULEB128Value</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">);<br>00077 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad5f738c4aa10825ade3b2fd96d35954b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad5f738c4aa10825ade3b2fd96d35954b">EmitSLEB128Value</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">);<br>00078 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a9d78d200fe6d1b9df4614fdc3a3fb893">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a9d78d200fe6d1b9df4614fdc3a3fb893">EmitWeakReference</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*Alias, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">);<br>00079 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a15cc811baba98e38155a9b9fc54edbad">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a15cc811baba98e38155a9b9fc54edbad">ChangeSection</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">Section</a></span><span class="c0">);<br>00080 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#acd5e1f433c3d628cca662eb6bf77a9b8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#acd5e1f433c3d628cca662eb6bf77a9b8">EmitInstruction</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">MCInst</a></span><span class="c0">&nbsp;&amp;Inst);<br>00084 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad5c226060915a14c048d99e0762dbd1c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad5c226060915a14c048d99e0762dbd1c">EmitInstToFragment</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">MCInst</a></span><span class="c0">&nbsp;&amp;Inst);<br>00086 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad41a67a54d4871082eaf9106b8462039">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad41a67a54d4871082eaf9106b8462039">EmitBundleAlignMode</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;AlignPow2);<br>00087 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad65e9081aaaf6abb4973c65caf599fd0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad65e9081aaaf6abb4973c65caf599fd0">EmitBundleLock</a></span><span class="c0">();<br>00088 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a5de13f85b186cc1153531ccc7f8f3b84">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a5de13f85b186cc1153531ccc7f8f3b84">EmitBundleUnlock</a></span><span class="c0">();<br>00089 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a2834abcc1501bcb787c6bfbe2661edb8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a2834abcc1501bcb787c6bfbe2661edb8">EmitBytes</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1object_1_1macho.html#a56678f646a4a478d777eb8821f710db0a557a58f6e018464dcf0635728ef14dd1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1object_1_1macho.html#a56678f646a4a478d777eb8821f710db0a557a58f6e018464dcf0635728ef14dd1">Data</a></span><span class="c0">, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;AddrSpace);<br>00090 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#acef4a1a8155e59e570c525e55d621c1f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#acef4a1a8155e59e570c525e55d621c1f">EmitValueToAlignment</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1LCOMM.html#aae933cd10a930a5312da96502035e331a310fe8dc05086ce23b6826ccb3c37fc7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1LCOMM.html#aae933cd10a930a5312da96502035e331a310fe8dc05086ce23b6826ccb3c37fc7">ByteAlignment</a></span><span class="c0">,<br>00091 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int64_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">&nbsp;= 0,<br>00092 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;ValueSize = 1,<br>00093 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;MaxBytesToEmit = 0);<br>00094 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a649789a4f33b67e64a7116431c0719cf">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a649789a4f33b67e64a7116431c0719cf">EmitCodeAlignment</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1LCOMM.html#aae933cd10a930a5312da96502035e331a310fe8dc05086ce23b6826ccb3c37fc7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1LCOMM.html#aae933cd10a930a5312da96502035e331a310fe8dc05086ce23b6826ccb3c37fc7">ByteAlignment</a></span><span class="c0">,<br>00095 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;MaxBytesToEmit = 0);<br>00096 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#af14a7d8519d1943613eb714c8796228c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#af14a7d8519d1943613eb714c8796228c">EmitValueToOffset</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*Offset, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">);<br>00097 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ac2942075937ba1d7ae3e3b930aa44b63">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ac2942075937ba1d7ae3e3b930aa44b63">EmitDwarfAdvanceLineAddr</a></span><span class="c0">(int64_t LineDelta,<br>00098 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*LastLabel,<br>00099 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*Label,<br>00100 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;PointerSize);<br>00101 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a9c4319f86f5d90a1f027e7595ca441f1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a9c4319f86f5d90a1f027e7595ca441f1">EmitDwarfAdvanceFrameAddr</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*LastLabel,<br>00102 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*Label);<br>00103 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad2b4a389214e6897c8a432f2f8817482">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad2b4a389214e6897c8a432f2f8817482">EmitGPRel32Value</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">);<br>00104 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6f94700a3e363811f8a5a32b1870e108">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6f94700a3e363811f8a5a32b1870e108">EmitGPRel64Value</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">);<br>00105 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a385e2e881fcaebec65744e71eae4f9bf">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a385e2e881fcaebec65744e71eae4f9bf">EmitFill</a></span><span class="c0">(uint64_t NumBytes, uint8_t FillValue,<br>00106 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;AddrSpace);<br>00107 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a5ad5492598e8ac0fa1558a9c5cb4b0a3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a5ad5492598e8ac0fa1558a9c5cb4b0a3">FinishImpl</a></span><span class="c0">();</span></p><p class="c17 c35"><span class="c5 c11"></span></p><p class="c17"><span class="c5 c11">Functions such as </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a9b43bfeb46c928be9ec6a9b06f4aeac7">EmitLabel</a></span><span class="c5 c11">() and </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6f94700a3e363811f8a5a32b1870e108">EmitGPRel64Value</a></span><span class="c5 c11">() are re-implemented in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6d29035e18bd0579d26418c1c520d33b">MCObjectStreamer</a></span><span class="c5 c11">&nbsp;class:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a9b43bfeb46c928be9ec6a9b06f4aeac7">00122</a></span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a9b43bfeb46c928be9ec6a9b06f4aeac7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a9b43bfeb46c928be9ec6a9b06f4aeac7">MCObjectStreamer::EmitLabel</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">) {<br>00123 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a9b43bfeb46c928be9ec6a9b06f4aeac7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a9b43bfeb46c928be9ec6a9b06f4aeac7">MCStreamer::EmitLabel</a></span><span class="c0">(Symbol);<br>00125 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html">MCSymbolData</a></span><span class="c0">&nbsp;&amp;SD =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a4408eee4dd1837b1f7a891e29ac72109">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a4408eee4dd1837b1f7a891e29ac72109">getAssembler</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#aa3194fc7b6ccba8b9a156b5f1ea00257">getOrCreateSymbolData</a></span><span class="c0">(*Symbol);<br>00127 &nbsp; </span><span class="c0 c6">// FIXME: This is wasteful, we don't necessarily need to create a data</span><span class="c0"><br>00128 &nbsp; </span><span class="c0 c6">// fragment. Instead, we should mark the symbol as pointing into the data</span><span class="c0"><br>00129 &nbsp; </span><span class="c0 c6">// fragment if it exists, otherwise we should just queue the label and set its</span><span class="c0"><br>00130 &nbsp; </span><span class="c0 c6">// fragment pointer when we emit the next fragment.</span><span class="c0"><br>00131 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCDataFragment.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCDataFragment.html">MCDataFragment</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></span><span class="c0">&nbsp;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a41660e6abb9a978631360ccb60cd42e5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a41660e6abb9a978631360ccb60cd42e5">getOrCreateDataFragment</a></span><span class="c0">();<br>00132 &nbsp; assert(!SD.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html#a14a11f14edf382edc98d246e935754fc">getFragment</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"Unexpected fragment on symbol data!"</span><span class="c0">);<br>00133 &nbsp; SD.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html#a13957aa7f619cd735989dffbbf30a9d2">setFragment</a></span><span class="c0">(F);<br>00134 &nbsp; SD.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html#a1fe1305685632b62e278b02115a84ebf">setOffset</a></span><span class="c0">(F-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCDataFragment.html#a84c5ac892c448d8e0e065421d582fba7">getContents</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a></span><span class="c0">());<br>00135 }</span></p><p class="c17"><span class="c5 c11">….........................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6f94700a3e363811f8a5a32b1870e108">00330</a></span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6f94700a3e363811f8a5a32b1870e108">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6f94700a3e363811f8a5a32b1870e108">MCObjectStreamer::EmitGPRel64Value</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) {<br>00331 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCDataFragment.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCDataFragment.html">MCDataFragment</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1X86II.html#af727161d2501accae1552828d0fd190ca5a78bc4e042ab2fbe041f0c29c1de4c0">DF</a></span><span class="c0">&nbsp;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a41660e6abb9a978631360ccb60cd42e5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a41660e6abb9a978631360ccb60cd42e5">getOrCreateDataFragment</a></span><span class="c0">();<br>00332 <br>00333 &nbsp; DF-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCDataFragment.html#aa46c3a7348dcb6d1599cab9ef31eee6f">getFixups</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html#a414488cc968c8f26651180cf723687ac">MCFixup::Create</a></span><span class="c0">(DF-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCDataFragment.html#a84c5ac892c448d8e0e065421d582fba7">getContents</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a></span><span class="c0">(), <br>00334 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Value,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a84cef097f15848752272d38769011f58ab39a952893aef8c5d618b3d6f7d6bc84">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a84cef097f15848752272d38769011f58ab39a952893aef8c5d618b3d6f7d6bc84">FK_GPRel_4</a></span><span class="c0">));<br>00335 &nbsp; DF-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCDataFragment.html#a84c5ac892c448d8e0e065421d582fba7">getContents</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorImpl.html#a102d0ad36060677286c3aefb812e5512">resize</a></span><span class="c0">(DF-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCDataFragment.html#a84c5ac892c448d8e0e065421d582fba7">getContents</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a></span><span class="c0">() + 8, 0);<br>00336 }</span></p><p class="c17"><span class="c5 c11">while the original definitions of these two functions in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c5 c11">&nbsp;class are:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a0839e2354f1757ffbf4f617ead989397">00143</a></span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a0839e2354f1757ffbf4f617ead989397">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#a0839e2354f1757ffbf4f617ead989397">MCStreamer::EmitGPRel64Value</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) {<br>00144 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af9521f126aaffcc4bbe06c554b8b4bc1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af9521f126aaffcc4bbe06c554b8b4bc1">report_fatal_error</a></span><span class="c0">(</span><span class="c0 c14">"unsupported directive in streamer"</span><span class="c0">);<br>00145 }</span></p><p class="c17"><span class="c5 c11">…........................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#afc6cd666226fc383ec083ae80e1f641b">00191</a></span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#afc6cd666226fc383ec083ae80e1f641b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#afc6cd666226fc383ec083ae80e1f641b">MCStreamer::EmitLabel</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">) {<br>00192 &nbsp; assert(!Symbol-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ac542b727bb1c9dd954198bf3906912ce">isVariable</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"Cannot emit a variable symbol!"</span><span class="c0">);<br>00193 &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#afa3e1088c51c302a2b98db869397215b">getCurrentSection</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"Cannot emit before setting section!"</span><span class="c0">);<br>00194 &nbsp; Symbol-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ad32bcaa3b923d1d81b03b4b6b188666b">setSection</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#afa3e1088c51c302a2b98db869397215b">getCurrentSection</a></span><span class="c0">());<br>00195 &nbsp; LastSymbol =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">;<br>00196 }</span></p><p class="c17 c35"><span class="c5 c11"></span></p><p class="c44 c20"><span class="c5 c11">Other functions are pure-virtual in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c5 c11">&nbsp;class but implemented in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6d29035e18bd0579d26418c1c520d33b">MCObjectStreamer</a></span><span class="c5 c11">&nbsp;class. </span><span class="c5 c11">For example, the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#acd5e1f433c3d628cca662eb6bf77a9b8">EmitInstruction</a></span><span class="c5 c11">()</span><span class="c5 c11">&nbsp;function is defined as a pure-virtual function in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c5 c11">&nbsp;class while has the following definition in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6d29035e18bd0579d26418c1c520d33b">MCObjectStreamer</a></span><span class="c5 c11">&nbsp;class:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#acd5e1f433c3d628cca662eb6bf77a9b8">00177</a></span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#acd5e1f433c3d628cca662eb6bf77a9b8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#acd5e1f433c3d628cca662eb6bf77a9b8">MCObjectStreamer::EmitInstruction</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">MCInst</a></span><span class="c0">&nbsp;&amp;Inst) {<br>00178 &nbsp; </span><span class="c0 c6">// Scan for values.</span><span class="c0"><br>00179 &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i = Inst.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#aa168c83cd321703fa7d10e739d48a0df">getNumOperands</a></span><span class="c0">(); i--; )<br>00180 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(Inst.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a82523248f1c8145141a026cf3e57cf48">getOperand</a></span><span class="c0">(i).</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#aae789dd5c5d7cd72d506a2ee66a7053f">isExpr</a></span><span class="c0">())<br>00181 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ae353fdccd6cdbdb6bdb8bd0d8cceed3d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ae353fdccd6cdbdb6bdb8bd0d8cceed3d">AddValueSymbols</a></span><span class="c0">(Inst.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a82523248f1c8145141a026cf3e57cf48">getOperand</a></span><span class="c0">(i).</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a89ba9ada9753995d37920bd8a8c02662">getExpr</a></span><span class="c0">());<br>00183 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSectionData.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSectionData.html">MCSectionData</a></span><span class="c0">&nbsp;*SD =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6248c0d49208de0fadf77923e3a1f45b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6248c0d49208de0fadf77923e3a1f45b">getCurrentSectionData</a></span><span class="c0">();<br>00184 &nbsp; SD-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSectionData.html#a3db55a54c9fc24c97d985b78bb289cd3">setHasInstructions</a></span><span class="c0">(</span><span class="c0 c9">true</span><span class="c0">);<br>00186 &nbsp; </span><span class="c0 c6">// Now that a machine instruction has been assembled into this section, make</span><span class="c0"><br>00187 &nbsp; </span><span class="c0 c6">// a line entry for any .loc directive that has been seen.</span><span class="c0"><br>00188 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCLineEntry.html#ad94db3bb5dd8621c350e8c167e471df4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCLineEntry.html#ad94db3bb5dd8621c350e8c167e471df4">MCLineEntry::Make</a></span><span class="c0">(</span><span class="c0 c9">this</span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#afa3e1088c51c302a2b98db869397215b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#afa3e1088c51c302a2b98db869397215b">getCurrentSection</a></span><span class="c0">());<br>00190 &nbsp; </span><span class="c0 c6">// If this instruction doesn't need relaxation, just emit it as data.</span><span class="c0"><br>00191 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html">MCAssembler</a></span><span class="c0">&nbsp;&amp;Assembler =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a4408eee4dd1837b1f7a891e29ac72109">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a4408eee4dd1837b1f7a891e29ac72109">getAssembler</a></span><span class="c0">();<br>00192 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!Assembler.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#afaf0985ccf5367176293eb13ec43bddc">getBackend</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#ac2996dba2ecb84bd6734f3c898ec54d2">mayNeedRelaxation</a></span><span class="c0">(Inst)) {<br>00193 &nbsp; &nbsp; EmitInstToData(Inst);<br>00194 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">;<br>00195 &nbsp; }</span></p><p class="c17"><span class="c5 c11">Similarly, the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad3fbc7585572683834703896aca5b63d">EmitAssignment</a></span><span class="c5 c11">() function is defined as a pure-virtual function in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c5 c11">&nbsp;class while has the following definition in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6d29035e18bd0579d26418c1c520d33b">MCObjectStreamer</a></span><span class="c5 c11">&nbsp;class:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad3fbc7585572683834703896aca5b63d">00172</a></span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad3fbc7585572683834703896aca5b63d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad3fbc7585572683834703896aca5b63d">MCObjectStreamer::EmitAssignment</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) {<br>00173 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a4408eee4dd1837b1f7a891e29ac72109">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a4408eee4dd1837b1f7a891e29ac72109">getAssembler</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#aa3194fc7b6ccba8b9a156b5f1ea00257">getOrCreateSymbolData</a></span><span class="c0">(*Symbol);<br>00174 &nbsp; Symbol-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a7f1486460b5e2da7f4527bbb2da54eff">setVariableValue</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ae353fdccd6cdbdb6bdb8bd0d8cceed3d">AddValueSymbols</a></span><span class="c0">(Value));<br>00175 }</span></p><p class="c17 c35"><span class="c5 c11"></span></p><p class="c17"><span class="c5 c11">The above code snippet reveals that </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad3fbc7585572683834703896aca5b63d">MCObjectStreamer</a></span><span class="c5 c11">&nbsp;class is closely related to the &nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html">MCAssembler</a></span><span class="c5 c11">&nbsp;class. An </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad3fbc7585572683834703896aca5b63d">MCObjectStreamer</a></span><span class="c5 c11">&nbsp;object gets its </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html">MCAssembler</a></span><span class="c0">&nbsp;*Assembler</span><span class="c5 c11">&nbsp;member by calling </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a4408eee4dd1837b1f7a891e29ac72109">getAssembler</a></span><span>() and then invoke various methods (e.g.,</span><span class="c0">Assembler.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#afaf0985ccf5367176293eb13ec43bddc">getBackend</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#ac2996dba2ecb84bd6734f3c898ec54d2">mayNeedRelaxation</a></span><span class="c0">(Inst), </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a4408eee4dd1837b1f7a891e29ac72109">getAssembler</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#aa3194fc7b6ccba8b9a156b5f1ea00257">getOrCreateSymbolData</a></span><span class="c0">(*Symbol)</span><span>) upon it (</span><span class="c0">Assembler</span><span>). </span></p><p class="c17 c35"><span class="c5 c11"></span></p><p class="c17"><span class="c5 c11">For now we shall discuss other derived classes based on the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c5 c11">&nbsp;class. We will discuss what’s the role of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html">MCAssembler</a></span><span class="c5 c11">&nbsp;and its relationship with </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad3fbc7585572683834703896aca5b63d">MCObjectStreamer</a></span><span class="c5 c11">&nbsp;as well as other object streamer derived classes in the next subsection (part 7.4.2). Following the above discussion of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad3fbc7585572683834703896aca5b63d">MCObjectStreamer</a></span><span class="c5 c11">&nbsp;class, it is nice to extend the topic to its subclass </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html">MCELFStreamer</a></span><span class="c5 c11">. &nbsp;</span></p><p class="c15 c44"><span class="c5 c11"></span></p><p class="c17 c35"><span class="c5 c11"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html">MCELFStreamer</a></span><span class="c5 c11">&nbsp;further re-implements some functions defined in </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad3fbc7585572683834703896aca5b63d">MCObjectStreamer</a></span><span class="c5 c11">. For example the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html#a61060e71d7b9aa29d4addbd27d54b45f">EmitLabel</a></span><span class="c5 c11">() function:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html#a61060e71d7b9aa29d4addbd27d54b45f">00077</a></span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html#a61060e71d7b9aa29d4addbd27d54b45f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html#a61060e71d7b9aa29d4addbd27d54b45f">MCELFStreamer::EmitLabel</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">) {<br>00078 &nbsp; assert(Symbol-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a2260c62e12734815ad60dc038bf514f5">isUndefined</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"Cannot define a symbol twice!"</span><span class="c0">);<br>00080 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html#a61060e71d7b9aa29d4addbd27d54b45f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html#a61060e71d7b9aa29d4addbd27d54b45f">MCObjectStreamer::EmitLabel</a></span><span class="c0">(Symbol);<br>00082 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSectionELF.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSectionELF.html">MCSectionELF</a></span><span class="c0">&nbsp;&amp;Section =<br>00083 &nbsp; &nbsp; </span><span class="c0 c9">static_cast&lt;const</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSectionELF.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSectionELF.html">MCSectionELF</a></span><span class="c0">&amp;</span><span class="c0 c9">&gt;</span><span class="c0">(Symbol-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a7605b3302f3325d1fbdac43346c1a2dd">getSection</a></span><span class="c0">());<br>00084 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html">MCSymbolData</a></span><span class="c0">&nbsp;&amp;SD =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a4408eee4dd1837b1f7a891e29ac72109">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a4408eee4dd1837b1f7a891e29ac72109">getAssembler</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#a1bdc5a7bf34c469f9ea35dec62e94895">getSymbolData</a></span><span class="c0">(*Symbol);<br>00085 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(Section.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSectionELF.html#a4d09ec2da8b097db0c06d5edd0b0bd89">getFlags</a></span><span class="c0">() &amp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ELF.html#ad3835243813e2897afb29e66e1b15f9eaf09f8799cc15fd856ff2284c7519d6d8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ELF.html#ad3835243813e2897afb29e66e1b15f9eaf09f8799cc15fd856ff2284c7519d6d8">ELF::SHF_TLS</a></span><span class="c0">)<br>00086 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELF.html#a75c009615492dfeb6069c58824695d75">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELF.html#a75c009615492dfeb6069c58824695d75">MCELF::SetType</a></span><span class="c0">(SD,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ELF.html#a266dd1690651acfc919f8a259673b265ab453d9dfef54b0c7fd0cbaf82b4ba9d6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ELF.html#a266dd1690651acfc919f8a259673b265ab453d9dfef54b0c7fd0cbaf82b4ba9d6">ELF::STT_TLS</a></span><span class="c0">);<br>00087 }</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c0">It also implements some functions that are pure-virtual in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html">MCAssembler</a></span><span class="c0">&nbsp;class and not implemented in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad3fbc7585572683834703896aca5b63d">MCObjectStreamer</a></span><span class="c0">&nbsp;class. For example the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html#a66d057e72bdb9a0f521a3e4b269f1f99">EmitFileDirective() </a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html#a66d057e72bdb9a0f521a3e4b269f1f99">function:</a></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html#a66d057e72bdb9a0f521a3e4b269f1f99">00287</a></span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html#a66d057e72bdb9a0f521a3e4b269f1f99">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html#a66d057e72bdb9a0f521a3e4b269f1f99">MCELFStreamer::EmitFileDirective</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;Filename) {<br>00288 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">&nbsp;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a4408eee4dd1837b1f7a891e29ac72109">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a4408eee4dd1837b1f7a891e29ac72109">getAssembler</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#a85f602e21fbfcdc94288a8f472ec92d5">getContext</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html#a8e6c276fbf3f81102644e7b560a5cc3d">GetOrCreateSymbol</a></span><span class="c0">(Filename);<br>00289 &nbsp; Symbol-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ad32bcaa3b923d1d81b03b4b6b188666b">setSection</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#afa3e1088c51c302a2b98db869397215b">getCurrentSection</a></span><span class="c0">());<br>00290 &nbsp; Symbol-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#afb25c9ed8cf0778583798477374a2e38">setAbsolute</a></span><span class="c0">();<br>00292 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html">MCSymbolData</a></span><span class="c0">&nbsp;&amp;SD =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a4408eee4dd1837b1f7a891e29ac72109">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a4408eee4dd1837b1f7a891e29ac72109">getAssembler</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#aa3194fc7b6ccba8b9a156b5f1ea00257">getOrCreateSymbolData</a></span><span class="c0">(*Symbol);<br>00294 &nbsp; SD.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html#aab6dfa20a99ab3bdde202649bc03b1ad">setFlags</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a2cfc8c1d3a5c71e0e32ff94443c15d1da73a2b5301ccf0067f048e8f9230383bf">ELF_STT_File</a></span><span class="c0">&nbsp;|</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a2cfc8c1d3a5c71e0e32ff94443c15d1dace30b4b39544df5ecad9e2f88110cf87">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a2cfc8c1d3a5c71e0e32ff94443c15d1dace30b4b39544df5ecad9e2f88110cf87">ELF_STB_Local</a></span><span class="c0">&nbsp;|</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a2cfc8c1d3a5c71e0e32ff94443c15d1da61b402253e909e2c65c2fda74a997624">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a2cfc8c1d3a5c71e0e32ff94443c15d1da61b402253e909e2c65c2fda74a997624">ELF_STV_Default</a></span><span class="c0">);<br>00295 }</span></p><p class="c17"><span class="c5 c11">Another such example is </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html#aa3a671f63c7d626eef1661408da2cb9e">EmitELFSize():</a></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html#aa3a671f63c7d626eef1661408da2cb9e">00251</a></span><span class="c0 c4">&nbsp;</span><span class="c0 c49 c8">void</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html#aa3a671f63c7d626eef1661408da2cb9e">&nbsp;MCELFStreamer::EmitELFSize</a></span><span class="c0 c4">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0 c4">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0 c4">, </span><span class="c0 c9 c49">const</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;MCExpr</a></span><span class="c0 c4">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0 c4">) {<br>00252 &nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html">&nbsp;MCSymbolData</a></span><span class="c0 c4">&nbsp;&amp;SD =</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a4408eee4dd1837b1f7a891e29ac72109">&nbsp;getAssembler</a></span><span class="c0 c4">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#aa3194fc7b6ccba8b9a156b5f1ea00257">getOrCreateSymbolData</a></span><span class="c0 c4">(*Symbol);<br>00253 &nbsp; SD.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html#a7efad6cd23316070e9aca13a43eb024f">setSize</a></span><span class="c0 c4">(Value);<br>00254 }</span></p><p class="c15 c44"><span class="c0"></span></p><p class="c15 c44"><span class="c5 c11"></span></p><p class="c17"><span class="c5 c11">Other than the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#ad3fbc7585572683834703896aca5b63d">MCObjectStreamer</a></span><span class="c0">&nbsp; </span><span class="c5 c11">class and its subclass (e.g.,</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFStreamer.html#aa3a671f63c7d626eef1661408da2cb9e">MCELFStreamer</a></span><span class="c5 c11">), there is another class that inherits the base class </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c5 c11">&nbsp;named </span><span class="c0">MCAsmStreamer. </span><span class="c5 c11">Its code is listed here (note that this class does not have header file, all interface and definitions are in a cpp file):</span></p><p class="c17"><span class="c0">00038 </span><span class="c0 c9">class </span><span class="c0">MCAsmStreamer : </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c0">&nbsp;{<br>00039 </span><span class="c0 c9">protected</span><span class="c0">:<br>00040 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1formatted__raw__ostream.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1formatted__raw__ostream.html">formatted_raw_ostream</a></span><span class="c0">&nbsp;&amp;OS;<br>00041 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">MCAsmInfo</a></span><span class="c0">&nbsp;&amp;MAI;<br>00042 </span><span class="c0 c9">private</span><span class="c0">:<br>00043 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1OwningPtr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1OwningPtr.html">OwningPtr&lt;MCInstPrinter&gt;</a></span><span class="c0">&nbsp;InstPrinter;<br>00044 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1OwningPtr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1OwningPtr.html">OwningPtr&lt;MCCodeEmitter&gt;</a></span><span class="c0">&nbsp;Emitter;<br>00045 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1OwningPtr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1OwningPtr.html">OwningPtr&lt;MCAsmBackend&gt;</a></span><span class="c0">&nbsp;AsmBackend;<br>00047 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallString.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a></span><span class="c0">&nbsp;CommentToEmit;<br>00048 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__svector__ostream.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__svector__ostream.html">raw_svector_ostream</a></span><span class="c0">&nbsp;CommentStream;</span></p><p class="c17"><span class="c5 c11">…........................</span></p><p class="c17"><span class="c0">00346 </span><span class="c0 c8">void</span><span class="c0">&nbsp;MCAsmStreamer::EmitLabel(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*Symbol) {<br>00347 &nbsp; assert(Symbol-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a2260c62e12734815ad60dc038bf514f5">isUndefined</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"Cannot define a symbol twice!"</span><span class="c0">);<br>00348 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#afc6cd666226fc383ec083ae80e1f641b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html#afc6cd666226fc383ec083ae80e1f641b">MCStreamer::EmitLabel</a></span><span class="c0">(Symbol);<br>00350 &nbsp; OS &lt;&lt; *Symbol &lt;&lt; MAI.getLabelSuffix();<br>00351 &nbsp; EmitEOL();<br>00352 }</span></p><p class="c17"><span class="c5 c11">…......................</span></p><p class="c17"><span class="c0">00362 </span><span class="c0 c8">void</span><span class="c0">&nbsp;MCAsmStreamer::EmitAssemblerFlag(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa09571f0b44fd6bd8fae33d6ead290c1">MCAssemblerFlag</a></span><span class="c0">&nbsp;Flag) {<br>00363 &nbsp; </span><span class="c0 c7">switch</span><span class="c0">&nbsp;(Flag) {<br>00364 &nbsp; </span><span class="c0 c7">case</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa09571f0b44fd6bd8fae33d6ead290c1a4673762188cd819fd32979a26c1c67b5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa09571f0b44fd6bd8fae33d6ead290c1a4673762188cd819fd32979a26c1c67b5">MCAF_SyntaxUnified</a></span><span class="c0">: &nbsp; &nbsp; &nbsp; &nbsp; OS &lt;&lt; </span><span class="c0 c14">"\t.syntax unified"</span><span class="c0">; </span><span class="c0 c7">break</span><span class="c0">;<br>00365 &nbsp; </span><span class="c0 c7">case</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa09571f0b44fd6bd8fae33d6ead290c1adeea37757529c5d5cfeb922221d0f6f0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa09571f0b44fd6bd8fae33d6ead290c1adeea37757529c5d5cfeb922221d0f6f0">MCAF_SubsectionsViaSymbols</a></span><span class="c0">: OS &lt;&lt; </span><span class="c0 c14">".subsections_via_symbols"</span><span class="c0">; </span><span class="c0 c7">break</span><span class="c0">;<br>00366 &nbsp; </span><span class="c0 c7">case</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa09571f0b44fd6bd8fae33d6ead290c1a97f114ed47db100e48185ee6d6ad531b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa09571f0b44fd6bd8fae33d6ead290c1a97f114ed47db100e48185ee6d6ad531b">MCAF_Code16</a></span><span class="c0">: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;OS &lt;&lt; </span><span class="c0 c13">'\t'</span><span class="c0">&lt;&lt; MAI.getCode16Directive(); </span><span class="c0 c7">break</span><span class="c0">;<br>00367 &nbsp; </span><span class="c0 c7">case</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa09571f0b44fd6bd8fae33d6ead290c1ad77d445deab9f2715c6d2b48aee116ea">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa09571f0b44fd6bd8fae33d6ead290c1ad77d445deab9f2715c6d2b48aee116ea">MCAF_Code32</a></span><span class="c0">: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;OS &lt;&lt; </span><span class="c0 c13">'\t'</span><span class="c0">&lt;&lt; MAI.getCode32Directive(); </span><span class="c0 c7">break</span><span class="c0">;<br>00368 &nbsp; </span><span class="c0 c7">case</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa09571f0b44fd6bd8fae33d6ead290c1a836c6b17b1d82a5d54d61120d3a99f8a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa09571f0b44fd6bd8fae33d6ead290c1a836c6b17b1d82a5d54d61120d3a99f8a">MCAF_Code64</a></span><span class="c0">: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;OS &lt;&lt; </span><span class="c0 c13">'\t'</span><span class="c0">&lt;&lt; MAI.getCode64Directive(); </span><span class="c0 c7">break</span><span class="c0">;<br>00369 &nbsp; }<br>00370 &nbsp; EmitEOL();<br>00371 }</span></p><p class="c17"><span class="c5 c11">….................................................................</span></p><p class="c17"><span class="c0">00514 </span><span class="c0 c8">void</span><span class="c0">&nbsp;MCAsmStreamer::EmitELFSize(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*Symbol, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*Value) {<br>00515 &nbsp; assert(MAI.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a3388304ef281eaa1ec9517b29a74589e">hasDotTypeDotSizeDirective</a></span><span class="c0">());<br>00516 &nbsp; OS &lt;&lt; </span><span class="c0 c14">"\t.size\t"</span><span class="c0">&nbsp;&lt;&lt; *Symbol &lt;&lt; </span><span class="c0 c14">", "</span><span class="c0">&nbsp;&lt;&lt; *Value &lt;&lt; </span><span class="c0 c13">'\n'</span><span class="c0">;<br>00517 }</span></p><p class="c17"><span class="c0">…...................................................................</span></p><p class="c17"><span class="c0">00803 </span><span class="c0 c8">void</span><span class="c0">&nbsp;MCAsmStreamer::EmitFileDirective(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;Filename) {<br>00804 &nbsp; assert(MAI.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a5b65720e833b24b973a26a80bc7df87f">hasSingleParameterDotFile</a></span><span class="c0">());<br>00805 &nbsp; OS &lt;&lt; </span><span class="c0 c14">"\t.file\t"</span><span class="c0">;<br>00806 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/MCAsmStreamer_8cpp.html#abe7506fc2391f68e74522dfa6f87e9bf">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/MCAsmStreamer_8cpp.html#abe7506fc2391f68e74522dfa6f87e9bf">PrintQuotedString</a></span><span class="c0">(Filename, OS);<br>00807 &nbsp; EmitEOL();<br>00808 }</span></p><p class="c15 c44"><span class="c5 c11"></span></p><p class="c17"><span class="c5 c11">As can be seen from the above code snippet, </span><span class="c0">MCAsmStreamer</span><span class="c5 c11">&nbsp;class implements or re-implements vast majority of relevant virtual functions in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c5 c11">&nbsp;class for streaming .s (assembly) files. &nbsp;The </span><span class="c0">MCAsmStreamer</span><span class="c5 c11">&nbsp;class relies on several important data members to provide target and platform specific information. These members are </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">MCAsmInfo</a></span><span class="c0">&nbsp;&amp;MAI</span><span class="c5 c11">&nbsp;</span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1OwningPtr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1OwningPtr.html">OwningPtr&lt;MCInstPrinter&gt;</a></span><span class="c0">&nbsp;InstPrinter, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1OwningPtr.html">OwningPtr&lt;MCCodeEmitter&gt;</a></span><span class="c0">&nbsp;Emitter and </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1OwningPtr.html">OwningPtr&lt;MCAsmBackend&gt;</a></span><span class="c0">&nbsp;AsmBackend. &nbsp;We shall discuss them in the next subsection (part 7.4.2)</span></p><p class="c15 c44"><span class="c5 c11"></span></p><p class="c15 c44"><span class="c0"></span></p><p class="c17"><span class="c19">Part 7.4.2 MCAssembler, MCAsmInfo, MCInstPrinter, MCCodeEmitter and MCAsmBackend</span></p><p class="c17 c35"><span class="c5 c11"></span></p><p class="c17"><span class="c5 c11">First let’s get start on </span></p><p class="c17 c35"><span class="c5 c11"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html">00711</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html">MCAssembler</a></span><span class="c0">&nbsp;{<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#a704ebef95094557bb3c7c89b8878dc7f">00712</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">friend</span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c0">;<br>00732 </span><span class="c0 c9">private</span><span class="c0">:<br>00736 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">MCContext</a></span><span class="c0">&nbsp;&amp;Context;<br>00738 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">MCAsmBackend</a></span><span class="c0">&nbsp;&amp;Backend;<br>00740 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html">MCCodeEmitter</a></span><span class="c0">&nbsp;&amp;Emitter;<br>00742 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html">MCObjectWriter</a></span><span class="c0">&nbsp;&amp;Writer;<br>00744 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">raw_ostream</a></span><span class="c0">&nbsp;&amp;OS;<br>00746 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1iplist.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1iplist.html">iplist</a></span><span class="c0">&lt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSectionData.html">MCSectionData</a></span><span class="c0">&gt; Sections;<br>00748 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1iplist.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1iplist.html">iplist</a></span><span class="c0">&lt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html">MCSymbolData</a></span><span class="c0">&gt; Symbols;<br>00750 </span><span class="c0 c6">&nbsp;/// The map of sections to their associated assembler backend data.</span><span class="c0"><br>00753 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap</a></span><span class="c0">&lt;const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0">*,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSectionData.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSectionData.html">MCSectionData</a></span><span class="c0">*&gt; SectionMap;<br>00758 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap</a></span><span class="c0">&lt;const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">*,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html">MCSymbolData</a></span><span class="c0">*&gt; SymbolMap;<br>00760 &nbsp; std::</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classstd_1_1vector.html">vector</a></span><span class="c0">&lt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1IndirectSymbolData.html">IndirectSymbolData</a></span><span class="c0">&gt; IndirectSymbols;<br>00762 &nbsp; std::</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classstd_1_1vector.html">vector</a></span><span class="c0">&lt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1DataRegionData.html">DataRegionData</a></span><span class="c0">&gt; DataRegions;<br>00781 private:<br>00782 </span><span class="c0 c6">&nbsp;/// Evaluate a fixup to a relocatable expression and the value which should be</span><span class="c0"><br>00783 </span><span class="c0 c6">&nbsp;/// placed into the fixup.</span><span class="c0"><br>00795 &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;evaluateFixup(const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c0">&nbsp;&amp;Layout,<br>00796 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html">MCFixup</a></span><span class="c0">&nbsp;&amp;Fixup, const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFragment.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFragment.html">MCFragment</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1X86II.html#af727161d2501accae1552828d0fd190ca5a78bc4e042ab2fbe041f0c29c1de4c0">DF</a></span><span class="c0">,<br>00797 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCValue.html">MCValue</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span class="c0">, uint64_t &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) const;<br>00799 </span><span class="c0 c6">&nbsp;/// Check whether a fixup can be satisfied, or whether it needs to be relaxed</span><span class="c0"><br>00800 </span><span class="c0 c6">&nbsp;/// (increased in size, in order to hold its value correctly).</span><span class="c0"><br>00801 &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;fixupNeedsRelaxation(const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html">MCFixup</a></span><span class="c0">&nbsp;&amp;Fixup, const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstFragment.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstFragment.html">MCInstFragment</a></span><span class="c0">&nbsp;*DF,<br>00802 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c0">&nbsp;&amp;Layout) const;<br>00804 </span><span class="c0 c6">&nbsp;/// Check whether the given fragment needs relaxation.</span><span class="c0"><br>00805 &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;fragmentNeedsRelaxation(const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstFragment.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstFragment.html">MCInstFragment</a></span><span class="c0">&nbsp;*IF,<br>00806 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c0">&nbsp;&amp;Layout) const;<br>00808 </span><span class="c0 c6">&nbsp;/// \brief Perform one layout iteration and return true if any offsets</span><span class="c0"><br>00809 </span><span class="c0 c6">&nbsp;/// were adjusted.</span><span class="c0"><br>00810 &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;layoutOnce(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c0">&nbsp;&amp;Layout);<br>00816 &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;relaxInstruction(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c0">&nbsp;&amp;Layout,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstFragment.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstFragment.html">MCInstFragment</a></span><span class="c0">&nbsp;&amp;IF);<br>00818 &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;relaxLEB(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c0">&nbsp;&amp;Layout,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCLEBFragment.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCLEBFragment.html">MCLEBFragment</a></span><span class="c0">&nbsp;&amp;IF);<br>00820 &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;relaxDwarfLineAddr(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c0">&nbsp;&amp;Layout,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCDwarfLineAddrFragment.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCDwarfLineAddrFragment.html">MCDwarfLineAddrFragment</a></span><span class="c0">&nbsp;&amp;DF);<br>00821 &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;relaxDwarfCallFrameFragment(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c0">&nbsp;&amp;Layout,<br>00822 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCDwarfCallFrameFragment.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCDwarfCallFrameFragment.html">MCDwarfCallFrameFragment</a></span><span class="c0">&nbsp;&amp;DF);<br>00824 </span><span class="c0 c6">&nbsp;/// finishLayout - Finalize a layout, including fragment lowering.</span><span class="c0"><br>00825 &nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;finishLayout(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c0">&nbsp;&amp;Layout);<br>00827 &nbsp; uint64_t handleFixup(const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c0">&nbsp;&amp;Layout,<br>00828 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFragment.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFragment.html">MCFragment</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></span><span class="c0">, const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html">MCFixup</a></span><span class="c0">&nbsp;&amp;Fixup);</span></p><p class="c17"><span class="c0">…..................</span></p><p class="c17"><span class="c0">00830 public:<br>00831 </span><span class="c0 c6">&nbsp;/// Compute the effective fragment size assuming it is laid out at the given</span><span class="c0"><br>00832 </span><span class="c0 c6">&nbsp;/// \p SectionAddress and \p FragmentOffset.</span><span class="c0"><br>00833 &nbsp;uint64_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#a9951e96b397fc78cbded3bfd4d13b6d2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#a9951e96b397fc78cbded3bfd4d13b6d2">computeFragmentSize</a></span><span class="c0">(const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c0">&nbsp;&amp;Layout,<br>00834 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFragment.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFragment.html">MCFragment</a></span><span class="c0">&nbsp;&amp;F) const;<br>00838 &nbsp;const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html">MCSymbolData</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#afb9e4cfdc59a6a1ec20a31ba02d5cb00">getAtom</a></span><span class="c0">(const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolData.html">MCSymbolData</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810adf065d834393d8dfada372dac240acce">Symbol</a></span><span class="c0">) const;<br>00844 &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#ac39602a9d117ad4553d9149516b3f281">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#ac39602a9d117ad4553d9149516b3f281">isSymbolLinkerVisible</a></span><span class="c0">(const MCSymbol &amp;SD) const;<br>00846 </span><span class="c0 c6">&nbsp;/// Emit the section contents using the given object writer.</span><span class="c0"><br>00847 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#a40eef272451c56604f2ef9f781279027">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#a40eef272451c56604f2ef9f781279027">writeSectionData</a></span><span class="c0">(const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSectionData.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSectionData.html">MCSectionData</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">Section</a></span><span class="c0">,<br>00848 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c0">&nbsp;&amp;Layout) const;<br>00850 </span><span class="c0 c6">&nbsp;/// Check whether a given symbol has been flagged with .thumb_func.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#adc77aa07664faec41cc4270aa376ba29">00851</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#adc77aa07664faec41cc4270aa376ba29">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#adc77aa07664faec41cc4270aa376ba29">isThumbFunc</a></span><span class="c0">(const MCSymbol *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a></span><span class="c0">)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00852 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;ThumbFuncs.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallPtrSet.html#a2ced6343b8ad006a757059554bbf9f37">count</a></span><span class="c0">(Func);<br>00853 &nbsp; }<br>00855 </span><span class="c0 c6">&nbsp;/// Flag a function symbol as the target of a .thumb_func directive.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#a202fda2877307a61a19b55fcd18765c1">00856</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#a202fda2877307a61a19b55fcd18765c1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#a202fda2877307a61a19b55fcd18765c1">setIsThumbFunc</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1LibFunc.html#abf8f6830387f338fed0bce2e65108c6f">Func</a></span><span class="c0">) { ThumbFuncs.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallPtrSet.html#a9b6dd0fc7a648a939e571246045b673e">insert</a></span><span class="c0">(Func); }</span></p><p class="c17 c35"><span class="c5 c11"></span></p><p class="c17"><span class="c5 c11">As can be seen from the above code, the </span><span class="c0">MCAssembler </span><span class="c5 c11">class organizes together all the important data structures that an MC assembler should have: coder emitter, object writer, asm backend, sections, symbols, etc. In addition, </span><span class="c0">MCAssembler</span><span class="c5 c11">&nbsp;provides various private functions such as code fixup </span><sup class="c5 c11"><a href="https://people.cs.pitt.edu/~yongli/notes/llvm3/LLVM3.html#ftnt1" name="ftnt_ref1">[1]</a></sup><span class="c5 c11">, &nbsp;relax**</span><sup class="c5 c11"><a href="https://people.cs.pitt.edu/~yongli/notes/llvm3/LLVM3.html#ftnt2" name="ftnt_ref2">[2]</a></sup><span class="c5 c11">&nbsp;methods, layout methods to his friend class </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c5 c11">. </span><span class="c0">MCAssembler</span><span class="c5 c11">&nbsp;also provides some public methods for querying relevant information such as the fragment size, symbol linker visibility, section data information, etc. </span></p><p class="c17"><span class="c5 c11">This class is not supposed to be sub-classed. </span><span class="c61 c5 c11">Object writer classes</span><span class="c5 c11">&nbsp;(e.g., </span><span class="c0">ELFObjectWriter) </span><span class="c5 c11">heavily utilize the </span><span class="c0">MCAssembler</span><span class="c5 c11">&nbsp;class. Also, an object streamer (e.g.,</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6d29035e18bd0579d26418c1c520d33b">MCObjectStreamer</a></span><span class="c5 c11">&nbsp;and its subclasses</span><span class="c5 c11">) creates an </span><span class="c0">MCAssembler</span><span class="c5 c11">&nbsp;object member upon construction: &nbsp;</span></p><p class="c17 c35"><span class="c5 c11"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6d29035e18bd0579d26418c1c520d33b">00023</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6d29035e18bd0579d26418c1c520d33b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6d29035e18bd0579d26418c1c520d33b">MCObjectStreamer::MCObjectStreamer</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">MCContext</a></span><span class="c0">&nbsp;&amp;Context,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">MCAsmBackend</a></span><span class="c0">&nbsp;&amp;TAB,<br>00024 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">raw_ostream</a></span><span class="c0">&nbsp;&amp;OS,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html">MCCodeEmitter</a></span><span class="c0">&nbsp;*Emitter_)<br>00025 &nbsp; :</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c0">(Context),<br>00026 &nbsp; &nbsp; Assembler(new</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html">MCAssembler</a></span><span class="c0">(Context, TAB,<br>00027 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *Emitter_, *TAB.createObjectWriter(OS),<br>00028 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OS)),<br>00029 &nbsp; &nbsp; CurSectionData(0)<br>00030 {<br>00031 }</span></p><p class="c17"><span class="c5 c11">Note that </span><span class="c0">MCAssembler</span><span class="c5 c11">&nbsp;has an </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html">MCObjectWriter</a></span><span class="c5 c11">&nbsp;member and thus </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectStreamer.html#a6d29035e18bd0579d26418c1c520d33b">MCObjectStreamer</a></span><span class="c5 c11">&nbsp;objects could use </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html">MCObjectWriter</a></span><span class="c5 c11">&nbsp;class indirectly through direct uses of the </span><span class="c0">MCAssembler</span><span class="c5 c11">&nbsp;member.</span></p><p class="c15 c44"><span class="c5 c11"></span></p><p class="c17"><span class="c5 c11">Regarding the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">MCAsmInfo</a></span><span class="c0">&nbsp;class</span><span class="c5 c11">&nbsp;the LLVM class document says that this class is intended to be used as a base class for asm properties and features specific to the target. Here is the inheritance graph: </span></p><p class="c17"><img height="534" src="./Notes on LLVM 3 (Target Independent Code Generator)_files/image10.png" width="662"></p><p class="c20"><span class="c5 c11">The </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">MCAsmInfo</a></span><span class="c0">&nbsp;</span><span class="c5 c11">class interface file (.h) just defines various data members representing target-dependent characteristics and corresponding get** methods to retrieve these characteristics. In the implementation file, there is almost nothing but a default constructor that set these data members to their default values: &nbsp; &nbsp;</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ac25f5a6b7d5628ac37531504442fde61">00025</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ac25f5a6b7d5628ac37531504442fde61">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ac25f5a6b7d5628ac37531504442fde61">MCAsmInfo::MCAsmInfo</a></span><span class="c0">() {<br>00026 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a78ea65d8ecc8eba667d3770385ae403a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a78ea65d8ecc8eba667d3770385ae403a">PointerSize</a></span><span class="c0">&nbsp;= 4;<br>00027 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#adfd724f11ba125f30c3bb516be0bb06f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#adfd724f11ba125f30c3bb516be0bb06f">IsLittleEndian</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">true</span><span class="c0">;<br>00028 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a9e5942554aaf9a1c2dbde04c503c11b2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a9e5942554aaf9a1c2dbde04c503c11b2">StackGrowsUp</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00029 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a35179e4c975f4619c9e55af83bb23bee">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a35179e4c975f4619c9e55af83bb23bee">HasSubsectionsViaSymbols</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00030 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ae1006b51847982ac08fcc052d7c39b4b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ae1006b51847982ac08fcc052d7c39b4b">HasMachoZeroFillDirective</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00031 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a9f386c9cf46aead0d88fbb88a3320eb5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a9f386c9cf46aead0d88fbb88a3320eb5">HasMachoTBSSDirective</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00032 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a850cb78427da761c4b3b29212e24668b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a850cb78427da761c4b3b29212e24668b">HasStaticCtorDtorReferenceInStaticMode</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00033 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#abb2790a1e07a546ab0de1afb2e51c90d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#abb2790a1e07a546ab0de1afb2e51c90d">LinkerRequiresNonEmptyDwarfLines</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00034 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a824f02b302d147245dc0f553c63428db">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a824f02b302d147245dc0f553c63428db">MaxInstLength</a></span><span class="c0">&nbsp;= 4;<br>00035 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a83f21c5383a3508ebaec1a0f4a0b323e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a83f21c5383a3508ebaec1a0f4a0b323e">PCSymbol</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">"$"</span><span class="c0">;<br>00036 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#aabcffa0fe7b36126687bc1f1ea65fa91">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#aabcffa0fe7b36126687bc1f1ea65fa91">SeparatorString</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">";"</span><span class="c0">;<br>00037 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a7e82cfeea942a2b55a04069259a79ada">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a7e82cfeea942a2b55a04069259a79ada">CommentColumn</a></span><span class="c0">&nbsp;= 40;<br>00038 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a0f9dfd5867a9130d05cd9f560a7ba68f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a0f9dfd5867a9130d05cd9f560a7ba68f">CommentString</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">"#"</span><span class="c0">;<br>00039 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a529107d4522965aa45753b6ccafe6e56">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a529107d4522965aa45753b6ccafe6e56">LabelSuffix</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">":"</span><span class="c0">;<br>00040 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a926e4fe6521260ff951309d5600312b7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a926e4fe6521260ff951309d5600312b7">DebugLabelSuffix</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">":"</span><span class="c0">;<br>00041 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ab2fd341a21859939816dca88fd0ae4e0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ab2fd341a21859939816dca88fd0ae4e0">GlobalPrefix</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">""</span><span class="c0">;<br>00042 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#abea34ee331e36cc6ee7eb7230432f02e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#abea34ee331e36cc6ee7eb7230432f02e">PrivateGlobalPrefix</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">"."</span><span class="c0">;<br>00043 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ac5c6d0b64bbdd97255d2008351d51264">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ac5c6d0b64bbdd97255d2008351d51264">LinkerPrivateGlobalPrefix</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">""</span><span class="c0">;<br>00044 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a87ec076e2f46691b519f60545904269c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a87ec076e2f46691b519f60545904269c">InlineAsmStart</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">"APP"</span><span class="c0">;<br>00045 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#aa238b30c1afd57422b374a9cb2edc4df">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#aa238b30c1afd57422b374a9cb2edc4df">InlineAsmEnd</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">"NO_APP"</span><span class="c0">;<br>00046 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a68b1f3319120cc85d68179defe27e779">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a68b1f3319120cc85d68179defe27e779">Code16Directive</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">".code16"</span><span class="c0">;<br>00047 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a2e33f61b5be0bddcb4aba0c2e9685934">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a2e33f61b5be0bddcb4aba0c2e9685934">Code32Directive</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">".code32"</span><span class="c0">;<br>00048 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a2ac71f9501ae2328293ab5a75c40c3cd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a2ac71f9501ae2328293ab5a75c40c3cd">Code64Directive</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">".code64"</span><span class="c0">;<br>00049 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#aaab4eaa2f4de9c0d12606c176dd9d738">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#aaab4eaa2f4de9c0d12606c176dd9d738">AssemblerDialect</a></span><span class="c0">&nbsp;= 0;<br>00050 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a65c70c48daebaf0d9180d83bd0260577">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a65c70c48daebaf0d9180d83bd0260577">AllowQuotesInName</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00051 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a4fc3147dbb4d96050ec53eb00c4781a6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a4fc3147dbb4d96050ec53eb00c4781a6">AllowNameToStartWithDigit</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00052 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a95a052642362b04cbe058bc2a09f3c07">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a95a052642362b04cbe058bc2a09f3c07">AllowPeriodsInName</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">true</span><span class="c0">;<br>00053 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#abf0033622f9c064a63c7cbce7bf0469e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#abf0033622f9c064a63c7cbce7bf0469e">AllowUTF8</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">true</span><span class="c0">;<br>00054 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ad8ce9bafbf33806b98fec165f653a72b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ad8ce9bafbf33806b98fec165f653a72b">UseDataRegionDirectives</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00055 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#acf84c6bd03a785a251784cad666d9ee1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#acf84c6bd03a785a251784cad666d9ee1">ZeroDirective</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">"\t.zero\t"</span><span class="c0">;<br>00056 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a20ecadae9aa8ee83587c9fcaedf6578a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a20ecadae9aa8ee83587c9fcaedf6578a">AsciiDirective</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">"\t.ascii\t"</span><span class="c0">;<br>00057 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ad8520723e634e656d2a8219e0cf19ba7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ad8520723e634e656d2a8219e0cf19ba7">AscizDirective</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">"\t.asciz\t"</span><span class="c0">;<br>00058 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a3aabcaa0b460b2ea508314bf21c2ffd9">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a3aabcaa0b460b2ea508314bf21c2ffd9">Data8bitsDirective</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">"\t.byte\t"</span><span class="c0">;<br>00059 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a035c98c0423e6dd21ec2ea039f762440">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a035c98c0423e6dd21ec2ea039f762440">Data16bitsDirective</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">"\t.short\t"</span><span class="c0">;<br>00060 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a620b2ebe9e68a34106b7bdcc4220c6b2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a620b2ebe9e68a34106b7bdcc4220c6b2">Data32bitsDirective</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">"\t.long\t"</span><span class="c0">;<br>00061 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a3c136967a2fc9489724bcd8706a16fed">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a3c136967a2fc9489724bcd8706a16fed">Data64bitsDirective</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">"\t.quad\t"</span><span class="c0">;<br>00062 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a85a783f63be57e7903e54bd293a52479">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a85a783f63be57e7903e54bd293a52479">SunStyleELFSectionSwitchSyntax</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00063 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a9209a7aeb154de066a5f7ed6087892cc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a9209a7aeb154de066a5f7ed6087892cc">UsesELFSectionDirectiveForBSS</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00064 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#afeb1bb859beac5746733cf3cb1a865b0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#afeb1bb859beac5746733cf3cb1a865b0">AlignDirective</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">"\t.align\t"</span><span class="c0">;<br>00065 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ac150f03927bf41531f945b3bc5b315e4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ac150f03927bf41531f945b3bc5b315e4">AlignmentIsInBytes</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">true</span><span class="c0">;<br>00066 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a1a46df7e736ecaab99f2c3b0efc74ef6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a1a46df7e736ecaab99f2c3b0efc74ef6">TextAlignFillValue</a></span><span class="c0">&nbsp;= 0;<br>00067 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#af701028ead58579bb8086740724a505f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#af701028ead58579bb8086740724a505f">GPRel64Directive</a></span><span class="c0">&nbsp;= 0;<br>00068 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ab09c23c3aab7b0aa249eda3d38026877">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ab09c23c3aab7b0aa249eda3d38026877">GPRel32Directive</a></span><span class="c0">&nbsp;= 0;<br>00069 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a6c6ae04133910ce4d3a494a44258bad3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a6c6ae04133910ce4d3a494a44258bad3">GlobalDirective</a></span><span class="c0">&nbsp;= </span><span class="c0 c14">"\t.globl\t"</span><span class="c0">;<br>00070 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#af5fb1f392349d8335c1e340ba2bcdbc0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#af5fb1f392349d8335c1e340ba2bcdbc0">HasSetDirective</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">true</span><span class="c0">;<br>00071 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#adadf4a066a9fa60b79b4792c7904172d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#adadf4a066a9fa60b79b4792c7904172d">HasAggressiveSymbolFolding</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">true</span><span class="c0">;<br>00072 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ac0079bf3834ce7ee765d437aae0a8a69">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ac0079bf3834ce7ee765d437aae0a8a69">COMMDirectiveAlignmentIsInBytes</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">true</span><span class="c0">;<br>00073 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a6f7c7ae850927432e251d9a5f8bb0537">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a6f7c7ae850927432e251d9a5f8bb0537">LCOMMDirectiveAlignmentType</a></span><span class="c0">&nbsp;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1LCOMM.html#aae933cd10a930a5312da96502035e331a3062e0ef4c841d66420bf37c2d8fc750">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1LCOMM.html#aae933cd10a930a5312da96502035e331a3062e0ef4c841d66420bf37c2d8fc750">LCOMM::NoAlignment</a></span><span class="c0">;<br>00074 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a7c3b8692b75d4808f7c888e61f01e1c8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a7c3b8692b75d4808f7c888e61f01e1c8">HasDotTypeDotSizeDirective</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">true</span><span class="c0">;<br>00075 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ab74c767922c89f683dec73c5b9a7b87a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ab74c767922c89f683dec73c5b9a7b87a">HasSingleParameterDotFile</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">true</span><span class="c0">;<br>00076 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a15bacf592302115a438444da1b9517e4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a15bacf592302115a438444da1b9517e4">HasNoDeadStrip</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00077 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a9c390e7b96f74412fa77da898ed4421b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a9c390e7b96f74412fa77da898ed4421b">HasSymbolResolver</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00078 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a72118878aeadcae71da2d5d179aebb81">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a72118878aeadcae71da2d5d179aebb81">WeakRefDirective</a></span><span class="c0">&nbsp;= 0;<br>00079 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a97a041d108f36ae1b9fa5160024c1b18">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a97a041d108f36ae1b9fa5160024c1b18">WeakDefDirective</a></span><span class="c0">&nbsp;= 0;<br>00080 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#abd1f03d72ac1a3ceb7d057964b8ba9a4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#abd1f03d72ac1a3ceb7d057964b8ba9a4">LinkOnceDirective</a></span><span class="c0">&nbsp;= 0;<br>00081 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#aef1537a18c53520abe7cb7026e10cb92">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#aef1537a18c53520abe7cb7026e10cb92">HiddenVisibilityAttr</a></span><span class="c0">&nbsp;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af74c787f7a33e251485729416d260243ae472359b991bb5235c8f6714f4cacb6a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af74c787f7a33e251485729416d260243ae472359b991bb5235c8f6714f4cacb6a">MCSA_Hidden</a></span><span class="c0">;<br>00082 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#aaccbddd4af6a81c7bf3a53e30289bb17">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#aaccbddd4af6a81c7bf3a53e30289bb17">HiddenDeclarationVisibilityAttr</a></span><span class="c0">&nbsp;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af74c787f7a33e251485729416d260243ae472359b991bb5235c8f6714f4cacb6a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af74c787f7a33e251485729416d260243ae472359b991bb5235c8f6714f4cacb6a">MCSA_Hidden</a></span><span class="c0">;<br>00083 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a1de3b3906f70f4952617056881437120">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a1de3b3906f70f4952617056881437120">ProtectedVisibilityAttr</a></span><span class="c0">&nbsp;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af74c787f7a33e251485729416d260243a1f47433b83f2818076a3cf55b500233a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af74c787f7a33e251485729416d260243a1f47433b83f2818076a3cf55b500233a">MCSA_Protected</a></span><span class="c0">;<br>00084 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ad6b5cda1c5af378696e1b13b351b2aad">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ad6b5cda1c5af378696e1b13b351b2aad">HasLEB128</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00085 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a98f40236cfff7278d4b57633fad2245d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a98f40236cfff7278d4b57633fad2245d">SupportsDebugInformation</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00086 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ae6654563b76c2f8b97c9a650fd36544e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ae6654563b76c2f8b97c9a650fd36544e">ExceptionsType</a></span><span class="c0">&nbsp;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a001cc4aac3499891ed5b27d7ecb1b227acd12d6cf678f7504ca49c922fb16ce01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a001cc4aac3499891ed5b27d7ecb1b227acd12d6cf678f7504ca49c922fb16ce01">ExceptionHandling::None</a></span><span class="c0">;<br>00087 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a63d418df380909eaf649badc46fb63b7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a63d418df380909eaf649badc46fb63b7">DwarfUsesInlineInfoSection</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00088 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a167538d77a3fe01be3977557e81f312b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a167538d77a3fe01be3977557e81f312b">DwarfSectionOffsetDirective</a></span><span class="c0">&nbsp;= 0;<br>00089 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ab5b8b23af9e578cebad7bb0ed9113924">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ab5b8b23af9e578cebad7bb0ed9113924">DwarfUsesRelocationsAcrossSections</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">true</span><span class="c0">;<br>00090 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#adcdd548ad577bc7c4c2e43f2f38cb1b4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#adcdd548ad577bc7c4c2e43f2f38cb1b4">DwarfRegNumForCFI</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00091 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a5c121bd84b477b37522ecfacc75f30b3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#a5c121bd84b477b37522ecfacc75f30b3">HasMicrosoftFastStdCallMangling</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00092 }</span></p><p class="c15"><span class="c5 c11"></span></p><p class="c20"><span class="c5 c11">In a target-specific subclass of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html#ac25f5a6b7d5628ac37531504442fde61">MCAsmInfo</a></span><span class="c5 c11">, these data members can be set to appropriate values to reflect the characteristics of the represented target.</span></p><p class="c15"><span class="c5 c11"></span></p><p class="c20"><span class="c5 c11">Now let’s move on to the interface of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html">MCInstPrinter</a></span><span class="c0">&nbsp;</span><span class="c5 c11">&nbsp;class (both of its interface and definition is quite simple and the implementation details are supposed to be filled in a target-specific subclass):</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html">00026</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html">MCInstPrinter</a></span><span class="c0">&nbsp;{<br>00027 </span><span class="c0 c9">protected</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a43f767b1fc960c3a7528055069b0ae97">00031</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">raw_ostream</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a43f767b1fc960c3a7528055069b0ae97">CommentStream</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#aacb2bfbafa57a37e627bf1334d349bc6">00032</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">MCAsmInfo</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#aacb2bfbafa57a37e627bf1334d349bc6">MAI</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a41acdb280262403252bc72f6d3f23f7a">00033</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">MCInstrInfo</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a41acdb280262403252bc72f6d3f23f7a">MII</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#aaaeadf26b0e3ae38625c5469231bbce6">00034</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo.html">MCRegisterInfo</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#aaaeadf26b0e3ae38625c5469231bbce6">MRI</a></span><span class="c0">;</span><span class="c0"><br>00036 </span><span class="c0 c6">&nbsp;/// The current set of available features.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#ab0a24fda857720b77fd4ec1ffdf01ed4">00037</a></span><span class="c0">&nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#ab0a24fda857720b77fd4ec1ffdf01ed4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#ab0a24fda857720b77fd4ec1ffdf01ed4">AvailableFeatures</a></span><span class="c0">;</span><span class="c0"><br>00039 </span><span class="c0 c6">&nbsp;/// True if we are printing marked up assembly.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a0a1fa89c14ac7b72829c033469ec1fbd">00040</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a0a1fa89c14ac7b72829c033469ec1fbd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a0a1fa89c14ac7b72829c033469ec1fbd">UseMarkup</a></span><span class="c0">;<br>00042 </span><span class="c0 c6">&nbsp;/// True if we are printing immediates as hex.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a23492d33eb76ba85db3600115fed651b">00043</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a23492d33eb76ba85db3600115fed651b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a23492d33eb76ba85db3600115fed651b">PrintImmHex</a></span><span class="c0">;<br>00045 </span><span class="c0 c6">&nbsp;/// Utility function for printing annotations.</span><span class="c0"><br>00046 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#aab90c946a08959c165433b2c125895ea">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#aab90c946a08959c165433b2c125895ea">printAnnotation</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">raw_ostream</a></span><span class="c0">&nbsp;&amp;OS,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;Annot);<br>00047 </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#af0525fc87f3e2054109908599d21098d">00048</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#af0525fc87f3e2054109908599d21098d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#af0525fc87f3e2054109908599d21098d">MCInstPrinter</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">MCAsmInfo</a></span><span class="c0">&nbsp;&amp;mai, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrInfo.html">MCInstrInfo</a></span><span class="c0">&nbsp;&amp;mii,<br>00049 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo.html">MCRegisterInfo</a></span><span class="c0">&nbsp;&amp;mri)<br>00050 &nbsp; &nbsp; :</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a43f767b1fc960c3a7528055069b0ae97">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a43f767b1fc960c3a7528055069b0ae97">CommentStream</a></span><span class="c0">(0),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#aacb2bfbafa57a37e627bf1334d349bc6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#aacb2bfbafa57a37e627bf1334d349bc6">MAI</a></span><span class="c0">(mai),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a41acdb280262403252bc72f6d3f23f7a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a41acdb280262403252bc72f6d3f23f7a">MII</a></span><span class="c0">(mii),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#aaaeadf26b0e3ae38625c5469231bbce6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#aaaeadf26b0e3ae38625c5469231bbce6">MRI</a></span><span class="c0">(mri),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#ab0a24fda857720b77fd4ec1ffdf01ed4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#ab0a24fda857720b77fd4ec1ffdf01ed4">AvailableFeatures</a></span><span class="c0">(0),<br>00051 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a0a1fa89c14ac7b72829c033469ec1fbd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a0a1fa89c14ac7b72829c033469ec1fbd">UseMarkup</a></span><span class="c0">(0),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a23492d33eb76ba85db3600115fed651b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a23492d33eb76ba85db3600115fed651b">PrintImmHex</a></span><span class="c0">(0) {}<br>00053 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a55e82de41ab06366834cbef13e46ac6d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a55e82de41ab06366834cbef13e46ac6d">~MCInstPrinter</a></span><span class="c0">();<br>00055 </span><span class="c0 c6">&nbsp;/// setCommentStream - Specify a stream to emit comments to.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a3216205cbe92e7720a22058cf2d57676">00056</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a3216205cbe92e7720a22058cf2d57676">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a3216205cbe92e7720a22058cf2d57676">setCommentStream</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">raw_ostream</a></span><span class="c0">&nbsp;&amp;OS) {</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a43f767b1fc960c3a7528055069b0ae97">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a43f767b1fc960c3a7528055069b0ae97">CommentStream</a></span><span class="c0">&nbsp;= &amp;OS; }<br>00058 </span><span class="c0 c6">&nbsp;/// printInst - Print the specified MCInst to the specified raw_ostream.</span><span class="c0"><br>00060 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a431958354d30d582a9c1f82d1ecad3cd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a431958354d30d582a9c1f82d1ecad3cd">printInst</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">MCInst</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">raw_ostream</a></span><span class="c0">&nbsp;&amp;OS,<br>00061 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;Annot) = 0;<br>00063 </span><span class="c0 c6">&nbsp;/// getOpcodeName - Return the name of the specified opcode enum (e.g.</span><span class="c0"><br>00064 </span><span class="c0 c6">&nbsp;/// "MOV32ri") or empty if we can't resolve it.</span><span class="c0"><br>00065 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a34bda154255b17090ee369f62523de19">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a34bda154255b17090ee369f62523de19">getOpcodeName</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opcode) </span><span class="c0 c9">const</span><span class="c0">;<br>00067 </span><span class="c0 c6">&nbsp;/// printRegName - Print the assembler register name.</span><span class="c0"><br>00068 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a1b750be412b12c83b3ee5c6406eb2438">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a1b750be412b12c83b3ee5c6406eb2438">printRegName</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">raw_ostream</a></span><span class="c0">&nbsp;&amp;OS, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;RegNo) </span><span class="c0 c9">const</span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a42c6fab5a7c5d47c44eff9600337def4">00070</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a42c6fab5a7c5d47c44eff9600337def4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a42c6fab5a7c5d47c44eff9600337def4">getAvailableFeatures</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#ab0a24fda857720b77fd4ec1ffdf01ed4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#ab0a24fda857720b77fd4ec1ffdf01ed4">AvailableFeatures</a></span><span class="c0">; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a27386e60f59e9145d4d398f108cbeaed">00071</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a27386e60f59e9145d4d398f108cbeaed">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a27386e60f59e9145d4d398f108cbeaed">setAvailableFeatures</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) {</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#ab0a24fda857720b77fd4ec1ffdf01ed4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#ab0a24fda857720b77fd4ec1ffdf01ed4">AvailableFeatures</a></span><span class="c0">&nbsp;= Value; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a5d43ff31bc185b3beef677ef1a17e445">00073</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a5d43ff31bc185b3beef677ef1a17e445">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a5d43ff31bc185b3beef677ef1a17e445">getUseMarkup</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a0a1fa89c14ac7b72829c033469ec1fbd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a0a1fa89c14ac7b72829c033469ec1fbd">UseMarkup</a></span><span class="c0">; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a93ea46134ac48f273fb38c88c4edde07">00074</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a93ea46134ac48f273fb38c88c4edde07">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a93ea46134ac48f273fb38c88c4edde07">setUseMarkup</a></span><span class="c0">(</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) {</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a0a1fa89c14ac7b72829c033469ec1fbd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a0a1fa89c14ac7b72829c033469ec1fbd">UseMarkup</a></span><span class="c0">&nbsp;= Value; }<br>00076 </span><span class="c0 c6">&nbsp;/// Utility functions to make adding mark ups simpler.</span><span class="c0"><br>00077 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#ade7393a2362db6cb834be93eb311c80d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#ade7393a2362db6cb834be93eb311c80d">markup</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;s) </span><span class="c0 c9">const</span><span class="c0">;<br>00078 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#ade7393a2362db6cb834be93eb311c80d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#ade7393a2362db6cb834be93eb311c80d">markup</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;a,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;b) </span><span class="c0 c9">const</span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a284cd5c828b0b470514bf047cb1966a9">00080</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a284cd5c828b0b470514bf047cb1966a9">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a284cd5c828b0b470514bf047cb1966a9">getPrintImmHex</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a23492d33eb76ba85db3600115fed651b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a23492d33eb76ba85db3600115fed651b">PrintImmHex</a></span><span class="c0">; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a5315ee213d2bb70bfb0d581369c8bd47">00081</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a5315ee213d2bb70bfb0d581369c8bd47">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a5315ee213d2bb70bfb0d581369c8bd47">setPrintImmHex</a></span><span class="c0">(</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) {</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a23492d33eb76ba85db3600115fed651b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a23492d33eb76ba85db3600115fed651b">PrintImmHex</a></span><span class="c0">&nbsp;= Value; }<br>00083 </span><span class="c0 c6">&nbsp;/// Utility function to print immediates in decimal or hex.</span><span class="c0"><br>00084 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1format__object1.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1format__object1.html">format_object1&lt;int64_t&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a2a4666097fe5ee915075d2605b4bf86c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html#a2a4666097fe5ee915075d2605b4bf86c">formatImm</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0">&nbsp;int64_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) </span><span class="c0 c9">const</span><span class="c0">;<br>00085 };</span></p><p class="c17 c35"><span class="c5 c11"></span></p><p class="c17"><span class="c5 c11">The primary goal of this class is to define interface to convert an MCInst to valid target assembly syntax.</span><span class="c0 c6">&nbsp;</span><span class="c5 c11">In the LLVM library there are various implemented subclass derived from </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html">MCInstPrinter</a></span><span class="c0">&nbsp;</span><span class="c5 c11">: </span></p><p class="c17"><span class="c5 c11">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><img height="350" src="./Notes on LLVM 3 (Target Independent Code Generator)_files/image01.png" width="305"></p><p class="c20"><span class="c5 c11">Now look at the class </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html">MCCodeEmitter</a></span><span class="c0">.</span><span class="c0">&nbsp;</span><span class="c5 c11">It provides a g</span><span class="c5 c11">eneric instruction encoding interface:</span></p><p class="c17"><span class="c0">00021 </span><span class="c0 c6">/// MCCodeEmitter - Generic instruction encoding interface.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html">00022</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html">MCCodeEmitter</a></span><span class="c0">&nbsp;{<br>00023 </span><span class="c0 c9">private</span><span class="c0">:<br>00024 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#a30a6103435c200ed0b3923ecf30249d1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#a30a6103435c200ed0b3923ecf30249d1">MCCodeEmitter</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html">MCCodeEmitter</a></span><span class="c0">&nbsp;&amp;)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">LLVM_DELETED_FUNCTION</a></span><span class="c0">;<br>00025 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;operator=(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html">MCCodeEmitter</a></span><span class="c0">&nbsp;&amp;)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">LLVM_DELETED_FUNCTION</a></span><span class="c0">;<br>00026 </span><span class="c0 c9">protected</span><span class="c0">: </span><span class="c0 c6">// Can only create subclasses.</span><span class="c0"><br>00027 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#a30a6103435c200ed0b3923ecf30249d1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#a30a6103435c200ed0b3923ecf30249d1">MCCodeEmitter</a></span><span class="c0">();<br>00029 </span><span class="c0 c9">public</span><span class="c0">:<br>00030 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#aaddbcfd693ee05caab2283b8294624ee">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#aaddbcfd693ee05caab2283b8294624ee">~MCCodeEmitter</a></span><span class="c0">();<br>00032 </span><span class="c0 c6">&nbsp;/// Lifetime management</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#a741d220b22e3707c67992b3e19fde103">00033</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#a741d220b22e3707c67992b3e19fde103">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#a741d220b22e3707c67992b3e19fde103">reset</a></span><span class="c0">() { }<br>00035 </span><span class="c0 c6">&nbsp;/// EncodeInstruction - Encode the given \p Inst to bytes on the output</span><span class="c0"><br>00036 </span><span class="c0 c6">&nbsp;/// stream \p OS.</span><span class="c0"><br>00037 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#a0d194daba646fd002e5fd237f9e583b3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#a0d194daba646fd002e5fd237f9e583b3">EncodeInstruction</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">MCInst</a></span><span class="c0">&nbsp;&amp;Inst,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">raw_ostream</a></span><span class="c0">&nbsp;&amp;OS,<br>00038 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorImpl.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;MCFixup&gt;</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0">Fixups</a></span><span class="c0">) </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br>00039 };</span></p><p class="c15"><span class="c5 c11"></span></p><p class="c20"><span class="c5 c11">Quite simple, isn’t it? The corresponding cpp file is even simpler:</span></p><p class="c17"><span class="c0">00010 </span><span class="c0 c36">#include "</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/MCCodeEmitter_8h.html">llvm/MC/MCCodeEmitter.h</a></span><span class="c0 c36">"</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#a30a6103435c200ed0b3923ecf30249d1">00014</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#a30a6103435c200ed0b3923ecf30249d1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#a30a6103435c200ed0b3923ecf30249d1">MCCodeEmitter::MCCodeEmitter</a></span><span class="c0">() {<br>00015 }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#aaddbcfd693ee05caab2283b8294624ee">00017</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#aaddbcfd693ee05caab2283b8294624ee">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCCodeEmitter.html#aaddbcfd693ee05caab2283b8294624ee">MCCodeEmitter::~MCCodeEmitter</a></span><span class="c0">() {<br>00018 }</span></p><p class="c15"><span class="c5 c11"></span></p><p class="c20"><span class="c5 c11">Now the inheritance hierarchy:</span></p><p class="c20"><img height="117" src="./Notes on LLVM 3 (Target Independent Code Generator)_files/image04.png" width="224"></p><p class="c15"><span class="c5 c11"></span></p><p class="c15"><span class="c5 c11"></span></p><p class="c20"><span class="c5 c11">Finally, let’s clear </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">MCAsmBackend</a></span><span class="c5 c11">, which </span><span class="c5 c11">aims to provide a generic interface to target specific assembler backends. It has the following interface:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">00032</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">MCAsmBackend</a></span><span class="c0">&nbsp;{<br>00033 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a7953ce5c1d657237d0f604fb853d89a2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a7953ce5c1d657237d0f604fb853d89a2">MCAsmBackend</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">MCAsmBackend</a></span><span class="c0">&nbsp;&amp;)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">LLVM_DELETED_FUNCTION</a></span><span class="c0">;<br>00034 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;operator=(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">MCAsmBackend</a></span><span class="c0">&nbsp;&amp;)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">LLVM_DELETED_FUNCTION</a></span><span class="c0">;<br>00035 </span><span class="c0 c9">protected</span><span class="c0">: </span><span class="c0 c6">// Can only create subclasses.</span><span class="c0"><br>00036 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a7953ce5c1d657237d0f604fb853d89a2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a7953ce5c1d657237d0f604fb853d89a2">MCAsmBackend</a></span><span class="c0">();<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a69af5e631d6e03b1245d1c201ed46c76">00038</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a69af5e631d6e03b1245d1c201ed46c76">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a69af5e631d6e03b1245d1c201ed46c76">HasReliableSymbolDifference</a></span><span class="c0">&nbsp;: 1;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a4316e3034314319751f02fa65f99830d">00039</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a4316e3034314319751f02fa65f99830d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a4316e3034314319751f02fa65f99830d">HasDataInCodeSupport</a></span><span class="c0">&nbsp;: 1;<br>00041 </span><span class="c0 c9">public</span><span class="c0">:<br>00042 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#aef724e9aaff584baff8414228b370ebc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#aef724e9aaff584baff8414228b370ebc">~MCAsmBackend</a></span><span class="c0">();<br>00044 </span><span class="c0 c6">&nbsp;/// lifetime management</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#ac0fe81b089903ff8c1d8593fee9a0156">00045</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#ac0fe81b089903ff8c1d8593fee9a0156">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#ac0fe81b089903ff8c1d8593fee9a0156">reset</a></span><span class="c0">() { }<br>00047 </span><span class="c0 c6">&nbsp;/// createObjectWriter - Create a new MCObjectWriter instance for use by the</span><span class="c0"><br>00048 </span><span class="c0 c6">&nbsp;/// assembler backend to emit the final object file.</span><span class="c0"><br>00049 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html">MCObjectWriter</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a0b7e51df79582b9fd67476adbc4aee1c">createObjectWriter</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">raw_ostream</a></span><span class="c0">&nbsp;&amp;OS) </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br>00051 </span><span class="c0 c6">&nbsp;/// createELFObjectTargetWriter - Create a new ELFObjectTargetWriter to enable</span><span class="c0"><br>00052 </span><span class="c0 c6">&nbsp;/// non-standard ELFObjectWriters.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#abb1b9ee72e13e3f52cf11532186065b8">00053</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFObjectTargetWriter.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCELFObjectTargetWriter.html">MCELFObjectTargetWriter</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#abb1b9ee72e13e3f52cf11532186065b8">createELFObjectTargetWriter</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00054 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></span><span class="c0">(</span><span class="c0 c14">"createELFObjectTargetWriter is not supported by asm "</span><span class="c0"><br>00055 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"backend"</span><span class="c0">);<br>00056 &nbsp; }<br>00058 </span><span class="c0 c6">&nbsp;/// hasReliableSymbolDifference - Check whether this target implements</span><span class="c0"><br>00059 </span><span class="c0 c6">&nbsp;/// accurate relocations for differences between symbols. If not, differences</span><span class="c0"><br>00060 </span><span class="c0 c6">&nbsp;/// between symbols will always be relocatable expressions and any references</span><span class="c0"><br>00061 </span><span class="c0 c6">&nbsp;/// to temporary symbols will be assumed to be in the same atom, unless they</span><span class="c0"><br>00062 </span><span class="c0 c6">&nbsp;/// reside in a different section.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#ac61e61c9b9ed2e03d90a55db6159c873">00068</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#ac61e61c9b9ed2e03d90a55db6159c873">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#ac61e61c9b9ed2e03d90a55db6159c873">hasReliableSymbolDifference</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00069 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a69af5e631d6e03b1245d1c201ed46c76">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a69af5e631d6e03b1245d1c201ed46c76">HasReliableSymbolDifference</a></span><span class="c0">;<br>00070 &nbsp; }<br>00071 <br>00072 </span><span class="c0 c6">&nbsp;/// hasDataInCodeSupport - Check whether this target implements data-in-code</span><span class="c0"><br>00073 </span><span class="c0 c6">&nbsp;/// markers. If not, data region directives will be ignored.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a6a3b61f981223bf412954df9cee76e86">00074</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a6a3b61f981223bf412954df9cee76e86">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a6a3b61f981223bf412954df9cee76e86">hasDataInCodeSupport</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00075 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a4316e3034314319751f02fa65f99830d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a4316e3034314319751f02fa65f99830d">HasDataInCodeSupport</a></span><span class="c0">;<br>00076 &nbsp; }<br>00077 <br>00078 </span><span class="c0 c6">&nbsp;/// doesSectionRequireSymbols - Check whether the given section requires that</span><span class="c0"><br>00079 </span><span class="c0 c6">&nbsp;/// all symbols (even temporaries) have symbol table entries.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a319962ffd59ed8913d95301d037c5738">00080</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a319962ffd59ed8913d95301d037c5738">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a319962ffd59ed8913d95301d037c5738">doesSectionRequireSymbols</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">Section</a></span><span class="c0">)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00081 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>00082 &nbsp; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#ad92a6ac74a6d27dc25aa293fd78b98f0">00088</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#ad92a6ac74a6d27dc25aa293fd78b98f0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#ad92a6ac74a6d27dc25aa293fd78b98f0">isSectionAtomizable</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">Section</a></span><span class="c0">)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00089 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00090 &nbsp; }<br>00092 </span><span class="c0 c6">&nbsp;/// @name Target Fixup Interfaces</span><span class="c0"><br>00095 </span><span class="c0 c6">&nbsp;/// getNumFixupKinds - Get the number of target specific fixup kinds.</span><span class="c0"><br>00096 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#ad0398a6cacfda2c1ac09b3cb71ee5654">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#ad0398a6cacfda2c1ac09b3cb71ee5654">getNumFixupKinds</a></span><span class="c0">() </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br>00097 <br>00098 </span><span class="c0 c6">&nbsp;/// getFixupKindInfo - Get information on a fixup kind.</span><span class="c0"><br>00099 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MCFixupKindInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MCFixupKindInfo.html">MCFixupKindInfo</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#af13493941b3bbec74f72e7816534bd97">getFixupKindInfo</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a84cef097f15848752272d38769011f58">MCFixupKind</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1EngineKind.html#a9df47239a42cd9621ac26d9ecbd57441">Kind</a></span><span class="c0">) </span><span class="c0 c9">const</span><span class="c0">;<br>…................// some other fixup methods<br>00115 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#adc0ddba7950f145db24682ff0c0c53d2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#adc0ddba7950f145db24682ff0c0c53d2">applyFixup</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html">MCFixup</a></span><span class="c0">&nbsp;&amp;Fixup, </span><span class="c0 c8">char</span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1object_1_1macho.html#a56678f646a4a478d777eb8821f710db0a557a58f6e018464dcf0635728ef14dd1">Data</a></span><span class="c0">, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;DataSize,<br>00116 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; uint64_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br>00129 </span><span class="c0 c6">&nbsp;/// fixupNeedsRelaxation - Target specific predicate for whether a given</span><span class="c0"><br>00130 </span><span class="c0 c6">&nbsp;/// fixup requires the associated instruction to be relaxed.</span><span class="c0"><br>00131 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#adeb52cb8c99d2f200cc1693e5e8a7664">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#adeb52cb8c99d2f200cc1693e5e8a7664">fixupNeedsRelaxation</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html">MCFixup</a></span><span class="c0">&nbsp;&amp;Fixup,<br>00132 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; uint64_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">,<br>00133 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstFragment.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstFragment.html">MCInstFragment</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1X86II.html#af727161d2501accae1552828d0fd190ca5a78bc4e042ab2fbe041f0c29c1de4c0">DF</a></span><span class="c0">,<br>00134 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c0">&nbsp;&amp;Layout) </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br>00136 </span><span class="c0 c6">&nbsp;/// RelaxInstruction - Relax the instruction in the given fragment to the next</span><span class="c0"><br>00137 </span><span class="c0 c6">&nbsp;/// wider instruction.</span><span class="c0"><br>00142 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a2e9154ab4a4e32d8ee3caf74d4ed25cf">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a2e9154ab4a4e32d8ee3caf74d4ed25cf">relaxInstruction</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">MCInst</a></span><span class="c0">&nbsp;&amp;Inst,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">MCInst</a></span><span class="c0">&nbsp;&amp;Res) </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a6ba2b21af9f7b712d737af5c0c367f28">00151</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a6ba2b21af9f7b712d737af5c0c367f28">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a6ba2b21af9f7b712d737af5c0c367f28">getMinimumNopSize</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;1; }<br>00153 </span><span class="c0 c6">&nbsp;/// writeNopData - Write an (optimal) nop sequence of Count bytes to the given</span><span class="c0"><br>00154 </span><span class="c0 c6">&nbsp;/// output. If the target cannot generate such a sequence, it should return error.</span><span class="c0"><br>00158 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a37248bcb38dd1e74f7f641388f131724">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a37248bcb38dd1e74f7f641388f131724">writeNopData</a></span><span class="c0">(uint64_t Count,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html">MCObjectWriter</a></span><span class="c0">&nbsp;*OW) </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br>00160 </span><span class="c0 c6">&nbsp;/// handleAssemblerFlag - Handle any target-specific assembler flags.</span><span class="c0"><br>00161 </span><span class="c0 c6">&nbsp;/// By default, do nothing.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a3745e4df8defc9a3eafb48786398f8e6">00162</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a3745e4df8defc9a3eafb48786398f8e6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html#a3745e4df8defc9a3eafb48786398f8e6">handleAssemblerFlag</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa09571f0b44fd6bd8fae33d6ead290c1">MCAssemblerFlag</a></span><span class="c0">&nbsp;Flag) {}<br>00163 };</span></p><p class="c15"><span class="c5 c11"></span></p><p class="c17"><span class="c5 c11">The implementation of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">MCAsmBackend</a></span><span class="c0">&nbsp;</span><span class="c5 c11">class is left empty to be filled by a subclass. This class is inherited by various target-specific subclasses including </span><span class="c0">MipsAsmBackend, ARMAsmBackend, X86AsmBackend,PPCAsmBackend,MBlazeAsmBackend. </span><span class="c5 c11">For each target,i.e., architecture, there are further derived classes. For example, for </span><span class="c0">ARMAsmBackend, &nbsp;</span><span class="c5 c11">there are </span><span class="c0">ELFARMAsmBackend</span><span class="c5 c11">&nbsp;and </span><span class="c0">DarwinARMAsmBackend </span><span class="c5 c11">subclass.</span></p><p class="c15"><span class="c5 c11"></span></p><p class="c20"><span class="c5 c11">All of these subclasses do not have header files thus the LLVM document does not generate a class inheritance hierarchy diagram. The following code related to </span><span class="c0">ARMAsmBackend</span><span class="c5 c11">&nbsp;is selected from the ARMAsmBackend.cpp file</span><span class="c0">:</span></p><p class="c15"><span class="c5 c11"></span></p><p class="c17"><span class="c0">00041 </span><span class="c0 c9">class </span><span class="c0">ARMAsmBackend : </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">MCAsmBackend</a></span><span class="c0">&nbsp;{<br>00042 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSubtargetInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSubtargetInfo.html">MCSubtargetInfo</a></span><span class="c0">* STI;<br>00043 &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;isThumbMode; &nbsp;</span><span class="c0 c6">// Currently emitting Thumb code.</span><span class="c0"><br>00044 </span><span class="c0 c9">public</span><span class="c0">:<br>00045 &nbsp; ARMAsmBackend(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classT.html">T</a></span><span class="c0">, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;TT)<br>00046 &nbsp; &nbsp; :</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmBackend.html">MCAsmBackend</a></span><span class="c0">(), STI(ARM_MC::</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__MC.html#a04ffc4aa4a8b6b3d7b87ea9bb5b84ead">createARMMCSubtargetInfo</a></span><span class="c0">(TT, </span><span class="c0 c14">""</span><span class="c0">, </span><span class="c0 c14">""</span><span class="c0">)),<br>00047 &nbsp; &nbsp; &nbsp; isThumbMode(TT.startswith(</span><span class="c0 c14">"thumb"</span><span class="c0">)) {}<br>00048 <br>00049 &nbsp; ~ARMAsmBackend() {<br>00050 &nbsp; &nbsp; </span><span class="c0 c9">delete</span><span class="c0">&nbsp;STI;<br>00051 &nbsp; }</span></p><p class="c17"><span class="c0">00160 </span><span class="c0 c8">bool</span><span class="c0">&nbsp;ARMAsmBackend::mayNeedRelaxation(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">MCInst</a></span><span class="c0">&nbsp;&amp;Inst)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00161 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ARMAsmBackend_8cpp.html#a44c3ebfb87e5e1f66f0cb9d0610388c8">getRelaxedOpcode</a></span><span class="c0">(Inst.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a22542ca9978e4b90401edee109c4f263">getOpcode</a></span><span class="c0">()) != Inst.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a22542ca9978e4b90401edee109c4f263">getOpcode</a></span><span class="c0">())<br>00162 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00163 &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>00164 }</span></p><p class="c17"><span class="c0">00166 </span><span class="c0 c8">bool</span><span class="c0">&nbsp;ARMAsmBackend::fixupNeedsRelaxation(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html">MCFixup</a></span><span class="c0">&nbsp;&amp;Fixup,<br>00167 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;uint64_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">,<br>00168 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstFragment.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstFragment.html">MCInstFragment</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1X86II.html#af727161d2501accae1552828d0fd190ca5a78bc4e042ab2fbe041f0c29c1de4c0">DF</a></span><span class="c0">,<br>00169 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c0">&nbsp;&amp;Layout)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00170 &nbsp; </span><span class="c0 c7">switch</span><span class="c0">&nbsp;((</span><span class="c0 c8">unsigned</span><span class="c0">)Fixup.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html#ad8f4fe03a52f33f5e40be038fde9e67e">getKind</a></span><span class="c0">()) {<br>00171 &nbsp; </span><span class="c0 c7">case</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a02e738702c5e86913f9f7df2f83480b3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a02e738702c5e86913f9f7df2f83480b3">ARM::fixup_arm_thumb_br</a></span><span class="c0">: {<br>00172 &nbsp; &nbsp; </span><span class="c0 c6">// Relaxing tB to t2B. tB has a signed 12-bit displacement with the</span><span class="c0"><br>00173 &nbsp; &nbsp; </span><span class="c0 c6">// low bit being an implied zero. There's an implied +4 offset for the</span><span class="c0"><br>00174 &nbsp; &nbsp; </span><span class="c0 c6">// branch, so we adjust the other way here to determine what's</span><span class="c0"><br>00175 &nbsp; &nbsp; </span><span class="c0 c6">// encodable.</span><span class="c0"><br>00176 &nbsp; &nbsp; </span><span class="c0 c6">//</span><span class="c0"><br>00177 &nbsp; &nbsp; </span><span class="c0 c6">// Relax if the value is too big for a (signed) i8.</span><span class="c0"><br>00178 &nbsp; &nbsp; int64_t Offset = int64_t(Value) - 4;<br>00179 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;Offset &gt; 2046 || Offset &lt; -2048;<br>00180 &nbsp; }<br>00181 &nbsp; </span><span class="c0 c7">case</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a9ad27f8b55ac56d16b5e0c378bad0051">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a9ad27f8b55ac56d16b5e0c378bad0051">ARM::fixup_arm_thumb_bcc</a></span><span class="c0">: {<br>00182 &nbsp; &nbsp; </span><span class="c0 c6">// Relaxing tBcc to t2Bcc. tBcc has a signed 9-bit displacement with the</span><span class="c0"><br>00183 &nbsp; &nbsp; </span><span class="c0 c6">// low bit being an implied zero. There's an implied +4 offset for the</span><span class="c0"><br>00184 &nbsp; &nbsp; </span><span class="c0 c6">// branch, so we adjust the other way here to determine what's</span><span class="c0"><br>00185 &nbsp; &nbsp; </span><span class="c0 c6">// encodable.</span><span class="c0"><br>00186 &nbsp; &nbsp; </span><span class="c0 c6">//</span><span class="c0"><br>00187 &nbsp; &nbsp; </span><span class="c0 c6">// Relax if the value is too big for a (signed) i8.</span><span class="c0"><br>00188 &nbsp; &nbsp; int64_t Offset = int64_t(Value) - 4;<br>00189 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;Offset &gt; 254 || Offset &lt; -256;<br>00190 &nbsp; }<br>00191 &nbsp; </span><span class="c0 c7">case</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a09a9168eafc337c15e7de013524a1532">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a09a9168eafc337c15e7de013524a1532">ARM::fixup_thumb_adr_pcrel_10</a></span><span class="c0">:<br>00192 &nbsp; </span><span class="c0 c7">case</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a7b3659cc67fef8cc53f589860b2f1299">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a7b3659cc67fef8cc53f589860b2f1299">ARM::fixup_arm_thumb_cp</a></span><span class="c0">: {<br>00193 &nbsp; &nbsp; </span><span class="c0 c6">// If the immediate is negative, greater than 1020, or not a multiple</span><span class="c0"><br>00194 &nbsp; &nbsp; </span><span class="c0 c6">// of four, the wide version of the instruction must be used.</span><span class="c0"><br>00195 &nbsp; &nbsp; int64_t Offset = int64_t(Value) - 4;<br>00196 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;Offset &gt; 1020 || Offset &lt; 0 || Offset &amp; 3;<br>00197 &nbsp; }<br>00198 &nbsp; }<br>00199 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></span><span class="c0">(</span><span class="c0 c14">"Unexpected fixup kind in fixupNeedsRelaxation()!"</span><span class="c0">);<br>00200 }<br>00201 <br>00202 </span><span class="c0 c8">void</span><span class="c0">&nbsp;ARMAsmBackend::relaxInstruction(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">MCInst</a></span><span class="c0">&nbsp;&amp;Inst,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">MCInst</a></span><span class="c0">&nbsp;&amp;Res)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00203 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;RelaxedOp =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ARMAsmBackend_8cpp.html#a44c3ebfb87e5e1f66f0cb9d0610388c8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ARMAsmBackend_8cpp.html#a44c3ebfb87e5e1f66f0cb9d0610388c8">getRelaxedOpcode</a></span><span class="c0">(Inst.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a22542ca9978e4b90401edee109c4f263">getOpcode</a></span><span class="c0">());<br>00204 <br>00205 &nbsp; </span><span class="c0 c6">// Sanity check w/ diagnostic if we get here w/ a bogus instruction.</span><span class="c0"><br>00206 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(RelaxedOp == Inst.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a22542ca9978e4b90401edee109c4f263">getOpcode</a></span><span class="c0">()) {<br>00207 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallString.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallString.html">SmallString&lt;256&gt;</a></span><span class="c0">&nbsp;Tmp;<br>00208 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__svector__ostream.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__svector__ostream.html">raw_svector_ostream</a></span><span class="c0">&nbsp;OS(Tmp);<br>00209 &nbsp; &nbsp; Inst.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a786c0de4267c822c701718d17fa10e0b">dump_pretty</a></span><span class="c0">(OS);<br>00210 &nbsp; &nbsp; OS &lt;&lt; </span><span class="c0 c14">"\n"</span><span class="c0">;<br>00211 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af9521f126aaffcc4bbe06c554b8b4bc1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af9521f126aaffcc4bbe06c554b8b4bc1">report_fatal_error</a></span><span class="c0">(</span><span class="c0 c14">"unexpected instruction to relax: "</span><span class="c0">&nbsp;+ OS.str());<br>00212 &nbsp; }<br>00213 <br>00214 &nbsp; </span><span class="c0 c6">// The instructions we're relaxing have (so far) the same operands.</span><span class="c0"><br>00215 &nbsp; </span><span class="c0 c6">// We just need to update to the proper opcode.</span><span class="c0"><br>00216 &nbsp; Res = Inst;<br>00217 &nbsp; Res.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#ae844d6ff99f067e6672e004ed7613c24">setOpcode</a></span><span class="c0">(RelaxedOp);<br>00218 }<br>00219 <br>00220 </span><span class="c0 c8">bool</span><span class="c0">&nbsp;ARMAsmBackend::writeNopData(uint64_t Count,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html">MCObjectWriter</a></span><span class="c0">&nbsp;*OW)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00221 &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;uint16_t Thumb1_16bitNopEncoding = 0x46c0; </span><span class="c0 c6">// using MOV r8,r8</span><span class="c0"><br>00222 &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;uint16_t Thumb2_16bitNopEncoding = 0xbf00; </span><span class="c0 c6">// NOP</span><span class="c0"><br>00223 &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;uint32_t ARMv4_NopEncoding = 0xe1a00000; </span><span class="c0 c6">// using MOV r0,r0</span><span class="c0"><br>00224 &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;uint32_t ARMv6T2_NopEncoding = 0xe320f000; </span><span class="c0 c6">// NOP</span><span class="c0"><br>00225 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(isThumb()) {<br>00226 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;uint16_t nopEncoding = hasNOP() ? Thumb2_16bitNopEncoding<br>00227 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : Thumb1_16bitNopEncoding;<br>00228 &nbsp; &nbsp; uint64_t NumNops = Count / 2;<br>00229 &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(uint64_t i = 0; i != NumNops; ++i)<br>00230 &nbsp; &nbsp; &nbsp; OW-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html#a9535980d71582c6b295c58774ce5db93">Write16</a></span><span class="c0">(nopEncoding);<br>00231 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(Count &amp; 1)<br>00232 &nbsp; &nbsp; &nbsp; OW-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html#a539a1fd092976b865ea0fbefde5e2dbd">Write8</a></span><span class="c0">(0);<br>00233 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00234 &nbsp; }<br>00235 &nbsp; </span><span class="c0 c6">// ARM mode</span><span class="c0"><br>00236 &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;uint32_t nopEncoding = hasNOP() ? ARMv6T2_NopEncoding<br>00237 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : ARMv4_NopEncoding;<br>00238 &nbsp; uint64_t NumNops = Count / 4;<br>00239 &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(uint64_t i = 0; i != NumNops; ++i)<br>00240 &nbsp; &nbsp; OW-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html#a5b6afec64b3f92fd8ee5b5f37cb8055c">Write32</a></span><span class="c0">(nopEncoding);<br>00241 &nbsp; </span><span class="c0 c6">// FIXME: should this function return false when unable to write exactly</span><span class="c0"><br>00242 &nbsp; </span><span class="c0 c6">// 'Count' bytes with NOP encodings?</span><span class="c0"><br>00243 &nbsp; </span><span class="c0 c7">switch</span><span class="c0">&nbsp;(Count % 4) {<br>00244 &nbsp; </span><span class="c0 c7">default</span><span class="c0">: </span><span class="c0 c7">break</span><span class="c0">; </span><span class="c0 c6">// No leftover bytes to write</span><span class="c0"><br>00245 &nbsp; </span><span class="c0 c7">case</span><span class="c0">&nbsp;1: OW-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html#a539a1fd092976b865ea0fbefde5e2dbd">Write8</a></span><span class="c0">(0); </span><span class="c0 c7">break</span><span class="c0">;<br>00246 &nbsp; </span><span class="c0 c7">case</span><span class="c0">&nbsp;2: OW-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html#a9535980d71582c6b295c58774ce5db93">Write16</a></span><span class="c0">(0); </span><span class="c0 c7">break</span><span class="c0">;<br>00247 &nbsp; </span><span class="c0 c7">case</span><span class="c0">&nbsp;3: OW-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html#a9535980d71582c6b295c58774ce5db93">Write16</a></span><span class="c0">(0); OW-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectWriter.html#a539a1fd092976b865ea0fbefde5e2dbd">Write8</a></span><span class="c0">(0xa0); </span><span class="c0 c7">break</span><span class="c0">;<br>00248 &nbsp; }<br>00249 <br>00250 &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00251 }</span></p><p class="c17"><span class="c0">00522 </span><span class="c0 c8">void</span><span class="c0">&nbsp;ARMAsmBackend::processFixupValue(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html">MCAssembler</a></span><span class="c0">&nbsp;&amp;Asm,<br>00523 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLayout.html">MCAsmLayout</a></span><span class="c0">&nbsp;&amp;Layout,<br>00524 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html">MCFixup</a></span><span class="c0">&nbsp;&amp;Fixup,<br>00525 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFragment.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFragment.html">MCFragment</a></span><span class="c0">&nbsp;*DF,<br>00526 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCValue.html">MCValue</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Target.html">Target</a></span><span class="c0">, uint64_t &amp;Value,<br>00527 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;&amp;IsResolved) {<br>00528 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolRefExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolRefExpr.html">MCSymbolRefExpr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a></span><span class="c0">&nbsp;= Target.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCValue.html#a635fb3df602b4e40097fdb91d78302fc">getSymA</a></span><span class="c0">();<br>00529 &nbsp; </span><span class="c0 c6">// Some fixups to thumb function symbols need the low bit (thumb bit)</span><span class="c0"><br>00530 &nbsp; </span><span class="c0 c6">// twiddled.</span><span class="c0"><br>00531 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;((</span><span class="c0 c8">unsigned</span><span class="c0">)Fixup.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html#ad8f4fe03a52f33f5e40be038fde9e67e">getKind</a></span><span class="c0">() !=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0ac8226e9dee163f040579c8cd8e5eb8c5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0ac8226e9dee163f040579c8cd8e5eb8c5">ARM::fixup_arm_ldst_pcrel_12</a></span><span class="c0">&nbsp;&amp;&amp;<br>00532 &nbsp; &nbsp; &nbsp; (</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classunsigned.html">unsigned</a></span><span class="c0">)Fixup.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html#ad8f4fe03a52f33f5e40be038fde9e67e">getKind</a></span><span class="c0">() !=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a336d5f4419eb0ef8073bbac49a84de19">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a336d5f4419eb0ef8073bbac49a84de19">ARM::fixup_t2_ldst_pcrel_12</a></span><span class="c0">&nbsp;&amp;&amp;<br>00533 &nbsp; &nbsp; &nbsp; (</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classunsigned.html">unsigned</a></span><span class="c0">)Fixup.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html#ad8f4fe03a52f33f5e40be038fde9e67e">getKind</a></span><span class="c0">() !=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a0d7591bd8aae60a8151c5015a61f000b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a0d7591bd8aae60a8151c5015a61f000b">ARM::fixup_arm_adr_pcrel_12</a></span><span class="c0">&nbsp;&amp;&amp;<br>00534 &nbsp; &nbsp; &nbsp; (</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classunsigned.html">unsigned</a></span><span class="c0">)Fixup.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html#ad8f4fe03a52f33f5e40be038fde9e67e">getKind</a></span><span class="c0">() !=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a09a9168eafc337c15e7de013524a1532">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a09a9168eafc337c15e7de013524a1532">ARM::fixup_thumb_adr_pcrel_10</a></span><span class="c0">&nbsp;&amp;&amp;<br>00535 &nbsp; &nbsp; &nbsp; (</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classunsigned.html">unsigned</a></span><span class="c0">)Fixup.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html#ad8f4fe03a52f33f5e40be038fde9e67e">getKind</a></span><span class="c0">() !=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0aac71630154c96f2f6b3e2e324a40037c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0aac71630154c96f2f6b3e2e324a40037c">ARM::fixup_t2_adr_pcrel_12</a></span><span class="c0">&nbsp;&amp;&amp;<br>00536 &nbsp; &nbsp; &nbsp; (</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classunsigned.html">unsigned</a></span><span class="c0">)Fixup.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html#ad8f4fe03a52f33f5e40be038fde9e67e">getKind</a></span><span class="c0">() !=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a7b3659cc67fef8cc53f589860b2f1299">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a7b3659cc67fef8cc53f589860b2f1299">ARM::fixup_arm_thumb_cp</a></span><span class="c0">) {<br>00537 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(A) {<br>00538 &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;&amp;Sym = A-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbolRefExpr.html#afba43ef04f7e89dc23859d7938820bd8">getSymbol</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a8efc430800be9a5ea35d7944903e6954">AliasedSymbol</a></span><span class="c0">();<br>00539 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(Asm.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#adc77aa07664faec41cc4270aa376ba29">isThumbFunc</a></span><span class="c0">(&amp;Sym))<br>00540 &nbsp; &nbsp; &nbsp; &nbsp; Value |= 1;<br>00541 &nbsp; &nbsp; }<br>00542 &nbsp; }<br>00543 &nbsp; </span><span class="c0 c6">// We must always generate a relocation for BL/BLX instructions if we have</span><span class="c0"><br>00544 &nbsp; </span><span class="c0 c6">// a symbol to reference, as the linker relies on knowing the destination</span><span class="c0"><br>00545 &nbsp; </span><span class="c0 c6">// symbol's thumb-ness to get interworking right.</span><span class="c0"><br>00546 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(A &amp;&amp; ((</span><span class="c0 c8">unsigned</span><span class="c0">)Fixup.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html#ad8f4fe03a52f33f5e40be038fde9e67e">getKind</a></span><span class="c0">() ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a78f923cec6a90c05ba09b4cf99112b93">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a78f923cec6a90c05ba09b4cf99112b93">ARM::fixup_arm_thumb_blx</a></span><span class="c0">&nbsp;||<br>00547 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classunsigned.html">unsigned</a></span><span class="c0">)Fixup.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html#ad8f4fe03a52f33f5e40be038fde9e67e">getKind</a></span><span class="c0">() ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0adb86ef3fcfce8098efef7cb48f3ae98d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0adb86ef3fcfce8098efef7cb48f3ae98d">ARM::fixup_arm_thumb_bl</a></span><span class="c0">&nbsp;||<br>00548 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classunsigned.html">unsigned</a></span><span class="c0">)Fixup.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html#ad8f4fe03a52f33f5e40be038fde9e67e">getKind</a></span><span class="c0">() ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a92999538a175673cea0e806d24285585">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a92999538a175673cea0e806d24285585">ARM::fixup_arm_blx</a></span><span class="c0">&nbsp;||<br>00549 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classunsigned.html">unsigned</a></span><span class="c0">)Fixup.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html#ad8f4fe03a52f33f5e40be038fde9e67e">getKind</a></span><span class="c0">() ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a8b3ea0884f12a07077ecb6fd18395467">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0a8b3ea0884f12a07077ecb6fd18395467">ARM::fixup_arm_uncondbl</a></span><span class="c0">&nbsp;||<br>00550 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classunsigned.html">unsigned</a></span><span class="c0">)Fixup.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html#ad8f4fe03a52f33f5e40be038fde9e67e">getKind</a></span><span class="c0">() ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0ac101b88c74df376a53087a2a12829576">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM.html#ad950a20a6062ddd7f336a9eede28bdf0ac101b88c74df376a53087a2a12829576">ARM::fixup_arm_condbl</a></span><span class="c0">))<br>00551 &nbsp; &nbsp; IsResolved = </span><span class="c0 c9">false</span><span class="c0">;<br>00552 <br>00553 &nbsp; </span><span class="c0 c6">// Try to get the encoded value for the fixup as-if we're mapping it into</span><span class="c0"><br>00554 &nbsp; </span><span class="c0 c6">// the instruction. This allows adjustFixupValue() to issue a diagnostic</span><span class="c0"><br>00555 &nbsp; </span><span class="c0 c6">// if the value aren't invalid.</span><span class="c0"><br>00556 &nbsp; (void)</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ARMAsmBackend_8cpp.html#a637efab47b9dfa90b66ef111f7f7cce5">adjustFixupValue</a></span><span class="c0">(Fixup, Value, &amp;Asm.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAssembler.html#a85f602e21fbfcdc94288a8f472ec92d5">getContext</a></span><span class="c0">());<br>00557 }</span></p><p class="c17"><span class="c0">00607 </span><span class="c0 c8">void</span><span class="c0">&nbsp;ARMAsmBackend::applyFixup(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html">MCFixup</a></span><span class="c0">&nbsp;&amp;Fixup, </span><span class="c0 c8">char</span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1object_1_1macho.html#a56678f646a4a478d777eb8821f710db0a557a58f6e018464dcf0635728ef14dd1">Data</a></span><span class="c0">,<br>00608 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;DataSize, uint64_t Value)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00609 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;NumBytes =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ARMAsmBackend_8cpp.html#ac372fb24df18ed69d99fb8658ec0e7a7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ARMAsmBackend_8cpp.html#ac372fb24df18ed69d99fb8658ec0e7a7">getFixupKindNumBytes</a></span><span class="c0">(Fixup.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html#ad8f4fe03a52f33f5e40be038fde9e67e">getKind</a></span><span class="c0">());<br>00610 &nbsp; Value =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ARMAsmBackend_8cpp.html#a637efab47b9dfa90b66ef111f7f7cce5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ARMAsmBackend_8cpp.html#a637efab47b9dfa90b66ef111f7f7cce5">adjustFixupValue</a></span><span class="c0">(Fixup, Value);<br>00611 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!Value) </span><span class="c0 c7">return</span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Doesn't change encoding.</span><span class="c0"><br>00613 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Offset = Fixup.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCFixup.html#add5cb03f27e1c84630cc1970478fcfe2">getOffset</a></span><span class="c0">();<br>00614 &nbsp; assert(Offset + NumBytes &lt;= DataSize &amp;&amp; </span><span class="c0 c14">"Invalid fixup offset!"</span><span class="c0">);<br>00616 &nbsp; </span><span class="c0 c6">// For each byte of the fragment that the fixup touches, mask in the bits from</span><span class="c0"><br>00617 &nbsp; </span><span class="c0 c6">// the fixup value. The Value has been "split up" into the appropriate</span><span class="c0"><br>00618 &nbsp; </span><span class="c0 c6">// bitfields above.</span><span class="c0"><br>00619 &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i = 0; i != NumBytes; ++i)<br>00620 &nbsp; &nbsp; Data[Offset + i] |= uint8_t((Value &gt;&gt; (i * 8)) &amp; 0xff);<br>00621 }</span></p><p class="c15"><span class="c5 c11"></span></p><p class="c20"><span class="c5 c11">We’ll dive deeper and try to put things together using one target-specific example (X86 or ARM) in Part 8. &nbsp;</span></p><p class="c15"><span class="c5 c11"></span></p><p class="c20"><span class="c19">Part 7.4.3 &nbsp;MCContext </span></p><h3 class="c45 c20"><span class="c37 c43 c11"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id32">The </a></span><span class="c24 c30"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id32">MCContext</a></span><span class="c37 c11 c43"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id32">&nbsp;class</a></span></h3><p class="c20"><span class="c2">“</span><span class="c2">The MCContext class is the owner of a variety of uniqued data structures at the MC layer, including symbols, sections, etc. As such, this is the class that you interact with to create symbols and sections. This class can not be subclassed.”</span></p><p class="c15"><span class="c5 c11"></span></p><p class="c20"><span class="c5 c11">Context object for machine code objects. This class owns all of the sections that it creates.</span></p><p class="c20"><span class="c2">Put the interface here:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">00042</a></span><span class="c0">&nbsp; </span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">MCContext</a></span><span class="c0">&nbsp;{<br>00043 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">MCContext</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">MCContext</a></span><span class="c0">&amp;)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">LLVM_DELETED_FUNCTION</a></span><span class="c0">;<br>00044 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">MCContext</a></span><span class="c0">&nbsp;&amp;operator=(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">MCContext</a></span><span class="c0">&amp;)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">LLVM_DELETED_FUNCTION</a></span><span class="c0">;<br>00045 &nbsp; </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html#a9559588d04d7127225b42299334f1584">00046</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringMap.html">StringMap&lt;MCSymbol*, BumpPtrAllocator&amp;&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html#a9559588d04d7127225b42299334f1584">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html#a9559588d04d7127225b42299334f1584">SymbolTable</a></span><span class="c0">;<br>00047 &nbsp; </span><span class="c0 c9">private</span><span class="c0">:<br>00048 </span><span class="c0 c6">&nbsp; &nbsp;/// The SourceMgr for this object, if any.</span><span class="c0"><br>00049 &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SourceMgr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SourceMgr.html">SourceMgr</a></span><span class="c0">&nbsp;*SrcMgr;<br>00051 </span><span class="c0 c6">&nbsp; &nbsp;/// The MCAsmInfo for this target.</span><span class="c0"><br>00052 &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">MCAsmInfo</a></span><span class="c0">&nbsp;&amp;MAI</span><span class="c0">;</span><span class="c0"><br>00054 </span><span class="c0 c6">&nbsp; &nbsp;/// The MCRegisterInfo for this target.</span><span class="c0"><br>00055 &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo.html">MCRegisterInfo</a></span><span class="c0">&nbsp;&amp;MRI;<br>00057 </span><span class="c0 c6">&nbsp; &nbsp;/// The MCObjectFileInfo for this target.</span><span class="c0"><br>00058 &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectFileInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCObjectFileInfo.html">MCObjectFileInfo</a></span><span class="c0">&nbsp;*MOFI;<br>00066 </span><span class="c0 c6">&nbsp; &nbsp;/// Symbols - Bindings of names to symbols.</span><span class="c0"><br>00067 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringMap.html">SymbolTable</a></span><span class="c0">&nbsp;Symbols;<br>00069 </span><span class="c0 c6">&nbsp; &nbsp;/// UsedNames - Keeps tracks of names that were used both for used declared</span><span class="c0"><br>00070 </span><span class="c0 c6">&nbsp; &nbsp;/// and artificial symbols.</span><span class="c0"><br>00071 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringMap.html">StringMap&lt;bool, BumpPtrAllocator&amp;&gt;</a></span><span class="c0">&nbsp;UsedNames;<br>00073 </span><span class="c0 c6">&nbsp; &nbsp;/// NextUniqueID - The next ID to dole out to an unnamed assembler temporary</span><span class="c0"><br>00074 </span><span class="c0 c6">&nbsp; &nbsp;/// symbol.</span><span class="c0"><br>00075 &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;NextUniqueID;<br>00077 </span><span class="c0 c6">&nbsp; &nbsp;/// Instances of directional local labels.</span><span class="c0"><br>00078 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, MCLabel *&gt;</a></span><span class="c0">&nbsp;Instances;<br>00079 </span><span class="c0 c6">&nbsp; &nbsp;/// NextInstance() creates the next instance of the directional local label</span><span class="c0"><br>00080 </span><span class="c0 c6">&nbsp; &nbsp;/// for the LocalLabelVal and adds it to the map if needed.</span><span class="c0"><br>00081 &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;NextInstance(int64_t LocalLabelVal);<br>00082 </span><span class="c0 c6">&nbsp; &nbsp;/// GetInstance() gets the current instance of the directional local label</span><span class="c0"><br>00083 </span><span class="c0 c6">&nbsp; &nbsp;/// for the LocalLabelVal and adds it to the map if needed.</span><span class="c0"><br>00084 &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;GetInstance(int64_t LocalLabelVal)</span><span class="c0">;</span><span class="c0">&nbsp;<br>00086 </span><span class="c0 c6">&nbsp; &nbsp;/// The file name of the log file from the environment variable</span><span class="c0"><br>00087 </span><span class="c0 c6">&nbsp; &nbsp;/// AS_SECURE_LOG_FILE. &nbsp;Which must be set before the .secure_log_unique</span><span class="c0"><br>00088 </span><span class="c0 c6">&nbsp; &nbsp;/// directive is used or it is an error.</span><span class="c0"><br>00089 &nbsp; &nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;*SecureLogFile;<br>00090 </span><span class="c0 c6">&nbsp; &nbsp;/// The stream that gets written to for the .secure_log_unique directive.</span><span class="c0"><br>00091 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">raw_ostream</a></span><span class="c0">&nbsp;*SecureLog;<br>00095 &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;SecureLogUsed;<br>00097 </span><span class="c0 c6">&nbsp; &nbsp;/// The compilation directory to use for DW_AT_comp_dir.</span><span class="c0"><br>00098 &nbsp; &nbsp;std::string CompilationDir;<br>00100 </span><span class="c0 c6">&nbsp; &nbsp;/// The main file name if passed in explicitly.</span><span class="c0"><br>00101 &nbsp; &nbsp;std::string MainFileName;<br>00103 </span><span class="c0 c6">&nbsp; &nbsp;/// The dwarf file and directory tables from the dwarf .file directive.</span><span class="c0"><br>00104 &nbsp; &nbsp;std::vector&lt;MCDwarfFile *&gt; MCDwarfFiles;<br>00105 &nbsp; &nbsp; std::vector&lt;StringRef&gt; MCDwarfDirs;<br>00107 </span><span class="c0 c6">&nbsp; &nbsp;/// The current dwarf line information from the last dwarf .loc directive.</span><span class="c0"><br>00108 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCDwarfLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCDwarfLoc.html">MCDwarfLoc</a></span><span class="c0">&nbsp;CurrentDwarfLoc;<br>00109 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;DwarfLocSeen;<br>00111 </span><span class="c0 c6">&nbsp; &nbsp;/// Generate dwarf debugging info for assembly source files.</span><span class="c0"><br>00112 &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;GenDwarfForAssembly</span><span class="c0">;</span><span class="c0"><br>00114 </span><span class="c0 c6">&nbsp; &nbsp;/// The current dwarf file number when generate dwarf debugging info for</span><span class="c0"><br>00115 </span><span class="c0 c6">&nbsp; &nbsp;/// assembly source files.</span><span class="c0"><br>00116 &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;GenDwarfFileNumber;<br>00118 </span><span class="c0 c6">&nbsp; &nbsp;/// The default initial text section that we generate dwarf debugging line</span><span class="c0"><br>00119 </span><span class="c0 c6">&nbsp; &nbsp;/// info for when generating dwarf assembly source files.</span><span class="c0"><br>00120 &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0">&nbsp;*GenDwarfSection;<br>00121 </span><span class="c0 c6">&nbsp; &nbsp;/// Symbols created for the start and end of this section.</span><span class="c0"><br>00122 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*GenDwarfSectionStartSym, *GenDwarfSectionEndSym;<br>00124 </span><span class="c0 c6">&nbsp; &nbsp;/// The information gathered from labels that will have dwarf label</span><span class="c0"><br>00125 </span><span class="c0 c6">&nbsp; &nbsp;/// entries when generating dwarf assembly source files.</span><span class="c0"><br>00126 &nbsp; &nbsp;std::vector&lt;const MCGenDwarfLabelEntry *&gt; MCGenDwarfLabelEntries;<br>00130 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;DwarfDebugFlags;<br>00135 &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;AllowTemporaryLabels;<br>00149 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*CreateSymbol(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a></span><span class="c0">);</span></p><p class="c15"><span class="c2"></span></p><p class="c15"><span class="c2"></span></p><p class="c20"><span class="c19">Part 7.4.4 &nbsp;MCSymbol</span></p><h3 class="c45 c20"><span class="c37 c43 c11"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id33">The </a></span><span class="c30 c24"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id33">MCSymbol</a></span><span class="c37 c43 c11"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id33">&nbsp;class</a></span></h3><p class="c20"><span class="c2">“</span><span class="c2">The MCSymbol class represents a symbol (aka label) in the assembly file. There are two interesting kinds of symbols: assembler temporary symbols, and normal symbols. Assembler temporary symbols are used and processed by the assembler but are discarded when the object file is produced. The distinction is usually represented by adding a prefix to the label, for example “L” labels are assembler temporary labels in MachO.</span></p><p class="c20"><span class="c2">MCSymbols are created by MCContext and uniqued there. This means that MCSymbols can be compared for pointer equivalence to find out if they are the same symbol. Note that pointer inequality does not guarantee the labels will end up at different addresses though. It’s perfectly legal to output something like this to the .s file:</span></p><p class="c20"><span class="c18 c5">foo:<br>bar:<br> &nbsp;.byte 4</span></p><p class="c20"><span class="c2">In this case, both the foo and bar symbols will have the same address.”</span></p><p class="c15"><span class="c2"></span></p><p class="c17"><span class="c2">MCSymbol - Instances of this class represent a symbol name in the MC file, and MCSymbols are created and unique'd by the MCContext class. &nbsp;MCSymbols should only be constructed with valid names for the object file. If the symbol is defined/emitted into the current translation unit, the Section member is set to indicate what section it lives in. &nbsp;Otherwise, if it is a reference to an external entity, it has a null section.</span></p><p class="c17 c35"><span class="c6 c5 c11"></span></p><p class="c17"><span class="c2">The interface of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c2">&nbsp;is as follows:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">00033</a></span><span class="c0 c6">&nbsp; </span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0 c6">&nbsp;{<br>00037 &nbsp; &nbsp; </span><span class="c0 c9">static</span><span class="c0 c6">&nbsp;</span><span class="c0 c9">const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0 c6">&nbsp;*AbsolutePseudoSection;<br>00039 &nbsp; &nbsp;/// Name - The name of the symbol. &nbsp;The referred-to string data is actually<br>00040 &nbsp; &nbsp;/// held by the StringMap that lives in MCContext.<br>00041 &nbsp; </span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0 c6">&nbsp;Name;<br>00043 &nbsp; &nbsp;/// Section - The section the symbol is defined in. This is null for<br>00044 &nbsp; &nbsp;/// undefined symbols, and the special AbsolutePseudoSection value for<br>00045 &nbsp; &nbsp;/// absolute symbols.<br>00046 &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0 c6">&nbsp;*Section;<br>00048 &nbsp; &nbsp;/// Value - If non-null, the value for a variable symbol.<br>00049 &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0 c6">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0 c6">;<br>00051 &nbsp; &nbsp;/// IsTemporary - True if this is an assembler temporary label, which<br>00052 &nbsp; &nbsp;/// typically does not survive in the .o file's symbol table. &nbsp;Usually<br>00053 &nbsp; &nbsp;/// "Lfoo" or ".foo".<br>00054 &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0 c6">&nbsp;IsTemporary : 1;<br>00056 &nbsp; &nbsp;/// IsUsed - True if this symbol has been used.<br>00057 &nbsp; &nbsp;</span><span class="c0 c9">mutable</span><span class="c0 c6">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0 c6">&nbsp;IsUsed : 1;<br>00059 &nbsp; </span><span class="c0 c9">private</span><span class="c0 c6">: &nbsp;// MCContext creates and uniques these.<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a4003ba7a2726fde2214660963213cc31">00060</a></span><span class="c0 c6">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">friend</span><span class="c0 c6">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0 c6">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a7862d2f746209c16291d7139dab55e00">00061</a></span><span class="c0 c6">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">friend</span><span class="c0 c6">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">MCContext</a></span><span class="c0 c6">;<br>00062 &nbsp; &nbsp;</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0 c6">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0 c6">&nbsp;name, </span><span class="c0 c8">bool</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ad75d1f7b68cd325d8f592a90bc7d1732">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ad75d1f7b68cd325d8f592a90bc7d1732">isTemporary</a></span><span class="c0 c6">)<br>00063 &nbsp; &nbsp; &nbsp; :</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a></span><span class="c0 c6">(name),</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">Section</a></span><span class="c0 c6">(0),</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0 c6">(0),<br>00064 &nbsp; &nbsp; &nbsp; &nbsp; IsTemporary(isTemporary), IsUsed(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/AliasAnalysisEvaluator_8cpp.html#a3898a228575af19a9b2052f2b3677dce">false</a></span><span class="c0 c6">) {}<br>00066 &nbsp; &nbsp;</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0 c6">(</span><span class="c0 c9">const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0 c6">&amp;)</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">LLVM_DELETED_FUNCTION</a></span><span class="c0 c6">;<br>00067 &nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0 c6">&nbsp;operator=(const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0 c6">&amp;) LLVM_DELETED_FUNCTION;<br>00068 &nbsp; public:<br>00069 &nbsp; &nbsp;/// getName - Get the symbol name.<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a1c2e92b00e94b279e7a880a305548765">00070</a></span><span class="c0 c6">&nbsp; &nbsp;</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a1c2e92b00e94b279e7a880a305548765">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a1c2e92b00e94b279e7a880a305548765">getName</a></span><span class="c0 c6">()</span><span class="c0 c9">&nbsp;const </span><span class="c0 c6">{ </span><span class="c0 c7">return</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a></span><span class="c0 c6">; }<br>00075 &nbsp; &nbsp;/// isTemporary - Check if this is an assembler temporary symbol.<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ad75d1f7b68cd325d8f592a90bc7d1732">00076</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ad75d1f7b68cd325d8f592a90bc7d1732">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ad75d1f7b68cd325d8f592a90bc7d1732">isTemporary</a></span><span class="c0 c6">()</span><span class="c0 c9">&nbsp;const </span><span class="c0 c6">{ </span><span class="c0 c7">return</span><span class="c0 c6">&nbsp;IsTemporary; }<br>00078 &nbsp; &nbsp;/// isUsed - Check if this is used.<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ab27813a64346ebe779c3d4f43e4a7214">00079</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ab27813a64346ebe779c3d4f43e4a7214">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ab27813a64346ebe779c3d4f43e4a7214">isUsed</a></span><span class="c0 c6">()</span><span class="c0 c9">&nbsp;const </span><span class="c0 c6">{ </span><span class="c0 c7">return</span><span class="c0 c6">&nbsp;IsUsed; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ab60aae1c95461776bc34fa14e06b8f6a">00080</a></span><span class="c0 c6">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ab60aae1c95461776bc34fa14e06b8f6a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ab60aae1c95461776bc34fa14e06b8f6a">setUsed</a></span><span class="c0 c6">(</span><span class="c0 c8">bool</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0 c6">)</span><span class="c0 c9">&nbsp;const </span><span class="c0 c6">{ IsUsed = Value; }<br>00086 &nbsp; &nbsp;/// isDefined - Check if this symbol is defined (i.e., it has an address).<br>00088 &nbsp; &nbsp;/// Defined symbols are either absolute or in some section.<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a4249ad589d761f07be96a0c314de5ad2">00089</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a4249ad589d761f07be96a0c314de5ad2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a4249ad589d761f07be96a0c314de5ad2">isDefined</a></span><span class="c0 c6">()</span><span class="c0 c9">&nbsp;const </span><span class="c0 c6">{<br>00090 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">Section</a></span><span class="c0 c6">&nbsp;!= 0;<br>00091 &nbsp; &nbsp; }<br>00093 &nbsp; &nbsp;/// isInSection - Check if this symbol is defined in some section (i.e., it<br>00094 &nbsp; &nbsp;/// is defined but not absolute).<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a41ad61c277c8e1e86172a8ab700cfbef">00095</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a41ad61c277c8e1e86172a8ab700cfbef">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a41ad61c277c8e1e86172a8ab700cfbef">isInSection</a></span><span class="c0 c6">()</span><span class="c0 c9">&nbsp;const </span><span class="c0 c6">{<br>00096 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a4249ad589d761f07be96a0c314de5ad2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a4249ad589d761f07be96a0c314de5ad2">isDefined</a></span><span class="c0 c6">() &amp;&amp; !</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ab477873a8bfe855bdaaaad8174af1bb8">isAbsolute</a></span><span class="c0 c6">();<br>00097 &nbsp; &nbsp; }<br>00099 &nbsp; &nbsp;/// isUndefined - Check if this symbol undefined (i.e., implicitly defined).<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a2260c62e12734815ad60dc038bf514f5">00100</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a2260c62e12734815ad60dc038bf514f5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a2260c62e12734815ad60dc038bf514f5">isUndefined</a></span><span class="c0 c6">()</span><span class="c0 c9">&nbsp;const </span><span class="c0 c6">{<br>00101 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0 c6">&nbsp;!</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a4249ad589d761f07be96a0c314de5ad2">isDefined</a></span><span class="c0 c6">();<br>00102 &nbsp; &nbsp; }<br>00104 &nbsp; &nbsp;/// isAbsolute - Check if this is an absolute symbol.<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ab477873a8bfe855bdaaaad8174af1bb8">00105</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ab477873a8bfe855bdaaaad8174af1bb8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ab477873a8bfe855bdaaaad8174af1bb8">isAbsolute</a></span><span class="c0 c6">()</span><span class="c0 c9">&nbsp;const </span><span class="c0 c6">{<br>00106 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">Section</a></span><span class="c0 c6">&nbsp;== AbsolutePseudoSection;<br>00107 &nbsp; &nbsp; }<br>00109 &nbsp; &nbsp;/// getSection - Get the section associated with a defined, non-absolute symbol.<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a7605b3302f3325d1fbdac43346c1a2dd">00111</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0 c6">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a7605b3302f3325d1fbdac43346c1a2dd">getSection</a></span><span class="c0 c6">()</span><span class="c0 c9">&nbsp;const </span><span class="c0 c6">{<br>00112 &nbsp; &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a41ad61c277c8e1e86172a8ab700cfbef">isInSection</a></span><span class="c0 c6">() &amp;&amp; </span><span class="c0 c14">"Invalid accessor!"</span><span class="c0 c6">);<br>00113 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0 c6">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">Section</a></span><span class="c0 c6">;<br>00114 &nbsp; &nbsp; }<br>00116 &nbsp; &nbsp;/// setSection - Mark the symbol as defined in the section \p S.<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ad32bcaa3b923d1d81b03b4b6b188666b">00117</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ad32bcaa3b923d1d81b03b4b6b188666b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ad32bcaa3b923d1d81b03b4b6b188666b">setSection</a></span><span class="c0 c6">(</span><span class="c0 c9">const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0 c6">&nbsp;&amp;S) {</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">Section</a></span><span class="c0 c6">&nbsp;= &amp;S; }<br>00119 &nbsp; &nbsp;/// setUndefined - Mark the symbol as undefined.<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ab65fa2b7850f38cafbc74ab99c3a3fed">00120</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ab65fa2b7850f38cafbc74ab99c3a3fed">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ab65fa2b7850f38cafbc74ab99c3a3fed">setUndefined</a></span><span class="c0 c6">() {<br>00121 &nbsp; &nbsp; &nbsp;</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">Section</a></span><span class="c0 c6">&nbsp;= 0;<br>00122 &nbsp; &nbsp; }<br>00124 &nbsp; &nbsp;/// setAbsolute - Mark the symbol as absolute.<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#afb25c9ed8cf0778583798477374a2e38">00125</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#afb25c9ed8cf0778583798477374a2e38">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#afb25c9ed8cf0778583798477374a2e38">setAbsolute</a></span><span class="c0 c6">() {</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceARMBuildAttrs.html#a581f39eb005bdc4d441c23d019618810a21b40b2b4fda35a62949da46ddadd76b">Section</a></span><span class="c0 c6">&nbsp;= AbsolutePseudoSection; }<br>00131 &nbsp; &nbsp;/// isVariable - Check if this is a variable symbol.<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ac542b727bb1c9dd954198bf3906912ce">00132</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ac542b727bb1c9dd954198bf3906912ce">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ac542b727bb1c9dd954198bf3906912ce">isVariable</a></span><span class="c0 c6">()</span><span class="c0 c9">&nbsp;const </span><span class="c0 c6">{<br>00133 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0 c6">&nbsp;!= 0;<br>00134 &nbsp; &nbsp; }<br>00136 &nbsp; &nbsp;/// getVariableValue() - Get the value for variable symbols.<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a3edce2254ea42487721b42c00bbafe18">00137</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0 c6">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a3edce2254ea42487721b42c00bbafe18">getVariableValue</a></span><span class="c0 c6">()</span><span class="c0 c9">&nbsp;const </span><span class="c0 c6">{<br>00138 &nbsp; &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ac542b727bb1c9dd954198bf3906912ce">isVariable</a></span><span class="c0 c6">() &amp;&amp; </span><span class="c0 c14">"Invalid accessor!"</span><span class="c0 c6">);<br>00139 &nbsp; &nbsp; &nbsp; IsUsed = </span><span class="c0 c9">true</span><span class="c0 c6">;<br>00140 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0 c6">;<br>00141 &nbsp; &nbsp; }<br>00143 &nbsp; &nbsp; // AliasedSymbol() - If this is an alias (a = b), return the symbol<br>00144 &nbsp; &nbsp; // we ultimately point to.<br>00146 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0 c6">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a8efc430800be9a5ea35d7944903e6954">AliasedSymbol</a></span><span class="c0 c6">() </span><span class="c0 c9">const</span><span class="c0 c6">;<br>00148 &nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a7f1486460b5e2da7f4527bbb2da54eff">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#a7f1486460b5e2da7f4527bbb2da54eff">setVariableValue</a></span><span class="c0 c6">(</span><span class="c0 c9">const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0 c6">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0 c6">);<br>00152 &nbsp; &nbsp;/// print - Print the value to the stream \p OS.<br>00153 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#af37c1f163a8f42a3ca09ec9218bb94e0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#af37c1f163a8f42a3ca09ec9218bb94e0">print</a></span><span class="c0 c6">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">raw_ostream</a></span><span class="c0 c6">&nbsp;&amp;OS) </span><span class="c0 c9">const</span><span class="c0 c6">;<br>00155 &nbsp; &nbsp;/// dump - Print the value to stderr.<br>00156 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ac8032ef8ea37927f2f9ce569c2f8d4d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html#ac8032ef8ea37927f2f9ce569c2f8d4d4">dump</a></span><span class="c0 c6">() </span><span class="c0 c9">const</span><span class="c0 c6">;<br>00157 &nbsp; };</span></p><p class="c15"><span class="c2"></span></p><p class="c20"><span class="c19">Part 7.4.5 &nbsp;MCSection</span></p><h3 class="c45 c20"><span class="c37 c43 c11"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id34">The </a></span><span class="c30 c24"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id34">MCSection</a></span><span class="c37 c43 c11"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id34">&nbsp;class</a></span></h3><p class="c20"><span class="c2">“</span><span class="c2">The </span><span class="c10 c5">MCSection</span><span class="c2">&nbsp;class represents an object-file specific section. It is subclassed by object file specific implementations (e.g. </span><span class="c10 c5">MCSectionMachO</span><span class="c2">, </span><span class="c10 c5">MCSectionCOFF</span><span class="c2">, </span><span class="c10 c5">MCSectionELF</span><span class="c2">) and these are created and uniqued by MCContext. The MCStreamer has a notion of the current section, which can be changed with the SwitchToSection method (which corresponds to a ”.section” directive in a .s file).”</span></p><p class="c15"><span class="c2"></span></p><p class="c17"><span class="c2">Instances of this class represent a uniqued identifier for a section in the current translation unit. &nbsp;The MCContext class uniques and creates these. Just put the code since it is somewhat self-explained with decent comments for every function:</span></p><p class="c17 c35"><span class="c0 c6"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">00028</a></span><span class="c0 c6">&nbsp; </span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0 c6">&nbsp;{<br>00029 &nbsp; </span><span class="c0 c9">public</span><span class="c0 c6">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98">00030</a></span><span class="c0 c6">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">enum</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98">SectionVariant</a></span><span class="c0 c6">&nbsp;{<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98abcf1b00b3f8f61318b8837dc27cebb15">00031</a></span><span class="c0 c6">&nbsp; &nbsp; &nbsp; </span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98abcf1b00b3f8f61318b8837dc27cebb15">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98abcf1b00b3f8f61318b8837dc27cebb15">SV_COFF</a></span><span class="c0 c6">&nbsp;= 0,<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98a5f6a277923e4b004ff7fed8dd4ad7aee">00032</a></span><span class="c0 c6">&nbsp; &nbsp; &nbsp; </span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98a5f6a277923e4b004ff7fed8dd4ad7aee">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98a5f6a277923e4b004ff7fed8dd4ad7aee">SV_ELF</a></span><span class="c0 c6">,<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98a55ed9b1dac938f496436528db3576783">00033</a></span><span class="c0 c6">&nbsp; &nbsp; &nbsp; </span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98a55ed9b1dac938f496436528db3576783">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98a55ed9b1dac938f496436528db3576783">SV_MachO</a></span><span class="c0 c6"><br>00034 &nbsp; &nbsp; };<br>00036 &nbsp; </span><span class="c0 c9">private</span><span class="c0 c6">:<br>00037 &nbsp; &nbsp;</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0 c6">(</span><span class="c0 c9">const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0 c6">&amp;)</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">LLVM_DELETED_FUNCTION</a></span><span class="c0 c6">;<br>00038 &nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0 c6">&nbsp;operator=(const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0 c6">&amp;) LLVM_DELETED_FUNCTION;<br>00039 &nbsp; protected:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#ae09aa5fd61bd44e2ccd8415885e0c909">00040</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html">MCSection</a></span><span class="c0 c6">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98">SectionVariant</a></span><span class="c0 c6">&nbsp;V,</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SectionKind.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SectionKind.html">SectionKind</a></span><span class="c0 c6">&nbsp;K) :</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a3a5eab427913897c7e600925a4216ca0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a3a5eab427913897c7e600925a4216ca0">Variant</a></span><span class="c0 c6">(V),</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#add60648fd6387b7ce2e66e68ac92f068">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#add60648fd6387b7ce2e66e68ac92f068">Kind</a></span><span class="c0 c6">(K) {}<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a3a5eab427913897c7e600925a4216ca0">00041</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98">SectionVariant</a></span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a3a5eab427913897c7e600925a4216ca0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a3a5eab427913897c7e600925a4216ca0">Variant</a></span><span class="c0 c6">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#add60648fd6387b7ce2e66e68ac92f068">00042</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SectionKind.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SectionKind.html">SectionKind</a></span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#add60648fd6387b7ce2e66e68ac92f068">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#add60648fd6387b7ce2e66e68ac92f068">Kind</a></span><span class="c0 c6">;<br>00043 &nbsp; </span><span class="c0 c9">public</span><span class="c0 c6">:<br>00044 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a352cfb70ee9de3e1b38106be8cb05a87">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a352cfb70ee9de3e1b38106be8cb05a87">~MCSection</a></span><span class="c0 c6">();<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a118ff9150ba40b65eac7fb8da0024684">00046</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SectionKind.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SectionKind.html">SectionKind</a></span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a118ff9150ba40b65eac7fb8da0024684">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a118ff9150ba40b65eac7fb8da0024684">getKind</a></span><span class="c0 c6">()</span><span class="c0 c9">&nbsp;const </span><span class="c0 c6">{ </span><span class="c0 c7">return</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#add60648fd6387b7ce2e66e68ac92f068">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#add60648fd6387b7ce2e66e68ac92f068">Kind</a></span><span class="c0 c6">; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#aa915d4102b789b76b51018c6e3e853b6">00048</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#afecf7c84b079ea5c169f71b6c06ece98">SectionVariant</a></span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#aa915d4102b789b76b51018c6e3e853b6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#aa915d4102b789b76b51018c6e3e853b6">getVariant</a></span><span class="c0 c6">()</span><span class="c0 c9">&nbsp;const </span><span class="c0 c6">{ </span><span class="c0 c7">return</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a3a5eab427913897c7e600925a4216ca0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a3a5eab427913897c7e600925a4216ca0">Variant</a></span><span class="c0 c6">; }<br>00050 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0 c6">&nbsp;</span><span class="c0 c8">void</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#aa0715f047994314fd5b91551235a498d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#aa0715f047994314fd5b91551235a498d">PrintSwitchToSection</a></span><span class="c0 c6">(</span><span class="c0 c9">const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">MCAsmInfo</a></span><span class="c0 c6">&nbsp;&amp;MAI,<br>00051 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">raw_ostream</a></span><span class="c0 c6">&nbsp;&amp;OS) </span><span class="c0 c9">const</span><span class="c0 c6">&nbsp;= 0;<br>00053 &nbsp; &nbsp; // Convenience routines to get label names for the beginning/end of a<br>00054 &nbsp; &nbsp; // section.<br>00055 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0 c6">&nbsp;std::string</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a03a614c23c8dcc2eb519c23bd8d06b3b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a03a614c23c8dcc2eb519c23bd8d06b3b">getLabelBeginName</a></span><span class="c0 c6">() </span><span class="c0 c9">const</span><span class="c0 c6">&nbsp;= 0;<br>00056 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0 c6">&nbsp;std::string</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a6f6ebc7c34205ad2b7548c7a91a19231">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a6f6ebc7c34205ad2b7548c7a91a19231">getLabelEndName</a></span><span class="c0 c6">() </span><span class="c0 c9">const</span><span class="c0 c6">&nbsp;= 0;<br>00058 &nbsp; &nbsp;/// isBaseAddressKnownZero - Return true if we know that this section will<br>00059 &nbsp; &nbsp;/// get a base address of zero. &nbsp;In cases where we know that this is true we<br>00060 &nbsp; &nbsp;/// can emit section offsets as direct references to avoid a subtraction<br>00061 &nbsp; &nbsp;/// from the base of the section, saving a relocation.<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a7349200e3df4f81d84cb8fb14a9079da">00062</a></span><span class="c0 c6">&nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0 c6">&nbsp;</span><span class="c0 c8">bool</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a7349200e3df4f81d84cb8fb14a9079da">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a7349200e3df4f81d84cb8fb14a9079da">isBaseAddressKnownZero</a></span><span class="c0 c6">()</span><span class="c0 c9">&nbsp;const </span><span class="c0 c6">{<br>00063 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0 c6">&nbsp;</span><span class="c0 c9">false</span><span class="c0 c6">;<br>00064 &nbsp; &nbsp; }<br>00066 &nbsp; &nbsp; // UseCodeAlign - Return true if a .align directive should use<br>00067 &nbsp; &nbsp; // "optimized nops" to fill instead of 0s.<br>00068 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0 c6">&nbsp;</span><span class="c0 c8">bool</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#aacaa78dc863f78f04e6b0e27c250ed51">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#aacaa78dc863f78f04e6b0e27c250ed51">UseCodeAlign</a></span><span class="c0 c6">() </span><span class="c0 c9">const</span><span class="c0 c6">&nbsp;= 0;<br>00070 &nbsp; &nbsp;/// isVirtualSection - Check whether this section is "virtual", that is<br>00071 &nbsp; &nbsp;/// has no actual object file contents.<br>00072 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0 c6">&nbsp;</span><span class="c0 c8">bool</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a76d0508a2c58ae3ae7eb98a42cd1dafe">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSection.html#a76d0508a2c58ae3ae7eb98a42cd1dafe">isVirtualSection</a></span><span class="c0 c6">() </span><span class="c0 c9">const</span><span class="c0 c6">&nbsp;= 0;<br>00073 &nbsp; };</span></p><p class="c15"><span class="c2"></span></p><p class="c15"><span class="c2"></span></p><p class="c20"><span class="c19">Part 7.4.6 &nbsp;MCInst</span></p><h3 class="c45 c20"><a name="h.5d7pyc6qfoom"></a><span class="c37 c43 c11"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id35">The </a></span><span class="c30 c24"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id35">MCInst</a></span><span class="c37 c43 c11"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id35">&nbsp;class</a></span></h3><p class="c17"><span class="c2">“</span><span class="c2">The </span><span class="c10 c5">MCInst</span><span class="c2">&nbsp;class is a target-independent representation of an instruction. It is a simple class (much more so than </span><span class="c2 c29"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#machineinstr">MachineInstr</a></span><span class="c2">) that holds a target-specific opcode and a vector of MCOperands. MCOperand, in turn, is a simple discriminated union of three cases: 1) a simple immediate, 2) a target register ID, 3) a symbolic expression (e.g. “</span><span class="c10 c5">Lfoo-Lbar+42</span><span class="c2">”) as an MCExpr. &nbsp;MCInst is the common currency used to represent machine instructions at the MC layer. It is the type used by the instruction encoder, the instruction printer, and the type generated by the assembly parser and disassembler.” &nbsp;Let’s make the above explanation concrete by putting the entire interface of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a551134f1de2b105f0e45275923836c4e">MCOperand</a></span><span class="c0">&nbsp;and </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a951ce94f3058e2ad49b0c44b06173e30">MCInst</a></span><span class="c2">&nbsp;class here:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">00033</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">MCOperand</a></span><span class="c0">&nbsp;{<br>00034 &nbsp; </span><span class="c0 c9">enum</span><span class="c0">&nbsp;MachineOperandType {<br>00035 &nbsp; &nbsp; kInvalid, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">///&lt; Uninitialized.</span><span class="c0"><br>00036 &nbsp; &nbsp;kRegister, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">///&lt; Register operand.</span><span class="c0"><br>00037 &nbsp; &nbsp;kImmediate, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">///&lt; Immediate operand.</span><span class="c0"><br>00038 &nbsp; &nbsp;kFPImmediate, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">///&lt; Floating-point immediate operand.</span><span class="c0"><br>00039 &nbsp; &nbsp;kExpr, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">///&lt; Relocatable immediate operand.</span><span class="c0"><br>00040 &nbsp; &nbsp;kInst &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">///&lt; Sub-instruction operand.</span><span class="c0"><br>00041 &nbsp;};<br>00042 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;Kind;<br>00044 &nbsp; </span><span class="c0 c9">union </span><span class="c0">{<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0ee4675bf8e3e87c72fce7ec7fffea71">00045</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0ee4675bf8e3e87c72fce7ec7fffea71">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0ee4675bf8e3e87c72fce7ec7fffea71">RegVal</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a771496d346971c2ae42a0888b5f4687a">00046</a></span><span class="c0">&nbsp; &nbsp; &nbsp;int64_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a771496d346971c2ae42a0888b5f4687a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a771496d346971c2ae42a0888b5f4687a">ImmVal</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a20bd4f0d805176d18280ad5c0d7e6a8b">00047</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">double</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a20bd4f0d805176d18280ad5c0d7e6a8b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a20bd4f0d805176d18280ad5c0d7e6a8b">FPImmVal</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a1241c8b110212d79b8301f8580eee577">00048</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a1241c8b110212d79b8301f8580eee577">ExprVal</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#aea85c675290f12f5925d216382330a08">00049</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">MCInst</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#aea85c675290f12f5925d216382330a08">InstVal</a></span><span class="c0">; };<br>00051 </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0b6ea0db17fe174a404bb0d51808b766">00053</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0b6ea0db17fe174a404bb0d51808b766">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0b6ea0db17fe174a404bb0d51808b766">MCOperand</a></span><span class="c0">() : Kind(kInvalid),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a20bd4f0d805176d18280ad5c0d7e6a8b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a20bd4f0d805176d18280ad5c0d7e6a8b">FPImmVal</a></span><span class="c0">(0.0) {}<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a68efc4591cd83fc430cd5c16cebf0f93">00055</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a68efc4591cd83fc430cd5c16cebf0f93">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a68efc4591cd83fc430cd5c16cebf0f93">isValid</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;Kind != kInvalid; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a8951582e9d598a757b9e07e3e178c578">00056</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a8951582e9d598a757b9e07e3e178c578">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a8951582e9d598a757b9e07e3e178c578">isReg</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;Kind == kRegister; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a55eeb71ac0e60e12cb37f99e984bda81">00057</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a55eeb71ac0e60e12cb37f99e984bda81">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a55eeb71ac0e60e12cb37f99e984bda81">isImm</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;Kind == kImmediate; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0cba9b45dc5fa9fdc1e1f9f990cae927">00058</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0cba9b45dc5fa9fdc1e1f9f990cae927">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0cba9b45dc5fa9fdc1e1f9f990cae927">isFPImm</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;Kind == kFPImmediate; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#aae789dd5c5d7cd72d506a2ee66a7053f">00059</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#aae789dd5c5d7cd72d506a2ee66a7053f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#aae789dd5c5d7cd72d506a2ee66a7053f">isExpr</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;Kind == kExpr; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#ab22d1b166b6fd6f1a96c72a7d827f268">00060</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#ab22d1b166b6fd6f1a96c72a7d827f268">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#ab22d1b166b6fd6f1a96c72a7d827f268">isInst</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;Kind == kInst; }<br>00062 </span><span class="c0 c6">&nbsp;/// getReg - Returns the register number.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a291c2118315720369e2c74913435c835">00063</a></span><span class="c0">&nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a291c2118315720369e2c74913435c835">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a291c2118315720369e2c74913435c835">getReg</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00064 &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a8951582e9d598a757b9e07e3e178c578">isReg</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"This is not a register operand!"</span><span class="c0">);<br>00065 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0ee4675bf8e3e87c72fce7ec7fffea71">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0ee4675bf8e3e87c72fce7ec7fffea71">RegVal</a></span><span class="c0">; }<br>00068 </span><span class="c0 c6">&nbsp;/// setReg - Set the register number.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a3a0d732f4a1e62f2438c35ee445370f1">00069</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a3a0d732f4a1e62f2438c35ee445370f1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a3a0d732f4a1e62f2438c35ee445370f1">setReg</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">) {<br>00070 &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a8951582e9d598a757b9e07e3e178c578">isReg</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"This is not a register operand!"</span><span class="c0">);<br>00071 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0ee4675bf8e3e87c72fce7ec7fffea71">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0ee4675bf8e3e87c72fce7ec7fffea71">RegVal</a></span><span class="c0">&nbsp;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a650484333896fc7e8485cfa30f6d7ad5">00074</a></span><span class="c0">&nbsp; &nbsp;int64_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a650484333896fc7e8485cfa30f6d7ad5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a650484333896fc7e8485cfa30f6d7ad5">getImm</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00075 &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a55eeb71ac0e60e12cb37f99e984bda81">isImm</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"This is not an immediate"</span><span class="c0">);<br>00076 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a771496d346971c2ae42a0888b5f4687a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a771496d346971c2ae42a0888b5f4687a">ImmVal</a></span><span class="c0">; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a170578b62596712cf242f97ea687074b">00078</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a170578b62596712cf242f97ea687074b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a170578b62596712cf242f97ea687074b">setImm</a></span><span class="c0">(int64_t Val) {<br>00079 &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a55eeb71ac0e60e12cb37f99e984bda81">isImm</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"This is not an immediate"</span><span class="c0">);<br>00080 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a771496d346971c2ae42a0888b5f4687a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a771496d346971c2ae42a0888b5f4687a">ImmVal</a></span><span class="c0">&nbsp;= Val; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a22b9c8fad13bc346dac5318b9a0ca7b3">00083</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">double</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a22b9c8fad13bc346dac5318b9a0ca7b3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a22b9c8fad13bc346dac5318b9a0ca7b3">getFPImm</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00084 &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0cba9b45dc5fa9fdc1e1f9f990cae927">isFPImm</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"This is not an FP immediate"</span><span class="c0">);<br>00085 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a20bd4f0d805176d18280ad5c0d7e6a8b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a20bd4f0d805176d18280ad5c0d7e6a8b">FPImmVal</a></span><span class="c0">; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#ad2d4c49aa4736d6e9e2fb01a0e1f7e36">00088</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#ad2d4c49aa4736d6e9e2fb01a0e1f7e36">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#ad2d4c49aa4736d6e9e2fb01a0e1f7e36">setFPImm</a></span><span class="c0">(</span><span class="c0 c8">double</span><span class="c0">&nbsp;Val) {<br>00089 &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0cba9b45dc5fa9fdc1e1f9f990cae927">isFPImm</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"This is not an FP immediate"</span><span class="c0">);<br>00090 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a20bd4f0d805176d18280ad5c0d7e6a8b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a20bd4f0d805176d18280ad5c0d7e6a8b">FPImmVal</a></span><span class="c0">&nbsp;= Val; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a89ba9ada9753995d37920bd8a8c02662">00093</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a89ba9ada9753995d37920bd8a8c02662">getExpr</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00094 &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#aae789dd5c5d7cd72d506a2ee66a7053f">isExpr</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"This is not an expression"</span><span class="c0">);<br>00095 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a1241c8b110212d79b8301f8580eee577">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a1241c8b110212d79b8301f8580eee577">ExprVal</a></span><span class="c0">; </span><span class="c0">}<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a3ccd17887a2527a0f1c05fe59d454d54">00097</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a3ccd17887a2527a0f1c05fe59d454d54">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a3ccd17887a2527a0f1c05fe59d454d54">setExpr</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*Val) {<br>00098 &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#aae789dd5c5d7cd72d506a2ee66a7053f">isExpr</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"This is not an expression"</span><span class="c0">);<br>00099 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a1241c8b110212d79b8301f8580eee577">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a1241c8b110212d79b8301f8580eee577">ExprVal</a></span><span class="c0">&nbsp;= Val; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a6c2dee0e3c4f9eccb0c47f8635ec27e6">00102</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">MCInst</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a6c2dee0e3c4f9eccb0c47f8635ec27e6">getInst</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00103 &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#ab22d1b166b6fd6f1a96c72a7d827f268">isInst</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"This is not a sub-instruction"</span><span class="c0">);<br>00104 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#aea85c675290f12f5925d216382330a08">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#aea85c675290f12f5925d216382330a08">InstVal</a></span><span class="c0">; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a8343a62f53002655ce38b4c65a9aace9">00106</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a8343a62f53002655ce38b4c65a9aace9">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a8343a62f53002655ce38b4c65a9aace9">setInst</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">MCInst</a></span><span class="c0">&nbsp;*Val) {<br>00107 &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#ab22d1b166b6fd6f1a96c72a7d827f268">isInst</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"This is not a sub-instruction"</span><span class="c0">);<br>00108 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#aea85c675290f12f5925d216382330a08">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#aea85c675290f12f5925d216382330a08">InstVal</a></span><span class="c0">&nbsp;= Val; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a53a76cafb36975cd8069ffa73beb86aa">00111</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">static</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">MCOperand</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a53a76cafb36975cd8069ffa73beb86aa">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a53a76cafb36975cd8069ffa73beb86aa">CreateReg</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">) {<br>00112 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">MCOperand</a></span><span class="c0">&nbsp;Op;<br>00113 &nbsp; &nbsp; Op.Kind = kRegister;<br>00114 &nbsp; &nbsp; Op.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0ee4675bf8e3e87c72fce7ec7fffea71">RegVal</a></span><span class="c0">&nbsp;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">;<br>00115 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;Op; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#ad26f3c85c2f3b28caa4e9a7522e0d7bd">00117</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">static</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">MCOperand</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#ad26f3c85c2f3b28caa4e9a7522e0d7bd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#ad26f3c85c2f3b28caa4e9a7522e0d7bd">CreateImm</a></span><span class="c0">(int64_t Val) {<br>00118 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">MCOperand</a></span><span class="c0">&nbsp;Op;<br>00119 &nbsp; &nbsp; Op.Kind = kImmediate;<br>00120 &nbsp; &nbsp; Op.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a771496d346971c2ae42a0888b5f4687a">ImmVal</a></span><span class="c0">&nbsp;= Val;<br>00121 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;Op; &nbsp;}<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a091ac2d9ee74235e6d8904ce35e377ad">00123</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">static</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">MCOperand</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a091ac2d9ee74235e6d8904ce35e377ad">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a091ac2d9ee74235e6d8904ce35e377ad">CreateFPImm</a></span><span class="c0">(</span><span class="c0 c8">double</span><span class="c0">&nbsp;Val) {<br>00124 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">MCOperand</a></span><span class="c0">&nbsp;Op;<br>00125 &nbsp; &nbsp; Op.Kind = kFPImmediate;<br>00126 &nbsp; &nbsp; Op.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a20bd4f0d805176d18280ad5c0d7e6a8b">FPImmVal</a></span><span class="c0">&nbsp;= Val;<br>00127 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;Op; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0060e2c8ddfdd637aa85d0eee85902ae">00129</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">static</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">MCOperand</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0060e2c8ddfdd637aa85d0eee85902ae">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a0060e2c8ddfdd637aa85d0eee85902ae">CreateExpr</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*Val) {<br>00130 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">MCOperand</a></span><span class="c0">&nbsp;Op;<br>00131 &nbsp; &nbsp; Op.Kind = kExpr;<br>00132 &nbsp; &nbsp; Op.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a1241c8b110212d79b8301f8580eee577">ExprVal</a></span><span class="c0">&nbsp;= Val;<br>00133 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;Op; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#af1627db1c6cfbf20fd92a7ddab25fd6b">00135</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">static</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">MCOperand</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#af1627db1c6cfbf20fd92a7ddab25fd6b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#af1627db1c6cfbf20fd92a7ddab25fd6b">CreateInst</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">MCInst</a></span><span class="c0">&nbsp;*Val) {<br>00136 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">MCOperand</a></span><span class="c0">&nbsp;Op;<br>00137 &nbsp; &nbsp; Op.Kind = kInst;<br>00138 &nbsp; &nbsp; Op.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#aea85c675290f12f5925d216382330a08">InstVal</a></span><span class="c0">&nbsp;= Val;<br>00139 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;Op; }<br>00142 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#ad81002466c77b41cddfaa2ab00d229bd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#ad81002466c77b41cddfaa2ab00d229bd">print</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">raw_ostream</a></span><span class="c0">&nbsp;&amp;OS, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">MCAsmInfo</a></span><span class="c0">&nbsp;*MAI) </span><span class="c0 c9">const</span><span class="c0">;<br>00143 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a551134f1de2b105f0e45275923836c4e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html#a551134f1de2b105f0e45275923836c4e">dump</a></span><span class="c0">() </span><span class="c0 c9">const</span><span class="c0">; &nbsp;};<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1isPodLike_3_01MCOperand_01_4.html#aaa67e6ccf974f60a0151a50f97d5c325">00146</a></span><span class="c0">&nbsp;</span><span class="c0 c9">template</span><span class="c0">&nbsp;&lt;&gt; </span><span class="c0 c9">struct</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1isPodLike.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1isPodLike.html">isPodLike</a></span><span class="c0">&lt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">MCOperand</a></span><span class="c0">&gt; { </span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1isPodLike.html#aef4d687556798052814d9445985904da">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1isPodLike.html#aef4d687556798052814d9445985904da">value</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">true</span><span class="c0">; };<br>00148 </span><span class="c0 c6">/// MCInst - Instances of this class represent a single low-level machine</span><span class="c0"><br>00149 </span><span class="c0 c6">/// instruction.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">00150</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html">MCInst</a></span><span class="c0">&nbsp;{<br>00151 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opcode;<br>00152 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">SMLoc</a></span><span class="c0">&nbsp;Loc;<br>00153 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;MCOperand, 8&gt;</a></span><span class="c0">&nbsp;Operands;<br>00154 </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a62625ee2fd89ae0761ae6d9233a16f26">00155</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a62625ee2fd89ae0761ae6d9233a16f26">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a62625ee2fd89ae0761ae6d9233a16f26">MCInst</a></span><span class="c0">() : Opcode(0) {}<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#ae844d6ff99f067e6672e004ed7613c24">00157</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#ae844d6ff99f067e6672e004ed7613c24">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#ae844d6ff99f067e6672e004ed7613c24">setOpcode</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Op) { Opcode = Op; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a22542ca9978e4b90401edee109c4f263">00158</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a22542ca9978e4b90401edee109c4f263">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a22542ca9978e4b90401edee109c4f263">getOpcode</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;Opcode; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a580e2a6e8a248c5a4a814c03186e9241">00160</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a580e2a6e8a248c5a4a814c03186e9241">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a580e2a6e8a248c5a4a814c03186e9241">setLoc</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">SMLoc</a></span><span class="c0">&nbsp;loc) { Loc = loc; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a243a93fa0bb10eb7f78ffd0ed325cd1c">00161</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">SMLoc</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a243a93fa0bb10eb7f78ffd0ed325cd1c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a243a93fa0bb10eb7f78ffd0ed325cd1c">getLoc</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;Loc; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a82523248f1c8145141a026cf3e57cf48">00163</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">MCOperand</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a82523248f1c8145141a026cf3e57cf48">getOperand</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;Operands[i]; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a12714cb83f2ecc77e52e242be5f796b7">00164</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">MCOperand</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a12714cb83f2ecc77e52e242be5f796b7">getOperand</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i) { </span><span class="c0 c7">return</span><span class="c0">&nbsp;Operands[i]; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#aa168c83cd321703fa7d10e739d48a0df">00165</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#aa168c83cd321703fa7d10e739d48a0df">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#aa168c83cd321703fa7d10e739d48a0df">getNumOperands</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;Operands.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a></span><span class="c0">(); }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#af5530910b07aa0c82adbc555dfc04fce">00167</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#af5530910b07aa0c82adbc555dfc04fce">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#af5530910b07aa0c82adbc555dfc04fce">addOperand</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">MCOperand</a></span><span class="c0">&nbsp;&amp;Op) {<br>00168 &nbsp; &nbsp; Operands.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a></span><span class="c0">(Op); }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#aecd4e9369c30b88c8e528489f69e0c8e">00171</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#aecd4e9369c30b88c8e528489f69e0c8e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#aecd4e9369c30b88c8e528489f69e0c8e">clear</a></span><span class="c0">() { Operands.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a></span><span class="c0">(); }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a1b99020d61c345019d1999ce55407c44">00172</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">size_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a1b99020d61c345019d1999ce55407c44">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a1b99020d61c345019d1999ce55407c44">size</a></span><span class="c0">() { </span><span class="c0 c7">return</span><span class="c0">&nbsp;Operands.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a></span><span class="c0">(); }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a98d3b8c50782d26a06243ff0b5ccd2dc">00174</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;MCOperand, 8&gt;::iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a98d3b8c50782d26a06243ff0b5ccd2dc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a98d3b8c50782d26a06243ff0b5ccd2dc">iterator</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#ad7df02a018c3a01d74738d5ba3a09e93">00175</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a98d3b8c50782d26a06243ff0b5ccd2dc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a98d3b8c50782d26a06243ff0b5ccd2dc">iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#ad7df02a018c3a01d74738d5ba3a09e93">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#ad7df02a018c3a01d74738d5ba3a09e93">begin</a></span><span class="c0">() { </span><span class="c0 c7">return</span><span class="c0">&nbsp;Operands.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a></span><span class="c0">(); }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#ad815f3f5c7e6106ca7ba4926d143c2cf">00176</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a98d3b8c50782d26a06243ff0b5ccd2dc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a98d3b8c50782d26a06243ff0b5ccd2dc">iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#ad815f3f5c7e6106ca7ba4926d143c2cf">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#ad815f3f5c7e6106ca7ba4926d143c2cf">end</a></span><span class="c0">() &nbsp; { </span><span class="c0 c7">return</span><span class="c0">&nbsp;Operands.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a></span><span class="c0">(); &nbsp; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a780fe7b1259c076cd5abef9ce9dda01d">00177</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a98d3b8c50782d26a06243ff0b5ccd2dc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a98d3b8c50782d26a06243ff0b5ccd2dc">iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a780fe7b1259c076cd5abef9ce9dda01d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a780fe7b1259c076cd5abef9ce9dda01d">insert</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a98d3b8c50782d26a06243ff0b5ccd2dc">iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCOperand.html">MCOperand</a></span><span class="c0">&nbsp;&amp;Op) {<br>00178 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;Operands.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorImpl.html#af622128e353515efebccad40eae495cb">insert</a></span><span class="c0">(I, Op); }<br>00181 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a951ce94f3058e2ad49b0c44b06173e30">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a951ce94f3058e2ad49b0c44b06173e30">print</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">raw_ostream</a></span><span class="c0">&nbsp;&amp;OS, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">MCAsmInfo</a></span><span class="c0">&nbsp;*MAI) </span><span class="c0 c9">const</span><span class="c0">;<br>00182 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a510e0bd66d590c8dd5a9699e743e59ad">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a510e0bd66d590c8dd5a9699e743e59ad">dump</a></span><span class="c0">() </span><span class="c0 c9">const</span><span class="c0">;<br>00184 </span><span class="c0 c6">&nbsp;/// \brief Dump the MCInst as prettily as possible using the additional MC</span><span class="c0"><br>00185 </span><span class="c0 c6">&nbsp;/// structures, if given. Operators are separated by the \p Separator</span><span class="c0">&nbsp;</span><span class="c0 c6">string.</span><span class="c0"><br>00187 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a786c0de4267c822c701718d17fa10e0b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInst.html#a786c0de4267c822c701718d17fa10e0b">dump_pretty</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1raw__ostream.html">raw_ostream</a></span><span class="c0">&nbsp;&amp;OS, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">MCAsmInfo</a></span><span class="c0">&nbsp;*MAI = 0,<br>00188 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstPrinter.html">MCInstPrinter</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/AliasSetTracker_8cpp.html#a2018816b3a05f95da1c51e72c2c50d6f">Printer</a></span><span class="c0">&nbsp;= 0,<br>00189 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;Separator = </span><span class="c0 c14">" "</span><span class="c0">) </span><span class="c0 c9">const</span><span class="c0">;};</span></p><p class="c15"><span class="c2"></span></p><p class="c20"><span class="c2">The implementation file for this class just defines the dump() and print() methods in the interface. </span></p><p class="c15"><span class="c2"></span></p><p class="c20"><span class="c19">Part 7.4.7 &nbsp;MCAsmParser</span></p><p class="c15"><span class="c2"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html">MCAsmParser</a></span><span class="c11 c16">&nbsp;</span><span class="c2">class provides a g</span><span class="c2">eneric assembler parser interface, for use by target specific assembly parsers:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html">00046</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html">MCAsmParser</a></span><span class="c0">&nbsp;{<br>00047 </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a23268f4d9cd254d2bf3ccf619862f1eb">00048</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8c.html#a6156fe0b594c9754f386f6c6a30c8165">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8c.html#a6156fe0b594c9754f386f6c6a30c8165">bool</a></span><span class="c0">&nbsp;(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a23268f4d9cd254d2bf3ccf619862f1eb">DirectiveHandler</a></span><span class="c0">)(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParserExtension.html">MCAsmParserExtension</a></span><span class="c0">*,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">SMLoc</a></span><span class="c0">);<br>00050 </span><span class="c0 c9">private</span><span class="c0">:<br>00051 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#af7b89d03df4325baa998c69d6ae8c95a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#af7b89d03df4325baa998c69d6ae8c95a">MCAsmParser</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html">MCAsmParser</a></span><span class="c0">&nbsp;&amp;)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">LLVM_DELETED_FUNCTION</a></span><span class="c0">;<br>00052 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;operator=(const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html">MCAsmParser</a></span><span class="c0">&nbsp;&amp;) LLVM_DELETED_FUNCTION;<br>00054 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCTargetAsmParser.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCTargetAsmParser.html">MCTargetAsmParser</a></span><span class="c0">&nbsp;*TargetParser;<br>00056 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;ShowParsedOperands : 1;<br>00058 protected: </span><span class="c0 c6">// Can only create subclasses.</span><span class="c0"><br>00059 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html">MCAsmParser</a></span><span class="c0">();<br>00061 public:<br>00062 &nbsp; virtual ~MCAsmParser();<br>00064 &nbsp; virtual </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#abc7ee1d14a9123c0397322a499503bb6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#abc7ee1d14a9123c0397322a499503bb6">AddDirectiveHandler</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParserExtension.html">MCAsmParserExtension</a></span><span class="c0">&nbsp;*Object,<br>00065 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;Directive,<br>00066 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a23268f4d9cd254d2bf3ccf619862f1eb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a23268f4d9cd254d2bf3ccf619862f1eb">DirectiveHandler</a></span><span class="c0">&nbsp;Handler) = 0;<br>00068 &nbsp; virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SourceMgr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SourceMgr.html">SourceMgr</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a5bad6b56ed7dfab74b6c5525cf888b96">getSourceManager</a></span><span class="c0">() = 0;<br>00070 &nbsp; virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLexer.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLexer.html">MCAsmLexer</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a8e483a4e6b575baab08f4abea12a0d52">getLexer</a></span><span class="c0">() = 0;<br>00072 &nbsp; virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">MCContext</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a62578eeb472bc0ff0f22bb437a22df6c">getContext</a></span><span class="c0">() = 0;<br>00074 </span><span class="c0 c6">&nbsp;/// getStreamer - Return the output streamer for the assembler.</span><span class="c0"><br>00075 &nbsp;virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#ad0d992cc82bcaea3f7056df286554818">getStreamer</a></span><span class="c0">() = 0;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a478d52720c29952c1eea78d1463dff6c">00077</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCTargetAsmParser.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCTargetAsmParser.html">MCTargetAsmParser</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a478d52720c29952c1eea78d1463dff6c">getTargetParser</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;*TargetParser; }<br>00078 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#af473082d59d84b25a63d18be49ecb271">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#af473082d59d84b25a63d18be49ecb271">setTargetParser</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCTargetAsmParser.html">MCTargetAsmParser</a></span><span class="c0">&nbsp;&amp;P);<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a97e3b31312d2e3411622872cb2ac6109">00080</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a97e3b31312d2e3411622872cb2ac6109">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a97e3b31312d2e3411622872cb2ac6109">getAssemblerDialect</a></span><span class="c0">() { </span><span class="c0 c7">return</span><span class="c0">&nbsp;0;}<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#af3cf81a517d41f1357dfbdaa6607940a">00081</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#af3cf81a517d41f1357dfbdaa6607940a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#af3cf81a517d41f1357dfbdaa6607940a">setAssemblerDialect</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i) { }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a502dbbe0f982e2bce7c455bf4855a75d">00083</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a502dbbe0f982e2bce7c455bf4855a75d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a502dbbe0f982e2bce7c455bf4855a75d">getShowParsedOperands</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;ShowParsedOperands; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#aa3cdd92e164e2004543e4a56811cbb2b">00084</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#aa3cdd92e164e2004543e4a56811cbb2b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#aa3cdd92e164e2004543e4a56811cbb2b">setShowParsedOperands</a></span><span class="c0">(</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) { ShowParsedOperands = Value; }<br>00086 </span><span class="c0 c6">&nbsp;/// Run - Run the parser on the input source buffer.</span><span class="c0"><br>00087 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#ab1b2fb0acb2550076d5dcab1039b2bb8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#ab1b2fb0acb2550076d5dcab1039b2bb8">Run</a></span><span class="c0">(</span><span class="c0 c8">bool</span><span class="c0">&nbsp;NoInitialTextSection, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;NoFinalize = </span><span class="c0 c9">false</span><span class="c0">) = 0;<br>00089 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a1b342fa339d4a6b0fedb287f7ab39e29">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a1b342fa339d4a6b0fedb287f7ab39e29">setParsingInlineAsm</a></span><span class="c0">(</span><span class="c0 c8">bool</span><span class="c0">&nbsp;V) = 0;<br>00090 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a963c5c244f15505b928ac61568ceff17">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a963c5c244f15505b928ac61568ceff17">isParsingInlineAsm</a></span><span class="c0">() = 0;<br>00092 </span><span class="c0 c6">&nbsp;/// ParseMSInlineAsm - Parse ms-style inline assembly.</span><span class="c0"><br>00093 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a96ae02688143be01f6c41df6675fdeec">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a96ae02688143be01f6c41df6675fdeec">ParseMSInlineAsm</a></span><span class="c0">(</span><span class="c0 c8">................</span></p><p class="c17"><span class="c0">…..............</span><span class="c0"><br>00105 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#aa95088b8b3135c76badcca1f8c9a1fe6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#aa95088b8b3135c76badcca1f8c9a1fe6">Warning</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">SMLoc</a></span><span class="c0">&nbsp;L, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Twine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Twine.html">Twine</a></span><span class="c0">&nbsp;&amp;Msg,<br>00106 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ArrayRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ArrayRef.html">ArrayRef&lt;SMRange&gt;</a></span><span class="c0">&nbsp;Ranges =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ArrayRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ArrayRef.html">ArrayRef&lt;SMRange&gt;</a></span><span class="c0">()) = 0;<br>00112 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a528e7c9fe7585ff93ac8169ab1ce234a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a528e7c9fe7585ff93ac8169ab1ce234a">Error</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">SMLoc</a></span><span class="c0">&nbsp;L, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Twine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Twine.html">Twine</a></span><span class="c0">&nbsp;&amp;Msg,<br>00113 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ArrayRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ArrayRef.html">ArrayRef&lt;SMRange&gt;</a></span><span class="c0">&nbsp;Ranges =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ArrayRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ArrayRef.html">ArrayRef&lt;SMRange&gt;</a></span><span class="c0">()) = 0;<br>00115 </span><span class="c0 c6">&nbsp;/// Lex - Get the next AsmToken in the stream</span><span class="c0"><br>00117 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmToken.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmToken.html">AsmToken</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#ad01a5cb7231de6415216a618090be57e">Lex</a></span><span class="c0">() = 0;<br>00119 </span><span class="c0 c6">&nbsp;/// getTok - Get the current AsmToken from the stream.</span><span class="c0"><br>00120 &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmToken.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmToken.html">AsmToken</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#ab4f86b5562ee4c8f6b1a8312e8d40a7e">getTok</a></span><span class="c0">();<br>00122 </span><span class="c0 c6">&nbsp;/// \brief Report an error at the current lexer location.</span><span class="c0"><br>00123 &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a40b993dda8bad61385a90110b82d233d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a40b993dda8bad61385a90110b82d233d">TokError</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Twine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Twine.html">Twine</a></span><span class="c0">&nbsp;&amp;Msg,<br>00124 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ArrayRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ArrayRef.html">ArrayRef&lt;SMRange&gt;</a></span><span class="c0">&nbsp;Ranges =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ArrayRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ArrayRef.html">ArrayRef&lt;SMRange&gt;</a></span><span class="c0">())</span><span class="c0">;</span><span class="c0"><br>00126 </span><span class="c0 c6">&nbsp;/// ParseIdentifier - Parse an identifier or string (as a quoted identifier)</span><span class="c0"><br>00127 </span><span class="c0 c6">&nbsp;/// and set \p Res to the identifier contents.</span><span class="c0"><br>00128 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a653b18a10fe439207b8a273920c72495">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a653b18a10fe439207b8a273920c72495">ParseIdentifier</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;&amp;Res) = 0;<br>00133 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#aaca9c028abba6614104628071f543d63">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#aaca9c028abba6614104628071f543d63">ParseStringToEndOfStatement</a></span><span class="c0">() = 0;<br>00137 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#aeec65965efe9017c6e41db63558bd718">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#aeec65965efe9017c6e41db63558bd718">EatToEndOfStatement</a></span><span class="c0">() = 0;<br>00144 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a156cb312d2a1da8b211c5ef94b86b2da">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a156cb312d2a1da8b211c5ef94b86b2da">ParseExpression</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*&amp;Res,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">SMLoc</a></span><span class="c0">&nbsp;&amp;EndLoc) = 0;<br>00145 &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a156cb312d2a1da8b211c5ef94b86b2da">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a156cb312d2a1da8b211c5ef94b86b2da">ParseExpression</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*&amp;Res);<br>00153 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a21b0e2b3a4a08cb4a96c22e66862b471">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a21b0e2b3a4a08cb4a96c22e66862b471">ParseParenExpression</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCExpr.html">MCExpr</a></span><span class="c0">&nbsp;*&amp;Res,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">SMLoc</a></span><span class="c0">&nbsp;&amp;EndLoc) = 0;<br>00161 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#aa97789ae3a8ea4de5485750c9b713bab">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#aa97789ae3a8ea4de5485750c9b713bab">ParseAbsoluteExpression</a></span><span class="c0">(int64_t &amp;Res) = 0;<br>00162 };</span></p><p class="c17 c35"><span class="c2"></span></p><p class="c17"><span class="c5 c11">Note </span><span class="c2">that </span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html">MCAsmParser</a></span><span class="c5 c11">&nbsp;has a </span><span class="c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCTargetAsmParser.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCTargetAsmParser.html">MCTargetAsmParser</a></span><span class="c0">&nbsp;*TargetParser </span><span class="c5 c11">member which can be set using the </span><span class="c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#af473082d59d84b25a63d18be49ecb271">setTargetParser</a></span><span class="c5 c11">() method:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#af473082d59d84b25a63d18be49ecb271">00026</a></span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#af473082d59d84b25a63d18be49ecb271">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#af473082d59d84b25a63d18be49ecb271">MCAsmParser::setTargetParser</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCTargetAsmParser.html">MCTargetAsmParser</a></span><span class="c0">&nbsp;&amp;P) {<br>00027 &nbsp; assert(!TargetParser &amp;&amp; </span><span class="c0 c14">"Target parser is already initialized!"</span><span class="c0">);<br>00028 &nbsp; TargetParser = &amp;P;<br>00029 &nbsp; TargetParser-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParserExtension.html#a77a335167c72ea8bc771501825f81696">Initialize</a></span><span class="c0">(*</span><span class="c0 c9">this</span><span class="c0">);<br>00030 }<br>00031 <br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#ab4f86b5562ee4c8f6b1a8312e8d40a7e">00032</a></span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmToken.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmToken.html">AsmToken</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#ab4f86b5562ee4c8f6b1a8312e8d40a7e">MCAsmParser::getTok</a></span><span class="c0">() {<br>00033 &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a8e483a4e6b575baab08f4abea12a0d52">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#a8e483a4e6b575baab08f4abea12a0d52">getLexer</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmLexer.html#a9a75f665f07348e11f39e757ff53bcfc">getTok</a></span><span class="c0">();<br>00034 }</span></p><p class="c17"><span class="c5 c11">The </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCTargetAsmParser.html">MCTargetAsmParser</a></span><span class="c5 c11">&nbsp;object member </span><span class="c0">TargetParser</span><span class="c5 c11">&nbsp;is very important since the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCTargetAsmParser.html">MCTargetAsmParser</a></span><span class="c5 c11">&nbsp;class is inherited by two target specific asm parsers, i.e., ARMAsmParser (defined in llvm-3.1.src\lib\Target\ARM\AsmParser\ARMAsmParser.cpp) and X86AsmParser. These two subclasses provide target specific asm parsing (e.g., register and instruction parsing, etc.) for ARM and X86 and can be use by </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#af473082d59d84b25a63d18be49ecb271">MCAsmParser</a></span><span class="c5 c11">&nbsp;and its subclass such as </span><span class="c5 c11 c31">AsmParser</span><span class="c5 c11">. &nbsp;</span><span class="c5 c11 c31">AsmParser </span><span class="c2">is</span><span class="c2">&nbsp;more complicated and defines a much more detailed asm file parsing interface, yet it is still target-independent. Since it is a </span><span class="c5 c11">subclass of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html">MCAsmParser</a></span><span class="c2">&nbsp;class, it can leverage the target specific parsing methods from </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCTargetAsmParser.html">MCTargetAsmParser</a></span><span class="c5 c11">&nbsp;and its sub-classes (i.e.,ARMAsmParser and X86AsmParser)</span><span class="c2">&nbsp;to handle target-dependent register operand parsing, instruction parsing, etc. A code snippet from the definition of the </span><span class="c5 c11 c31">AsmParser</span><span class="c5 c11">&nbsp;class (line 1405 and 3099 use target specific parser)</span><span class="c2">:</span></p><p class="c17"><span class="c0">00118 </span><span class="c0 c9">class </span><span class="c0">AsmParser : </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html">MCAsmParser</a></span><span class="c0">&nbsp;{<br>00119 &nbsp; </span><span class="c0 c9">friend</span><span class="c0">&nbsp;</span><span class="c0 c9">class </span><span class="c0">GenericAsmParser;<br>00120 <br>00121 &nbsp; AsmParser(</span><span class="c0 c9">const</span><span class="c0">&nbsp;AsmParser &amp;)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">LLVM_DELETED_FUNCTION</a></span><span class="c0">;<br>00122 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;operator=(const AsmParser &amp;) LLVM_DELETED_FUNCTION;<br>00123 private:<br>00124 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmLexer.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmLexer.html">AsmLexer</a></span><span class="c0">&nbsp;Lexer;<br>00125 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCContext.html">MCContext</a></span><span class="c0">&nbsp;&amp;Ctx;<br>00126 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCStreamer.html">MCStreamer</a></span><span class="c0">&nbsp;&amp;Out;<br>00127 &nbsp; const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmInfo.html">MCAsmInfo</a></span><span class="c0">&nbsp;&amp;MAI;<br>00128 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SourceMgr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SourceMgr.html">SourceMgr</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a5f3f23062c5d5636bee27c54f4a407f0">SrcMgr</a></span><span class="c0">;<br>00129 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SourceMgr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SourceMgr.html">SourceMgr</a></span><span class="c0">::DiagHandlerTy SavedDiagHandler;<br>00130 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;*SavedDiagContext;<br>00131 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParserExtension.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParserExtension.html">MCAsmParserExtension</a></span><span class="c0">&nbsp;*GenericParser;<br>00132 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParserExtension.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParserExtension.html">MCAsmParserExtension</a></span><span class="c0">&nbsp;*PlatformParser;</span></p><p class="c17"><span class="c0">….............................</span></p><p class="c17"><span class="c0">00585 </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmToken.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmToken.html">AsmToken</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCAsmParser.html#ad01a5cb7231de6415216a618090be57e">AsmParser::Lex</a></span><span class="c0">() {<br>00586 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmToken.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmToken.html">AsmToken</a></span><span class="c0">&nbsp;*tok = &amp;Lexer.Lex();<br>00587 <br>00588 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(tok-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmToken.html#a46268a0a398b3f3a89c7e3ab0dd641f9">is</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a7aeb5b2275fc35a5237b14f4967e3d8f">AsmToken::Eof</a></span><span class="c0">)) {<br>00589 &nbsp; &nbsp; </span><span class="c0 c6">// If this is the end of an included file, pop the parent file off the</span><span class="c0"><br>00590 &nbsp; &nbsp; </span><span class="c0 c6">// include stack.</span><span class="c0"><br>00591 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">SMLoc</a></span><span class="c0">&nbsp;ParentIncludeLoc =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a5f3f23062c5d5636bee27c54f4a407f0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a5f3f23062c5d5636bee27c54f4a407f0">SrcMgr</a></span><span class="c0">.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SourceMgr.html#a9808c13b6da1ee5a7ca7304a9b5e6b93">getParentIncludeLoc</a></span><span class="c0">(CurBuffer);<br>00592 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(ParentIncludeLoc !=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">SMLoc</a></span><span class="c0">()) {<br>00593 &nbsp; &nbsp; &nbsp; JumpToLoc(ParentIncludeLoc);<br>00594 &nbsp; &nbsp; &nbsp; tok = &amp;Lexer.Lex();<br>00595 &nbsp; &nbsp; }<br>00596 &nbsp; }<br>00597 <br>00598 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(tok-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmToken.html#a46268a0a398b3f3a89c7e3ab0dd641f9">is</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605">AsmToken::Error</a></span><span class="c0">))<br>00599 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605">Error</a></span><span class="c0">(Lexer.getErrLoc(), Lexer.getErr());<br>00600 <br>00601 &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;*tok;<br>00602 }</span></p><p class="c17"><span class="c2">….......................</span></p><p class="c17"><span class="c0">01113 </span><span class="c0 c8">bool</span><span class="c0">&nbsp;AsmParser::ParseStatement(ParseStatementInfo &amp;Info) {<br>01114 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(Lexer.is(AsmToken::EndOfStatement)) {<br>01115 &nbsp; &nbsp; Out.AddBlankLine();<br>01116 &nbsp; &nbsp; Lex();<br>01117 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>01118 &nbsp; }</span></p><p class="c17"><span class="c0">01121 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmToken.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmToken.html">AsmToken</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a></span><span class="c0">&nbsp;= getTok();<br>01122 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">SMLoc</a></span><span class="c0">&nbsp;IDLoc = ID.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmToken.html#add7f9405ba7ad0891528a4cf5f47f45e">getLoc</a></span><span class="c0">();<br>01123 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html">StringRef</a></span><span class="c0">&nbsp;IDVal;</span></p><p class="c17"><span class="c2">…........................</span></p><p class="c17"><span class="c0">01355 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(IDVal == </span><span class="c0 c14">".weak_def_can_be_hidden"</span><span class="c0">)<br>01356 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;ParseDirectiveSymbolAttribute(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af74c787f7a33e251485729416d260243a0506d51c6914f1b55fec60c97d4d8cc9">MCSA_WeakDefAutoPrivate</a></span><span class="c0">);<br>01357 <br>01358 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(IDVal == </span><span class="c0 c14">".comm"</span><span class="c0">&nbsp;|| IDVal == </span><span class="c0 c14">".common"</span><span class="c0">)<br>01359 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;ParseDirectiveComm(</span><span class="c0 c6">/*IsLocal=*/</span><span class="c0 c9">false</span><span class="c0">);<br>01360 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(IDVal == </span><span class="c0 c14">".lcomm"</span><span class="c0">)<br>01361 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;ParseDirectiveComm(</span><span class="c0 c6">/*IsLocal=*/</span><span class="c0 c9">true</span><span class="c0">);<br>01362 <br>01363 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(IDVal == </span><span class="c0 c14">".abort"</span><span class="c0">)<br>01364 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;ParseDirectiveAbort();<br>01365 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(IDVal == </span><span class="c0 c14">".include"</span><span class="c0">)<br>01366 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c61 c5 c11">ParseDirectiveInclude</span><span class="c0">();<br>01367 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(IDVal == </span><span class="c0 c14">".incbin"</span><span class="c0">)<br>01368 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;ParseDirectiveIncbin();</span></p><p class="c17"><span class="c2">…..............................</span></p><p class="c17"><span class="c2">…..............................</span></p><p class="c17"><span class="c0">01404 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ParseInstructionInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ParseInstructionInfo.html">ParseInstructionInfo</a></span><span class="c0">&nbsp;IInfo(Info.AsmRewrites);<br>01405 &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;HadError = getTargetParser().ParseInstruction(IInfo, OpcodeStr.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallString.html#a9926a62dd0ca26ed856052335091a54d">str</a></span><span class="c0">(),<br>01406 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;IDLoc,Info.ParsedOperands);</span></p><p class="c17"><span class="c2">…................................</span></p><p class="c17"><span class="c2">}</span></p><p class="c17"><span class="c2">…......................................</span></p><p class="c17"><span class="c0">02628 </span><span class="c0 c8">bool</span><span class="c0">&nbsp;AsmParser::</span><span class="c5 c11 c61">ParseDirectiveInclude</span><span class="c0">() {<br>02629 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(getLexer().isNot(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a394bf05139245f8e3ee22865dc9c1caf">AsmToken::String</a></span><span class="c0">))<br>02630 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;TokError(</span><span class="c0 c14">"expected string in '.include' directive"</span><span class="c0">);<br>02631 <br>02632 &nbsp; std::string Filename = getTok().getString();<br>02633 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">SMLoc</a></span><span class="c0">&nbsp;IncludeLoc = getLexer().getLoc();<br>02634 &nbsp; Lex();<br>02635 <br>02636 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(getLexer().isNot(AsmToken::EndOfStatement))<br>02637 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;TokError(</span><span class="c0 c14">"unexpected token in '.include' directive"</span><span class="c0">);<br>02638 <br>02639 &nbsp; </span><span class="c0 c6">// Strip the quotes.</span><span class="c0"><br>02640 &nbsp; Filename = Filename.substr(1, Filename.size()-2);<br>02641 <br>02642 &nbsp; </span><span class="c0 c6">// Attempt to switch the lexer to the included file before consuming the end</span><span class="c0"><br>02643 &nbsp; </span><span class="c0 c6">// of statement to avoid losing it when we switch.</span><span class="c0"><br>02644 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(EnterIncludeFile(Filename)) {<br>02645 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605">Error</a></span><span class="c0">(IncludeLoc, </span><span class="c0 c14">"Could not find include file '"</span><span class="c0">&nbsp;+ Filename + </span><span class="c0 c14">"'"</span><span class="c0">);<br>02646 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>02647 &nbsp; }<br>02648 <br>02649 &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>02650 }</span></p><p class="c17"><span class="c2">…............</span></p><p class="c17"><span class="c0">03094 </span><span class="c0 c8">bool</span><span class="c0">&nbsp;GenericAsmParser::ParseRegisterOrRegisterNumber(int64_t &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Mem2Reg_8cpp.html#a6fde3eb6ca09ddf2fd76432176d817bb">Register</a></span><span class="c0">,<br>03095 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SMLoc.html">SMLoc</a></span><span class="c0">&nbsp;DirectiveLoc) {<br>03096 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;RegNo;<br>03097 <br>03098 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(getLexer().isNot(AsmToken::Integer)) {<br>03099 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(getParser().getTargetParser().ParseRegister(RegNo, DirectiveLoc,<br>03100 &nbsp; &nbsp; &nbsp; DirectiveLoc))<br>03101 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>03102 &nbsp; &nbsp; Register = getContext().getRegisterInfo().getDwarfRegNum(RegNo, </span><span class="c0 c9">true</span><span class="c0">);<br>03103 &nbsp; } </span><span class="c0 c7">else</span><span class="c0"><br>03104 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;getParser().ParseAbsoluteExpression(Register);<br>03105 <br>03106 &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>03107 }</span></p><p class="c17 c35"><span class="c2"></span></p><p class="c17"><span class="c2">At a high-level, </span><span class="c0">AsmParser</span><span class="c2">&nbsp;has a </span><span class="c0">Lex() </span><span class="c2">function that invokes its </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AsmLexer.html">AsmLexer</a></span><span class="c0">&nbsp;</span><span class="c2">Lexer member to perform the lexing. Based on the lexed token </span><span class="c0">AsmParser</span><span class="c2">&nbsp;parses different components of the asm input by invoking various parsing methods. When necessary, call the target specific parsing methods through </span><span class="c0">getTargetParser().</span></p><h1 class="c20"><a name="h.yinxz52v5y7a"></a><span class="c24">P</span><span class="c24">art 7.4.8 &nbsp;Implementing An LLVM Integrated Assembler</span></h1><p class="c20"><span>To put things together, please refer to this simple application notes for implementing an LLVM assembler.</span></p><p class="c20"><span class="c37"><a class="c1" href="http://www.embecosm.com/appnotes/ean10/ean10-howto-llvmas-1.0.html">http://www.embecosm.com/appnotes/ean10/ean10-howto-llvmas-1.0.html</a></span></p><p class="c15"><span></span></p><p class="c20"><span class="c19">Part 7.5 &nbsp;Code generation</span></p><p class="c15"><span class="c19"></span></p><p class="c20"><span>This part covers largely the source code lives in llvm-3.1.src\lib\CodeGen and put together &nbsp;various components introduced in previous chapters. &nbsp;Get start from </span><span class="c11 c16">the </span><span class="c10 c58">SelectionDAGBuilder</span><span class="c11 c16">&nbsp;class?</span></p><p class="c15"><span></span></p><p class="c20"><span class="c19">Part 7.5.1 SelectionDAG </span></p><p class="c15"><span class="c19"></span></p><p class="c20"><span class="c25">Part 7.5.1.1 SelectionDAG node</span></p><p class="c15"><span class="c19"></span></p><p class="c20"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0 c4">&nbsp;</span><span>represents one node in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c0 c4">.</span><span class="c4 c5 c11">&nbsp;</span><span>It is defined in llvm-3.x.src/src/include/llvm/CodeGen/SelectionDAGNodes.h (which also defines</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span>&nbsp;and </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">SDUse</a></span><span>&nbsp;classes):</span></p><p class="c15"><span></span></p><p class="c17"><span class="c0">00083 </span><span class="c0 c6">//===----------------------------------------------------------------------===//</span><span class="c0"><br>00084 </span><span class="c0 c6">/// SDValue - Unlike LLVM values, Selection DAG nodes may return multiple</span><span class="c0"><br>00085 </span><span class="c0 c6">/// values as the result of a computation. &nbsp;Many nodes return multiple values,</span><span class="c0"><br>00086 </span><span class="c0 c6">/// from loads (which define a token and a return value) to ADDC (which returns</span><span class="c0"><br>00087 </span><span class="c0 c6">/// a result and a carry value), to calls (which may return an arbitrary number</span><span class="c0"><br>00088 </span><span class="c0 c6">/// of values).</span><span class="c0"><br>00089 </span><span class="c0 c6">///</span><span class="c0"><br>00090 </span><span class="c0 c6">/// As such, each use of a SelectionDAG computation must indicate the node that</span><span class="c0"><br>00091 </span><span class="c0 c6">/// computes it as well as which return value to use from that node. &nbsp;This pair</span><span class="c0"><br>00092 </span><span class="c0 c6">/// of information is represented with the SDValue value type.</span><span class="c0"><br>00093 </span><span class="c0 c6">///</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">00094</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;{<br>00095 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Node; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// The node defining the value we are using.</span><span class="c0"><br>00096 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;ResNo; &nbsp; &nbsp; </span><span class="c0 c6">// Which return value of the node we are using.</span><span class="c0"><br>00097 </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a31b48d46262aa181f89c6fa8b97fbd4c">00098</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a31b48d46262aa181f89c6fa8b97fbd4c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a31b48d46262aa181f89c6fa8b97fbd4c">SDValue</a></span><span class="c0">() : Node(0), ResNo(0) {}<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a1176626b6b9668a6678757f9f59fcfa7">00099</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a1176626b6b9668a6678757f9f59fcfa7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a1176626b6b9668a6678757f9f59fcfa7">SDValue</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*node, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;resno) : Node(node), ResNo(resno) {}<br>00100 <br>00101 </span><span class="c0 c6">&nbsp;/// get the index which selects a specific result in the SDNode</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a64881a6ca7154fccaeb92cdb1e1e745e">00102</a></span><span class="c0">&nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a64881a6ca7154fccaeb92cdb1e1e745e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a64881a6ca7154fccaeb92cdb1e1e745e">getResNo</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;ResNo; }</span></p><p class="c17"><span class="c5">….................................................</span></p><p class="c17"><span class="c0">00210 </span><span class="c0 c6">/// SDUse - Represents a use of a SDNode. This class holds an SDValue,</span><span class="c0"><br>00211 </span><span class="c0 c6">/// which records the SDNode being used and the result number, a</span><span class="c0"><br>00212 </span><span class="c0 c6">/// pointer to the SDNode using the value, and Next and Prev pointers,</span><span class="c0"><br>00213 </span><span class="c0 c6">/// which link together all the uses of an SDNode.</span><span class="c0"><br>00214 </span><span class="c0 c6">///</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">00215</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">SDUse</a></span><span class="c0">&nbsp;{<br>00216 </span><span class="c0 c6">&nbsp;/// Val - The value being used.</span><span class="c0"><br>00217 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Val;<br>00218 </span><span class="c0 c6">&nbsp;/// User - The user of this value.</span><span class="c0"><br>00219 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1User.html">User</a></span><span class="c0">;<br>00220 </span><span class="c0 c6">&nbsp;/// Prev, Next - Pointers to the uses list of the SDNode referred by</span><span class="c0"><br>00221 </span><span class="c0 c6">&nbsp;/// this operand.</span><span class="c0"><br>00222 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">SDUse</a></span><span class="c0">&nbsp;**Prev, *Next;<br>00223 <br>00224 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html#adabf17bd07c35b17241ea1b847cd95e0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html#adabf17bd07c35b17241ea1b847cd95e0">SDUse</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">SDUse</a></span><span class="c0">&nbsp;&amp;U)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">LLVM_DELETED_FUNCTION</a></span><span class="c0">;<br>00225 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;operator=(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">SDUse</a></span><span class="c0">&nbsp;&amp;U)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Compiler_8h.html#aacca75352b8e153274310c374564eb01">LLVM_DELETED_FUNCTION</a></span><span class="c0">;<br>00226 <br>00227 </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html#adabf17bd07c35b17241ea1b847cd95e0">00228</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html#adabf17bd07c35b17241ea1b847cd95e0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html#adabf17bd07c35b17241ea1b847cd95e0">SDUse</a></span><span class="c0">() : Val(),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1User.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1User.html">User</a></span><span class="c0">(NULL), Prev(NULL), Next(NULL) {}<br>00229 <br>00230 </span><span class="c0 c6">&nbsp;/// Normally SDUse will just implicitly convert to an SDValue that it holds.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html#a9b081bdcdba4b43bd46b0a2fe7b309f1">00231</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html#a9b081bdcdba4b43bd46b0a2fe7b309f1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html#a9b081bdcdba4b43bd46b0a2fe7b309f1">operator const SDValue&amp;</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;Val; }</span></p><p class="c17"><span class="c5">&nbsp;….........................................</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">00312</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;: </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetImpl_1_1Node.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetImpl_1_1Node.html">FoldingSetNode</a></span><span class="c0">, </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ilist__node.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ilist__node.html">ilist_node</a></span><span class="c0">&lt;SDNode&gt; {<br>00313 </span><span class="c0 c9">private</span><span class="c0">:<br>00314 </span><span class="c0 c6">&nbsp;/// NodeType - The operation that this node performs.</span><span class="c0"><br>00316 &nbsp;int16_t NodeType;<br>00318 </span><span class="c0 c6">&nbsp;/// OperandsNeedDelete - This is true if OperandList was new[]'d. &nbsp;If true,</span><span class="c0"><br>00319 </span><span class="c0 c6">&nbsp;/// then they will be delete[]'d when the node is destroyed.</span><span class="c0"><br>00320 &nbsp;uint16_t OperandsNeedDelete : 1;<br>00322 </span><span class="c0 c6">&nbsp;/// HasDebugValue - This tracks whether this node has one or more dbg_value</span><span class="c0"><br>00323 </span><span class="c0 c6">&nbsp;/// nodes corresponding to it.</span><span class="c0"><br>00324 &nbsp;uint16_t HasDebugValue : 1;<br>00326 </span><span class="c0 c9">protected</span><span class="c0">:<br>00327 </span><span class="c0 c6">&nbsp;/// SubclassData - This member is defined by this class, but is not used for</span><span class="c0"><br>00328 </span><span class="c0 c6">&nbsp;/// anything. &nbsp;Subclasses can use it to hold whatever state they find useful.</span><span class="c0"><br>00329 </span><span class="c0 c6">&nbsp;/// This field is initialized to zero by the ctor.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a3db516e91332865d74820d305efac642">00330</a></span><span class="c0">&nbsp; uint16_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a3db516e91332865d74820d305efac642">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a3db516e91332865d74820d305efac642">SubclassData</a></span><span class="c0">&nbsp;: 14;<br>00332 </span><span class="c0 c9">private</span><span class="c0">:<br>00333 </span><span class="c0 c6">&nbsp;/// NodeId - Unique id per SDNode in the DAG.</span><span class="c0"><br>00334 &nbsp;</span><span class="c0 c8">int</span><span class="c0">&nbsp;NodeId;<br>00336 </span><span class="c0 c6">&nbsp;/// OperandList - The values that are used by this operation.</span><span class="c0"><br>00338 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">SDUse</a></span><span class="c0">&nbsp;*OperandList;<br>00340 </span><span class="c0 c6">&nbsp;/// ValueList - The types of the values this node defines. &nbsp;SDNode's may</span><span class="c0"><br>00341 </span><span class="c0 c6">&nbsp;/// define multiple values simultaneously.</span><span class="c0"><br>00342 &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;*ValueList;<br>00344 </span><span class="c0 c6">&nbsp;/// UseList - List of uses for this SDNode.</span><span class="c0"><br>00345 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">SDUse</a></span><span class="c0">&nbsp;*UseList; <br>00347 </span><span class="c0 c6">&nbsp;/// NumOperands/NumValues - The number of entries in the Operand/Value list.</span><span class="c0"><br>00348 &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">short</span><span class="c0">&nbsp;NumOperands, NumValues;<br>00350 </span><span class="c0 c6">&nbsp;/// debugLoc - source line information.</span><span class="c0"><br>00351 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;debugLoc;<br>00353 </span><span class="c0 c6">&nbsp;/// getValueTypeList - Return a pointer to the specified value type.</span><span class="c0"><br>00354 &nbsp;</span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;*getValueTypeList(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT);<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a6398ba1604e154e21413ce15dd4a180e">00356</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">friend</span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a385b15610f86ec66117d84bace499f16">00357</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">friend</span><span class="c0">&nbsp;</span><span class="c0 c9">struct</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist__traits.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist__traits.html">ilist_traits</a></span><span class="c0">&lt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&gt;;<br>00359 </span><span class="c0 c9">public</span><span class="c0">:<br>00360 &nbsp; </span><span class="c0 c6">//===--------------------------------------------------------------------===//</span><span class="c0"><br>00361 &nbsp; </span><span class="c0 c6">// &nbsp;Accessors</span><span class="c0"><br>00364 </span><span class="c0 c6">&nbsp;/// getOpcode - Return the SelectionDAG opcode value for this node.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">00368</a></span><span class="c0">&nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a></span><span class="c0">()</span><span class="c0 c9">&nbsp; const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">short</span><span class="c0">)</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110">NodeType</a></span><span class="c0">; }<br>00370 </span><span class="c0 c6">&nbsp;/// isTargetOpcode - Test if this node has a target-specific opcode (in the</span><span class="c0"><br>00371 </span><span class="c0 c6">&nbsp;/// &lt;target&gt;ISD namespace).</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a3aec493317f35f8896e4a91223fa492e">00372</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a3aec493317f35f8896e4a91223fa492e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a3aec493317f35f8896e4a91223fa492e">isTargetOpcode</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110">NodeType</a></span><span class="c0">&nbsp;&gt;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a477ef80c70c7359199eace0e5d3133b1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a477ef80c70c7359199eace0e5d3133b1">ISD::BUILTIN_OP_END</a></span><span class="c0">; }<br>00374 </span><span class="c0 c6">&nbsp;/// isTargetMemoryOpcode - Test if this node has a target-specific </span><span class="c0"><br>00375 </span><span class="c0 c6">&nbsp;/// memory-referencing opcode (in the &lt;target&gt;ISD namespace and</span><span class="c0"><br>00376 </span><span class="c0 c6">&nbsp;/// greater than FIRST_TARGET_MEMORY_OPCODE).</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a11b914d444a4f3cd95f227ff62a0bd3c">00377</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a11b914d444a4f3cd95f227ff62a0bd3c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a11b914d444a4f3cd95f227ff62a0bd3c">isTargetMemoryOpcode</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00378 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110">NodeType</a></span><span class="c0">&nbsp;&gt;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a492b8a748b427bf9338f626f438cf91c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a492b8a748b427bf9338f626f438cf91c">ISD::FIRST_TARGET_MEMORY_OPCODE</a></span><span class="c0">; }<br>00381 </span><span class="c0 c6">&nbsp;/// isMachineOpcode - Test if this node has a post-isel opcode, directly</span><span class="c0"><br>00382 </span><span class="c0 c6">&nbsp;/// corresponding to a MachineInstr opcode.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a7ef138746b04be6d07091b9ba49d74da">00383</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a7ef138746b04be6d07091b9ba49d74da">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a7ef138746b04be6d07091b9ba49d74da">isMachineOpcode</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110">NodeType</a></span><span class="c0">&nbsp;&lt; 0; }<br>00385 </span><span class="c0 c6">&nbsp;/// getMachineOpcode - This may only be called if isMachineOpcode returns</span><span class="c0"><br>00386 </span><span class="c0 c6">&nbsp;/// true. It returns the MachineInstr opcode value that the node's opcode</span><span class="c0"><br>00387 </span><span class="c0 c6">&nbsp;/// corresponds to.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#afe3745334feafa68985dee7caa1a254f">00388</a></span><span class="c0">&nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#afe3745334feafa68985dee7caa1a254f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#afe3745334feafa68985dee7caa1a254f">getMachineOpcode</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00389 &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a7ef138746b04be6d07091b9ba49d74da">isMachineOpcode</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"Not a MachineInstr opcode!"</span><span class="c0">);<br>00390 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;~</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110">NodeType</a></span><span class="c0">; }<br>00399 </span><span class="c0 c6">&nbsp;/// use_empty - Return true if there are no uses of this node.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#afc071edeb7e2007d000374eba843f76a">00401</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#afc071edeb7e2007d000374eba843f76a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#afc071edeb7e2007d000374eba843f76a">use_empty</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;UseList == NULL; }<br>00409 </span><span class="c0 c6">&nbsp;/// use_size - Return the number of uses of this node. This method takes</span><span class="c0"><br>00410 </span><span class="c0 c6">&nbsp;/// time proportional to the number of uses.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#af0c82cd2aaa848c2f62da188c01ae5fa">00412</a></span><span class="c0">&nbsp; </span><span class="c0 c8">size_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#af0c82cd2aaa848c2f62da188c01ae5fa">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#af0c82cd2aaa848c2f62da188c01ae5fa">use_size</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;std::distance(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a8810bf428dcf84d48f39c8f5ba9a8c94">use_begin</a></span><span class="c0">(),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#aef02f2c1bd12936a80611b134b24a47d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#aef02f2c1bd12936a80611b134b24a47d">use_end</a></span><span class="c0">()); }<br>00414 </span><span class="c0 c6">&nbsp;/// getNodeId - Return the unique node id.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">00416</a></span><span class="c0">&nbsp; </span><span class="c0 c8">int</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a7869db2aca4044d21da972bed855b0d0">getNodeId</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;NodeId; }<br>00418 </span><span class="c0 c6">&nbsp;/// setNodeId - Set unique node id.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a5689e9ae35c6ceb3b9377299c98e0e97">00419</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a5689e9ae35c6ceb3b9377299c98e0e97">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a5689e9ae35c6ceb3b9377299c98e0e97">setNodeId</a></span><span class="c0">(</span><span class="c0 c8">int</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aca8a950a42e5a08dff888aeb505e685c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aca8a950a42e5a08dff888aeb505e685c">Id</a></span><span class="c0">) { NodeId =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aca8a950a42e5a08dff888aeb505e685c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aca8a950a42e5a08dff888aeb505e685c">Id</a></span><span class="c0">; }<br>00428 </span><span class="c0 c6">&nbsp;/// use_iterator - This class provides iterator support for SDUse</span><span class="c0"><br>00429 </span><span class="c0 c6">&nbsp;/// operands that use a specific SDNode.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html">00430</a></span><span class="c0">&nbsp; </span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html">use_iterator</a></span><span class="c0"><br>00431 &nbsp; &nbsp; : </span><span class="c0 c9">public</span><span class="c0">&nbsp;std::iterator&lt;std::forward_iterator_tag, SDUse, ptrdiff_t&gt; {<br>00432 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">SDUse</a></span><span class="c0">&nbsp;*Op;<br>00433 &nbsp; &nbsp; </span><span class="c0 c9">explicit</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a59764666f217fcb01978cf0a1cda2600">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a59764666f217fcb01978cf0a1cda2600">use_iterator</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">SDUse</a></span><span class="c0">&nbsp;*op) : Op(op) {<br>00434 &nbsp; &nbsp; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a3de0b67859696f5bb9e0cc64b2178101">00435</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">friend</span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">;<br>00436 &nbsp; </span><span class="c0 c9">public</span><span class="c0">:<br>00437 &nbsp; &nbsp; </span><span class="c0 c9">typedef</span><span class="c0">&nbsp;std::iterator&lt;std::forward_iterator_tag,<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a8235b2875122e889535d2a82ba1d8dbd">00438</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">SDUse</a></span><span class="c0">, ptrdiff_t&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a8235b2875122e889535d2a82ba1d8dbd">::reference</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a8235b2875122e889535d2a82ba1d8dbd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a8235b2875122e889535d2a82ba1d8dbd">reference</a></span><span class="c0">;<br>00439 &nbsp; &nbsp; </span><span class="c0 c9">typedef</span><span class="c0">&nbsp;std::iterator&lt;std::forward_iterator_tag,<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a12d1e46df5b9affc7edd843f59b8571a">00440</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">SDUse</a></span><span class="c0">, ptrdiff_t&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a12d1e46df5b9affc7edd843f59b8571a">::pointer</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a12d1e46df5b9affc7edd843f59b8571a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a12d1e46df5b9affc7edd843f59b8571a">pointer</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a11111666191570bcc82a60d83e644416">00442</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a11111666191570bcc82a60d83e644416">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a11111666191570bcc82a60d83e644416">use_iterator</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html">use_iterator</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">) : Op(I.Op) {}<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a59764666f217fcb01978cf0a1cda2600">00443</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a59764666f217fcb01978cf0a1cda2600">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a59764666f217fcb01978cf0a1cda2600">use_iterator</a></span><span class="c0">() : Op(0) {}<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#afbd96895c795785e3094ef99f1d92902">00445</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#afbd96895c795785e3094ef99f1d92902">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#afbd96895c795785e3094ef99f1d92902">operator==</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html">use_iterator</a></span><span class="c0">&nbsp;&amp;x)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00446 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;Op == x.Op;}<br>00452 </span><span class="c0 c6">&nbsp; &nbsp;/// atEnd - return true if this iterator is at the end of uses list.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#aeb31b9adc6b43bdb7d5dfb8f92fcc02a">00453</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#aeb31b9adc6b43bdb7d5dfb8f92fcc02a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#aeb31b9adc6b43bdb7d5dfb8f92fcc02a">atEnd</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;Op == 0; }<br>…............................<br>00476 </span><span class="c0 c6">&nbsp; &nbsp;/// getOperandNo - Retrieve the operand # of this use in its user.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a5a4b1b567af9548a76146b73880446e5">00478</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a5a4b1b567af9548a76146b73880446e5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html#a5a4b1b567af9548a76146b73880446e5">getOperandNo</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00479 &nbsp; &nbsp; &nbsp; assert(Op &amp;&amp; </span><span class="c0 c14">"Cannot dereference end iterator!"</span><span class="c0">);<br>00480 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">)(Op - Op-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html#a469c58f8a39344294563f11514c352de">getUser</a></span><span class="c0">()-&gt;OperandList);<br>00481 &nbsp; &nbsp; }<br>00482 &nbsp; };<br>…............................<br>00494 </span><span class="c0 c6">&nbsp;/// hasNUsesOfValue - Return true if there are exactly NUSES uses of the</span><span class="c0"><br>00495 </span><span class="c0 c6">&nbsp;/// indicated value. &nbsp;This method ignores uses of other values defined by this</span><span class="c0"><br>00496 </span><span class="c0 c6">&nbsp;/// operation.</span><span class="c0"><br>00497 &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a51dcb6414be6f4b441df7152e05de8f5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a51dcb6414be6f4b441df7152e05de8f5">hasNUsesOfValue</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;NUses, </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) </span><span class="c0 c9">const</span><span class="c0">;</span><span class="c0"><br>00499 </span><span class="c0 c6">&nbsp;/// hasAnyUseOfValue - Return true if there are any use of the indicated</span><span class="c0"><br>00500 </span><span class="c0 c6">&nbsp;/// value. This method ignores uses of other values defined by this operation.</span><span class="c0"><br>00501 &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#ae4cb676e77b9f238058c70faa609a5d7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#ae4cb676e77b9f238058c70faa609a5d7">hasAnyUseOfValue</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">) </span><span class="c0 c9">const</span><span class="c0">;<br>00503 </span><span class="c0 c6">&nbsp;/// isOnlyUserOf - Return true if this node is the only use of N.</span><span class="c0"><br>00505 &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a81bbee13bd2a950e41a87a126fd2e8ca">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a81bbee13bd2a950e41a87a126fd2e8ca">isOnlyUserOf</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N) </span><span class="c0 c9">const</span><span class="c0">;<br>00507 </span><span class="c0 c6">&nbsp;/// isOperandOf - Return true if this node is an operand of N.</span><span class="c0"><br>00509 &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#af21aa675f5217814fbd14e86c9b63270">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#af21aa675f5217814fbd14e86c9b63270">isOperandOf</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N) </span><span class="c0 c9">const</span><span class="c0">;<br>00511 </span><span class="c0 c6">&nbsp;/// isPredecessorOf - Return true if this node is a predecessor of N.</span><span class="c0"><br>00512 </span><span class="c0 c6">&nbsp;/// NOTE: Implemented on top of hasPredecessor and every bit as</span><span class="c0"><br>00513 </span><span class="c0 c6">&nbsp;/// expensive. Use carefully.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a7ee80bb807d0f88ecbfbc44607228ef6">00514</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a7ee80bb807d0f88ecbfbc44607228ef6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a7ee80bb807d0f88ecbfbc44607228ef6">isPredecessorOf</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;N-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a3cc6a2a565bdfbe63307a892b2d176a1">hasPredecessor</a></span><span class="c0">(</span><span class="c0 c9">this</span><span class="c0">); }<br>00516 </span><span class="c0 c6">&nbsp;/// hasPredecessor - Return true if N is a predecessor of this node.</span><span class="c0"><br>00520 &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a3cc6a2a565bdfbe63307a892b2d176a1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a3cc6a2a565bdfbe63307a892b2d176a1">hasPredecessor</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N) </span><span class="c0 c9">const</span><span class="c0">;<br>00535 </span><span class="c0 c6">&nbsp;/// getNumOperands - Return the number of values used by this operation.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#abc5c2f1d47a517373030133c6a102106">00537</a></span><span class="c0">&nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#abc5c2f1d47a517373030133c6a102106">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#abc5c2f1d47a517373030133c6a102106">getNumOperands</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;NumOperands; }<br>00539 </span><span class="c0 c6">&nbsp;/// getConstantOperandVal - Helper method returns the integer value of a</span><span class="c0"><br>00540 </span><span class="c0 c6">&nbsp;/// ConstantSDNode operand.</span><span class="c0"><br>00541 &nbsp;uint64_t</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#aff84cd98daca4f1901020fb99845fcfc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#aff84cd98daca4f1901020fb99845fcfc">getConstantOperandVal</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Num) </span><span class="c0 c9">const</span><span class="c0">;</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">In addition to the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c5">, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDUse.html">SDUse</a></span><span class="c0">&nbsp;</span><span class="c5">and </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c5">&nbsp;classes, </span><span>SelectionDAGNodes.h also defines many other classes that inherit the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c5">&nbsp;class. &nbsp;The entire class inheritance graph for </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c5">&nbsp;class is depicted as follows:</span></p><p class="c17 c52"><img height="811" src="./Notes on LLVM 3 (Target Independent Code Generator)_files/image02.png" width="752"></p><p class="c17 c52 c35"><span class="c5"></span></p><p class="c17 c52 c35"><span class="c5"></span></p><p class="c17 c52"><span class="c25">Part 7.5.1.2 SelectionDAG class</span></p><p class="c17 c52 c35"><span class="c5"></span></p><p class="c17 c52"><span class="c12 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c2">&nbsp;class - This is used to represent a portion of an LLVM function in a low-level Data </span></p><p class="c17 c52"><span class="c12 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Dependence.html">Dependence</a></span><span class="c2">&nbsp;DAG representation suitable for instruction selection. This DAG is constructed as the </span></p><p class="c17 c52"><span class="c2">first step of instruction selection in order to allow implementation of machine specific optimizations </span></p><p class="c17 c52"><span class="c2">and code simplifications. The representation used by the </span><span class="c12 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c2">&nbsp;is a target-independent </span></p><p class="c17 c52"><span class="c2">representation, which has some similarities to the GCC RTL representation, but is significantly more </span></p><p class="c17 c52"><span class="c2">simple, powerful, and is a graph form instead of a linear form.</span></p><p class="c17 c52 c35"><span class="c2"></span></p><p class="c17 c52"><span class="c5">First, let’s put the most important part of its interface defined in SelectionDAG.h</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">00130</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c0">&nbsp;{<br>00131 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">&nbsp;&amp;TM;<br>00132 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c0">&nbsp;&amp;TLI;<br>00133 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetSelectionDAGInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetSelectionDAGInfo.html">TargetSelectionDAGInfo</a></span><span class="c0">&nbsp;&amp;TSI;<br>00134 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;*MF;<br>00135 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LLVMContext.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LLVMContext.html">LLVMContext</a></span><span class="c0">&nbsp;*Context;<br>00136 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a></span><span class="c0">&nbsp;OptLevel;<br>00138 </span><span class="c0 c6">&nbsp;/// EntryNode - The starting token.</span><span class="c0"><br>00139 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;EntryNode;<br>00141 </span><span class="c0 c6">&nbsp;/// Root - The root of the entire DAG.</span><span class="c0"><br>00142 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Root;<br>00144 </span><span class="c0 c6">&nbsp;/// AllNodes - A linked list of nodes in the current DAG.</span><span class="c0"><br>00145 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html">ilist&lt;SDNode&gt;</a></span><span class="c0">&nbsp;AllNodes;<br>00147 </span><span class="c0 c6">&nbsp;/// NodeAllocatorType - The AllocatorType for allocating SDNodes. We use</span><span class="c0"><br>00148 </span><span class="c0 c6">&nbsp;/// pool allocation with recycling.</span><span class="c0"><br>00149 &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RecyclingAllocator.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RecyclingAllocator.html">RecyclingAllocator</a></span><span class="c0">&lt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BumpPtrAllocator.html">BumpPtrAllocator</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">, </span><span class="c0 c9">sizeof</span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#ad18cab18a839c23b0eae8dfdf1ccfa9b">LargestSDNode</a></span><span class="c0">),<br>00150 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1AlignOf.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1AlignOf.html">AlignOf&lt;MostAlignedSDNode&gt;::Alignment</a></span><span class="c0">&gt;<br>00151 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RecyclingAllocator.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RecyclingAllocator.html">NodeAllocatorType</a></span><span class="c0">;<br>00153 </span><span class="c0 c6">&nbsp;/// NodeAllocator - Pool allocation for nodes.</span><span class="c0"><br>00154 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RecyclingAllocator.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RecyclingAllocator.html">NodeAllocatorType</a></span><span class="c0">&nbsp;NodeAllocator;<br>00156 </span><span class="c0 c6">&nbsp;/// CSEMap - This structure is used to memoize nodes, automatically performing</span><span class="c0"><br>00157 </span><span class="c0 c6">&nbsp;/// CSE with existing nodes when a duplicate is requested.</span><span class="c0"><br>00158 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSet.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSet.html">FoldingSet&lt;SDNode&gt;</a></span><span class="c0">&nbsp;CSEMap;<br>00160 </span><span class="c0 c6">&nbsp;/// OperandAllocator - Pool allocation for machine-opcode SDNode operands.</span><span class="c0"><br>00161 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BumpPtrAllocator.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BumpPtrAllocator.html">BumpPtrAllocator</a></span><span class="c0">&nbsp;OperandAllocator;</span></p><p class="c17"><span class="c0">00163 </span><span class="c0 c6">&nbsp;/// Allocator - Pool allocation for misc. objects that are created once per</span><span class="c0"><br>00164 </span><span class="c0 c6">&nbsp;/// SelectionDAG.</span><span class="c0"><br>00165 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BumpPtrAllocator.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BumpPtrAllocator.html">BumpPtrAllocator</a></span><span class="c0">&nbsp;Allocator;<br>00167 </span><span class="c0 c6">&nbsp;/// SDNodeOrdering - The ordering of the SDNodes. It roughly corresponds to</span><span class="c0"><br>00168 </span><span class="c0 c6">&nbsp;/// the ordering of the original LLVM instructions.</span><span class="c0"><br>00169 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNodeOrdering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNodeOrdering.html">SDNodeOrdering</a></span><span class="c0">&nbsp;*Ordering;<br>00174 </span><span class="c0 c9">public</span><span class="c0">:<br>00175 </span><span class="c0 c6">&nbsp;/// DAGUpdateListener - Clients of various APIs that cause global effects on</span><span class="c0"><br>00176 </span><span class="c0 c6">&nbsp;/// the DAG can optionally implement this interface. &nbsp;This allows the clients</span><span class="c0"><br>00177 </span><span class="c0 c6">&nbsp;/// to handle the various sorts of updates that happen.</span><span class="c0"><br>00179 </span><span class="c0 c6">&nbsp;/// A DAGUpdateListener automatically registers itself with DAG when it is</span><span class="c0"><br>00180 </span><span class="c0 c6">&nbsp;/// constructed, and removes itself when destroyed in RAII fashion.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html">00181</a></span><span class="c0">&nbsp; </span><span class="c0 c9">struct</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html">DAGUpdateListener</a></span><span class="c0">&nbsp;{<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#a7ccf5c27bb0d12828404e9ca69677bb2">00182</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html">DAGUpdateListener</a></span><span class="c0">&nbsp;*</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#a7ccf5c27bb0d12828404e9ca69677bb2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#a7ccf5c27bb0d12828404e9ca69677bb2">Next</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#affbd659753a061c27261830290a2aaa0">00183</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#affbd659753a061c27261830290a2aaa0">DAG</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#ab3ffbfc6ced2909624e205e7e93b8789">00185</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">explicit</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#ab3ffbfc6ced2909624e205e7e93b8789">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#ab3ffbfc6ced2909624e205e7e93b8789">DAGUpdateListener</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c0">&nbsp;&amp;D)<br>00186 &nbsp; &nbsp; &nbsp; :</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#a7ccf5c27bb0d12828404e9ca69677bb2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#a7ccf5c27bb0d12828404e9ca69677bb2">Next</a></span><span class="c0">(D.UpdateListeners),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#affbd659753a061c27261830290a2aaa0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#affbd659753a061c27261830290a2aaa0">DAG</a></span><span class="c0">(D) {<br>00187 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#affbd659753a061c27261830290a2aaa0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#affbd659753a061c27261830290a2aaa0">DAG</a></span><span class="c0">.UpdateListeners = </span><span class="c0 c9">this</span><span class="c0">;<br>00188 &nbsp; &nbsp; }</span></p><p class="c17"><span class="c0">….............................</span></p><p class="c17"><span class="c0 c6">/// NodeDeleted - The node N that was deleted and, if E is not null, an</span><span class="c0"><br>00197 </span><span class="c0 c6">&nbsp; &nbsp;/// equivalent node E that replaced it.</span><span class="c0"><br>00198 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#a7d69b75ce8758fd9c5c7d9f9b42c5477">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#a7d69b75ce8758fd9c5c7d9f9b42c5477">NodeDeleted</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*E);<br>00199 <br>00200 </span><span class="c0 c6">&nbsp; &nbsp;/// NodeUpdated - The node N that was updated.</span><span class="c0"><br>00201 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#adbc277665c4fa07c90be04c91af8966b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html#adbc277665c4fa07c90be04c91af8966b">NodeUpdated</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00202 &nbsp; };</span></p><p class="c17"><span class="c0">00203</span></p><p class="c17"><span class="c0">00204 </span><span class="c0 c9">private</span><span class="c0">:<br>00205 </span><span class="c0 c6">&nbsp;/// DAGUpdateListener is a friend so it can manipulate the listener stack.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ae465b76a465f0d698764e660f1be55d0">00206</a></span><span class="c0">&nbsp; </span><span class="c0 c9">friend</span><span class="c0">&nbsp;</span><span class="c0 c9">struct</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html">DAGUpdateListener</a></span><span class="c0">;<br>00208 </span><span class="c0 c6">&nbsp;/// UpdateListeners - Linked list of registered DAGUpdateListener instances.</span><span class="c0"><br>00209 </span><span class="c0 c6">&nbsp;/// This stack is maintained by DAGUpdateListener RAII.</span><span class="c0"><br>00210 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SelectionDAG_1_1DAGUpdateListener.html">DAGUpdateListener</a></span><span class="c0">&nbsp;*UpdateListeners;</span></p><p class="c17"><span class="c0">00212 </span><span class="c0 c6">&nbsp;/// setGraphColorHelper - Implementation of setSubgraphColor.</span><span class="c0"><br>00213 </span><span class="c0 c6">&nbsp;/// Return whether we had to truncate the search.</span><span class="c0"><br>00215 &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;setSubgraphColorHelper(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N, </span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;*Color,<br>00216 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseSet.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseSet.html">DenseSet&lt;SDNode *&gt;</a></span><span class="c0">&nbsp;&amp;visited,<br>00217 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">int</span><span class="c0">&nbsp;level, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;&amp;printed);</span></p><p class="c17"><span class="c0">00226 </span><span class="c0 c6">&nbsp;/// init - Prepare this SelectionDAG to process code in the given</span><span class="c0"><br>00227 </span><span class="c0 c6">&nbsp;/// MachineFunction.</span><span class="c0"><br>00229 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a11148d412f82458a70cb82a237169826">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a11148d412f82458a70cb82a237169826">init</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;mf);</span></p><p class="c17"><span class="c0">…................several get**() methods here to retrieve its members.............</span></p><p class="c17"><span class="c0">00245 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a94142e3023ffb8d1b702dc46a9303376">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a94142e3023ffb8d1b702dc46a9303376">viewGraph</a></span><span class="c0">();</span></p><p class="c17"><span class="c0">00255 </span><span class="c0 c6">&nbsp;/// setGraphAttrs - Set graph attributes for a node. (eg. "color=red".)</span><span class="c0"><br>00257 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a719417d1fdf9f37a0a59f62bf41e4730">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a719417d1fdf9f37a0a59f62bf41e4730">setGraphAttrs</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N, </span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;*Attrs);</span></p><p class="c17"><span class="c0">00261 &nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;std::string</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a4f1d24c6b36c34b2c5a920f23dedd748">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a4f1d24c6b36c34b2c5a920f23dedd748">getGraphAttrs</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N) </span><span class="c0 c9">const</span><span class="c0">;</span></p><p class="c17"><span class="c0">00265 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a7e797c893fc956bc08a62c825e3fd728">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a7e797c893fc956bc08a62c825e3fd728">setGraphColor</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N, </span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;*Color);</span></p><p class="c17"><span class="c0">00269 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#af1cb2dd492ddb445e5640e20d6815f58">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#af1cb2dd492ddb445e5640e20d6815f58">setSubgraphColor</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N, </span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;*Color);</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a3d2e079387a6e69ce2c8bb27bf7c2f32">00293</a></span><span class="c0">&nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a3d2e079387a6e69ce2c8bb27bf7c2f32">setRoot</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;N) {<br>00294 &nbsp; &nbsp; assert((!N.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">() || N.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a></span><span class="c0">() ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca62a222acce6360abd2726719fabc2797">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca62a222acce6360abd2726719fabc2797">MVT::Other</a></span><span class="c0">) &amp;&amp;<br>00295 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"DAG root value is not a chain!"</span><span class="c0">);<br>00296 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(N.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">())<br>00297 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a307acd65e0b4952229acdbe8bec2bb7d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a307acd65e0b4952229acdbe8bec2bb7d">checkForCycles</a></span><span class="c0">(N.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">());<br>00298 &nbsp; &nbsp; Root = N;<br>00299 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(N.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">())<br>00300 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a307acd65e0b4952229acdbe8bec2bb7d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a307acd65e0b4952229acdbe8bec2bb7d">checkForCycles</a></span><span class="c0">(</span><span class="c0 c9">this</span><span class="c0">);<br>00301 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;Root;<br>00302 &nbsp; }</span></p><p class="c17"><span class="c0">00304 </span><span class="c0 c6">&nbsp;/// Combine - This iterates over the nodes in the SelectionDAG, folding</span><span class="c0"><br>00305 </span><span class="c0 c6">&nbsp;/// certain types of nodes together, or eliminating superfluous nodes. &nbsp;The</span><span class="c0"><br>00306 </span><span class="c0 c6">&nbsp;/// Level argument controls whether Combine is allowed to produce nodes and</span><span class="c0"><br>00307 </span><span class="c0 c6">&nbsp;/// types that are illegal on the target.</span><span class="c0"><br>00308 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#abe7bd3138ea3703376dc622650b20ff3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#abe7bd3138ea3703376dc622650b20ff3">Combine</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa6d856e4879bb775617f8c3634773b7a">CombineLevel</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">Level</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">AliasAnalysis</a></span><span class="c0">&nbsp;&amp;AA,<br>00309 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a></span><span class="c0">&nbsp;OptLevel);</span></p><p class="c17"><span class="c0">00311 </span><span class="c0 c6">&nbsp;/// LegalizeTypes - This transforms the SelectionDAG into a SelectionDAG that</span><span class="c0"><br>00312 </span><span class="c0 c6">&nbsp;/// only uses types natively supported by the target. &nbsp;Returns "true" if it</span><span class="c0"><br>00313 </span><span class="c0 c6">&nbsp;/// made any changes.</span><span class="c0"><br>00317 &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#affe59e12b70bcd9f5476f7ab289fa84a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#affe59e12b70bcd9f5476f7ab289fa84a">LegalizeTypes</a></span><span class="c0">();</span></p><p class="c17"><span class="c0">00319 </span><span class="c0 c6">&nbsp;/// Legalize - This transforms the SelectionDAG into a SelectionDAG that is</span><span class="c0"><br>00320 </span><span class="c0 c6">&nbsp;/// compatible with the target instruction selector, as indicated by the</span><span class="c0"><br>00321 </span><span class="c0 c6">&nbsp;/// TargetLowering object.</span><span class="c0"><br>00325 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a6f1e49f6f347835aa6b5a7423dd364d1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a6f1e49f6f347835aa6b5a7423dd364d1">Legalize</a></span><span class="c0">();</span></p><p class="c17"><span class="c0">00338 &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a1d9e10dce8ca4da8bad80838a6cf426b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a1d9e10dce8ca4da8bad80838a6cf426b">LegalizeVectors</a></span><span class="c0">();</span></p><p class="c17"><span class="c0">00342 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a92c8c043c2a2d8db5b6cf9767394b747">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a92c8c043c2a2d8db5b6cf9767394b747">RemoveDeadNodes</a></span><span class="c0">();</span></p><p class="c17"><span class="c0">00346 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a5f57dcbedc16dced31c61f7bbbb06ded">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a5f57dcbedc16dced31c61f7bbbb06ded">DeleteNode</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);</span></p><p class="c17"><span class="c0">00356 &nbsp; </span><span class="c0 c6">//===--------------------------------------------------------------------===//</span><span class="c0"><br>00357 &nbsp; </span><span class="c0 c6">// Node creation methods.</span><span class="c0"><br>00358 &nbsp; </span><span class="c0 c6">//</span><span class="c0"><br>00359 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a13ad902229b8b6b3a7a1d29dedac01e0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a13ad902229b8b6b3a7a1d29dedac01e0">getConstant</a></span><span class="c0">(uint64_t Val,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;isTarget = </span><span class="c0 c9">false</span><span class="c0">);</span></p><p class="c17"><span class="c0">00372 &nbsp; </span><span class="c0 c6">// The forms below that take a double should only be used for simple</span><span class="c0"><br>00373 &nbsp; </span><span class="c0 c6">// constants that can be exactly represented in VT. &nbsp;No checks are made.</span><span class="c0"><br>00374 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a268e5bc7dd40a28712a33ca6c9c91c6f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a268e5bc7dd40a28712a33ca6c9c91c6f">getConstantFP</a></span><span class="c0">(</span><span class="c0 c8">double</span><span class="c0">&nbsp;Val,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;isTarget = </span><span class="c0 c9">false</span><span class="c0">);</span></p><p class="c17"><span class="c0">…..............................</span></p><p class="c17"><span class="c0">00386 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9dafbd92c206adf9eea1276e1537295e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9dafbd92c206adf9eea1276e1537295e">getGlobalAddress</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GlobalValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GlobalValue.html">GlobalValue</a></span><span class="c0">&nbsp;*GV,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;DL,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT,<br>00387 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;int64_t offset = 0, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;isTargetGA = </span><span class="c0 c9">false</span><span class="c0">,<br>00388 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;TargetFlags = 0);</span></p><p class="c17"><span class="c0">00394 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#acb59cbd8f4a8c1cf820b2b540aebdac1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#acb59cbd8f4a8c1cf820b2b540aebdac1">getFrameIndex</a></span><span class="c0">(</span><span class="c0 c8">int</span><span class="c0">&nbsp;FI,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;isTarget = </span><span class="c0 c9">false</span><span class="c0">);</span></p><p class="c17"><span class="c0">…...............................</span></p><p class="c17"><span class="c0">00419 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a84183479b771b7b22d70a79bf3d284ee">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a84183479b771b7b22d70a79bf3d284ee">getTargetIndex</a></span><span class="c0">(</span><span class="c0 c8">int</span><span class="c0">&nbsp;Index,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT, int64_t Offset = 0,<br>00420 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;TargetFlags = 0);<br>00421 &nbsp; </span><span class="c0 c6">// When generating a branch to a BB, we don't in general know enough</span><span class="c0"><br>00422 &nbsp; </span><span class="c0 c6">// to provide debug info for the BB at that time, so keep this one around.</span><span class="c0"><br>00423 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">getBasicBlock</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*MBB);<br>00424 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">getBasicBlock</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*MBB,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;dl);<br>00425 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#aa8f1c26a4e070ead6c67b4e9a5d93124">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#aa8f1c26a4e070ead6c67b4e9a5d93124">getExternalSymbol</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;*Sym,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT);<br>00426 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#aa8f1c26a4e070ead6c67b4e9a5d93124">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#aa8f1c26a4e070ead6c67b4e9a5d93124">getExternalSymbol</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;*Sym,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;dl,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT);<br>00427 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ab5254dc94639bcdd77bf933ad2fe9ac3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ab5254dc94639bcdd77bf933ad2fe9ac3">getTargetExternalSymbol</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;*Sym,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT,<br>00428 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;TargetFlags = 0);<br>00429 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ab8ba6b05ad4fa7517f2e23b26f84ae1b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ab8ba6b05ad4fa7517f2e23b26f84ae1b">getValueType</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">);<br>00430 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9268086dd9d1ba4e60cfe872dde5c173">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9268086dd9d1ba4e60cfe872dde5c173">getRegister</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT);<br>00431 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#acfe1250a2214797a59c6457dd2180df9">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#acfe1250a2214797a59c6457dd2180df9">getRegisterMask</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0">&nbsp;uint32_t *RegMask);<br>00432 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a26132b1b0590fdd8294d9a34d7ce66fe">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a26132b1b0590fdd8294d9a34d7ce66fe">getEHLabel</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;dl,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Root,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSymbol.html">MCSymbol</a></span><span class="c0">&nbsp;*Label);<br>00433 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ad7bc9cffc987a22379e5878ee347650c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ad7bc9cffc987a22379e5878ee347650c">getBlockAddress</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BlockAddress.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BlockAddress.html">BlockAddress</a></span><span class="c0">&nbsp;*BA,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT,<br>00434 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int64_t Offset = 0, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;isTarget = </span><span class="c0 c9">false</span><span class="c0">,<br>00435 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;TargetFlags = 0);</span></p><p class="c17"><span class="c0">….......................</span></p><p class="c17"><span class="c0">00500 </span><span class="c0 c6">&nbsp;/// getSExtOrTrunc - Convert Op, which must be of integer type, to the</span><span class="c0"><br>00501 </span><span class="c0 c6">&nbsp;/// integer type VT, by either sign-extending or truncating it.</span><span class="c0"><br>00502 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a46b56aa8b74f4eb59d63e0d32f4515bd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a46b56aa8b74f4eb59d63e0d32f4515bd">getSExtOrTrunc</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;DL,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT);<br>00503 <br>00504 </span><span class="c0 c6">&nbsp;/// getZExtOrTrunc - Convert Op, which must be of integer type, to the</span><span class="c0"><br>00505 </span><span class="c0 c6">&nbsp;/// integer type VT, by either zero-extending or truncating it.</span><span class="c0"><br>00506 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a7df3f8cef00ad7c3605d756bbf206159">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a7df3f8cef00ad7c3605d756bbf206159">getZExtOrTrunc</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;DL,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT);<br>00507 <br>00508 </span><span class="c0 c6">&nbsp;/// getZeroExtendInReg - Return the expression required to zero extend the Op</span><span class="c0"><br>00509 </span><span class="c0 c6">&nbsp;/// value assuming it was the smaller SrcTy value.</span><span class="c0"><br>00510 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a0d11c4dbeb314d01fa18b254670ed50a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a0d11c4dbeb314d01fa18b254670ed50a">getZeroExtendInReg</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;DL,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;SrcTy);<br>00511 <br>00512 </span><span class="c0 c6">&nbsp;/// getNOT - Create a bitwise NOT operation as (XOR Val, -1).</span><span class="c0"><br>00513 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a436101c1a068d0c8cb7fbbbfa38131af">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a436101c1a068d0c8cb7fbbbfa38131af">getNOT</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;DL,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Val,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT);</span></p><p class="c17"><span class="c0">…...........................</span></p><p class="c17"><span class="c0">00550 </span><span class="c0 c6">&nbsp;/// getNode - Gets or creates the specified node.</span><span class="c0"><br>00551 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00552 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ac65c8a6cfb8608d6722c6df997870780">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ac65c8a6cfb8608d6722c6df997870780">getNode</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opcode,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;DL,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT);</span></p><p class="c17"><span class="c0">00553 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ac65c8a6cfb8608d6722c6df997870780">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ac65c8a6cfb8608d6722c6df997870780">getNode</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opcode,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;DL,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;N);<br>00554 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ac65c8a6cfb8608d6722c6df997870780">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ac65c8a6cfb8608d6722c6df997870780">getNode</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opcode,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;DL,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;N1,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;N2);<br>00555 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ac65c8a6cfb8608d6722c6df997870780">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ac65c8a6cfb8608d6722c6df997870780">getNode</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opcode,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;DL,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT,<br>00556 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;N1,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;N2,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;N3);</span></p><p class="c17"><span class="c0">…................lots of many other getNode(...) functions with different prototypes........</span></p><p class="c17"><span class="c0">00591 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ae9fd1d41eb20949f16b3ec4fdd273d01">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ae9fd1d41eb20949f16b3ec4fdd273d01">getMemcpy</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Chain,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;dl,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Dst,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Src,<br>00592 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Size, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Align, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;isVol, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;AlwaysInline,<br>00593 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MachinePointerInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a></span><span class="c0">&nbsp;DstPtrInfo,<br>00594 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MachinePointerInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a></span><span class="c0">&nbsp;SrcPtrInfo);</span></p><p class="c20"><span class="c0">…................</span></p><p class="c17"><span class="c0">00631 </span><span class="c0 c6">&nbsp;/// getAtomic - Gets a node for an atomic op, produces result and chain and</span><span class="c0"><br>00632 </span><span class="c0 c6">&nbsp;/// takes 3 operands</span><span class="c0"><br>00633 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a6218cdaa8d591b085cd7dc2f20f96c88">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a6218cdaa8d591b085cd7dc2f20f96c88">getAtomic</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opcode,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;dl,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;MemVT,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Chain,<br>00634 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Ptr,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Cmp,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Swp,<br>00635 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MachinePointerInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MachinePointerInfo.html">MachinePointerInfo</a></span><span class="c0">&nbsp;PtrInfo, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Alignment,<br>00636 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#abf74b2f0dbae96f4708d3e407b36df02">AtomicOrdering</a></span><span class="c0">&nbsp;Ordering,<br>00637 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af044e7b099a53c587d1568b5b153b1a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af044e7b099a53c587d1568b5b153b1a5">SynchronizationScope</a></span><span class="c0">&nbsp;SynchScope);</span></p><p class="c20"><span class="c0">…...................</span></p><p class="c17"><span class="c0">00745 </span><span class="c0 c6">&nbsp;/// UpdateNodeOperands - *Mutate* the specified node in-place to have the</span><span class="c0"><br>00746 </span><span class="c0 c6">&nbsp;/// specified operands. &nbsp;If the resultant node already exists in the DAG,</span><span class="c0"><br>00747 </span><span class="c0 c6">&nbsp;/// this does not modify the specified node, instead it returns the node that</span><span class="c0"><br>00748 </span><span class="c0 c6">&nbsp;/// already exists. &nbsp;If the resultant node does not exist in the DAG, the</span><span class="c0"><br>00749 </span><span class="c0 c6">&nbsp;/// input node is returned. &nbsp;As a degenerate case, if you specify the same</span><span class="c0"><br>00750 </span><span class="c0 c6">&nbsp;/// input operands as the node already has, the input node is returned.</span><span class="c0"><br>00751 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ae8c041f67463ea67d6c43867729b82cb">UpdateNodeOperands</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op);<br>00752 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ae8c041f67463ea67d6c43867729b82cb">UpdateNodeOperands</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op1,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op2);<br>00753 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ae8c041f67463ea67d6c43867729b82cb">UpdateNodeOperands</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op1,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op2,<br>00754 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op3);</span></p><p class="c20"><span class="c0">…......................</span></p><p class="c17"><span class="c0">00762 </span><span class="c0 c6">&nbsp;/// SelectNodeTo - These are used for target selectors to *mutate* the</span><span class="c0"><br>00763 </span><span class="c0 c6">&nbsp;/// specified node to have the specified return type, Target opcode, and</span><span class="c0"><br>00764 </span><span class="c0 c6">&nbsp;/// operands. &nbsp;Note that target opcodes are stored as</span><span class="c0"><br>00765 </span><span class="c0 c6">&nbsp;/// ~TargetOpcode in the node opcode field. &nbsp;The resultant node is returned.</span><span class="c0"><br>00766 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a59d2ddbf50166263a9a5bdbad559fad5">SelectNodeTo</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;TargetOpc,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT);<br>00767 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a59d2ddbf50166263a9a5bdbad559fad5">SelectNodeTo</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;TargetOpc,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op1);<br>00768 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a59d2ddbf50166263a9a5bdbad559fad5">SelectNodeTo</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;TargetOpc,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT,<br>00769 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op1,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op2);</span></p><p class="c20"><span class="c0">…............................</span></p><p class="c17"><span class="c0">00798 </span><span class="c0 c6">&nbsp;/// getMachineNode - These are used for target selectors to create a new node</span><span class="c0"><br>00799 </span><span class="c0 c6">&nbsp;/// with specified return type(s), MachineInstr opcode, and operands.</span><span class="c0"><br>00800 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00801 </span><span class="c0 c6">&nbsp;/// Note that getMachineNode returns the resultant node. &nbsp;If there is already</span><span class="c0"><br>00802 </span><span class="c0 c6">&nbsp;/// a node of the specified opcode and operands, it returns that node instead</span><span class="c0"><br>00803 </span><span class="c0 c6">&nbsp;/// of the current one.</span><span class="c0"><br>00804 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineSDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineSDNode.html">MachineSDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ad70be180b80a5767ac863b95b932dd31">getMachineNode</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opcode,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;dl,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT);<br>00805 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineSDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineSDNode.html">MachineSDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ad70be180b80a5767ac863b95b932dd31">getMachineNode</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opcode,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;dl,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT,<br>00806 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op1);<br>00807 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineSDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineSDNode.html">MachineSDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ad70be180b80a5767ac863b95b932dd31">getMachineNode</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opcode,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;dl,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT,<br>00808 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op1,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op2);</span></p><p class="c17"><span class="c0">…........................................</span></p><p class="c17"><span class="c0">00884 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a307e5150c6c85f43348d2b09a69d7591">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a307e5150c6c85f43348d2b09a69d7591">ReplaceAllUsesWith</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;From,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op);<br>00885 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a307e5150c6c85f43348d2b09a69d7591">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a307e5150c6c85f43348d2b09a69d7591">ReplaceAllUsesWith</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*From,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*To);<br>00886 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a307e5150c6c85f43348d2b09a69d7591">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a307e5150c6c85f43348d2b09a69d7591">ReplaceAllUsesWith</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*From, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;*To);</span></p><p class="c17"><span class="c0">01014 </span><span class="c0 c6">&nbsp;/// isBaseWithConstantOffset - Return true if the specified operand is an</span><span class="c0"><br>01015 </span><span class="c0 c6">&nbsp;/// ISD::ADD with a ConstantSDNode on the right-hand side, or if it is an</span><span class="c0"><br>01016 </span><span class="c0 c6">&nbsp;/// ISD::OR with a ConstantSDNode that is guaranteed to have the same</span><span class="c0"><br>01017 </span><span class="c0 c6">&nbsp;/// semantics as an ADD. &nbsp;This handles the equivalence:</span><span class="c0"><br>01018 </span><span class="c0 c6">&nbsp;/// &nbsp; &nbsp; X|Cst == X+Cst iff X&amp;Cst = 0.</span><span class="c0"><br>01019 &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a8c176b391d738c5667eafd17e784f556">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a8c176b391d738c5667eafd17e784f556">isBaseWithConstantOffset</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op) </span><span class="c0 c9">const</span><span class="c0">;<br>01020 <br>01021 </span><span class="c0 c6">&nbsp;/// isKnownNeverNan - Test whether the given SDValue is known to never be NaN.</span><span class="c0"><br>01022 &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a00153df2ba817963285bececcdc64bf4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a00153df2ba817963285bececcdc64bf4">isKnownNeverNaN</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op) </span><span class="c0 c9">const</span><span class="c0">;<br>01023 <br>01024 </span><span class="c0 c6">&nbsp;/// isKnownNeverZero - Test whether the given SDValue is known to never be</span><span class="c0"><br>01025 </span><span class="c0 c6">&nbsp;/// positive or negative Zero.</span><span class="c0"><br>01026 &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ae4d6cf635994acf48feb09663386b99b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ae4d6cf635994acf48feb09663386b99b">isKnownNeverZero</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op) </span><span class="c0 c9">const</span><span class="c0">;<br>01027 <br>01028 </span><span class="c0 c6">&nbsp;/// isEqualTo - Test whether two SDValues are known to compare equal. This</span><span class="c0"><br>01029 </span><span class="c0 c6">&nbsp;/// is true if they are the same value, or if one is negative zero and the</span><span class="c0"><br>01030 </span><span class="c0 c6">&nbsp;/// other positive zero.</span><span class="c0"><br>01031 &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a5078ac66ae1e1a0559586bf1daefd0eb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a5078ac66ae1e1a0559586bf1daefd0eb">isEqualTo</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;B) </span><span class="c0 c9">const</span><span class="c0">;<br>01032 <br>01033 </span><span class="c0 c6">&nbsp;/// UnrollVectorOp - Utility function used by legalize and lowering to</span><span class="c0"><br>01034 </span><span class="c0 c6">&nbsp;/// "unroll" a vector operation by splitting out the scalars and operating</span><span class="c0"><br>01035 </span><span class="c0 c6">&nbsp;/// on each element individually. &nbsp;If the ResNE is 0, fully unroll the vector</span><span class="c0"><br>01036 </span><span class="c0 c6">&nbsp;/// op. If ResNE is less than the width of the vector op, unroll up to ResNE.</span><span class="c0"><br>01037 </span><span class="c0 c6">&nbsp;/// If the &nbsp;ResNE is greater than the width of the vector op, unroll the</span><span class="c0"><br>01038 </span><span class="c0 c6">&nbsp;/// vector op and fill the end of the resulting vector with UNDEFS.</span><span class="c0"><br>01039 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a305a3a4874c597243cd5ba04af01339e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a305a3a4874c597243cd5ba04af01339e">UnrollVectorOp</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;ResNE = 0);<br>01040 <br>01041 </span><span class="c0 c6">&nbsp;/// isConsecutiveLoad - Return true if LD is loading 'Bytes' bytes from a</span><span class="c0"><br>01042 </span><span class="c0 c6">&nbsp;/// location that is 'Dist' units away from the location that the 'Base' load</span><span class="c0"><br>01043 </span><span class="c0 c6">&nbsp;/// is loading from.</span><span class="c0"><br>01044 &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a02ff977a0e8963fcbb3c448dcd3a81ea">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a02ff977a0e8963fcbb3c448dcd3a81ea">isConsecutiveLoad</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LoadSDNode.html">LoadSDNode</a></span><span class="c0">&nbsp;*LD,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LoadSDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LoadSDNode.html">LoadSDNode</a></span><span class="c0">&nbsp;*Base,<br>01045 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Bytes, </span><span class="c0 c8">int</span><span class="c0">&nbsp;Dist) </span><span class="c0 c9">const</span><span class="c0">;<br>01046 <br>01047 </span><span class="c0 c6">&nbsp;/// InferPtrAlignment - Infer alignment of a load / store address. Return 0 if</span><span class="c0"><br>01048 </span><span class="c0 c6">&nbsp;/// it cannot be inferred.</span><span class="c0"><br>01049 &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a2bf689949a7a6c115298d4f8e4f637cd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a2bf689949a7a6c115298d4f8e4f637cd">InferPtrAlignment</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Ptr) </span><span class="c0 c9">const</span><span class="c0">;<br>01050 <br>01051 </span><span class="c0 c9">private</span><span class="c0">:<br>01052 &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;RemoveNodeFromCSEMaps(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>01053 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;AddModifiedNodeToCSEMaps(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>01054 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*FindModifiedNodeSlot(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op, </span><span class="c0 c8">void</span><span class="c0">&nbsp;*&amp;InsertPos);<br>01055 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*FindModifiedNodeSlot(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op1,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op2,<br>01056 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;*&amp;InsertPos);<br>01057 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*FindModifiedNodeSlot(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;*Ops, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;NumOps,<br>01058 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;*&amp;InsertPos);<br>01059 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*UpdadeDebugLocOnMergedSDNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;loc);<br>01060 <br>01061 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;DeleteNodeNotInCSEMaps(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>01062 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;DeallocateNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>01063 <br>01064 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;getEVTAlignment(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;MemoryVT) </span><span class="c0 c9">const</span><span class="c0">;<br>01065 <br>01066 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;allnodes_clear();<br>01067 <br>01068 </span><span class="c0 c6">&nbsp;/// VTList - List of non-single value types.</span><span class="c0"><br>01069 &nbsp;std::vector&lt;SDVTList&gt; VTList;<br>01070 <br>01071 </span><span class="c0 c6">&nbsp;/// CondCodeNodes - Maps to auto-CSE operations.</span><span class="c0"><br>01072 &nbsp;std::vector&lt;CondCodeSDNode*&gt; CondCodeNodes;<br>01073 <br>01074 &nbsp; std::vector&lt;SDNode*&gt; ValueTypeNodes;<br>01075 &nbsp; std::map&lt;EVT, SDNode*, EVT::compareRawBits&gt; ExtendedValueTypeNodes;<br>01076 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StringMap.html">StringMap&lt;SDNode*&gt;</a></span><span class="c0">&nbsp;ExternalSymbols;<br>01077 <br>01078 &nbsp; std::map&lt;std::pair&lt;std::string, unsigned char&gt;,</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">*&gt; TargetExternalSymbols;<br>01079 };</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">From the above code and comments it can be seen that </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">SelectionDAG</a></span><span class="c5">&nbsp;provides lots of target-independent methods to create SDNode of various kinds and retrieves/computes useful information among the nodes in the SelectionDag graph. There are also update and replace methods provided in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">SelectionDAG</a></span><span class="c5">&nbsp;class. &nbsp;Most of these methods are defined in SelectionDAG.cpp. Note that </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">SelectionDAG</a></span><span class="c5">&nbsp;and its node type </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c5">&nbsp;are designed in a way that is capable of storing both target-independent and target-specific information. For example the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a3aec493317f35f8896e4a91223fa492e">isTargetOpcode</a></span><span class="c5">() and </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a7ef138746b04be6d07091b9ba49d74da">isMachineOpcode</a></span><span class="c0">()</span><span class="c5">&nbsp;methods in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c5">&nbsp;class can be used to determine if an opcode is target opcode or machine opcode (target independent). This is because the same type, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110">NodeType</a></span><span class="c5">, is used to represent both the opcode of a real target and the one of a machine instruction, but with separate range. The following are a few example methods for creating various kinds of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c5">&nbsp;objects and organizing them in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">SelectionDAG</a></span><span class="c5">.</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">01237</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">SelectionDAG::getBasicBlock</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*MBB) {<br>01238 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html">FoldingSetNodeID</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a></span><span class="c0">;<br>01239 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/SelectionDAG_8cpp.html#a54a4b64a11f36e53ffa3c94cf0b2f4bd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/SelectionDAG_8cpp.html#a54a4b64a11f36e53ffa3c94cf0b2f4bd">AddNodeIDNode</a></span><span class="c0">(ID,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">ISD::BasicBlock</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a196c23d6cb4d768d037970f1f35bbf66">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca62a222acce6360abd2726719fabc2797">MVT::Other</a></span><span class="c0">), 0, 0);<br>01240 &nbsp; ID.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html#a626e5a2c04c89e2ddd697e424ec68391">AddPointer</a></span><span class="c0">(MBB);<br>01241 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;*IP = 0;<br>01242 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*E = CSEMap.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSet.html#ac07a5ece2d24d4a9a27df0a5f1b2c3d9">FindNodeOrInsertPos</a></span><span class="c0">(ID, IP))<br>01243 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(E, 0);<br>01244 <br>01245 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N = </span><span class="c0 c9">new</span><span class="c0">&nbsp;(NodeAllocator)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BasicBlockSDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BasicBlockSDNode.html">BasicBlockSDNode</a></span><span class="c0">(MBB);<br>01246 &nbsp; CSEMap.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetImpl.html#aa2f6105807179b9c4afa941753c3d8f8">InsertNode</a></span><span class="c0">(N, IP);<br>01247 &nbsp; AllNodes.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html#aca2e7932b849b240830f8b39d060891a">push_back</a></span><span class="c0">(N);<br>01248 &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(N, 0);<br>01249 }</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9dafbd92c206adf9eea1276e1537295e">01089</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9dafbd92c206adf9eea1276e1537295e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9dafbd92c206adf9eea1276e1537295e">SelectionDAG::getGlobalAddress</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GlobalValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GlobalValue.html">GlobalValue</a></span><span class="c0">&nbsp;*GV,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;DL,<br>01090 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT, int64_t Offset,<br>01091 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;isTargetGA,<br>01092 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;TargetFlags) {<br>01093 &nbsp; assert((TargetFlags == 0 || isTargetGA) &amp;&amp;<br>01094 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"Cannot set target flags on target-independent globals"</span><span class="c0">);<br>01095 <br>01096 &nbsp; </span><span class="c0 c6">// Truncate (with sign-extension) the offset value to the pointer size.</span><span class="c0"><br>01097 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;BitWidth = TLI.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a725d20a2d00a8b54cc01e6f02cb31522">getPointerTy</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#a423166b2b5d1010162dde0003e5ad09c">getSizeInBits</a></span><span class="c0">();<br>01098 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(BitWidth &lt; 64)<br>01099 &nbsp; &nbsp; Offset =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a0fa35cc75a8db018afab731325966024">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a0fa35cc75a8db018afab731325966024">SignExtend64</a></span><span class="c0">(Offset, BitWidth);<br>01100 <br>01101 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GlobalVariable.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GlobalVariable.html">GlobalVariable</a></span><span class="c0">&nbsp;*GVar =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a8d8db3a5b2508f7086ef2d43036007b3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a8d8db3a5b2508f7086ef2d43036007b3">dyn_cast</a></span><span class="c0">&lt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GlobalVariable.html">GlobalVariable</a></span><span class="c0">&gt;(GV);<br>01102 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!GVar) {<br>01103 &nbsp; &nbsp; </span><span class="c0 c6">// If GV is an alias then use the aliasee for determining thread-localness.</span><span class="c0"><br>01104 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GlobalAlias.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GlobalAlias.html">GlobalAlias</a></span><span class="c0">&nbsp;*GA = dyn_cast&lt;GlobalAlias&gt;(GV))<br>01105 &nbsp; &nbsp; &nbsp; GVar = dyn_cast_or_null&lt;GlobalVariable&gt;(GA-&gt;resolveAliasedGlobal(</span><span class="c0 c9">false</span><span class="c0">));<br>01106 &nbsp; }<br>01107 <br>01108 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opc;<br>01109 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(GVar &amp;&amp; GVar-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GlobalVariable.html#ab475a5d7e2ef20e13658adefb8c1be13">isThreadLocal</a></span><span class="c0">())<br>01110 &nbsp; &nbsp; Opc = isTargetGA ?</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110afc9ad7857b7faf49dcde3dcf434e22a6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110afc9ad7857b7faf49dcde3dcf434e22a6">ISD::TargetGlobalTLSAddress</a></span><span class="c0">&nbsp;:</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a49f1172c7014cc4fa3570792e6834e2c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a49f1172c7014cc4fa3570792e6834e2c">ISD::GlobalTLSAddress</a></span><span class="c0">;<br>01111 &nbsp; </span><span class="c0 c7">else</span><span class="c0"><br>01112 &nbsp; &nbsp; Opc = isTargetGA ?</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a87b8176af163ee944af127081d24f4a2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a87b8176af163ee944af127081d24f4a2">ISD::TargetGlobalAddress</a></span><span class="c0">&nbsp;:</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a30316f8f9985260c49d7c26bc70a6cad">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a30316f8f9985260c49d7c26bc70a6cad">ISD::GlobalAddress</a></span><span class="c0">;<br>01113 <br>01114 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html">FoldingSetNodeID</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a></span><span class="c0">;<br>01115 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/SelectionDAG_8cpp.html#a54a4b64a11f36e53ffa3c94cf0b2f4bd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/SelectionDAG_8cpp.html#a54a4b64a11f36e53ffa3c94cf0b2f4bd">AddNodeIDNode</a></span><span class="c0">(ID, Opc,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a196c23d6cb4d768d037970f1f35bbf66">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a></span><span class="c0">(VT), 0, 0);<br>01116 &nbsp; ID.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html#a626e5a2c04c89e2ddd697e424ec68391">AddPointer</a></span><span class="c0">(GV);<br>01117 &nbsp; ID.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html#a1012a025613336baf7ad36a46d18ac36">AddInteger</a></span><span class="c0">(Offset);<br>01118 &nbsp; ID.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html#a1012a025613336baf7ad36a46d18ac36">AddInteger</a></span><span class="c0">(TargetFlags);<br>01119 &nbsp; ID.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html#a1012a025613336baf7ad36a46d18ac36">AddInteger</a></span><span class="c0">(GV-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GlobalValue.html#ad60ec7475b0ffe7fc1f68a8019780643">getType</a></span><span class="c0">()-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PointerType.html#a921061a57ec3cfbaf6422f09f7d79fc3">getAddressSpace</a></span><span class="c0">());<br>01120 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;*IP = 0;<br>01121 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*E = CSEMap.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSet.html#ac07a5ece2d24d4a9a27df0a5f1b2c3d9">FindNodeOrInsertPos</a></span><span class="c0">(ID, IP))<br>01122 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(E, 0);<br>01123 <br>01124 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N = </span><span class="c0 c9">new</span><span class="c0">&nbsp;(NodeAllocator)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GlobalAddressSDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GlobalAddressSDNode.html">GlobalAddressSDNode</a></span><span class="c0">(Opc, DL, GV, VT,<br>01125 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Offset, TargetFlags);<br>01126 &nbsp; CSEMap.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetImpl.html#aa2f6105807179b9c4afa941753c3d8f8">InsertNode</a></span><span class="c0">(N, IP);<br>01127 &nbsp; AllNodes.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html#aca2e7932b849b240830f8b39d060891a">push_back</a></span><span class="c0">(N);<br>01128 &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(N, 0);<br>01129 }<br>01130 <br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#acb59cbd8f4a8c1cf820b2b540aebdac1">01131</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#acb59cbd8f4a8c1cf820b2b540aebdac1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#acb59cbd8f4a8c1cf820b2b540aebdac1">SelectionDAG::getFrameIndex</a></span><span class="c0">(</span><span class="c0 c8">int</span><span class="c0">&nbsp;FI,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;isTarget) {<br>01132 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opc = isTarget ?</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aa84894f4966964ef9fc79f9515a6c875">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aa84894f4966964ef9fc79f9515a6c875">ISD::TargetFrameIndex</a></span><span class="c0">&nbsp;:</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">ISD::FrameIndex</a></span><span class="c0">;<br>01133 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html">FoldingSetNodeID</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a></span><span class="c0">;<br>01134 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/SelectionDAG_8cpp.html#a54a4b64a11f36e53ffa3c94cf0b2f4bd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/SelectionDAG_8cpp.html#a54a4b64a11f36e53ffa3c94cf0b2f4bd">AddNodeIDNode</a></span><span class="c0">(ID, Opc,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a196c23d6cb4d768d037970f1f35bbf66">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a></span><span class="c0">(VT), 0, 0);<br>01135 &nbsp; ID.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html#a1012a025613336baf7ad36a46d18ac36">AddInteger</a></span><span class="c0">(FI);<br>01136 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;*IP = 0;<br>01137 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*E = CSEMap.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSet.html#ac07a5ece2d24d4a9a27df0a5f1b2c3d9">FindNodeOrInsertPos</a></span><span class="c0">(ID, IP))<br>01138 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(E, 0);<br>01139 <br>01140 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N = </span><span class="c0 c9">new</span><span class="c0">&nbsp;(NodeAllocator)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FrameIndexSDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FrameIndexSDNode.html">FrameIndexSDNode</a></span><span class="c0">(FI, VT, isTarget);<br>01141 &nbsp; CSEMap.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetImpl.html#aa2f6105807179b9c4afa941753c3d8f8">InsertNode</a></span><span class="c0">(N, IP);<br>01142 &nbsp; AllNodes.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html#aca2e7932b849b240830f8b39d060891a">push_back</a></span><span class="c0">(N);<br>01143 &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(N, 0);<br>01144 }</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#acb59cbd8f4a8c1cf820b2b540aebdac1">01131</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#acb59cbd8f4a8c1cf820b2b540aebdac1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#acb59cbd8f4a8c1cf820b2b540aebdac1">SelectionDAG::getFrameIndex</a></span><span class="c0">(</span><span class="c0 c8">int</span><span class="c0">&nbsp;FI,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;isTarget) {<br>01132 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opc = isTarget ?</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aa84894f4966964ef9fc79f9515a6c875">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aa84894f4966964ef9fc79f9515a6c875">ISD::TargetFrameIndex</a></span><span class="c0">&nbsp;:</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a4b437632fd9b97dd36010d85eb363efe">ISD::FrameIndex</a></span><span class="c0">;<br>01133 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html">FoldingSetNodeID</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a></span><span class="c0">;<br>01134 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/SelectionDAG_8cpp.html#a54a4b64a11f36e53ffa3c94cf0b2f4bd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/SelectionDAG_8cpp.html#a54a4b64a11f36e53ffa3c94cf0b2f4bd">AddNodeIDNode</a></span><span class="c0">(ID, Opc,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a196c23d6cb4d768d037970f1f35bbf66">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a></span><span class="c0">(VT), 0, 0);<br>01135 &nbsp; ID.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html#a1012a025613336baf7ad36a46d18ac36">AddInteger</a></span><span class="c0">(FI);<br>01136 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;*IP = 0;<br>01137 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*E = CSEMap.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSet.html#ac07a5ece2d24d4a9a27df0a5f1b2c3d9">FindNodeOrInsertPos</a></span><span class="c0">(ID, IP))<br>01138 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(E, 0);<br>01139 <br>01140 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N = </span><span class="c0 c9">new</span><span class="c0">&nbsp;(NodeAllocator)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FrameIndexSDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FrameIndexSDNode.html">FrameIndexSDNode</a></span><span class="c0">(FI, VT, isTarget);<br>01141 &nbsp; CSEMap.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetImpl.html#aa2f6105807179b9c4afa941753c3d8f8">InsertNode</a></span><span class="c0">(N, IP);<br>01142 &nbsp; AllNodes.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html#aca2e7932b849b240830f8b39d060891a">push_back</a></span><span class="c0">(N);<br>01143 &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(N, 0);<br>01144 }<br>01145 <br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a1cf8a7e0935ba8cdf791d07ce1101acb">01146</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a1cf8a7e0935ba8cdf791d07ce1101acb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a1cf8a7e0935ba8cdf791d07ce1101acb">SelectionDAG::getJumpTable</a></span><span class="c0">(</span><span class="c0 c8">int</span><span class="c0">&nbsp;JTI,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;isTarget,<br>01147 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;TargetFlags) {<br>01148 &nbsp; assert((TargetFlags == 0 || isTarget) &amp;&amp;<br>01149 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"Cannot set target flags on target-independent jump tables"</span><span class="c0">);<br>01150 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opc = isTarget ?</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a603c0651ff8c3a929c5e1d8b9a8f14cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a603c0651ff8c3a929c5e1d8b9a8f14cb">ISD::TargetJumpTable</a></span><span class="c0">&nbsp;:</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a0c70100db6ddc0b37b56feb242145cf4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a0c70100db6ddc0b37b56feb242145cf4">ISD::JumpTable</a></span><span class="c0">;<br>01151 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html">FoldingSetNodeID</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a></span><span class="c0">;<br>01152 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/SelectionDAG_8cpp.html#a54a4b64a11f36e53ffa3c94cf0b2f4bd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/SelectionDAG_8cpp.html#a54a4b64a11f36e53ffa3c94cf0b2f4bd">AddNodeIDNode</a></span><span class="c0">(ID, Opc,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a196c23d6cb4d768d037970f1f35bbf66">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a196c23d6cb4d768d037970f1f35bbf66">getVTList</a></span><span class="c0">(VT), 0, 0);<br>01153 &nbsp; ID.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html#a1012a025613336baf7ad36a46d18ac36">AddInteger</a></span><span class="c0">(JTI);<br>01154 &nbsp; ID.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetNodeID.html#a1012a025613336baf7ad36a46d18ac36">AddInteger</a></span><span class="c0">(TargetFlags);<br>01155 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;*IP = 0;<br>01156 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*E = CSEMap.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSet.html#ac07a5ece2d24d4a9a27df0a5f1b2c3d9">FindNodeOrInsertPos</a></span><span class="c0">(ID, IP))<br>01157 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(E, 0);<br>01158 <br>01159 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N = </span><span class="c0 c9">new</span><span class="c0">&nbsp;(NodeAllocator)</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1JumpTableSDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1JumpTableSDNode.html">JumpTableSDNode</a></span><span class="c0">(JTI, VT, isTarget,<br>01160 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TargetFlags);<br>01161 &nbsp; CSEMap.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FoldingSetImpl.html#aa2f6105807179b9c4afa941753c3d8f8">InsertNode</a></span><span class="c0">(N, IP);<br>01162 &nbsp; AllNodes.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1ilist.html#aca2e7932b849b240830f8b39d060891a">push_back</a></span><span class="c0">(N);<br>01163 &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(N, 0);<br>01164 }</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">Note that the following function members in </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">SelectionDAG</a></span><span class="c5">&nbsp;rely on dedicated classes (i.e.,</span><span class="c0">SelectionDAGLegalize, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DAGTypeLegalizer.html">DAGTypeLegalizer</a></span><span class="c5">&nbsp;and </span><span class="c0">DAGCombiner defined in </span><span class="c5">LegalizeDAG.cpp, LegalizeTypes.cpp and DAGCombiner.cpp, respectively) to perform the corresponding operations. In particular, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">SelectionDAG</a></span><span class="c0">::Legalize(), </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#affe59e12b70bcd9f5476f7ab289fa84a">SelectionDAG::LegalizeTypes</a></span><span class="c0">() and </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#abe7bd3138ea3703376dc622650b20ff3">SelectionDAG::Combine</a></span><span class="c5">() corresponds to the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">SelectionDAG</a></span><span class="c5">&nbsp;operations (legalizing opcode/operation with native support, legalize type with native support and DAG optimization, respectively) described in part 7.2.3.</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">SelectionDAG</a></span><span class="c0">::Legalize() is defined in </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/LegalizeDAG_8cpp_source.html">LegalizeDAG.cpp</a></span><span class="c5 c25">:</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a6f1e49f6f347835aa6b5a7423dd364d1">03764</a></span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">SelectionDAG</a></span><span class="c0">::Legalize() {<br>03765 </span><span class="c0 c6">&nbsp;/// run - This is the main entry point to this class.</span><span class="c0"><br>03766 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>03767 &nbsp;SelectionDAGLegalize(*this).LegalizeDAG();<br>03768 }</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#affe59e12b70bcd9f5476f7ab289fa84a">SelectionDAG::LegalizeTypes</a></span><span class="c0">() is defined in </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/LegalizeTypes_8cpp_source.html">LegalizeTypes.cpp</a></span><span class="c5 c25">:</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#affe59e12b70bcd9f5476f7ab289fa84a">01146</a></span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#affe59e12b70bcd9f5476f7ab289fa84a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#affe59e12b70bcd9f5476f7ab289fa84a">SelectionDAG::LegalizeTypes</a></span><span class="c0">() {<br>01147 &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DAGTypeLegalizer.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DAGTypeLegalizer.html">DAGTypeLegalizer</a></span><span class="c0">(*this).</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DAGTypeLegalizer.html#a39cafb39798d9b0f3b611b9ee0fff149">run</a></span><span class="c0">();<br>01148 }</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#abe7bd3138ea3703376dc622650b20ff3">SelectionDAG::Combine</a></span><span class="c5">() is defined in </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/DAGCombiner_8cpp_source.html">DAGCombiner.cpp</a></span><span class="c5 c25">:</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#abe7bd3138ea3703376dc622650b20ff3">09955</a></span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#abe7bd3138ea3703376dc622650b20ff3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#abe7bd3138ea3703376dc622650b20ff3">SelectionDAG::Combine</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa6d856e4879bb775617f8c3634773b7a">CombineLevel</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">Level</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">AliasAnalysis</a></span><span class="c0">&nbsp;&amp;AA,<br>09956 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a></span><span class="c0">&nbsp;OptLevel) {<br>09957 </span><span class="c0 c6">&nbsp;/// run - This is the main entry point to this class.</span><span class="c0"><br>09959 &nbsp;DAGCombiner(*</span><span class="c0 c9">this</span><span class="c0">, AA, OptLevel).Run(Level);<br>09960 }</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c0">The target dependent portion of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">SelectionDAG</a></span><span class="c0">&nbsp;class, also the relevant classes such as </span><span class="c0 c4">SelectionDAGLegalize,</span><span class="c0">&nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DAGTypeLegalizer.html">DAGTypeLegalizer</a></span><span class="c0">&nbsp;and DAGCombiner, is handled by the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c0">&nbsp;class member </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c0">&nbsp;&amp;TLI; in these classes. This is clear by looking at the following code defined in </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/LegalizeDAG_8cpp_source.html">LegalizeDAG.cpp</a></span><span class="c0">:</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c0">00695 </span><span class="c0 c8">void</span><span class="c0">&nbsp;SelectionDAGLegalize::LegalizeStoreOps(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Node) {<br>00696 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StoreSDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StoreSDNode.html">StoreSDNode</a></span><span class="c0">&nbsp;*ST = cast&lt;StoreSDNode&gt;(Node);<br>00697 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Chain = ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#ae3cb6fbf8c8cb79e10ac61bd98c85211">getChain</a></span><span class="c0">();<br>00698 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Ptr = ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StoreSDNode.html#aec453733fbb9f24036960fdc6b3b4b46">getBasePtr</a></span><span class="c0">();<br>00699 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;dl = Node-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a630d6793e4444e4996dfa80f1fce18c8">getDebugLoc</a></span><span class="c0">();<br>00700 <br>00701 &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Alignment = ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#a4f68cd016138440f215ad80c1d6c1e04">getAlignment</a></span><span class="c0">();<br>00702 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;isVolatile = ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#acd3bb9ee2ec53fa4be1fdf155b0b5a17">isVolatile</a></span><span class="c0">();<br>00703 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;isNonTemporal = ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#a967ffaf77f64a5deb1e96951e4224112">isNonTemporal</a></span><span class="c0">();<br>00704 <br>00705 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StoreSDNode.html#a272cb283a679298b7e991db7daf823ed">isTruncatingStore</a></span><span class="c0">()) {<br>00706 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*OptStore = OptimizeFloatStore(ST).getNode()) {<br>00707 &nbsp; &nbsp; &nbsp; &nbsp; ReplaceNode(ST, OptStore);<br>00708 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">;<br>00709 &nbsp; &nbsp; &nbsp; }<br>00710 <br>00711 &nbsp; &nbsp; &nbsp; {<br>00712 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">&nbsp;= ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StoreSDNode.html#a7f9820a84907a5aa530d4dc36f841c76">getValue</a></span><span class="c0">();<br>00713 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html">MVT</a></span><span class="c0">&nbsp;VT = Value.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">getSimpleValueType</a></span><span class="c0">();<br>00714 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">switch</span><span class="c0">&nbsp;(TLI.getOperationAction(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a047178c3b2c6a5df40ae22a407b8aca9">ISD::STORE</a></span><span class="c0">, VT)) {<br>00715 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">default</span><span class="c0">:</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></span><span class="c0">(</span><span class="c0 c14">"This action is not supported yet!"</span><span class="c0">);<br>00716 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">case</span><span class="c0">&nbsp;TargetLowering::Legal:<br>00717 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// If this is an unaligned store and the target doesn't support it,</span><span class="c0"><br>00718 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// expand it.</span><span class="c0"><br>00719 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!TLI.allowsUnalignedMemoryAccesses(ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#a7cead3a2a7771e61083bcc6959915a13">getMemoryVT</a></span><span class="c0">())) {<br>00720 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">Type</a></span><span class="c0">&nbsp;*Ty = ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#a7cead3a2a7771e61083bcc6959915a13">getMemoryVT</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html#a226345d0c8262e9469d30a993d1656ff">getTypeForEVT</a></span><span class="c0">(*DAG.getContext());<br>00721 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;ABIAlignment= TLI.getDataLayout()-&gt;getABITypeAlignment(Ty);<br>00722 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#a4f68cd016138440f215ad80c1d6c1e04">getAlignment</a></span><span class="c0">() &lt; ABIAlignment)<br>00723 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/LegalizeDAG_8cpp.html#ab4ce9223ee5e6366bac778f8d354beb4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LegalizeDAG_8cpp.html#ab4ce9223ee5e6366bac778f8d354beb4">ExpandUnalignedStore</a></span><span class="c0">(cast&lt;StoreSDNode&gt;(Node),<br>00724 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DAG, TLI, </span><span class="c0 c9">this</span><span class="c0">);<br>00725 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>00726 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">break</span><span class="c0">;<br>00727 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">case</span><span class="c0">&nbsp;TargetLowering::Custom: {<br>00728 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Res = TLI.LowerOperation(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(Node, 0), DAG);<br>00729 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(Res.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">())<br>00730 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ReplaceNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(Node, 0), Res);<br>00731 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">;<br>00732 &nbsp; &nbsp; &nbsp; &nbsp; }<br>00733 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">case</span><span class="c0">&nbsp;TargetLowering::Promote: {<br>00734 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html">MVT</a></span><span class="c0">&nbsp;NVT = TLI.getTypeToPromoteTo(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a047178c3b2c6a5df40ae22a407b8aca9">ISD::STORE</a></span><span class="c0">, VT);<br>00735 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert(NVT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#a423166b2b5d1010162dde0003e5ad09c">getSizeInBits</a></span><span class="c0">() == VT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#a423166b2b5d1010162dde0003e5ad09c">getSizeInBits</a></span><span class="c0">() &amp;&amp;<br>00736 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"Can only promote stores to same size type"</span><span class="c0">);<br>00737 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Value = DAG.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a412ddf522b53f07690a86bffba1278e7">ISD::BITCAST</a></span><span class="c0">, dl, NVT, Value);<br>00738 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Result =<br>00739 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DAG.getStore(Chain, dl, Value, Ptr,<br>00740 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#a2fa8491ab36125d7f5dd38d3a4868934">getPointerInfo</a></span><span class="c0">(), isVolatile,<br>00741 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;isNonTemporal, Alignment);<br>00742 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ReplaceNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(Node, 0), Result);<br>00743 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">break</span><span class="c0">;<br>00744 &nbsp; &nbsp; &nbsp; &nbsp; }<br>00745 &nbsp; &nbsp; &nbsp; &nbsp; }<br>00746 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">;<br>00747 &nbsp; &nbsp; &nbsp; }<br>00748 &nbsp; &nbsp; } </span><span class="c0 c7">else</span><span class="c0">&nbsp;{<br>00749 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Value = ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StoreSDNode.html#a7f9820a84907a5aa530d4dc36f841c76">getValue</a></span><span class="c0">();<br>00750 <br>00751 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;StVT = ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#a7cead3a2a7771e61083bcc6959915a13">getMemoryVT</a></span><span class="c0">();<br>00752 &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;StWidth = StVT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html#a8cca25ddb3be86ad23567dc8d36dacd3">getSizeInBits</a></span><span class="c0">();<br>00753 <br>00754 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(StWidth != StVT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html#a9b1d12f467b88f8da64a1d6841910193">getStoreSizeInBits</a></span><span class="c0">()) {<br>00755 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Promote to a byte-sized store with upper bits zero if not</span><span class="c0"><br>00756 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// storing an integral number of bytes. &nbsp;For example, promote</span><span class="c0"><br>00757 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// TRUNCSTORE:i1 X -&gt; TRUNCSTORE:i8 (and X, 1)</span><span class="c0"><br>00758 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;NVT = EVT::getIntegerVT(*DAG.getContext(),<br>00759 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; StVT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html#a9b1d12f467b88f8da64a1d6841910193">getStoreSizeInBits</a></span><span class="c0">());<br>00760 &nbsp; &nbsp; &nbsp; &nbsp; Value = DAG.getZeroExtendInReg(Value, dl, StVT);<br>00761 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Result =<br>00762 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DAG.getTruncStore(Chain, dl, Value, Ptr, ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#a2fa8491ab36125d7f5dd38d3a4868934">getPointerInfo</a></span><span class="c0">(),<br>00763 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NVT, isVolatile, isNonTemporal, Alignment);<br>00764 &nbsp; &nbsp; &nbsp; &nbsp; ReplaceNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(Node, 0), Result);<br>00765 &nbsp; &nbsp; &nbsp; } </span><span class="c0 c7">else</span><span class="c0">&nbsp;</span><span class="c0 c7">if</span><span class="c0">&nbsp;(StWidth &amp; (StWidth - 1)) {<br>00766 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// If not storing a power-of-2 number of bits, expand as two stores.</span><span class="c0"><br>00767 &nbsp; &nbsp; &nbsp; &nbsp; assert(!StVT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html#a73f7c824cad61a47c21bf6d652ae2fd7">isVector</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"Unsupported truncstore!"</span><span class="c0">);<br>00768 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;RoundWidth = 1 &lt;&lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">Log2_32</a></span><span class="c0">(StWidth);<br>00769 &nbsp; &nbsp; &nbsp; &nbsp; assert(RoundWidth &lt; StWidth);<br>00770 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;ExtraWidth = StWidth - RoundWidth;<br>00771 &nbsp; &nbsp; &nbsp; &nbsp; assert(ExtraWidth &lt; RoundWidth);<br>00772 &nbsp; &nbsp; &nbsp; &nbsp; assert(!(RoundWidth % 8) &amp;&amp; !(ExtraWidth % 8) &amp;&amp;<br>00773 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"Store size not an integral number of bytes!"</span><span class="c0">);<br>00774 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;RoundVT = EVT::getIntegerVT(*DAG.getContext(), RoundWidth);<br>00775 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;ExtraVT = EVT::getIntegerVT(*DAG.getContext(), ExtraWidth);<br>00776 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1HexagonISD.html#a413d2f810f250c07b346302e731f47bea144f7e8227378979bf13646688174ed9">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1HexagonISD.html#a413d2f810f250c07b346302e731f47bea144f7e8227378979bf13646688174ed9">Lo</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1HexagonISD.html#a413d2f810f250c07b346302e731f47beab53c716337bbeea9ba39b5fa32d60303">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1HexagonISD.html#a413d2f810f250c07b346302e731f47beab53c716337bbeea9ba39b5fa32d60303">Hi</a></span><span class="c0">;<br>00777 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;IncrementSize;<br>00778 <br>00779 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(TLI.isLittleEndian()) {</span><span><br>0</span><span class="c0">0780 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// TRUNCSTORE:i24 X -&gt; TRUNCSTORE:i16 X, TRUNCSTORE@+2:i8 (srl X, 16)</span><span class="c0"><br>00781 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Store the bottom RoundWidth bits.</span><span class="c0"><br>00782 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Lo = DAG.getTruncStore(Chain, dl, Value, Ptr, ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#a2fa8491ab36125d7f5dd38d3a4868934">getPointerInfo</a></span><span class="c0">(),<br>00783 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RoundVT,<br>00784 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;isVolatile, isNonTemporal, Alignment);<br>00785 <br>00786 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Store the remaining ExtraWidth bits.</span><span class="c0"><br>00787 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IncrementSize = RoundWidth / 8;<br>00788 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Ptr = DAG.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9acfcf145f2788bf340ff3f3098bc54909">ISD::ADD</a></span><span class="c0">, dl, Ptr.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a></span><span class="c0">(), Ptr,<br>00789 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DAG.getIntPtrConstant(IncrementSize));<br>00790 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Hi = DAG.getNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a></span><span class="c0">, dl, Value.getValueType(), Value,<br>00791 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DAG.getConstant(RoundWidth,<br>00792 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TLI.getShiftAmountTy(Value.getValueType())));<br>00793 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Hi = DAG.getTruncStore(Chain, dl, Hi, Ptr,<br>00794 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#a2fa8491ab36125d7f5dd38d3a4868934">getPointerInfo</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MachinePointerInfo.html#aa7b903b38006dd4cb8fcf8854af5b6b9">getWithOffset</a></span><span class="c0">(IncrementSize),<br>00795 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ExtraVT, isVolatile, isNonTemporal,<br>00796 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af36d7e69ab16b64b2e3a48c83aa9f0f6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af36d7e69ab16b64b2e3a48c83aa9f0f6">MinAlign</a></span><span class="c0">(Alignment, IncrementSize));<br>00797 &nbsp; &nbsp; &nbsp; &nbsp; } </span><span class="c0 c7">else</span><span class="c0">&nbsp;{<br>00798 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Big endian - avoid unaligned stores.</span><span class="c0"><br>00799 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// TRUNCSTORE:i24 X -&gt; TRUNCSTORE:i16 (srl X, 8), TRUNCSTORE@+2:i8 X</span><span class="c0"><br>00800 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Store the top RoundWidth bits.</span><span class="c0"><br>00801 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Hi = DAG.getNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a3c6553c8acebe1b57c211ee45e2d8f98">ISD::SRL</a></span><span class="c0">, dl, Value.getValueType(), Value,<br>00802 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DAG.getConstant(ExtraWidth,<br>00803 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TLI.getShiftAmountTy(Value.getValueType())));<br>00804 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Hi = DAG.getTruncStore(Chain, dl, Hi, Ptr, ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#a2fa8491ab36125d7f5dd38d3a4868934">getPointerInfo</a></span><span class="c0">(),<br>00805 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RoundVT, isVolatile, isNonTemporal, Alignment);<br>00806 <br>00807 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Store the remaining ExtraWidth bits.</span><span class="c0"><br>00808 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IncrementSize = RoundWidth / 8;<br>00809 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Ptr = DAG.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86ISelDAGToDAG_8cpp.html#afc4e10b4f2ab2d548ab80b30f3b712e9acfcf145f2788bf340ff3f3098bc54909">ISD::ADD</a></span><span class="c0">, dl, Ptr.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a></span><span class="c0">(), Ptr,<br>00810 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DAG.getIntPtrConstant(IncrementSize));<br>00811 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Lo = DAG.getTruncStore(Chain, dl, Value, Ptr,<br>00812 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#a2fa8491ab36125d7f5dd38d3a4868934">getPointerInfo</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MachinePointerInfo.html#aa7b903b38006dd4cb8fcf8854af5b6b9">getWithOffset</a></span><span class="c0">(IncrementSize),<br>00813 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ExtraVT, isVolatile, isNonTemporal,<br>00814 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af36d7e69ab16b64b2e3a48c83aa9f0f6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af36d7e69ab16b64b2e3a48c83aa9f0f6">MinAlign</a></span><span class="c0">(Alignment, IncrementSize));<br>00815 &nbsp; &nbsp; &nbsp; &nbsp; }<br>00816 <br>00817 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// The order of the stores doesn't matter.</span><span class="c0"><br>00818 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Result = DAG.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad469508535ce2082a1ab1f0e429187b8">ISD::TokenFactor</a></span><span class="c0">, dl, MVT::Other, Lo, Hi);<br>00819 &nbsp; &nbsp; &nbsp; &nbsp; ReplaceNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(Node, 0), Result);<br>00820 &nbsp; &nbsp; &nbsp; } </span><span class="c0 c7">else</span><span class="c0">&nbsp;{<br>00821 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">switch</span><span class="c0">&nbsp;(TLI.getTruncStoreAction(ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StoreSDNode.html#a7f9820a84907a5aa530d4dc36f841c76">getValue</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a8bc8606044f2c3cdb6271c0378e0f9cf">getSimpleValueType</a></span><span class="c0">(),<br>00822 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; StVT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html#a5b45953b758fdfe88452530f7d8371bc">getSimpleVT</a></span><span class="c0">())) {<br>00823 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">default</span><span class="c0">:</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></span><span class="c0">(</span><span class="c0 c14">"This action is not supported yet!"</span><span class="c0">);<br>00824 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">case</span><span class="c0">&nbsp;TargetLowering::Legal:<br>00825 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// If this is an unaligned store and the target doesn't support it,</span><span class="c0"><br>00826 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// expand it.</span><span class="c0"><br>00827 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!TLI.allowsUnalignedMemoryAccesses(ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#a7cead3a2a7771e61083bcc6959915a13">getMemoryVT</a></span><span class="c0">())) {<br>00828 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Type.html">Type</a></span><span class="c0">&nbsp;*Ty = ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#a7cead3a2a7771e61083bcc6959915a13">getMemoryVT</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html#a226345d0c8262e9469d30a993d1656ff">getTypeForEVT</a></span><span class="c0">(*DAG.getContext());<br>00829 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;ABIAlignment= TLI.getDataLayout()-&gt;getABITypeAlignment(Ty);<br>00830 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#a4f68cd016138440f215ad80c1d6c1e04">getAlignment</a></span><span class="c0">() &lt; ABIAlignment)<br>00831 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/LegalizeDAG_8cpp.html#ab4ce9223ee5e6366bac778f8d354beb4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LegalizeDAG_8cpp.html#ab4ce9223ee5e6366bac778f8d354beb4">ExpandUnalignedStore</a></span><span class="c0">(cast&lt;StoreSDNode&gt;(Node), DAG, TLI, </span><span class="c0 c9">this</span><span class="c0">);<br>00832 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>00833 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">break</span><span class="c0">;<br>00834 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">case</span><span class="c0">&nbsp;TargetLowering::Custom: {<br>00835 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Res = TLI.LowerOperation(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(Node, 0), DAG);<br>00836 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(Res.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">())<br>00837 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ReplaceNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(Node, 0), Res);<br>00838 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">;<br>00839 &nbsp; &nbsp; &nbsp; &nbsp; }<br>00840 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">case</span><span class="c0">&nbsp;TargetLowering::Expand:<br>00841 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert(!StVT.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html#a73f7c824cad61a47c21bf6d652ae2fd7">isVector</a></span><span class="c0">() &amp;&amp;<br>00842 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"Vector Stores are handled in LegalizeVectorOps"</span><span class="c0">);<br>00843 <br>00844 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// TRUNCSTORE:i16 i32 -&gt; STORE i16</span><span class="c0"><br>00845 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assert(TLI.isTypeLegal(StVT) &amp;&amp;<br>00846 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"Do not know how to expand this store!"</span><span class="c0">);<br>00847 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Value = DAG.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ae690127648393001a7d5b93dc23da7b3">ISD::TRUNCATE</a></span><span class="c0">, dl, StVT, Value);<br>00848 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Result =<br>00849 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DAG.getStore(Chain, dl, Value, Ptr, ST-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MemSDNode.html#a2fa8491ab36125d7f5dd38d3a4868934">getPointerInfo</a></span><span class="c0">(),<br>00850 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;isVolatile, isNonTemporal, Alignment);<br>00851 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ReplaceNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">(Node, 0), Result);<br>00852 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">break</span><span class="c0">;<br>00853 &nbsp; &nbsp; &nbsp; &nbsp; }<br>00854 &nbsp; &nbsp; &nbsp; }<br>00855 &nbsp; &nbsp; }<br>00856 }</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c5">A lot of other functions defined in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a1cf8a7e0935ba8cdf791d07ce1101acb">SelectionDAG</a></span><span class="c5">&nbsp;class and other relevant classes depend on a target specific</span><span class="c0">&nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c0">&nbsp;</span><span class="c5">class for target specific information and implementation. &nbsp;Please refer to Part 7.2.3 for more details.</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c15 c44"><span class="c5"></span></p><p class="c44 c20"><span class="c25">Part 7.5.1.3 SelectionDAG construction using </span><span class="c25"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html">SelectionDAGBuilder</a></span><span class="c25">&nbsp;</span></p><p class="c15 c44"><span class="c5"></span></p><p class="c17"><span class="c5">Now let’s look at how a </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a1cf8a7e0935ba8cdf791d07ce1101acb">SelectionDAG</a></span><span class="c5">&nbsp;can be built using the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html">SelectionDAGBuilder</a></span><span class="c5">&nbsp;class. </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html">SelectionDAGBuilder</a></span><span class="c11 c16">&nbsp;</span><span class="c5">is the common target-independent lowering implementation that is parameterized by a </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c5">&nbsp;object. </span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">The interface of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html">SelectionDAGBuilder</a></span><span class="c5">&nbsp;is defined as follows: </span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html">00082</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html">SelectionDAGBuilder</a></span><span class="c0">&nbsp;{<br>00083 </span><span class="c0 c6">&nbsp;/// CurDebugLoc - current file + line number. &nbsp;Changes as we build the DAG.</span><span class="c0"><br>00084 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;CurDebugLoc;<br>00086 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap&lt;const Value*, SDValue&gt;</a></span><span class="c0">&nbsp;NodeMap; <br>00088 </span><span class="c0 c6">&nbsp;/// UnusedArgNodeMap - Maps argument value for unused arguments. This is used</span><span class="c0"><br>00089 </span><span class="c0 c6">&nbsp;/// to preserve debug information for incoming arguments.</span><span class="c0"><br>00090 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap&lt;const Value*, SDValue&gt;</a></span><span class="c0">&nbsp;UnusedArgNodeMap;<br>00092 </span><span class="c0 c6">&nbsp;/// DanglingDebugInfo - Helper type for DanglingDebugInfoMap.</span><span class="c0"><br>00093 &nbsp;</span><span class="c0 c9">class </span><span class="c0">DanglingDebugInfo {<br>00094 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DbgValueInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DbgValueInst.html">DbgValueInst</a></span><span class="c0">* DI;<br>00095 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;dl;<br>00096 &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;SDNodeOrder;<br>00097 &nbsp; </span><span class="c0 c9">public</span><span class="c0">:<br>00098 &nbsp; &nbsp; DanglingDebugInfo() : DI(0), dl(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">()), SDNodeOrder(0) { }<br>00099 &nbsp; &nbsp; DanglingDebugInfo(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DbgValueInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DbgValueInst.html">DbgValueInst</a></span><span class="c0">&nbsp;*di,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;DL, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;SDNO) :<br>00100 &nbsp; &nbsp; &nbsp; DI(di), dl(DL), SDNodeOrder(SDNO) { }<br>00101 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DbgValueInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DbgValueInst.html">DbgValueInst</a></span><span class="c0">* getDI() { </span><span class="c0 c7">return</span><span class="c0">&nbsp;DI; }<br>00102 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;getdl() { </span><span class="c0 c7">return</span><span class="c0">&nbsp;dl; }<br>00103 &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a425c6a9dbf50fb4a86759ace8a0f8285">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a425c6a9dbf50fb4a86759ace8a0f8285">getSDNodeOrder</a></span><span class="c0">() { </span><span class="c0 c7">return</span><span class="c0">&nbsp;SDNodeOrder; }<br>00104 &nbsp; };<br>00106 </span><span class="c0 c6">&nbsp;/// DanglingDebugInfoMap - Keeps track of dbg_values for which we have not</span><span class="c0"><br>00107 </span><span class="c0 c6">&nbsp;/// yet seen the referent. &nbsp;We defer handling these until we do see it.</span><span class="c0"><br>00108 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap&lt;const Value*, DanglingDebugInfo&gt;</a></span><span class="c0">&nbsp;DanglingDebugInfoMap;<br>00110 </span><span class="c0 c9">public</span><span class="c0">:<br>00111 </span><span class="c0 c6">&nbsp;/// PendingLoads - Loads are not emitted to the program immediately. &nbsp;We bunch</span><span class="c0"><br>00112 </span><span class="c0 c6">&nbsp;/// them up and then emit token factor nodes when possible. &nbsp;This allows us to</span><span class="c0"><br>00113 </span><span class="c0 c6">&nbsp;/// get simple disambiguation between loads without worrying about alias</span><span class="c0"><br>00114 </span><span class="c0 c6">&nbsp;/// analysis.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a9a1381eb77fac8d57f54f7bf25919a4e">00115</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;SDValue, 8&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a9a1381eb77fac8d57f54f7bf25919a4e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a9a1381eb77fac8d57f54f7bf25919a4e">PendingLoads</a></span><span class="c0">;<br>00116 </span><span class="c0 c9">private</span><span class="c0">:<br>….................................</span></p><p class="c17"><span class="c0">00131 &nbsp;</span><span class="c0 c9">struct </span><span class="c0">Case {<br>00132 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Constant.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Constant.html">Constant</a></span><span class="c0">&nbsp;*Low;<br>00133 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Constant.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Constant.html">Constant</a></span><span class="c0">&nbsp;*High;<br>00134 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">* BB;<br>00135 &nbsp; &nbsp; uint32_t ExtraWeight;<br>00137 &nbsp; &nbsp; Case() : Low(0), High(0), BB(0), ExtraWeight(0) { }<br>00138 &nbsp; &nbsp; Case(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Constant.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Constant.html">Constant</a></span><span class="c0">&nbsp;*low, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Constant.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Constant.html">Constant</a></span><span class="c0">&nbsp;*high,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*bb,<br>00139 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;uint32_t extraweight) : Low(low), High(high), BB(bb),<br>00140 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ExtraWeight(extraweight) { }<br>00141 <br>00142 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">APInt</a></span><span class="c0">&nbsp;size()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00143 &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">APInt</a></span><span class="c0">&nbsp;&amp;rHigh = cast&lt;ConstantInt&gt;(High)-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a025adb087cac36e2cd504a33e8cb749d">getValue</a></span><span class="c0">();<br>00144 &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">APInt</a></span><span class="c0">&nbsp;&amp;rLow &nbsp;= cast&lt;ConstantInt&gt;(Low)-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a025adb087cac36e2cd504a33e8cb749d">getValue</a></span><span class="c0">();<br>00145 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;(rHigh - rLow + 1ULL);<br>00146 &nbsp; &nbsp; }<br>00147 &nbsp; };<br>00149 &nbsp; </span><span class="c0 c9">struct </span><span class="c0">CaseBits {<br>00150 &nbsp; &nbsp; uint64_t Mask;<br>00151 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">* BB;<br>00152 &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95">Bits</a></span><span class="c0">;<br>00153 &nbsp; &nbsp; uint32_t ExtraWeight;<br>00154 <br>00155 &nbsp; &nbsp; CaseBits(uint64_t mask,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">* bb, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;bits,<br>00156 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;uint32_t Weight):<br>00157 &nbsp; &nbsp; &nbsp; Mask(mask), BB(bb),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a3c0710aa6b054662f67b480712fa2b95">Bits</a></span><span class="c0">(bits), ExtraWeight(Weight) { }<br>00158 &nbsp; };<br>00160 &nbsp; </span><span class="c0 c9">typedef</span><span class="c0">&nbsp;std::vector&lt;Case&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CaseVector;<br>00161 &nbsp; </span><span class="c0 c9">typedef</span><span class="c0">&nbsp;std::vector&lt;CaseBits&gt; &nbsp; &nbsp; &nbsp; CaseBitsVector;<br>00162 &nbsp; </span><span class="c0 c9">typedef</span><span class="c0">&nbsp;CaseVector::iterator &nbsp; &nbsp; &nbsp; &nbsp;CaseItr;<br>00163 &nbsp; </span><span class="c0 c9">typedef</span><span class="c0">&nbsp;std::pair&lt;CaseItr, CaseItr&gt; CaseRange;<br>00165 </span><span class="c0 c6">&nbsp;/// CaseRec - A struct with ctor used in lowering switches to a binary tree</span><span class="c0"><br>00166 </span><span class="c0 c6">&nbsp;/// of conditional branches.</span><span class="c0"><br>00167 &nbsp;</span><span class="c0 c9">struct </span><span class="c0">CaseRec {<br>00168 &nbsp; &nbsp; CaseRec(MachineBasicBlock *bb, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aac2f0a84dd2aa5ee4c3f1385e9565f5e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aac2f0a84dd2aa5ee4c3f1385e9565f5e">Constant</a></span><span class="c0">&nbsp;*lt, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aac2f0a84dd2aa5ee4c3f1385e9565f5e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aac2f0a84dd2aa5ee4c3f1385e9565f5e">Constant</a></span><span class="c0">&nbsp;*ge,<br>00169 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CaseRange r) :<br>00170 &nbsp; &nbsp; CaseBB(bb),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6a5f1f4297ecf2dafb48ff1cb0597faea8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6a5f1f4297ecf2dafb48ff1cb0597faea8">LT</a></span><span class="c0">(lt),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6a802d63db44042a459a19b9f89b5b470c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6a802d63db44042a459a19b9f89b5b470c">GE</a></span><span class="c0">(ge), Range(r) {}<br>00172 </span><span class="c0 c6">&nbsp; &nbsp;/// CaseBB - The MBB in which to emit the compare and branch</span><span class="c0"><br>00173 &nbsp; &nbsp;MachineBasicBlock *CaseBB;<br>00174 </span><span class="c0 c6">&nbsp; &nbsp;/// LT, GE - If nonzero, we know the current case value must be less-than or</span><span class="c0"><br>00175 </span><span class="c0 c6">&nbsp; &nbsp;/// greater-than-or-equal-to these Constants.</span><span class="c0"><br>00176 &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aac2f0a84dd2aa5ee4c3f1385e9565f5e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aac2f0a84dd2aa5ee4c3f1385e9565f5e">Constant</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6a5f1f4297ecf2dafb48ff1cb0597faea8">LT</a></span><span class="c0">;<br>00177 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aac2f0a84dd2aa5ee4c3f1385e9565f5e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110aac2f0a84dd2aa5ee4c3f1385e9565f5e">Constant</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6a802d63db44042a459a19b9f89b5b470c">GE</a></span><span class="c0">;<br>00178 </span><span class="c0 c6">&nbsp; &nbsp;/// Range - A pair of iterators representing the range of case values to be</span><span class="c0"><br>00179 </span><span class="c0 c6">&nbsp; &nbsp;/// processed at this point in the binary search tree.</span><span class="c0"><br>00180 &nbsp; &nbsp;CaseRange Range;<br>00181 &nbsp; };<br>00183 &nbsp; </span><span class="c0 c9">typedef</span><span class="c0">&nbsp;std::vector&lt;CaseRec&gt; CaseRecVector;<br>00185 &nbsp; </span><span class="c0 c9">struct </span><span class="c0">CaseBitsCmp {<br>00186 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;operator()(</span><span class="c0 c9">const</span><span class="c0">&nbsp;CaseBits &amp;C1, </span><span class="c0 c9">const</span><span class="c0">&nbsp;CaseBits &amp;C2) {<br>00187 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;C1.Bits &gt; C2.Bits;<br>00188 &nbsp; &nbsp; }<br>00189 &nbsp; };<br>00191 &nbsp; </span><span class="c0 c8">size_t</span><span class="c0">&nbsp;Clusterify(CaseVector &amp;Cases, </span><span class="c0 c9">const</span><span class="c0">&nbsp;SwitchInst &amp;SI);<br>00193 </span><span class="c0 c6">&nbsp;/// CaseBlock - This structure is used to communicate between</span><span class="c0"><br>00194 </span><span class="c0 c6">&nbsp;/// SelectionDAGBuilder and SDISel for the code generation of additional basic</span><span class="c0"><br>00195 </span><span class="c0 c6">&nbsp;/// blocks needed by multi-case switch statements.</span><span class="c0"><br>00196 &nbsp;</span><span class="c0 c9">struct </span><span class="c0">CaseBlock {<br>00197 &nbsp; &nbsp; CaseBlock(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a></span><span class="c0">&nbsp;cc, </span><span class="c0 c9">const</span><span class="c0">&nbsp;Value *cmplhs, </span><span class="c0 c9">const</span><span class="c0">&nbsp;Value *cmprhs,<br>00198 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;Value *cmpmiddle,<br>00199 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MachineBasicBlock *truebb, MachineBasicBlock *falsebb,<br>00200 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MachineBasicBlock *me,<br>00201 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; uint32_t trueweight = 0, uint32_t falseweight = 0)<br>00202 &nbsp; &nbsp; &nbsp; :</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MBlazeCC.html#aba42d64ed60fd2a2e8045b6d7f26958d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MBlazeCC.html#aba42d64ed60fd2a2e8045b6d7f26958d">CC</a></span><span class="c0">(cc), CmpLHS(cmplhs), CmpMHS(cmpmiddle), CmpRHS(cmprhs),<br>00203 &nbsp; &nbsp; &nbsp; &nbsp; TrueBB(truebb), FalseBB(falsebb), ThisBB(me),<br>00204 &nbsp; &nbsp; &nbsp; &nbsp; TrueWeight(trueweight), FalseWeight(falseweight) { }<br>00205 <br>00206 &nbsp; &nbsp; </span><span class="c0 c6">// CC - the condition code to use for the case block's setcc node</span><span class="c0"><br>00207 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#ac3c3cf58d6d631af6a172457304d3d07">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#ac3c3cf58d6d631af6a172457304d3d07">ISD::CondCode</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MBlazeCC.html#aba42d64ed60fd2a2e8045b6d7f26958d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MBlazeCC.html#aba42d64ed60fd2a2e8045b6d7f26958d">CC</a></span><span class="c0">;<br>00209 &nbsp; &nbsp; </span><span class="c0 c6">// CmpLHS/CmpRHS/CmpMHS - The LHS/MHS/RHS of the comparison to emit.</span><span class="c0"><br>00210 &nbsp; &nbsp; </span><span class="c0 c6">// Emit by default LHS op RHS. MHS is used for range comparisons:</span><span class="c0"><br>00211 &nbsp; &nbsp; </span><span class="c0 c6">// If MHS is not null: (LHS &lt;= MHS) and (MHS &lt;= RHS).</span><span class="c0"><br>00212 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;Value *CmpLHS, *CmpMHS, *CmpRHS;<br>00214 &nbsp; &nbsp; </span><span class="c0 c6">// TrueBB/FalseBB - the block to branch to if the setcc is true/false.</span><span class="c0"><br>00215 &nbsp; &nbsp; MachineBasicBlock *TrueBB, *FalseBB;<br>00217 &nbsp; &nbsp; </span><span class="c0 c6">// ThisBB - the block into which to emit the code for the setcc and branches</span><span class="c0"><br>00218 &nbsp; &nbsp; MachineBasicBlock *ThisBB;<br>00220 &nbsp; &nbsp; </span><span class="c0 c6">// TrueWeight/FalseWeight - branch weights.</span><span class="c0"><br>00221 &nbsp; &nbsp; uint32_t TrueWeight, FalseWeight;<br>00222 &nbsp; };<br>00224 &nbsp; </span><span class="c0 c9">struct</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a0c70100db6ddc0b37b56feb242145cf4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a0c70100db6ddc0b37b56feb242145cf4">JumpTable</a></span><span class="c0">&nbsp;{<br>00225 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a0c70100db6ddc0b37b56feb242145cf4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a0c70100db6ddc0b37b56feb242145cf4">JumpTable</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;R, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;J, MachineBasicBlock *M,<br>00226 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MachineBasicBlock *D):</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">(R), JTI(J), MBB(M),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568a6f9fa4f118519f6df6435bd13317466e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568a6f9fa4f118519f6df6435bd13317466e">Default</a></span><span class="c0">(D) {}<br>00228 </span><span class="c0 c6">&nbsp; &nbsp;/// Reg - the virtual register containing the index of the jump table entry</span><span class="c0"><br>00229 &nbsp; &nbsp;</span><span class="c0 c6">//. to jump to.</span><span class="c0"><br>00230 &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">;<br>00231 </span><span class="c0 c6">&nbsp; &nbsp;/// JTI - the JumpTableIndex for this jump table in the function.</span><span class="c0"><br>00232 &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;JTI;<br>00233 </span><span class="c0 c6">&nbsp; &nbsp;/// MBB - the MBB into which to emit the code for the indirect jump.</span><span class="c0"><br>00234 &nbsp; &nbsp;MachineBasicBlock *MBB;<br>00235 </span><span class="c0 c6">&nbsp; &nbsp;/// Default - the MBB of the default bb, which is a successor of the range</span><span class="c0"><br>00236 </span><span class="c0 c6">&nbsp; &nbsp;/// check MBB. &nbsp;This is when updating PHI nodes in successors.</span><span class="c0"><br>00237 &nbsp; &nbsp;MachineBasicBlock *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568a6f9fa4f118519f6df6435bd13317466e">Default</a></span><span class="c0">;<br>00238 &nbsp; };<br>00239 &nbsp; </span><span class="c0 c9">struct </span><span class="c0">JumpTableHeader {<br>00240 &nbsp; &nbsp; JumpTableHeader(APInt</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></span><span class="c0">, APInt L, </span><span class="c0 c9">const</span><span class="c0">&nbsp;Value *SV, MachineBasicBlock *H,<br>00241 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;E = </span><span class="c0 c9">false</span><span class="c0">):<br>00242 &nbsp; &nbsp; &nbsp; First(F), Last(L), SValue(SV), HeaderBB(H), Emitted(E) {}<br>00243 &nbsp; &nbsp; APInt First;<br>00244 &nbsp; &nbsp; APInt Last;<br>00245 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;Value *SValue;<br>00246 &nbsp; &nbsp; MachineBasicBlock *HeaderBB;<br>00247 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;Emitted;<br>00248 &nbsp; };<br>00249 &nbsp; </span><span class="c0 c9">typedef</span><span class="c0">&nbsp;std::pair&lt;JumpTableHeader, JumpTable&gt; JumpTableBlock;<br>00251 &nbsp; </span><span class="c0 c9">struct </span><span class="c0">BitTestCase {<br>00252 &nbsp; &nbsp; BitTestCase(uint64_t M, MachineBasicBlock*</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classT.html">T</a></span><span class="c0">, MachineBasicBlock* Tr,<br>00253 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; uint32_t Weight):<br>00254 &nbsp; &nbsp; &nbsp; Mask(M), ThisBB(T), TargetBB(Tr), ExtraWeight(Weight) { }<br>00255 &nbsp; &nbsp; uint64_t Mask;<br>00256 &nbsp; &nbsp; MachineBasicBlock *ThisBB;<br>00257 &nbsp; &nbsp; MachineBasicBlock *TargetBB;<br>00258 &nbsp; &nbsp; uint32_t ExtraWeight;<br>00259 &nbsp; };<br>00261 &nbsp; </span><span class="c0 c9">typedef</span><span class="c0">&nbsp;SmallVector&lt;BitTestCase, 3&gt; BitTestInfo;<br>00263 &nbsp; </span><span class="c0 c9">struct </span><span class="c0">BitTestBlock {<br>00264 &nbsp; &nbsp; BitTestBlock(APInt</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></span><span class="c0">, APInt R, </span><span class="c0 c9">const</span><span class="c0">&nbsp;Value* SV,<br>00265 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Rg, MVT RgVT, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;E,<br>00266 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MachineBasicBlock* P, MachineBasicBlock* D,<br>00267 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;BitTestInfo&amp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974afd841a49aec1539bc88abc8ff9e170fb">C</a></span><span class="c0">):<br>00268 &nbsp; &nbsp; &nbsp; First(F), Range(R), SValue(SV),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">(Rg), RegVT(RgVT), Emitted(E),<br>00269 &nbsp; &nbsp; &nbsp; Parent(P),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568a6f9fa4f118519f6df6435bd13317466e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568a6f9fa4f118519f6df6435bd13317466e">Default</a></span><span class="c0">(D), Cases(C) { }<br>00270 &nbsp; &nbsp; APInt First;<br>00271 &nbsp; &nbsp; APInt Range;<br>00272 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;Value *SValue;<br>00273 &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">;<br>00274 &nbsp; &nbsp; MVT RegVT;<br>00275 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;Emitted;<br>00276 &nbsp; &nbsp; MachineBasicBlock *Parent;<br>00277 &nbsp; &nbsp; MachineBasicBlock *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568a6f9fa4f118519f6df6435bd13317466e">Default</a></span><span class="c0">;<br>00278 &nbsp; &nbsp; BitTestInfo Cases;<br>00279 &nbsp; };<br>00281 </span><span class="c0 c9">public</span><span class="c0">:<br>00282 &nbsp; </span><span class="c0 c6">// TLI - This is information that describes the available target features we</span><span class="c0"><br>00283 &nbsp; </span><span class="c0 c6">// need for lowering. &nbsp;This indicates when operations are unavailable,</span><span class="c0"><br>00284 &nbsp; </span><span class="c0 c6">// implemented with a libcall, etc.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a3293dad09e732134cb72b1cec185de56">00285</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a3293dad09e732134cb72b1cec185de56">TM</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ab130a077faf579a30e501813b4e0aec8">00286</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ab130a077faf579a30e501813b4e0aec8">TLI</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ad997f08bfd4680a697130632badf740e">00287</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ad997f08bfd4680a697130632badf740e">DAG</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a11d1a0f81bc2f93dd8a90755fcd3f9d0">00288</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DataLayout.html">DataLayout</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a11d1a0f81bc2f93dd8a90755fcd3f9d0">TD</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a804dfac6a2f1ca449b4a0282cb123d77">00289</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">AliasAnalysis</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a804dfac6a2f1ca449b4a0282cb123d77">AA</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ae283c81e2135fac41f1896dd39c4cc40">00290</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLibraryInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ae283c81e2135fac41f1896dd39c4cc40">LibInfo</a></span><span class="c0">;<br>00292 </span><span class="c0 c6">&nbsp;/// SwitchCases - Vector of CaseBlock structures used to communicate</span><span class="c0"><br>00293 </span><span class="c0 c6">&nbsp;/// SwitchInst code generation information.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a2399a2e82821e050e9a00c8ad33e2aae">00294</a></span><span class="c0">&nbsp; std::vector&lt;CaseBlock&gt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a2399a2e82821e050e9a00c8ad33e2aae">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a2399a2e82821e050e9a00c8ad33e2aae">SwitchCases</a></span><span class="c0">;<br>00295 </span><span class="c0 c6">&nbsp;/// JTCases - Vector of JumpTable structures used to communicate</span><span class="c0"><br>00296 </span><span class="c0 c6">&nbsp;/// SwitchInst code generation information.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a9e9f0e8bba0c07aa975df97765117fa5">00297</a></span><span class="c0">&nbsp; std::vector&lt;JumpTableBlock&gt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a9e9f0e8bba0c07aa975df97765117fa5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a9e9f0e8bba0c07aa975df97765117fa5">JTCases</a></span><span class="c0">;<br>00298 </span><span class="c0 c6">&nbsp;/// BitTestCases - Vector of BitTestBlock structures used to communicate</span><span class="c0"><br>00299 </span><span class="c0 c6">&nbsp;/// SwitchInst code generation information.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">00300</a></span><span class="c0">&nbsp; std::vector&lt;BitTestBlock&gt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">;<br>00302 &nbsp; </span><span class="c0 c6">// Emit PHI-node-operand constants only once even if used by multiple</span><span class="c0"><br>00303 &nbsp; </span><span class="c0 c6">// PHI nodes.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a7bdfdf9731f7e5501dea5dd410ebf9ef">00304</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap&lt;const Constant *, unsigned&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a7bdfdf9731f7e5501dea5dd410ebf9ef">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a7bdfdf9731f7e5501dea5dd410ebf9ef">ConstantsOut</a></span><span class="c0">;<br>00306 </span><span class="c0 c6">&nbsp;/// FuncInfo - Information about the function as a whole.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ad10e64e191507974af84a4ea069a9e36">00308</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html">FunctionLoweringInfo</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ad10e64e191507974af84a4ea069a9e36">FuncInfo</a></span><span class="c0">;<br>00310 </span><span class="c0 c6">&nbsp;/// OptLevel - What optimization level we're generating code for.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ade3ea0dcf6114d202e318151589fba38">00312</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ade3ea0dcf6114d202e318151589fba38">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ade3ea0dcf6114d202e318151589fba38">OptLevel</a></span><span class="c0">;<br>00314 </span><span class="c0 c6">&nbsp;/// GFI - Garbage collection metadata for the function.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a9b4db8b8082660004fda0c282da0ff0a">00315</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GCFunctionInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GCFunctionInfo.html">GCFunctionInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a9b4db8b8082660004fda0c282da0ff0a">GFI</a></span><span class="c0">;<br>00317 </span><span class="c0 c6">&nbsp;/// LPadToCallSiteMap - Map a landing pad to the call site indexes.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a053b2cccf7a5a9531bb9a91a4eb78311">00318</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap&lt;MachineBasicBlock*, SmallVector&lt;unsigned, 4&gt;</a></span><span class="c0">&nbsp;&gt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a053b2cccf7a5a9531bb9a91a4eb78311">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a053b2cccf7a5a9531bb9a91a4eb78311">LPadToCallSiteMap</a></span><span class="c0">;<br>00320 </span><span class="c0 c6">&nbsp;/// HasTailCall - This is set to true if a call in the current</span><span class="c0"><br>00321 </span><span class="c0 c6">&nbsp;/// block has been translated as a tail call. In this case,</span><span class="c0"><br>00322 </span><span class="c0 c6">&nbsp;/// no subsequent DAG nodes should be created.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a39e446f1647e793791c33d0d2412d088">00324</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a39e446f1647e793791c33d0d2412d088">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a39e446f1647e793791c33d0d2412d088">HasTailCall</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ac536e4b59b1e85317cea0b32d47752ef">00326</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LLVMContext.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LLVMContext.html">LLVMContext</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ac536e4b59b1e85317cea0b32d47752ef">Context</a></span><span class="c0">;<br>…....................<br>00359 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#aa3e946c1fc678a70e849244389bd929a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#aa3e946c1fc678a70e849244389bd929a">getRoot</a></span><span class="c0">();<br>00360 <br>00361 </span><span class="c0 c6">&nbsp;/// getControlRoot - Similar to getRoot, but instead of flushing all the</span><span class="c0"><br>00362 </span><span class="c0 c6">&nbsp;/// PendingLoad items, flush all the PendingExports items. It is necessary</span><span class="c0"><br>00363 </span><span class="c0 c6">&nbsp;/// to do this before emitting a terminator instruction.</span><span class="c0"><br>00364 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00365 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#aef34360e8bb4bdecf3fd6345ff504f81">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#aef34360e8bb4bdecf3fd6345ff504f81">getControlRoot</a></span><span class="c0">();<br>00366 <br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a786df6ad0d47c92c8c411ab209dacd32">00367</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a786df6ad0d47c92c8c411ab209dacd32">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a786df6ad0d47c92c8c411ab209dacd32">getCurDebugLoc</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;CurDebugLoc; }<br>00368 <br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a425c6a9dbf50fb4a86759ace8a0f8285">00369</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a425c6a9dbf50fb4a86759ace8a0f8285">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a425c6a9dbf50fb4a86759ace8a0f8285">getSDNodeOrder</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;SDNodeOrder; }<br>00370 <br>00371 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#aac913c2fd95f988bc5610c0e4b4c0083">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#aac913c2fd95f988bc5610c0e4b4c0083">CopyValueToVirtualRegister</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">&nbsp;*V, </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">);<br>00372 <br>00373 </span><span class="c0 c6">&nbsp;/// AssignOrderingToNode - Assign an ordering to the node. The order is gotten</span><span class="c0"><br>00374 </span><span class="c0 c6">&nbsp;/// from how the code appeared in the source. The ordering is used by the</span><span class="c0"><br>00375 </span><span class="c0 c6">&nbsp;/// scheduler to effectively turn off scheduling.</span><span class="c0"><br>00376 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a40f3db63b840a6dc38e4ef45a49e4953">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a40f3db63b840a6dc38e4ef45a49e4953">AssignOrderingToNode</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Node);<br>00377 <br>00378 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#abbbfefd79a5b3d1b4ea8d8383fd01af5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#abbbfefd79a5b3d1b4ea8d8383fd01af5">visit</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Instruction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Instruction.html">Instruction</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00379 <br>00380 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#abbbfefd79a5b3d1b4ea8d8383fd01af5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#abbbfefd79a5b3d1b4ea8d8383fd01af5">visit</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opcode, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1User.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1User.html">User</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00381 <br>00382 &nbsp; </span><span class="c0 c6">// resolveDanglingDebugInfo - if we saw an earlier dbg_value referring to V,</span><span class="c0"><br>00383 &nbsp; </span><span class="c0 c6">// generate the debug data structures now that we've seen its definition.</span><span class="c0"><br>00384 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ab898c0fc6a2159b032a398271add3927">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ab898c0fc6a2159b032a398271add3927">resolveDanglingDebugInfo</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">&nbsp;*V,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Val);<br>00385 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a025adb087cac36e2cd504a33e8cb749d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a025adb087cac36e2cd504a33e8cb749d">getValue</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">&nbsp;*V);<br>00386 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a4ad02593716678add54090c344959750">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a4ad02593716678add54090c344959750">getNonRegisterValue</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">&nbsp;*V);<br>00387 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#afe3b2bbac4396d088da5c91f77754843">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#afe3b2bbac4396d088da5c91f77754843">getValueImpl</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">&nbsp;*V);<br>00388 <br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ad8368fe85feec440623e9558e100f357">00389</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ad8368fe85feec440623e9558e100f357">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ad8368fe85feec440623e9558e100f357">setValue</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">&nbsp;*V,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;NewN) {<br>00390 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></span><span class="c0">&nbsp;= NodeMap[V];<br>00391 &nbsp; &nbsp; assert(N.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">() == 0 &amp;&amp; </span><span class="c0 c14">"Already set a value for this node!"</span><span class="c0">);<br>00392 &nbsp; &nbsp; N = NewN;<br>00393 &nbsp; }<br>00394 &nbsp; <br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a6b0040c5b706355fa56842358cf0cbe7">00395</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a6b0040c5b706355fa56842358cf0cbe7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a6b0040c5b706355fa56842358cf0cbe7">setUnusedArgValue</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">&nbsp;*V,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;NewN) {<br>00396 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></span><span class="c0">&nbsp;= UnusedArgNodeMap[V];<br>00397 &nbsp; &nbsp; assert(N.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">() == 0 &amp;&amp; </span><span class="c0 c14">"Already set a value for this node!"</span><span class="c0">);<br>00398 &nbsp; &nbsp; N = NewN;<br>00399 &nbsp; }<br>00400 <br>00401 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a1b5d8a1ec617c3ccbdfbdfc7aada7ae9">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a1b5d8a1ec617c3ccbdfbdfc7aada7ae9">FindMergedConditions</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">&nbsp;*Cond,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*TBB,<br>00402 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*FBB,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*CurBB,<br>00403 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*SwitchBB, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opc);<br>00404 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a7e46fa5f2a1884d28f9944d08ee6f76f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a7e46fa5f2a1884d28f9944d08ee6f76f">EmitBranchForMergedCondition</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">&nbsp;*Cond,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*TBB,<br>00405 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*FBB,<br>00406 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*CurBB,<br>00407 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*SwitchBB);<br>00408 &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#aab4941ab0021c48d53313f45a5f0aa89">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#aab4941ab0021c48d53313f45a5f0aa89">ShouldEmitAsBranches</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0">&nbsp;std::vector&lt;CaseBlock&gt; &amp;Cases);<br>00409 &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ae3df768f340538afba57a5eaeb0ba277">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ae3df768f340538afba57a5eaeb0ba277">isExportableFromCurrentBlock</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">&nbsp;*V, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BasicBlock.html">BasicBlock</a></span><span class="c0">&nbsp;*FromBB);<br>00410 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ac30ce0e7a5759d1e0bb5bf891e88662b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ac30ce0e7a5759d1e0bb5bf891e88662b">CopyToExportRegsIfNeeded</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">&nbsp;*V);<br>00411 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#aa5254258c6a479f86e6ecfc4dcdd7a5e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#aa5254258c6a479f86e6ecfc4dcdd7a5e">ExportFromCurrentBlock</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c0">&nbsp;*V);<br>00412 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a303b26b679de0e0757c7aee7bcebedd3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a303b26b679de0e0757c7aee7bcebedd3">LowerCallTo</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ImmutableCallSite.html">ImmutableCallSite</a></span><span class="c0">&nbsp;CS,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Callee, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;IsTailCall,<br>00413 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*LandingPad = NULL);<br>00414 <br>00415 </span><span class="c0 c6">&nbsp;/// UpdateSplitBlock - When an MBB was split during scheduling, update the</span><span class="c0"><br>00416 </span><span class="c0 c6">&nbsp;/// references that ned to refer to the last resulting block.</span><span class="c0"><br>00417 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#af6e9499206c6a56801d70a567fc8862a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#af6e9499206c6a56801d70a567fc8862a">UpdateSplitBlock</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*First,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*Last);<br>00418 <br>00419 </span><span class="c0 c9">private</span><span class="c0">:<br>00420 &nbsp; </span><span class="c0 c6">// Terminator instructions.</span><span class="c0"><br>00421 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitRet(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ReturnInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ReturnInst.html">ReturnInst</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00422 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitBr(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BranchInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BranchInst.html">BranchInst</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00423 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitSwitch(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SwitchInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SwitchInst.html">SwitchInst</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00424 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitIndirectBr(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1IndirectBrInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1IndirectBrInst.html">IndirectBrInst</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00425 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitUnreachable(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1UnreachableInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1UnreachableInst.html">UnreachableInst</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">) { </span><span class="c0 c6">/* noop */</span><span class="c0">&nbsp;}<br>00426 <br>00427 &nbsp; </span><span class="c0 c6">// Helpers for visitSwitch</span><span class="c0"><br>00428 &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;handleSmallSwitchRange(CaseRec&amp; CR,<br>00429 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CaseRecVector&amp; WorkList,<br>00430 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;Value* SV,<br>00431 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MachineBasicBlock*</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568a6f9fa4f118519f6df6435bd13317466e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568a6f9fa4f118519f6df6435bd13317466e">Default</a></span><span class="c0">,<br>00432 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MachineBasicBlock *SwitchBB);<br>…............................................<br>00449 &nbsp; uint32_t getEdgeWeight(</span><span class="c0 c9">const</span><span class="c0">&nbsp;MachineBasicBlock *Src,<br>00450 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;MachineBasicBlock *Dst) </span><span class="c0 c9">const</span><span class="c0">;<br>00451 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;addSuccessorWithWeight(MachineBasicBlock *Src, MachineBasicBlock *Dst,<br>00452 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; uint32_t Weight = 0);<br>00453 </span><span class="c0 c9">public</span><span class="c0">:<br>00454 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a23e7312cc9cf434846a35684ccd4b28d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a23e7312cc9cf434846a35684ccd4b28d">visitSwitchCase</a></span><span class="c0">(CaseBlock &amp;CB,<br>00455 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MachineBasicBlock *SwitchBB);<br>00456 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#aa57e81be4daba055c7fa4a6fea96ce8d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#aa57e81be4daba055c7fa4a6fea96ce8d">visitBitTestHeader</a></span><span class="c0">(BitTestBlock &amp;B, MachineBasicBlock *SwitchBB);<br>00457 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a318504e3fe7e4589c750f145a1f663f3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a318504e3fe7e4589c750f145a1f663f3">visitBitTestCase</a></span><span class="c0">(BitTestBlock &amp;BB,<br>00458 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MachineBasicBlock* NextMBB,<br>00459 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; uint32_t BranchWeightToNext,<br>00460 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">,<br>00461 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BitTestCase &amp;B,<br>00462 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MachineBasicBlock *SwitchBB);<br>00463 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a8b4ce7202ecace03bcfa27f8be506c81">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a8b4ce7202ecace03bcfa27f8be506c81">visitJumpTable</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a0c70100db6ddc0b37b56feb242145cf4">JumpTable</a></span><span class="c0">&nbsp;&amp;JT);<br>00464 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#afe740b90e18adb6aa5f36a308c37398e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#afe740b90e18adb6aa5f36a308c37398e">visitJumpTableHeader</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a0c70100db6ddc0b37b56feb242145cf4">JumpTable</a></span><span class="c0">&nbsp;&amp;JT, JumpTableHeader &amp;JTH,<br>00465 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MachineBasicBlock *SwitchBB);<br>00466 &nbsp; <br>00467 </span><span class="c0 c9">private</span><span class="c0">:<br>00468 &nbsp; </span><span class="c0 c6">// These all get lowered before this pass.</span><span class="c0"><br>00469 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitInvoke(</span><span class="c0 c9">const</span><span class="c0">&nbsp;InvokeInst &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00470 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitResume(</span><span class="c0 c9">const</span><span class="c0">&nbsp;ResumeInst &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00472 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitBinary(</span><span class="c0 c9">const</span><span class="c0">&nbsp;User &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;OpCode);<br>00473 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitShift(</span><span class="c0 c9">const</span><span class="c0">&nbsp;User &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opcode);<br>00474 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitAdd(</span><span class="c0 c9">const</span><span class="c0">&nbsp;User &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">) &nbsp;{ visitBinary(I,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a></span><span class="c0">); }<br>00475 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitFAdd(</span><span class="c0 c9">const</span><span class="c0">&nbsp;User &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">) { visitBinary(I,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a32ec12017722f5b42a295fe5eb0b0bdf">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a32ec12017722f5b42a295fe5eb0b0bdf">ISD::FADD</a></span><span class="c0">); }<br>00476 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitSub(</span><span class="c0 c9">const</span><span class="c0">&nbsp;User &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">) &nbsp;{ visitBinary(I,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a></span><span class="c0">); }<br>00477 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitFSub(</span><span class="c0 c9">const</span><span class="c0">&nbsp;User &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00478 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitMul(</span><span class="c0 c9">const</span><span class="c0">&nbsp;User &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">) &nbsp;{ visitBinary(I,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a></span><span class="c0">); }<br>…......................................<br>00520 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitLoad(</span><span class="c0 c9">const</span><span class="c0">&nbsp;LoadInst &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00521 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitStore(</span><span class="c0 c9">const</span><span class="c0">&nbsp;StoreInst &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00522 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitAtomicCmpXchg(</span><span class="c0 c9">const</span><span class="c0">&nbsp;AtomicCmpXchgInst &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00523 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitAtomicRMW(</span><span class="c0 c9">const</span><span class="c0">&nbsp;AtomicRMWInst &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00524 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitFence(</span><span class="c0 c9">const</span><span class="c0">&nbsp;FenceInst &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00525 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitPHI(</span><span class="c0 c9">const</span><span class="c0">&nbsp;PHINode &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00526 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitCall(</span><span class="c0 c9">const</span><span class="c0">&nbsp;CallInst &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>…..............................<br>00541 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitUserOp1(</span><span class="c0 c9">const</span><span class="c0">&nbsp;Instruction &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">) {<br>00542 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></span><span class="c0">(</span><span class="c0 c14">"UserOp1 should not exist at instruction selection time!"</span><span class="c0">);<br>00543 &nbsp; }<br>00544 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;visitUserOp2(</span><span class="c0 c9">const</span><span class="c0">&nbsp;Instruction &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">) {<br>00545 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></span><span class="c0">(</span><span class="c0 c14">"UserOp2 should not exist at instruction selection time!"</span><span class="c0">);<br>00546 &nbsp; }<br>00548 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;HandlePHINodesInSuccessorBlocks(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8472e46f9e4db168c5610ecdfb05dbaf">BasicBlock</a></span><span class="c0">&nbsp;*LLVMBB);<br>00555 };</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">In the above code for </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html">SelectionDAGBuilder</a></span><span class="c5">&nbsp;the member &nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html">FunctionLoweringInfo</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#ad10e64e191507974af84a4ea069a9e36">FuncInfo</a></span><span class="c5">&nbsp;stores the reference to a </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html">FunctionLoweringInfo</a></span><span class="c5">&nbsp;object which is used to keep track of relevant information for the original LLVM function. In the following interface of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html">FunctionLoweringInfo</a></span><span class="c5">&nbsp;class the member </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html">Function</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#aa6af88ef964b6f03824a35fa0081efa9">Fn</a></span><span class="c5">&nbsp;points to the originial LLVM function. In addition to the original LLVM function, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html">FunctionLoweringInfo</a></span><span class="c0">&nbsp;</span><span class="c5">class also has other relevant information about the function such as the “live out” registers, debug information, BBs visited thus far by the instruction selection, etc.</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0">00050 </span><span class="c0 c6">//===--------------------------------------------------------------------===//</span><span class="c0"><br>00051 </span><span class="c0 c6">/// FunctionLoweringInfo - This contains information that is global to a</span><span class="c0"><br>00052 </span><span class="c0 c6">/// function that is used when lowering a region of the function.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html">00054</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html">FunctionLoweringInfo</a></span><span class="c0">&nbsp;{<br>00055 </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a8a97e3747e049f160658a79bd6255080">00056</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a8a97e3747e049f160658a79bd6255080">TLI</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#aa6af88ef964b6f03824a35fa0081efa9">00057</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html">Function</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#aa6af88ef964b6f03824a35fa0081efa9">Fn</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#ac9287d39f216ac61b351d95a4f7e3df3">00058</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#ac9287d39f216ac61b351d95a4f7e3df3">MF</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#adda780c93aae358f7ee00c01081ee840">00059</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#adda780c93aae358f7ee00c01081ee840">RegInfo</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a021952a3b657f6321d050112563886c4">00060</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BranchProbabilityInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a021952a3b657f6321d050112563886c4">BPI</a></span><span class="c0">;<br>00061 </span><span class="c0 c6">&nbsp;/// CanLowerReturn - true iff the function's return value can be lowered to</span><span class="c0"><br>00062 </span><span class="c0 c6">&nbsp;/// registers.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#ade69181df61b7b2bc7287062cf0847ce">00063</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#ade69181df61b7b2bc7287062cf0847ce">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#ade69181df61b7b2bc7287062cf0847ce">CanLowerReturn</a></span><span class="c0">;<br>00065 </span><span class="c0 c6">&nbsp;/// DemoteRegister - if CanLowerReturn is false, DemoteRegister is a vreg</span><span class="c0"><br>00066 </span><span class="c0 c6">&nbsp;/// allocated to hold a pointer to the hidden sret parameter.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a2135b3d546d4a00d5cf9b2d1cd3e42fb">00067</a></span><span class="c0">&nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a2135b3d546d4a00d5cf9b2d1cd3e42fb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a2135b3d546d4a00d5cf9b2d1cd3e42fb">DemoteRegister</a></span><span class="c0">;<br>00069 </span><span class="c0 c6">&nbsp;/// MBBMap - A mapping from LLVM basic blocks to their machine code entry.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a4c53c37d30d9482f565f78751a3797d3">00070</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap&lt;const BasicBlock*, MachineBasicBlock *&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a4c53c37d30d9482f565f78751a3797d3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a4c53c37d30d9482f565f78751a3797d3">MBBMap</a></span><span class="c0">;<br>00072 </span><span class="c0 c6">&nbsp;/// ValueMap - Since we emit code for the function a basic block at a time,</span><span class="c0"><br>00073 </span><span class="c0 c6">&nbsp;/// we must remember which virtual registers hold the values for</span><span class="c0"><br>00074 </span><span class="c0 c6">&nbsp;/// cross-basic-block values.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a7465059e82380b0b0aa6f103ed28c8dc">00075</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap&lt;const Value*, unsigned&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a7465059e82380b0b0aa6f103ed28c8dc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a7465059e82380b0b0aa6f103ed28c8dc">ValueMap</a></span><span class="c0">;<br>00077 </span><span class="c0 c6">&nbsp;/// StaticAllocaMap - Keep track of frame indices for fixed sized allocas in</span><span class="c0"><br>00078 </span><span class="c0 c6">&nbsp;/// the entry block. &nbsp;This allows the allocas to be efficiently referenced</span><span class="c0"><br>00079 </span><span class="c0 c6">&nbsp;/// anywhere in the function.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a3ec121cc6c5c5141f5ac46f101727e8a">00080</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap&lt;const AllocaInst*, int&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a3ec121cc6c5c5141f5ac46f101727e8a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a3ec121cc6c5c5141f5ac46f101727e8a">StaticAllocaMap</a></span><span class="c0">;<br>00082 </span><span class="c0 c6">&nbsp;/// ByValArgFrameIndexMap - Keep track of frame indices for byval arguments.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a9ec33929a5691960c10bca5c8ec49fe6">00083</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap&lt;const Argument*, int&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a9ec33929a5691960c10bca5c8ec49fe6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a9ec33929a5691960c10bca5c8ec49fe6">ByValArgFrameIndexMap</a></span><span class="c0">;<br>00085 </span><span class="c0 c6">&nbsp;/// ArgDbgValues - A list of DBG_VALUE instructions created during isel for</span><span class="c0"><br>00086 </span><span class="c0 c6">&nbsp;/// function arguments that are inserted after scheduling is completed.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#aa7855aa1fdda952bb8b25a41df0cf976">00087</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;MachineInstr*, 8&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#aa7855aa1fdda952bb8b25a41df0cf976">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#aa7855aa1fdda952bb8b25a41df0cf976">ArgDbgValues</a></span><span class="c0">;<br>00089 </span><span class="c0 c6">&nbsp;/// RegFixups - Registers which need to be replaced after isel is done.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a3f52fcf27ea6164f41a5568fb5a781e8">00090</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, unsigned&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a3f52fcf27ea6164f41a5568fb5a781e8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a3f52fcf27ea6164f41a5568fb5a781e8">RegFixups</a></span><span class="c0">;<br>00092 </span><span class="c0 c6">&nbsp;/// MBB - The current block.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a9893077f1825192ca0f3d173afefb573">00093</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a9893077f1825192ca0f3d173afefb573">MBB</a></span><span class="c0">;<br>00095 </span><span class="c0 c6">&nbsp;/// MBB - The current insert position inside the current block.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a90b6dd55afe6936ce5854c71baadbf92">00096</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a90b6dd55afe6936ce5854c71baadbf92">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a90b6dd55afe6936ce5854c71baadbf92">InsertPt</a></span><span class="c0">;<br>00098 </span><span class="c0 c36">#ifndef NDEBUG</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a059dd4fdaf222d24e23cf1249256dafa">00099</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallPtrSet.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Instruction *, 8&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a059dd4fdaf222d24e23cf1249256dafa">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a059dd4fdaf222d24e23cf1249256dafa">CatchInfoLost</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#aa25c3eb5064d59cd09dd2bca024ae003">00100</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallPtrSet.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Instruction *, 8&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#aa25c3eb5064d59cd09dd2bca024ae003">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#aa25c3eb5064d59cd09dd2bca024ae003">CatchInfoFound</a></span><span class="c0">;<br>00101 </span><span class="c0 c36">#endif</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html">00103</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">struct</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html">LiveOutInfo</a></span><span class="c0">&nbsp;{<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#a651904591143e71c02a94dca2659fc8e">00104</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#a651904591143e71c02a94dca2659fc8e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#a651904591143e71c02a94dca2659fc8e">NumSignBits</a></span><span class="c0">&nbsp;: 31;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#aa66680fdd542aab740c67f47bd601f51">00105</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#aa66680fdd542aab740c67f47bd601f51">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#aa66680fdd542aab740c67f47bd601f51">IsValid</a></span><span class="c0">&nbsp;: 1;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#a010cd268584d67539ad79eb80968f3eb">00106</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">APInt</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#adcff7807b6decbd2fcb5b78ba28d117c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#adcff7807b6decbd2fcb5b78ba28d117c">KnownOne</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#a010cd268584d67539ad79eb80968f3eb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#a010cd268584d67539ad79eb80968f3eb">KnownZero</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#aeab085bec726d772b2654028eb61fa05">00107</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#aeab085bec726d772b2654028eb61fa05">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#aeab085bec726d772b2654028eb61fa05">LiveOutInfo</a></span><span class="c0">() :</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#a651904591143e71c02a94dca2659fc8e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#a651904591143e71c02a94dca2659fc8e">NumSignBits</a></span><span class="c0">(0),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#aa66680fdd542aab740c67f47bd601f51">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#aa66680fdd542aab740c67f47bd601f51">IsValid</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/BasicAliasAnalysis_8cpp.html#a80603f23207dd836075c078e6264204a">true</a></span><span class="c0">),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#adcff7807b6decbd2fcb5b78ba28d117c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#adcff7807b6decbd2fcb5b78ba28d117c">KnownOne</a></span><span class="c0">(1, 0),<br>00108 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#a010cd268584d67539ad79eb80968f3eb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#a010cd268584d67539ad79eb80968f3eb">KnownZero</a></span><span class="c0">(1, 0) {} &nbsp;};<br>00111 </span><span class="c0 c6">&nbsp;/// VisitedBBs - The set of basic blocks visited thus far by instruction</span><span class="c0"><br>00112 </span><span class="c0 c6">&nbsp;/// selection.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a451ef41c10474698faf84831057575a1">00113</a></span><span class="c0">&nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallPtrSet.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const BasicBlock*, 4&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a451ef41c10474698faf84831057575a1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a451ef41c10474698faf84831057575a1">VisitedBBs</a></span><span class="c0">;<br>00115 </span><span class="c0 c6">&nbsp;/// PHINodesToUpdate - A list of phi instructions whose operand list will</span><span class="c0"><br>00116 </span><span class="c0 c6">&nbsp;/// be updated after processing the current basic block.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a99d5184cf5e487012782adccecbc2dd6">00119</a></span><span class="c0">&nbsp; std::vector&lt;std::pair&lt;MachineInstr*, unsigned&gt; &gt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a99d5184cf5e487012782adccecbc2dd6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a99d5184cf5e487012782adccecbc2dd6">PHINodesToUpdate</a></span><span class="c0">;<br>00121 &nbsp; </span><span class="c0 c9">explicit</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#af15d8f962ecb055047fa256d051d28d3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#af15d8f962ecb055047fa256d051d28d3">FunctionLoweringInfo</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a8a97e3747e049f160658a79bd6255080">TLI</a></span><span class="c0">);<br>00123 </span><span class="c0 c6">&nbsp;/// set - Initialize this FunctionLoweringInfo with the given Function</span><span class="c0"><br>00124 </span><span class="c0 c6">&nbsp;/// and its associated MachineFunction.</span><span class="c0"><br>00126 &nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c9">set</span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html">Function</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#aa6af88ef964b6f03824a35fa0081efa9">Fn</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#ac9287d39f216ac61b351d95a4f7e3df3">MF</a></span><span class="c0">);<br>…............................</span></p><p class="c17"><span class="c0">00149 </span><span class="c0 c6">&nbsp;/// GetLiveOutRegInfo - Gets LiveOutInfo for a register, returning NULL if the</span><span class="c0"><br>00150 </span><span class="c0 c6">&nbsp;/// register is a PHI destination and the PHI's LiveOutInfo is not valid.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#ae605aa854c8763e4c93d2acf94a9be5f">00151</a></span><span class="c0">&nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html">LiveOutInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#ae605aa854c8763e4c93d2acf94a9be5f">GetLiveOutRegInfo</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">) {<br>…..............................}<br>00162 </span><span class="c0 c6">&nbsp;/// GetLiveOutRegInfo - Gets LiveOutInfo for a register, returning NULL if the</span><span class="c0"><br>00163 </span><span class="c0 c6">&nbsp;/// register is a PHI destination and the PHI's LiveOutInfo is not valid.</span><span class="c0"><br>00167 &nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;LiveOutInfo *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#ae605aa854c8763e4c93d2acf94a9be5f">GetLiveOutRegInfo</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;BitWidth);<br>00169 </span><span class="c0 c6">&nbsp;/// AddLiveOutRegInfo - Adds LiveOutInfo for a register.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a5088979dc44f6c6dfc12edcb60cda08c">00170</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a5088979dc44f6c6dfc12edcb60cda08c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a5088979dc44f6c6dfc12edcb60cda08c">AddLiveOutRegInfo</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;NumSignBits,<br>00171 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">APInt</a></span><span class="c0">&nbsp;&amp;KnownZero, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">APInt</a></span><span class="c0">&nbsp;&amp;KnownOne) {<br>00172 &nbsp; &nbsp; </span><span class="c0 c6">// Only install this information if it tells us something.</span><span class="c0"><br>00173 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(NumSignBits == 1 &amp;&amp; KnownZero == 0 &amp;&amp; KnownOne == 0)<br>00174 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">;<br>00176 &nbsp; &nbsp; LiveOutRegInfo.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1IndexedMap.html#a5e822b0690502a04b87125e63dbc8316">grow</a></span><span class="c0">(Reg);<br>00177 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html">LiveOutInfo</a></span><span class="c0">&nbsp;&amp;LOI = LiveOutRegInfo[</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">];<br>00178 &nbsp; &nbsp; LOI.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#a651904591143e71c02a94dca2659fc8e">NumSignBits</a></span><span class="c0">&nbsp;= NumSignBits;<br>00179 &nbsp; &nbsp; LOI.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#adcff7807b6decbd2fcb5b78ba28d117c">KnownOne</a></span><span class="c0">&nbsp;= KnownOne;<br>00180 &nbsp; &nbsp; LOI.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1FunctionLoweringInfo_1_1LiveOutInfo.html#a010cd268584d67539ad79eb80968f3eb">KnownZero</a></span><span class="c0">&nbsp;= KnownZero; }<br>00183 </span><span class="c0 c6">&nbsp;/// ComputePHILiveOutRegInfo - Compute LiveOutInfo for a PHI's destination</span><span class="c0"><br>00184 </span><span class="c0 c6">&nbsp;/// register based on the LiveOutInfo of its operands.</span><span class="c0"><br>00185 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#acada979e9424b6f61142bbca85a0fea0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#acada979e9424b6f61142bbca85a0fea0">ComputePHILiveOutRegInfo</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PHINode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PHINode.html">PHINode</a></span><span class="c0">*);<br>00187 </span><span class="c0 c6">&nbsp;/// InvalidatePHILiveOutRegInfo - Invalidates a PHI's LiveOutInfo, to be</span><span class="c0"><br>00188 </span><span class="c0 c6">&nbsp;/// called when a block is visited before all of its predecessors.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a39bc44baeb40615967a3ce797fb27900">00189</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a39bc44baeb40615967a3ce797fb27900">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a39bc44baeb40615967a3ce797fb27900">InvalidatePHILiveOutRegInfo</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PHINode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PHINode.html">PHINode</a></span><span class="c0">&nbsp;*PN) {<br>00190 &nbsp; &nbsp; </span><span class="c0 c6">// PHIs with no uses have no ValueMap entry.</span><span class="c0"><br>00191 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap&lt;const Value*, unsigned&gt;::const_iterator</a></span><span class="c0">&nbsp;It =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ValueMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ValueMap.html">ValueMap</a></span><span class="c0">.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">find</a></span><span class="c0">(PN);<br>00192 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(It ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ValueMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ValueMap.html">ValueMap</a></span><span class="c0">.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">end</a></span><span class="c0">())<br>00193 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">;<br>00195 &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">&nbsp;= It-&gt;second;<br>00196 &nbsp; &nbsp; LiveOutRegInfo.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1IndexedMap.html#a5e822b0690502a04b87125e63dbc8316">grow</a></span><span class="c0">(Reg);<br>00197 &nbsp; &nbsp; LiveOutRegInfo[</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">].IsValid = </span><span class="c0 c9">false</span><span class="c0">; }<br>00202 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a2752e8fd3a00aa8c955da610c36b90a3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a2752e8fd3a00aa8c955da610c36b90a3">setArgumentFrameIndex</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Argument.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Argument.html">Argument</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a></span><span class="c0">, </span><span class="c0 c8">int</span><span class="c0">&nbsp;FI);<br>00205 &nbsp;</span><span class="c0 c8">int</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a4adbd2ebdab9c844ce0443c43c3ee16d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a4adbd2ebdab9c844ce0443c43c3ee16d">getArgumentFrameIndex</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Argument.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Argument.html">Argument</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a></span><span class="c0">);<br>00207 </span><span class="c0 c9">private</span><span class="c0">:<br>00208 </span><span class="c0 c6">&nbsp;/// LiveOutRegInfo - Information about live out vregs.</span><span class="c0"><br>00209 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1IndexedMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1IndexedMap.html">IndexedMap&lt;LiveOutInfo, VirtReg2IndexFunctor&gt;</a></span><span class="c0">&nbsp;LiveOutRegInfo;<br>00210 };</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c19">Part 7.5.2 Legalizing SelectionDAG</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">Regarding the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a1cf8a7e0935ba8cdf791d07ce1101acb">SelectionDAG</a></span><span class="c5">&nbsp;legalization LLVM document has the following description:</span></p><h4 class="c45 c20"><span class="c5">“</span><span class="c37 c48 c5 c11"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id41">SelectionDAG LegalizeTypes Phase</a></span></h4><p class="c20"><span class="c2">The Legalize phase is in charge of converting a DAG to only use the types that are natively supported by the target.</span></p><p class="c17"><span class="c2">There are two main ways of converting values of unsupported scalar types to values of supported types: converting small types to larger types (“promoting”), and breaking up large integer types into smaller ones (“expanding”). For example, a target might require that all f32 values are promoted to f64 and that all i1/i8/i16 values are promoted to i32. The same target might require that all i64 values be expanded into pairs of i32 values. These changes can insert sign and zero extensions as needed to make sure that the final code has the same behavior as the input.</span></p><p class="c17"><span class="c2">There are two main ways of converting values of unsupported vector types to value of supported types: splitting vector types, multiple times if necessary, until a legal type is found, and extending vector types by adding elements to the end to round them out to legal types (“widening”). If a vector gets split all the way down to single-element parts with no supported vector type being found, the elements are converted to scalars (“scalarizing”).</span></p><p class="c17"><span class="c2">A target implementation tells the legalizer which types are supported (and which register class to use for them) by calling the </span><span class="c10 c5">addRegisterClass</span><span class="c2">&nbsp;method in its</span><span class="c10 c5">TargetLowering</span><span class="c2">&nbsp;constructor.</span></p><h4 class="c45 c20"><a name="h.s3jaedieiajt"></a><span class="c37 c48 c5 c11"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id42">SelectionDAG Legalize Phase</a></span></h4><p class="c20"><span class="c2">The Legalize phase is in charge of converting a DAG to only use the operations that are natively supported by the target.</span></p><p class="c17"><span class="c2">Targets often have weird constraints, such as not supporting every operation on every supported datatype (e.g. X86 does not support byte conditional moves and PowerPC does not support sign-extending loads from a 16-bit memory location). Legalize takes care of this by open-coding another sequence of operations to emulate the operation (“expansion”), by promoting one type to a larger type that supports the operation (“promotion”), or by using a target-specific hook to implement the legalization (“custom”).</span></p><p class="c17"><span class="c2">A target implementation tells the legalizer which operations are not supported (and which of the above three actions to take) by calling the </span><span class="c10 c5">setOperationAction</span><span class="c2">&nbsp;method in its </span><span class="c10 c5">TargetLowering</span><span class="c2">&nbsp;constructor.</span></p><p class="c17"><span class="c2">Prior to the existence of the Legalize passes, we required that every target </span><span class="c2 c29"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#selector">selector</a></span><span class="c2">&nbsp;supported and handled every operator and type even if they are not natively supported. The introduction of the Legalize phases allows all of the canonicalization patterns to be shared across </span><span class="c5">targets,</span><span class="c2">&nbsp;and makes it very easy to optimize the canonicalized code because it is still in the form of a DAG.”</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">Remember that in we mentioned in part 7.5.1.2. the legalization of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">SelectionDAG</a></span><span class="c5">&nbsp;corresponds to the function </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">SelectionDAG</a></span><span class="c0">::Legalize()</span><span class="c5">&nbsp;defined in </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/LegalizeDAG_8cpp_source.html">LegalizeDAG.cpp</a></span><span class="c5">&nbsp;and the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#affe59e12b70bcd9f5476f7ab289fa84a">SelectionDAG::LegalizeTypes</a></span><span class="c0">()</span><span class="c5">&nbsp;function defined in </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/LegalizeTypes_8cpp_source.html">LegalizeTypes.cpp</a></span><span class="c5 c25">:</span></p><p class="c15 c44"><span class="c5"></span></p><p class="c17"><span class="c5"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a6f1e49f6f347835aa6b5a7423dd364d1">0</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a6f1e49f6f347835aa6b5a7423dd364d1">3764</a></span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">SelectionDAG</a></span><span class="c0">::Legalize() {<br>03765 </span><span class="c0 c6">&nbsp;/// run - This is the main entry point to this class.</span><span class="c5"><br>0</span><span class="c0">3767 &nbsp;SelectionDAGLegalize(*this).LegalizeDAG();<br>03768 }</span></p><p class="c15 c44"><span class="c5"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#affe59e12b70bcd9f5476f7ab289fa84a">01146</a></span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#affe59e12b70bcd9f5476f7ab289fa84a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#affe59e12b70bcd9f5476f7ab289fa84a">SelectionDAG::LegalizeTypes</a></span><span class="c0">() {<br>01147 &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DAGTypeLegalizer.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DAGTypeLegalizer.html">DAGTypeLegalizer</a></span><span class="c0">(*this).</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DAGTypeLegalizer.html#a39cafb39798d9b0f3b611b9ee0fff149">run</a></span><span class="c0">();<br>01148 }</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c5">The following code is selected from the definition of the </span><span class="c0">SelectionDAGLegalize </span><span class="c5">class in </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/LegalizeDAG_8cpp_source.html">LegalizeDAG.cpp</a></span><span class="c5">&nbsp;file:</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0">00036 </span><span class="c0 c6">//===----------------------------------------------------------------------===//</span><span class="c0"><br>00037 </span><span class="c0 c6">/// SelectionDAGLegalize - This takes an arbitrary SelectionDAG as input and</span><span class="c0"><br>00038 </span><span class="c0 c6">/// hacks on it until the target machine can handle it. &nbsp;This involves</span><span class="c0"><br>00039 </span><span class="c0 c6">/// eliminating value sizes the machine cannot handle (promoting small sizes to</span><span class="c0"><br>00040 </span><span class="c0 c6">/// large sizes or splitting up large values into small values) as well as</span><span class="c0"><br>00041 </span><span class="c0 c6">/// eliminating operations the machine cannot handle.</span><span class="c0"><br>00043 </span><span class="c0 c6">/// This code also does a small amount of optimization and recognition of idioms</span><span class="c0"><br>00044 </span><span class="c0 c6">/// as part of its processing. &nbsp;For example, if a target does not support a</span><span class="c0"><br>00045 </span><span class="c0 c6">/// 'setcc' instruction efficiently, but does support 'brcc' instruction, this</span><span class="c0"><br>00046 </span><span class="c0 c6">/// will attempt merge setcc and brc instructions into brcc's.</span><span class="c0"><br>00048 </span><span class="c0 c9">namespace </span><span class="c0">{<br>00049 </span><span class="c0 c9">class </span><span class="c0">SelectionDAGLegalize : </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c0">::DAGUpdateListener {<br>00050 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">&nbsp;&amp;TM;<br>00051 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c0">&nbsp;&amp;TLI;<br>00052 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c0">&nbsp;&amp;DAG;<br>00054 </span><span class="c0 c6">&nbsp;/// LegalizePosition - The iterator for walking through the node list.</span><span class="c0"><br>00055 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a62d7889af421e6465805c3e67d7f0610">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a62d7889af421e6465805c3e67d7f0610">SelectionDAG::allnodes_iterator</a></span><span class="c0">&nbsp;LegalizePosition;<br>00057 </span><span class="c0 c6">&nbsp;/// LegalizedNodes - The set of nodes which have already been legalized.</span><span class="c0"><br>00058 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallPtrSet.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;SDNode *, 16&gt;</a></span><span class="c0">&nbsp;LegalizedNodes;<br>00060 &nbsp; </span><span class="c0 c6">// Libcall insertion helpers.</span><span class="c0"><br>00062 </span><span class="c0 c9">public</span><span class="c0">:<br>00063 &nbsp; </span><span class="c0 c9">explicit</span><span class="c0">&nbsp;SelectionDAGLegalize(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c0">&nbsp;&amp;DAG);<br>00065 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;LegalizeDAG();<br>00067 </span><span class="c0 c9">private</span><span class="c0">:<br>00068 </span><span class="c0 c6">&nbsp;/// LegalizeOp - Legalizes the given operation.</span><span class="c0"><br>00069 &nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;LegalizeOp(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Node);<br>00071 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;OptimizeFloatStore(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1StoreSDNode.html">StoreSDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a></span><span class="c0">);<br>00073 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;LegalizeLoadOps(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Node);<br>00074 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;LegalizeStoreOps(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Node);</span></p><p class="c17"><span class="c0">…....................................................</span></p><p class="c17"><span class="c0">01131 </span><span class="c0 c6">/// LegalizeOp - Return a legal replacement for the given operation, with</span><span class="c0"><br>01132 </span><span class="c0 c6">/// all legal operands.</span><span class="c0"><br>01133 </span><span class="c0 c8">void</span><span class="c0">&nbsp;SelectionDAGLegalize::LegalizeOp(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Node) {<br>01134 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(Node-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a></span><span class="c0">() ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac479e53ca98903b1028ec80e12fb0af8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac479e53ca98903b1028ec80e12fb0af8">ISD::TargetConstant</a></span><span class="c0">) </span><span class="c0 c6">// Allow illegal target nodes.</span><span class="c0"><br>01135 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">;<br>01136 <br>01137 &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i = 0, e = Node-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#ab319fc51db27ec95fd50a910c7ccec94">getNumValues</a></span><span class="c0">(); i != e; ++i)<br>01138 &nbsp; &nbsp; assert(TLI.getTypeAction(*DAG.getContext(), Node-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#aed0958deb6d25f9fdccd7518e26b50f8">getValueType</a></span><span class="c0">(i)) ==<br>01139 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TargetLowering::TypeLegal &amp;&amp;<br>01140 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"Unexpected illegal type!"</span><span class="c0">);<br>01141 <br>01142 &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i = 0, e = Node-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#abc5c2f1d47a517373030133c6a102106">getNumOperands</a></span><span class="c0">(); i != e; ++i)<br>01143 &nbsp; &nbsp; assert((TLI.getTypeAction(*DAG.getContext(),<br>01144 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Node-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a></span><span class="c0">(i).</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a></span><span class="c0">()) ==<br>01145 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TargetLowering::TypeLegal ||<br>01146 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Node-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a></span><span class="c0">(i).</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a></span><span class="c0">() ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac479e53ca98903b1028ec80e12fb0af8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac479e53ca98903b1028ec80e12fb0af8">ISD::TargetConstant</a></span><span class="c0">) &amp;&amp;<br>01147 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"Unexpected illegal type!"</span><span class="c0">);<br>01148 <br>01149 &nbsp; </span><span class="c0 c6">// Figure out the correct action; the way to query this varies by opcode</span><span class="c0"><br>01150 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a105fb022b0fac6bc3639537811698acb">TargetLowering::LegalizeAction</a></span><span class="c0">&nbsp;Action = TargetLowering::Legal;<br>01151 &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;SimpleFinishLegalizing = </span><span class="c0 c9">true</span><span class="c0">;<br>01152 &nbsp; </span><span class="c0 c7">switch</span><span class="c0">&nbsp;(Node-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a></span><span class="c0">()) {<br>01153 &nbsp; </span><span class="c0 c7">case</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110afc09e0bddd693dcf9923e4df42473bd9">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110afc09e0bddd693dcf9923e4df42473bd9">ISD::INTRINSIC_W_CHAIN</a></span><span class="c0">:<br>01154 &nbsp; </span><span class="c0 c7">case</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac771b9cda3b889242d457cc4d9b2159c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ac771b9cda3b889242d457cc4d9b2159c">ISD::INTRINSIC_WO_CHAIN</a></span><span class="c0">:<br>01155 &nbsp; </span><span class="c0 c7">case</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a2df96794a99f5d3b4415c4a84e616140">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a2df96794a99f5d3b4415c4a84e616140">ISD::INTRINSIC_VOID</a></span><span class="c0">:<br>01156 &nbsp; </span><span class="c0 c7">case</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a031ce694e40832d40a163d7254a8df14">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a031ce694e40832d40a163d7254a8df14">ISD::STACKSAVE</a></span><span class="c0">:<br>01157 &nbsp; &nbsp; Action = TLI.getOperationAction(Node-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a></span><span class="c0">(), MVT::Other);<br>01158 &nbsp; &nbsp; </span><span class="c0 c7">break</span><span class="c0">;</span></p><p class="c17"><span class="c0">…..........</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">Many function members of the </span><span class="c0">SelectionDAGLegalize</span><span class="c5">&nbsp;class ,such as LegalizeOp, rely on target specific information provided by the </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c0">&nbsp;&amp;TLI</span><span class="c5">&nbsp;member (other function members may also depends on the </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">&nbsp;&amp;TM</span><span class="c5">&nbsp;member) in the </span><span class="c0">SelectionDAGLegalize</span><span class="c5">&nbsp;class.</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c19">Part 7.5.3 Optimizing SelectionDAG</span></p><h4 class="c20 c45"><a name="h.fk0oqxu89fgx"></a><span class="c5">“</span><span class="c37 c48 c5 c11"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id43">SelectionDAG Optimization Phase: the DAG Combiner</a></span></h4><p class="c20"><span class="c2">The SelectionDAG optimization phase is run multiple times for code generation, immediately after the DAG is built and once after each legalization. The first run of the pass allows the initial code to be cleaned up (e.g. performing optimizations that depend on knowing that the operators have restricted type inputs). Subsequent runs of the pass clean up the messy code generated by the Legalize passes, which allows Legalize to be very simple (it can focus on making code legal instead of focusing on generating </span><span class="c2 c41">good</span><span class="c2">&nbsp;and legal code).</span></p><p class="c17"><span class="c2">One important class of optimizations performed is optimizing inserted sign and zero extension instructions. We currently use ad-hoc techniques, but could move to more rigorous techniques in the future. Here are some good papers on the subject:</span></p><p class="c17"><span class="c2">“</span><span class="c2 c29"><a class="c1" href="http://www.eecs.harvard.edu/~nr/pubs/widen-abstract.html">Widening integer arithmetic</a></span><span class="c2">” </span></p><p class="c17"><span class="c2">Kevin Redwine and Norman Ramsey </span></p><p class="c17"><span class="c2">International Conference on Compiler Construction (CC) 2004</span></p><p class="c17"><span class="c2">“</span><span class="c2 c29"><a class="c1" href="http://portal.acm.org/citation.cfm?doid=512529.512552">Effective sign extension elimination</a></span><span class="c2">” </span></p><p class="c17"><span class="c2">Motohiro Kawahito, Hideaki Komatsu, and Toshio Nakatani </span></p><p class="c17"><span class="c2">Proceedings of the ACM SIGPLAN 2002 Conference on Programming Language Design and Implementation.</span><span class="c5">”</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">Remember that we mentioned in part 7.5.1.2. the optimization of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a9bcd28463c35c990c4bc354b0ec70fb8">SelectionDAG</a></span><span class="c5">&nbsp;corresponds to the function </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#abe7bd3138ea3703376dc622650b20ff3">SelectionDAG::Combine</a></span><span class="c5">() defined in </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/DAGCombiner_8cpp_source.html">DAGCombiner.cpp</a></span><span class="c5 c25"><a class="c1" href="http://llvm.org/docs/doxygen/html/DAGCombiner_8cpp_source.html">:</a></span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#abe7bd3138ea3703376dc622650b20ff3">09955</a></span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#abe7bd3138ea3703376dc622650b20ff3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#abe7bd3138ea3703376dc622650b20ff3">SelectionDAG::Combine</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa6d856e4879bb775617f8c3634773b7a">CombineLevel</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">Level</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">AliasAnalysis</a></span><span class="c0">&nbsp;&amp;AA,<br>09956 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a></span><span class="c0">&nbsp;OptLevel) {<br>09957 </span><span class="c0 c6">&nbsp;/// run - This is the main entry point to this class.</span><span class="c0"><br>09959 &nbsp;DAGCombiner(*</span><span class="c0 c9">this</span><span class="c0">, AA, OptLevel).Run(Level);<br>09960 }</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">There are lots and lots of function members (most of them are named as visit**() ) provided in the </span><span class="c0">DAGCombiner</span><span class="c5">&nbsp;class to perform </span><span class="c5">optimizations by folding, reordering, combining and modifying </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c5">&nbsp;nodes. Note that from </span><span class="c0">DAGCombiner</span><span class="c5">&nbsp;‘s constructor we can guess some of the optimizations require alias analysis information. The following is the the definition of the </span><span class="c0">DAGCombiner </span><span class="c5">class and the implementation of the optimization method </span><span class="c0">DAGCombiner::visitMUL(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N)</span><span class="c5">&nbsp;in</span><span class="c5">&nbsp;</span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/DAGCombiner_8cpp_source.html">DAGCombiner.cpp</a></span><span class="c5 c25"><a class="c1" href="http://llvm.org/docs/doxygen/html/DAGCombiner_8cpp_source.html">:</a></span></p><p class="c17 c35"><span class="c5"></span></p><p class="c44 c20"><span class="c0">00058 &nbsp; </span><span class="c0 c9">class </span><span class="c0">DAGCombiner {<br>00059 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c0">&nbsp;&amp;DAG;<br>00060 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c0">&nbsp;&amp;TLI;<br>00061 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa6d856e4879bb775617f8c3634773b7a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa6d856e4879bb775617f8c3634773b7a">CombineLevel</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">Level</a></span><span class="c0">;<br>00062 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a></span><span class="c0">&nbsp;OptLevel;<br>00063 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;LegalOperations;<br>00064 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;LegalTypes;<br>00065 <br>00066 &nbsp; &nbsp; </span><span class="c0 c6">// Worklist of all of the nodes that need to be simplified.</span><span class="c0"><br>00067 &nbsp; &nbsp; </span><span class="c0 c6">//</span><span class="c0"><br>00068 &nbsp; &nbsp; </span><span class="c0 c6">// This has the semantics that when adding to the worklist,</span><span class="c0"><br>00069 &nbsp; &nbsp; </span><span class="c0 c6">// the item added must be next to be processed. It should</span><span class="c0"><br>00070 &nbsp; &nbsp; </span><span class="c0 c6">// also only appear once. The naive approach to this takes</span><span class="c0"><br>00071 &nbsp; &nbsp; </span><span class="c0 c6">// linear time.</span><span class="c0"><br>00072 &nbsp; &nbsp; </span><span class="c0 c6">//</span><span class="c0"><br>00073 &nbsp; &nbsp; </span><span class="c0 c6">// To reduce the insert/remove time to logarithmic, we use</span><span class="c0"><br>00074 &nbsp; &nbsp; </span><span class="c0 c6">// a set and a vector to maintain our worklist.</span><span class="c0"><br>00075 &nbsp; &nbsp; </span><span class="c0 c6">//</span><span class="c0"><br>00076 &nbsp; &nbsp; </span><span class="c0 c6">// The set contains the items on the worklist, but does not</span><span class="c0"><br>00077 &nbsp; &nbsp; </span><span class="c0 c6">// maintain the order they should be visited.</span><span class="c0"><br>00078 &nbsp; &nbsp; </span><span class="c0 c6">//</span><span class="c0"><br>00079 &nbsp; &nbsp; </span><span class="c0 c6">// The vector maintains the order nodes should be visited, but may</span><span class="c0"><br>00080 &nbsp; &nbsp; </span><span class="c0 c6">// contain duplicate or removed nodes. When choosing a node to</span><span class="c0"><br>00081 &nbsp; &nbsp; </span><span class="c0 c6">// visit, we pop off the order stack until we find an item that is</span><span class="c0"><br>00082 &nbsp; &nbsp; </span><span class="c0 c6">// also in the contents set. All operations are O(log N).</span><span class="c0"><br>00083 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallPtrSet.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;SDNode*, 64&gt;</a></span><span class="c0">&nbsp;WorkListContents;<br>00084 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;SDNode*, 64&gt;</a></span><span class="c0">&nbsp;WorkListOrder;<br>00085 <br>00086 &nbsp; &nbsp; </span><span class="c0 c6">// AA - Used for DAG load/store alias analysis.</span><span class="c0"><br>00087 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">AliasAnalysis</a></span><span class="c0">&nbsp;&amp;AA;<br>00088 <br>00089 </span><span class="c0 c6">&nbsp; &nbsp;/// AddUsersToWorkList - When an instruction is simplified, add all users of</span><span class="c0"><br>00090 </span><span class="c0 c6">&nbsp; &nbsp;/// the instruction to the work lists because they might get more simplified</span><span class="c0"><br>00091 </span><span class="c0 c6">&nbsp; &nbsp;/// now.</span><span class="c0"><br>00092 </span><span class="c0 c6">&nbsp; &nbsp;///</span><span class="c0"><br>00093 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;AddUsersToWorkList(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N) {<br>00094 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode_1_1use__iterator.html">SDNode::use_iterator</a></span><span class="c0">&nbsp;UI = N-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a8810bf428dcf84d48f39c8f5ba9a8c94">use_begin</a></span><span class="c0">(), UE = N-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#aef02f2c1bd12936a80611b134b24a47d">use_end</a></span><span class="c0">();<br>00095 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UI != UE; ++UI)<br>00096 &nbsp; &nbsp; &nbsp; &nbsp; AddToWorkList(*UI);<br>00097 &nbsp; &nbsp; }<br>00099 </span><span class="c0 c6">&nbsp; &nbsp;/// visit - call the node-specific routine that knows how to fold each</span><span class="c0"><br>00100 </span><span class="c0 c6">&nbsp; &nbsp;/// particular type of node.</span><span class="c0"><br>00101 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;visit(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00103 &nbsp; </span><span class="c0 c9">public</span><span class="c0">:<br>00104 </span><span class="c0 c6">&nbsp; &nbsp;/// AddToWorkList - Add to the work list making sure its instance is at the</span><span class="c0"><br>00105 </span><span class="c0 c6">&nbsp; &nbsp;/// back (next to be processed.)</span><span class="c0"><br>00106 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;AddToWorkList(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N) {<br>00107 &nbsp; &nbsp; &nbsp; WorkListContents.insert(N);<br>00108 &nbsp; &nbsp; &nbsp; WorkListOrder.push_back(N);<br>00109 &nbsp; &nbsp; }<br>00111 </span><span class="c0 c6">&nbsp; &nbsp;/// removeFromWorkList - remove all instances of N from the worklist.</span><span class="c0"><br>00113 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;removeFromWorkList(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N) {<br>00114 &nbsp; &nbsp; &nbsp; WorkListContents.erase(N);<br>00115 &nbsp; &nbsp; }<br>00117 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;CombineTo(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;*To, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;NumTo,<br>00118 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;AddTo = </span><span class="c0 c9">true</span><span class="c0">); <br>00120 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;CombineTo(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Res, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;AddTo = </span><span class="c0 c9">true</span><span class="c0">) {<br>00121 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;CombineTo(N, &amp;Res, 1, AddTo);<br>00122 &nbsp; &nbsp; }<br>00124 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;CombineTo(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Res0,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Res1,<br>00125 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;AddTo = </span><span class="c0 c9">true</span><span class="c0">) {<br>00126 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;To[] = { Res0, Res1 };<br>00127 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;CombineTo(N, To, 2, AddTo);<br>00128 &nbsp; &nbsp; }<br>00130 &nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;CommitTargetLoweringOpt(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetLowering_1_1TargetLoweringOpt.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1TargetLowering_1_1TargetLoweringOpt.html">TargetLowering::TargetLoweringOpt</a></span><span class="c0">&nbsp;&amp;TLO);<br>00132 &nbsp; </span><span class="c0 c9">private</span><span class="c0">:</span><span class="c0"><br>00134 </span><span class="c0 c6">&nbsp; &nbsp;/// SimplifyDemandedBits - Check the specified integer node value to see if</span><span class="c0"><br>00135 </span><span class="c0 c6">&nbsp; &nbsp;/// it can be simplified or if things it uses can be simplified by bit</span><span class="c0"><br>00136 </span><span class="c0 c6">&nbsp; &nbsp;/// propagation. &nbsp;If so, return true.</span><span class="c0"><br>00137 &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;SimplifyDemandedBits(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op) {<br>00138 &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;BitWidth = Op.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html#a15be9767d0aad93fe5dcb60b7b7a78da">getScalarType</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html#a8cca25ddb3be86ad23567dc8d36dacd3">getSizeInBits</a></span><span class="c0">();<br>00139 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">APInt</a></span><span class="c0">&nbsp;Demanded =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html#a539bdb4fdbf46e0bfcefebf5ac6d21dd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html#a539bdb4fdbf46e0bfcefebf5ac6d21dd">APInt::getAllOnesValue</a></span><span class="c0">(BitWidth);<br>00140 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;SimplifyDemandedBits(Op, Demanded);<br>00141 &nbsp; &nbsp; }<br>00143 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;SimplifyDemandedBits(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1APInt.html">APInt</a></span><span class="c0">&nbsp;&amp;Demanded);<br>00145 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;CombineToPreIndexedLoadStore(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00146 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;CombineToPostIndexedLoadStore(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00148 &nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;ReplaceLoadWithPromotedLoad(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1SPII.html#a3cdeb6983bb5c44506b6fd0e9d0679e7a5069619ca8fdce305534f3fe85091a0f">Load</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*ExtLoad);<br>00149 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;PromoteOperand(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;PVT, </span><span class="c0 c8">bool</span><span class="c0">&nbsp;&amp;Replace);<br>00150 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;SExtPromoteOperand(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;PVT);<br>00151 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;ZExtPromoteOperand(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;PVT);<br>00152 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;PromoteIntBinOp(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op);<br>00153 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;PromoteIntShiftOp(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op);<br>00154 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;PromoteExtend(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op);<br>00155 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;PromoteLoad(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Op);<br>00157 &nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;ExtendSetCCUses(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;SDNode*, 4&gt;</a></span><span class="c0">&nbsp;SetCCs,<br>00158 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a3da04da2a51c5da491960f875a3222ad">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a3da04da2a51c5da491960f875a3222ad">Trunc</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;ExtLoad,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DebugLoc.html">DebugLoc</a></span><span class="c0">&nbsp;DL,<br>00159 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110">ISD::NodeType</a></span><span class="c0">&nbsp;ExtType);<br>00161 </span><span class="c0 c6">&nbsp; &nbsp;/// combine - call the node-specific routine that knows how to fold each</span><span class="c0"><br>00162 </span><span class="c0 c6">&nbsp; &nbsp;/// particular type of node. If that doesn't do anything, try the</span><span class="c0"><br>00163 </span><span class="c0 c6">&nbsp; &nbsp;/// target-specific DAG combines.</span><span class="c0"><br>00164 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;combine(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00166 &nbsp; &nbsp; </span><span class="c0 c6">// Visitation implementation - Implement dag node combining for different</span><span class="c0"><br>00167 &nbsp; &nbsp; </span><span class="c0 c6">// node types. &nbsp;The semantics are as follows:</span><span class="c0"><br>00168 &nbsp; &nbsp; </span><span class="c0 c6">// Return Value:</span><span class="c0"><br>00169 &nbsp; &nbsp; </span><span class="c0 c6">// &nbsp; SDValue.getNode() == 0 - No change was made</span><span class="c0"><br>00170 &nbsp; &nbsp; </span><span class="c0 c6">// &nbsp; SDValue.getNode() == N - N was replaced, is dead and has been handled.</span><span class="c0"><br>00171 &nbsp; &nbsp; </span><span class="c0 c6">// &nbsp; otherwise &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;- N should be replaced by the returned Operand.</span><span class="c0"><br>00173 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;visitTokenFactor(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00174 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;visitMERGE_VALUES(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00175 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;visitADD(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00176 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;visitSUB(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00177 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;visitADDC(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00178 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;visitSUBC(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00179 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;visitADDE(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00180 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;visitSUBE(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00181 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;visitMUL(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);</span></p><p class="c17"><span class="c0">…................................ &nbsp;// lots and lots of visit** functions here//...............</span></p><p class="c17"><span class="c0">//Constructor:</span></p><p class="c17"><span class="c0">00316 &nbsp; </span><span class="c0 c9">public</span><span class="c0">:<br>00317 &nbsp; &nbsp; DAGCombiner(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c0">&nbsp;&amp;D,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">AliasAnalysis</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11bad9577456b5bb7a03b7f42a710e122ab5">A</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a></span><span class="c0">&nbsp;OL)<br>00318 &nbsp; &nbsp; &nbsp; : DAG(D), TLI(D.getTargetLoweringInfo()),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">Level</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa6d856e4879bb775617f8c3634773b7aa9386e6e4a4c86dabf136bc0fc9f6cf3b">BeforeLegalizeTypes</a></span><span class="c0">),<br>00319 &nbsp; &nbsp; &nbsp; &nbsp; OptLevel(OL), LegalOperations(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/AliasAnalysisEvaluator_8cpp.html#a3898a228575af19a9b2052f2b3677dce">false</a></span><span class="c0">), LegalTypes(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/AliasAnalysisEvaluator_8cpp.html#a3898a228575af19a9b2052f2b3677dce">false</a></span><span class="c0">), AA(A) {}</span></p><p class="c44 c20"><span class="c0">…....................................</span></p><p class="c17"><span class="c0">01759</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;DAGCombiner::visitMUL(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N) {<br>01760 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;N0 = N-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a></span><span class="c0">(0);<br>01761 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;N1 = N-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a836c27481205f56e708fe0c15538d5ff">getOperand</a></span><span class="c0">(1);<br>01762 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ConstantSDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ConstantSDNode.html">ConstantSDNode</a></span><span class="c0">&nbsp;*N0C =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a8d8db3a5b2508f7086ef2d43036007b3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a8d8db3a5b2508f7086ef2d43036007b3">dyn_cast</a></span><span class="c0">&lt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ConstantSDNode.html">ConstantSDNode</a></span><span class="c0">&gt;(N0);<br>01763 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ConstantSDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ConstantSDNode.html">ConstantSDNode</a></span><span class="c0">&nbsp;*N1C =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a8d8db3a5b2508f7086ef2d43036007b3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a8d8db3a5b2508f7086ef2d43036007b3">dyn_cast</a></span><span class="c0">&lt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ConstantSDNode.html">ConstantSDNode</a></span><span class="c0">&gt;(N1);<br>01764 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT = N0.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a7d2ad4aa4277eb4e1138ff9791c8fbb7">getValueType</a></span><span class="c0">();<br>01766 &nbsp; </span><span class="c0 c6">// fold vector ops</span><span class="c0"><br>01767 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(VT.isVector()) {<br>01768 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;FoldedVOp = SimplifyVBinOp(N);<br>01769 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(FoldedVOp.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">()) </span><span class="c0 c7">return</span><span class="c0">&nbsp;FoldedVOp;<br>01770 &nbsp; }<br>01771 <br>01772 &nbsp; </span><span class="c0 c6">// fold (mul x, undef) -&gt; 0</span><span class="c0"><br>01773 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(N0.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a></span><span class="c0">() ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7c6d8f265e9e16e5debdb9a536b55d3d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7c6d8f265e9e16e5debdb9a536b55d3d">ISD::UNDEF</a></span><span class="c0">&nbsp;|| N1.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a0caf6a31d8034336a9ba7791a5f583f1">getOpcode</a></span><span class="c0">() ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7c6d8f265e9e16e5debdb9a536b55d3d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a7c6d8f265e9e16e5debdb9a536b55d3d">ISD::UNDEF</a></span><span class="c0">)<br>01774 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;DAG.getConstant(0, VT);<br>01775 &nbsp; </span><span class="c0 c6">// fold (mul c1, c2) -&gt; c1*c2</span><span class="c0"><br>01776 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(N0C &amp;&amp; N1C)<br>01777 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;DAG.FoldConstantArithmetic(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a></span><span class="c0">, VT, N0C, N1C);<br>01778 &nbsp; </span><span class="c0 c6">// canonicalize constant to RHS</span><span class="c0"><br>01779 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(N0C &amp;&amp; !N1C)<br>01780 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;DAG.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a></span><span class="c0">, N-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a630d6793e4444e4996dfa80f1fce18c8">getDebugLoc</a></span><span class="c0">(), VT, N1, N0);<br>01781 &nbsp; </span><span class="c0 c6">// fold (mul x, 0) -&gt; 0</span><span class="c0"><br>01782 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(N1C &amp;&amp; N1C-&gt;isNullValue())<br>01783 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;N1;<br>01784 &nbsp; </span><span class="c0 c6">// fold (mul x, -1) -&gt; 0-x</span><span class="c0"><br>01785 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(N1C &amp;&amp; N1C-&gt;isAllOnesValue())<br>01786 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;DAG.getNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a></span><span class="c0">, N-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a630d6793e4444e4996dfa80f1fce18c8">getDebugLoc</a></span><span class="c0">(), VT,<br>01787 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DAG.getConstant(0, VT), N0);<br>01788 &nbsp; </span><span class="c0 c6">// fold (mul x, (1 &lt;&lt; c)) -&gt; x &lt;&lt; c</span><span class="c0"><br>01789 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(N1C &amp;&amp; N1C-&gt;getAPIntValue().isPowerOf2())<br>01790 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;DAG.getNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a></span><span class="c0">, N-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a630d6793e4444e4996dfa80f1fce18c8">getDebugLoc</a></span><span class="c0">(), VT, N0,<br>01791 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DAG.getConstant(N1C-&gt;getAPIntValue().logBase2(),<br>01792 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a38a58b2024f78c9d458a3127a8d087bd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a38a58b2024f78c9d458a3127a8d087bd">getShiftAmountTy</a></span><span class="c0">(N0.getValueType())));<br>01793 &nbsp; </span><span class="c0 c6">// fold (mul x, -(1 &lt;&lt; c)) -&gt; -(x &lt;&lt; c) or (-x) &lt;&lt; c</span><span class="c0"><br>01794 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(N1C &amp;&amp; (-N1C-&gt;getAPIntValue()).isPowerOf2()) {<br>01795 &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Log2Val = (-N1C-&gt;getAPIntValue()).</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1APIntOps.html#a4a8fe7a278424a14cecbea8b3cbaef5d">logBase2</a></span><span class="c0">();<br>01796 &nbsp; &nbsp; </span><span class="c0 c6">// FIXME: If the input is something that is easily negated (e.g. a</span><span class="c0"><br>01797 &nbsp; &nbsp; </span><span class="c0 c6">// single-use add), we should put the negate there.</span><span class="c0"><br>01798 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;DAG.getNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a9fa617e5567c3c2638938f7b9ddc3f1c">ISD::SUB</a></span><span class="c0">, N-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a630d6793e4444e4996dfa80f1fce18c8">getDebugLoc</a></span><span class="c0">(), VT,<br>01799 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DAG.getConstant(0, VT),<br>01800 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DAG.getNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a></span><span class="c0">, N-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a630d6793e4444e4996dfa80f1fce18c8">getDebugLoc</a></span><span class="c0">(), VT, N0,<br>01801 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DAG.getConstant(Log2Val,<br>01802 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a38a58b2024f78c9d458a3127a8d087bd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html#a38a58b2024f78c9d458a3127a8d087bd">getShiftAmountTy</a></span><span class="c0">(N0.getValueType()))));<br>01803 &nbsp; }<br>01804 &nbsp; </span><span class="c0 c6">// (mul (shl X, c1), c2) -&gt; (mul X, c2 &lt;&lt; c1)</span><span class="c0"><br>01805 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(N1C &amp;&amp; N0.getOpcode() ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a></span><span class="c0">&nbsp;&amp;&amp;<br>01806 &nbsp; &nbsp; &nbsp; isa&lt;ConstantSDNode&gt;(N0.getOperand(1))) {<br>01807 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;C3 = DAG.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a></span><span class="c0">, N-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a630d6793e4444e4996dfa80f1fce18c8">getDebugLoc</a></span><span class="c0">(), VT,<br>01808 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;N1, N0.getOperand(1));<br>01809 &nbsp; &nbsp; AddToWorkList(C3.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">());<br>01810 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;DAG.getNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a></span><span class="c0">, N-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a630d6793e4444e4996dfa80f1fce18c8">getDebugLoc</a></span><span class="c0">(), VT,<br>01811 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;N0.getOperand(0), C3);<br>01812 &nbsp; }<br>01813 <br>01814 &nbsp; </span><span class="c0 c6">// Change (mul (shl X, C), Y) -&gt; (shl (mul X, Y), C) when the shift has one</span><span class="c0"><br>01815 &nbsp; </span><span class="c0 c6">// use.</span><span class="c0"><br>01816 &nbsp; {<br>01817 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Sh(0,0),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a></span><span class="c0">(0,0);<br>01818 &nbsp; &nbsp; </span><span class="c0 c6">// Check for both (mul (shl X, C), Y) &nbsp;and &nbsp;(mul Y, (shl X, C)).</span><span class="c0"><br>01819 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(N0.getOpcode() ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a></span><span class="c0">&nbsp;&amp;&amp; isa&lt;ConstantSDNode&gt;(N0.getOperand(1)) &amp;&amp;<br>01820 &nbsp; &nbsp; &nbsp; &nbsp; N0.getNode()-&gt;hasOneUse()) {<br>01821 &nbsp; &nbsp; &nbsp; Sh = N0;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a></span><span class="c0">&nbsp;= N1;<br>01822 &nbsp; &nbsp; } </span><span class="c0 c7">else</span><span class="c0">&nbsp;</span><span class="c0 c7">if</span><span class="c0">&nbsp;(N1.getOpcode() ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a></span><span class="c0">&nbsp;&amp;&amp;<br>01823 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;isa&lt;ConstantSDNode&gt;(N1.getOperand(1)) &amp;&amp;<br>01824 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;N1.getNode()-&gt;hasOneUse()) {<br>01825 &nbsp; &nbsp; &nbsp; Sh = N1;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a></span><span class="c0">&nbsp;= N0;<br>01826 &nbsp; &nbsp; }<br>01828 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(Sh.getNode()) {<br>01829 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;Mul = DAG.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a></span><span class="c0">, N-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a630d6793e4444e4996dfa80f1fce18c8">getDebugLoc</a></span><span class="c0">(), VT,<br>01830 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Sh.getOperand(0),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a></span><span class="c0">);<br>01831 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;DAG.getNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a8cc94e03dea594863073a02f5bb94997">ISD::SHL</a></span><span class="c0">, N-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a630d6793e4444e4996dfa80f1fce18c8">getDebugLoc</a></span><span class="c0">(), VT,<br>01832 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Mul, Sh.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a5891be2cd50b5b7f01eb7c1cb0e7a682">getOperand</a></span><span class="c0">(1));<br>01833 &nbsp; &nbsp; }<br>01834 &nbsp; }<br>01836 &nbsp; </span><span class="c0 c6">// fold (mul (add x, c1), c2) -&gt; (add (mul x, c2), c1*c2)</span><span class="c0"><br>01837 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(N1C &amp;&amp; N0.getOpcode() ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a></span><span class="c0">&nbsp;&amp;&amp; N0.getNode()-&gt;hasOneUse() &amp;&amp;<br>01838 &nbsp; &nbsp; &nbsp; isa&lt;ConstantSDNode&gt;(N0.getOperand(1)))<br>01839 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;DAG.getNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a269996b43a1f3e1d1f84a70fd4387535">ISD::ADD</a></span><span class="c0">, N-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a630d6793e4444e4996dfa80f1fce18c8">getDebugLoc</a></span><span class="c0">(), VT,<br>01840 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DAG.getNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a></span><span class="c0">, N0.getDebugLoc(), VT,<br>01841 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;N0.getOperand(0), N1),<br>01842 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DAG.getNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a></span><span class="c0">, N1.getDebugLoc(), VT,<br>01843 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;N0.getOperand(1), N1));<br>01844 <br>01845 &nbsp; </span><span class="c0 c6">// reassociate mul</span><span class="c0"><br>01846 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;RMUL = ReassociateOps(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110ad8aec9273962cf78d087090c11a1dd1c">ISD::MUL</a></span><span class="c0">, N-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#a630d6793e4444e4996dfa80f1fce18c8">getDebugLoc</a></span><span class="c0">(), N0, N1);<br>01847 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(RMUL.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html#a3fad042e27ba626acf5366c845b352d3">getNode</a></span><span class="c0">() != 0)<br>01848 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;RMUL;<br>01850 &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">();<br>01851 }</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c19">Part 7.5.4 Selecting instructions from SelectionDAG</span></p><p class="c17 c35"><span class="c11 c16"></span></p><p class="c17"><span class="c11 c16">The Select phase is the bulk of the target-specific code for instruction selection. This phase takes a legal SelectionDAG as input, pattern matches the instructions supported by the target to this DAG, and produces a new DAG of target code. For example, consider the following LLVM fragment:</span></p><p class="c17"><span class="c18 c5 c21">%t1</span><span class="c18 c5">&nbsp;= </span><span class="c18 c26 c5 c25">fadd</span><span class="c18 c5">&nbsp;</span><span class="c18 c5 c71">float</span><span class="c18 c5">&nbsp;</span><span class="c18 c5 c21">%W</span><span class="c18 c5">, </span><span class="c18 c5 c21">%X</span><span class="c18 c5"><br></span><span class="c18 c5 c21">%t2</span><span class="c18 c5">&nbsp;= </span><span class="c18 c26 c5 c25">fmul</span><span class="c18 c5">&nbsp;</span><span class="c18 c5 c71">float</span><span class="c18 c5">&nbsp;</span><span class="c18 c5 c21">%t1</span><span class="c18 c5">, </span><span class="c18 c5 c21">%Y</span><span class="c18 c5"><br></span><span class="c18 c5 c21">%t3</span><span class="c18 c5">&nbsp;= </span><span class="c18 c26 c5 c25">fadd</span><span class="c18 c5">&nbsp;</span><span class="c18 c5 c71">float</span><span class="c18 c5">&nbsp;</span><span class="c18 c5 c21">%t2</span><span class="c18 c5">, </span><span class="c18 c5 c21">%Z</span><span class="c18 c5"><br></span></p><p class="c17"><span class="c11 c16">This LLVM code corresponds to a SelectionDAG that looks basically like this:</span></p><p class="c17"><span class="c18 c5">(fadd:f32 (fmul:f32 (fadd:f32 W, X), Y), Z)</span></p><p class="c17"><span class="c11 c16">If a target supports floating point multiply-and-add (FMA) operations, one of the adds can be merged with the multiply. On the PowerPC, for example, the output of the instruction selector might look like this DAG:</span></p><p class="c17"><span class="c18 c5">(FMADDS (FADDS W, X), Y, Z)</span></p><p class="c17"><span class="c11 c16">The </span><span class="c10 c5">FMADDS</span><span class="c11 c16">&nbsp;instruction is a ternary instruction that multiplies its first two operands and adds the third (as single-precision floating-point numbers). The </span><span class="c10 c5">FADDS</span><span class="c11 c16">instruction is a simple binary single-precision add instruction. To perform this pattern match, the PowerPC backend includes the following instruction definitions:</span></p><p class="c17"><span class="c18 c5">def FMADDS : AForm_1&lt;59, 29,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(ops F4RC:$FRT, F4RC:$FRA, F4RC:$FRC, F4RC:$FRB),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"fmadds $FRT, $FRA, $FRC, $FRB",<br></span><span class="c34 c5 c73">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [(set F4RC:$FRT, (fadd (fmul F4RC:$FRA, F4RC:$FRC),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; F4RC:$FRB))]&gt;;<br></span><span class="c18 c5">def FADDS : AForm_2&lt;59, 21,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(ops F4RC:$FRT, F4RC:$FRA, F4RC:$FRB),<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"fadds $FRT, $FRA, $FRB",<br></span><span class="c34 c5 c73">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [(set F4RC:$FRT, (fadd F4RC:$FRA, F4RC:$FRB))]&gt;;<br></span></p><p class="c17"><span class="c11 c16">The highlighted portion of the instruction definitions indicates the pattern used to match the instructions. The DAG operators (like </span><span class="c10 c5">fmul</span><span class="c11 c16">/</span><span class="c10 c5">fadd</span><span class="c11 c16">) are defined in the </span><span class="c10 c5">include/llvm/Target/TargetSelectionDAG.td</span><span class="c11 c16">&nbsp;file. “</span><span class="c10 c5">F4RC</span><span class="c11 c16">” is the register class of the input and result values.</span></p><p class="c17"><span class="c11 c16">The TableGen DAG instruction selector generator reads the instruction patterns in the </span><span class="c10 c5">.td</span><span class="c11 c16">&nbsp;file and automatically builds parts of the pattern matching code (see the following comments in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html">SelectionDAGISel</a></span><span class="c11 c16">&nbsp;interface) for your target. </span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html">SelectionDAGISel</a></span><span class="c11 c16">&nbsp;is the common base class used for SelectionDAG-based pattern-matching instruction selectors.</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html">00042</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html">SelectionDAGISel</a></span><span class="c0">&nbsp;: </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a></span><span class="c0">&nbsp;{<br>00043 </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a306086e3142a8dd0bdf6698bde8672e1">00044</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a306086e3142a8dd0bdf6698bde8672e1">TM</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ad114b2de47d6b8da17f3f60359e4d8e7">00045</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ad114b2de47d6b8da17f3f60359e4d8e7">TLI</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a4539a142623c3a6f33247c1f291b742e">00046</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLibraryInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a4539a142623c3a6f33247c1f291b742e">LibInfo</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">00047</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html">FunctionLoweringInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a23107e32342f5488a5edfa71aff54700">00048</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a23107e32342f5488a5edfa71aff54700">MF</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a303effb01b1d92c71b15cc25b2438917">00049</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a303effb01b1d92c71b15cc25b2438917">RegInfo</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2b37615f95f3e2fdd5564188c0965132">00050</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2b37615f95f3e2fdd5564188c0965132">CurDAG</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">00051</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html">SelectionDAGBuilder</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a77fb1a1550d29830789e60ab9262bcae">00052</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">AliasAnalysis</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a77fb1a1550d29830789e60ab9262bcae">AA</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a5f299b9982f79a3a122ba449ea28ef4b">00053</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GCFunctionInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1GCFunctionInfo.html">GCFunctionInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a5f299b9982f79a3a122ba449ea28ef4b">GFI</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a1a7c2a3380a9f770ba082a070c592df6">00054</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a1a7c2a3380a9f770ba082a070c592df6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a1a7c2a3380a9f770ba082a070c592df6">OptLevel</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a1f3ebb920b40c460c3b278c169cc67e3">00055</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a1f3ebb920b40c460c3b278c169cc67e3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a1f3ebb920b40c460c3b278c169cc67e3">ID</a></span><span class="c0">;<br>00057 &nbsp; </span><span class="c0 c9">explicit</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a93adf9ddd2303e9bdc0d55beb171a868">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a93adf9ddd2303e9bdc0d55beb171a868">SelectionDAGISel</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">&nbsp;&amp;tm,<br>00058 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a></span><span class="c0">&nbsp;OL =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4a3393aeca011bfa5bdd6a8e64edd7f565">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4a3393aeca011bfa5bdd6a8e64edd7f565">CodeGenOpt::Default</a></span><span class="c0">);<br>00059 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#aab3f5f27748274f8005105493a8c87d9">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#aab3f5f27748274f8005105493a8c87d9">~SelectionDAGISel</a></span><span class="c0">();<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a5393ab75cb4bdfd935abd08d19522291">00061</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetLowering.html">TargetLowering</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a5393ab75cb4bdfd935abd08d19522291">getTargetLowering</a></span><span class="c0">() { </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ad114b2de47d6b8da17f3f60359e4d8e7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ad114b2de47d6b8da17f3f60359e4d8e7">TLI</a></span><span class="c0">; }<br>00063 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#aa6e3daee5aa2faf95a6e846301eba584">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#aa6e3daee5aa2faf95a6e846301eba584">getAnalysisUsage</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AnalysisUsage.html">AnalysisUsage</a></span><span class="c0">&nbsp;&amp;AU) </span><span class="c0 c9">const</span><span class="c0">;<br>00065 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ac27df519719929bb886ae92fca30b6d2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ac27df519719929bb886ae92fca30b6d2">runOnMachineFunction</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a23107e32342f5488a5edfa71aff54700">MF</a></span><span class="c0">);<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ad923a79b4e8e6f746900b6cd360ae8b6">00067</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ad923a79b4e8e6f746900b6cd360ae8b6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ad923a79b4e8e6f746900b6cd360ae8b6">EmitFunctionEntryCode</a></span><span class="c0">() {}<br>00069 </span><span class="c0 c6">&nbsp;/// PreprocessISelDAG - This hook allows targets to hack on the graph before</span><span class="c0"><br>00070 </span><span class="c0 c6">&nbsp;/// instruction selection starts.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a9bcf997fee822474340db5e11c5217f7">00071</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a9bcf997fee822474340db5e11c5217f7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a9bcf997fee822474340db5e11c5217f7">PreprocessISelDAG</a></span><span class="c0">() {}<br>00073 </span><span class="c0 c6">&nbsp;/// PostprocessISelDAG() - This hook allows the target to hack on the graph</span><span class="c0"><br>00074 </span><span class="c0 c6">&nbsp;/// right after selection.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2070933838365d7033fa1038ef0bf22c">00075</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2070933838365d7033fa1038ef0bf22c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2070933838365d7033fa1038ef0bf22c">PostprocessISelDAG</a></span><span class="c0">() {}<br>00077 </span><span class="c0 c6">&nbsp;/// Select - Main hook targets implement to select a node.</span><span class="c0"><br>00078 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a5276d410489e22e2f40aec94d12475cb">Select</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N) = 0;<br>00080 </span><span class="c0 c6">&nbsp;/// SelectInlineAsmMemoryOperand - Select the specified address as a target</span><span class="c0"><br>00081 </span><span class="c0 c6">&nbsp;/// addressing mode, according to the specified constraint code. &nbsp;If this does</span><span class="c0"><br>00082 </span><span class="c0 c6">&nbsp;/// not match or is not implemented, return true. &nbsp;The resultant operands</span><span class="c0"><br>00083 </span><span class="c0 c6">&nbsp;/// (which will appear in the machine instruction) should be added to the</span><span class="c0"><br>00084 </span><span class="c0 c6">&nbsp;/// OutOps vector.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ab063178098b4d0bc5a50a94195c28590">00085</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ab063178098b4d0bc5a50a94195c28590">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ab063178098b4d0bc5a50a94195c28590">SelectInlineAsmMemoryOperand</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;&amp;Op,<br>00086 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">char</span><span class="c0">&nbsp;ConstraintCode,<br>00087 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; std::vector&lt;SDValue&gt; &amp;OutOps) {<br>00088 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00089 &nbsp; }<br>00091 </span><span class="c0 c6">&nbsp;/// IsProfitableToFold - Returns true if it's profitable to fold the specific</span><span class="c0"><br>00092 </span><span class="c0 c6">&nbsp;/// operand node N of U during instruction selection that starts at Root.</span><span class="c0"><br>00093 &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a7c45584212fcb230d5bcee0754b3ce64">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a7c45584212fcb230d5bcee0754b3ce64">IsProfitableToFold</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;N,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*U,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Root) </span><span class="c0 c9">const</span><span class="c0">;<br>00095 </span><span class="c0 c6">&nbsp;/// IsLegalToFold - Returns true if the specific operand node N of</span><span class="c0"><br>00096 </span><span class="c0 c6">&nbsp;/// U can be folded during instruction selection that starts at Root.</span><span class="c0"><br>00099 &nbsp;</span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#afde899bbadc9622ad6108694d44d7f36">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#afde899bbadc9622ad6108694d44d7f36">IsLegalToFold</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;N,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*U,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Root,<br>00100 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a1a7c2a3380a9f770ba082a070c592df6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a1a7c2a3380a9f770ba082a070c592df6">OptLevel</a></span><span class="c0">,<br>00101 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;IgnoreChains = </span><span class="c0 c9">false</span><span class="c0">);<br>00103 &nbsp; </span><span class="c0 c6">// Opcodes used by the DAG state machine:</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2">00104</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">enum</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2">BuiltinOpcodes</a></span><span class="c0">&nbsp;{<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a00188f1375143944dbffe1beb1eb3297">00105</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a00188f1375143944dbffe1beb1eb3297">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a00188f1375143944dbffe1beb1eb3297">OPC_Scope</a></span><span class="c0">,<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2ab10ccf4011b7d68e3fff1cbb338a57d3">00106</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2ab10ccf4011b7d68e3fff1cbb338a57d3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2ab10ccf4011b7d68e3fff1cbb338a57d3">OPC_RecordNode</a></span><span class="c0">,<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2ae10cd161a6495fede5121b564d10ce2a">00116</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2ae10cd161a6495fede5121b564d10ce2a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2ae10cd161a6495fede5121b564d10ce2a">OPC_CheckOpcode</a></span><span class="c0">,<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a2827e53ef7420b3a5ad346366fa927b5">00117</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a2827e53ef7420b3a5ad346366fa927b5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a2827e53ef7420b3a5ad346366fa927b5">OPC_SwitchOpcode</a></span><span class="c0">,<br>….................................<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a6dd26f64fb30f256036e93271c1560fd">00128</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a6dd26f64fb30f256036e93271c1560fd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a6dd26f64fb30f256036e93271c1560fd">OPC_CheckFoldableChainNode</a></span><span class="c0">,<br>00129 <br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a4d26ece079833899ec7dfc775b6e2628">00130</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a4d26ece079833899ec7dfc775b6e2628">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a4d26ece079833899ec7dfc775b6e2628">OPC_EmitInteger</a></span><span class="c0">,<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a61b4fade49d0ca64657a3030f46495d2">00131</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a61b4fade49d0ca64657a3030f46495d2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a61b4fade49d0ca64657a3030f46495d2">OPC_EmitRegister</a></span><span class="c0">,<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2abd736102925abf791e7f9df182241783">00132</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2abd736102925abf791e7f9df182241783">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2abd736102925abf791e7f9df182241783">OPC_EmitRegister2</a></span><span class="c0">,<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2af63f0634fcc36241cccfe4a2e57266f2">00133</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2af63f0634fcc36241cccfe4a2e57266f2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2af63f0634fcc36241cccfe4a2e57266f2">OPC_EmitConvertToTarget</a></span><span class="c0">,<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a5a9ff4093959a69b182c880dadf52829">00134</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a5a9ff4093959a69b182c880dadf52829">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a32bc192d568793fb156fd6d6b75cb3c2a5a9ff4093959a69b182c880dadf52829">OPC_EmitMergeInputChains</a></span><span class="c0">,<br>…......................................<br>00143 &nbsp; };<br>….......................<br>00162 </span><span class="c0 c6">&nbsp;/// getNumFixedFromVariadicInfo - Transform an EmitNode flags word into the</span><span class="c0"><br>00163 </span><span class="c0 c6">&nbsp;/// number of fixed arity values that should be skipped when copying from the</span><span class="c0"><br>00164 </span><span class="c0 c6">&nbsp;/// root.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a44db62a12476aec69cc958a5502f94df">00165</a></span><span class="c0">&nbsp; </span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c9">inline</span><span class="c0">&nbsp;</span><span class="c0 c8">int</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a44db62a12476aec69cc958a5502f94df">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a44db62a12476aec69cc958a5502f94df">getNumFixedFromVariadicInfo</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceSIInstrFlags.html#a607b4b0952924970b77a9c6b42898b54">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceSIInstrFlags.html#a607b4b0952924970b77a9c6b42898b54">Flags</a></span><span class="c0">) {<br>00166 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;((Flags&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ad7a717074584371d05b88acf2955b3c5a595afa3f4e6a97e0ae7c70ae9ff0963f">OPFL_VariadicInfo</a></span><span class="c0">) &gt;&gt; 4)-1;<br>00167 &nbsp; }<br>00170 </span><span class="c0 c9">protected</span><span class="c0">:<br>00171 </span><span class="c0 c6">&nbsp;/// DAGSize - Size of DAG being instruction selected.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a3206f1a81f9832fbffe4fe3cb2be4d52">00173</a></span><span class="c0">&nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a3206f1a81f9832fbffe4fe3cb2be4d52">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a3206f1a81f9832fbffe4fe3cb2be4d52">DAGSize</a></span><span class="c0">;<br>00175 </span><span class="c0 c6">&nbsp;/// ReplaceUses - replace all uses of the old node F with the use</span><span class="c0"><br>00176 </span><span class="c0 c6">&nbsp;/// of the new node T.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a84e771c0f56c984d8ee4a85c0cb46ed3">00177</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a84e771c0f56c984d8ee4a85c0cb46ed3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a84e771c0f56c984d8ee4a85c0cb46ed3">ReplaceUses</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classT.html">T</a></span><span class="c0">) {<br>00178 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2b37615f95f3e2fdd5564188c0965132">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2b37615f95f3e2fdd5564188c0965132">CurDAG</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#ac630ccda26fea2f45afa3fb89bc1a8f4">ReplaceAllUsesOfValueWith</a></span><span class="c0">(F, T);<br>00179 &nbsp; }<br>00181 </span><span class="c0 c6">&nbsp;/// ReplaceUses - replace all uses of the old nodes F with the use</span><span class="c0"><br>00182 </span><span class="c0 c6">&nbsp;/// of the new nodes T.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67ef64ef7639ff3e2f43230a0623d33c">00183</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67ef64ef7639ff3e2f43230a0623d33c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67ef64ef7639ff3e2f43230a0623d33c">ReplaceUses</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></span><span class="c0">, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classT.html">T</a></span><span class="c0">, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Num) {<br>00184 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2b37615f95f3e2fdd5564188c0965132">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2b37615f95f3e2fdd5564188c0965132">CurDAG</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a2869d5459dca008c1c7a1e824e7faf5e">ReplaceAllUsesOfValuesWith</a></span><span class="c0">(F, T, Num);<br>00185 &nbsp; }<br>00187 </span><span class="c0 c6">&nbsp;/// ReplaceUses - replace all uses of the old node F with the use</span><span class="c0"><br>00188 </span><span class="c0 c6">&nbsp;/// of the new node T.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a9afa715cd3c35b04b6637eb74ec22c96">00189</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a9afa715cd3c35b04b6637eb74ec22c96">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a9afa715cd3c35b04b6637eb74ec22c96">ReplaceUses</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classT.html">T</a></span><span class="c0">) {<br>00190 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2b37615f95f3e2fdd5564188c0965132">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2b37615f95f3e2fdd5564188c0965132">CurDAG</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a307e5150c6c85f43348d2b09a69d7591">ReplaceAllUsesWith</a></span><span class="c0">(F, T);<br>00191 &nbsp; }<br>00194 </span><span class="c0 c6">&nbsp;/// SelectInlineAsmMemoryOperands - Calls to this are automatically generated</span><span class="c0"><br>00195 </span><span class="c0 c6">&nbsp;/// by tblgen. &nbsp;Others should not call it.</span><span class="c0"><br>00196 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a93c0fc0673147d4ecb1e4731f9cce4ad">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a93c0fc0673147d4ecb1e4731f9cce4ad">SelectInlineAsmMemoryOperands</a></span><span class="c0">(std::vector&lt;SDValue&gt; &amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceR600Operands.html#af27934c33c08a9947ae861deaad8a2a8">Ops</a></span><span class="c0">);<br>00199 </span><span class="c0 c9">public</span><span class="c0">:<br>00200 &nbsp; </span><span class="c0 c6">// Calls to these predicates are generated by tblgen.</span><span class="c0"><br>00201 &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ad51b12121dcca6c724763203d1132498">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ad51b12121dcca6c724763203d1132498">CheckAndMask</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;LHS,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ConstantSDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ConstantSDNode.html">ConstantSDNode</a></span><span class="c0">&nbsp;*RHS,<br>00202 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int64_t DesiredMaskS) </span><span class="c0 c9">const</span><span class="c0">;<br>00203 &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a34ef61e9e1f8ff4fa700ad52648e19cf">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a34ef61e9e1f8ff4fa700ad52648e19cf">CheckOrMask</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;LHS,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ConstantSDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ConstantSDNode.html">ConstantSDNode</a></span><span class="c0">&nbsp;*RHS,<br>00204 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int64_t DesiredMaskS) </span><span class="c0 c9">const</span><span class="c0">;<br>00205 <br>00207 </span><span class="c0 c6">&nbsp;/// CheckPatternPredicate - This function is generated by tblgen in the</span><span class="c0"><br>00208 </span><span class="c0 c6">&nbsp;/// target. &nbsp;It runs the specified pattern predicate and returns true if it</span><span class="c0"><br>00209 </span><span class="c0 c6">&nbsp;/// succeeds or false if it fails. &nbsp;The number is a private implementation</span><span class="c0"><br>00210 </span><span class="c0 c6">&nbsp;/// detail to the code tblgen produces.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a34b4d24412618dbb8dd73e03fcc389aa">00211</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a34b4d24412618dbb8dd73e03fcc389aa">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a34b4d24412618dbb8dd73e03fcc389aa">CheckPatternPredicate</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;PredNo)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00212 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></span><span class="c0">(</span><span class="c0 c14">"Tblgen should generate the implementation of this!"</span><span class="c0">);<br>00213 &nbsp; }<br>00215 </span><span class="c0 c6">&nbsp;/// CheckNodePredicate - This function is generated by tblgen in the target.</span><span class="c0"><br>00216 </span><span class="c0 c6">&nbsp;/// It runs node predicate number PredNo and returns true if it succeeds or</span><span class="c0"><br>00217 </span><span class="c0 c6">&nbsp;/// false if it fails. &nbsp;The number is a private implementation</span><span class="c0"><br>00218 </span><span class="c0 c6">&nbsp;/// detail to the code tblgen produces.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a63d859c0c780cc6883e8e7e18c48fbf9">00219</a></span><span class="c0">&nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a63d859c0c780cc6883e8e7e18c48fbf9">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a63d859c0c780cc6883e8e7e18c48fbf9">CheckNodePredicate</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;PredNo)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00220 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></span><span class="c0">(</span><span class="c0 c14">"Tblgen should generate the implementation of this!"</span><span class="c0">);<br>00221 &nbsp; }<br>…................................<br>00237 </span><span class="c0 c9">private</span><span class="c0">:<br>00239 &nbsp; </span><span class="c0 c6">// Calls to these functions are generated by tblgen.</span><span class="c0"><br>00240 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Select_INLINEASM(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00241 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Select_UNDEF(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00242 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;CannotYetSelect(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00244 </span><span class="c0 c9">private</span><span class="c0">:<br>00245 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;DoInstructionSelection();<br>00246 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*MorphNode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Node, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;TargetOpc,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SDVTList.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1SDVTList.html">SDVTList</a></span><span class="c0">&nbsp;VTs,<br>00247 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespaceR600Operands.html#af27934c33c08a9947ae861deaad8a2a8">Ops</a></span><span class="c0">, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;NumOps, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;EmitNodeInfo);<br>00249 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;PrepareEHLandingPad();<br>00250 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;SelectAllBasicBlocks(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html">Function</a></span><span class="c0">&nbsp;&amp;Fn);<br>00251 &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;TryToFoldFastISelLoad(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LoadInst.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LoadInst.html">LoadInst</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></span><span class="c0">, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Instruction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Instruction.html">Instruction</a></span><span class="c0">&nbsp;*FoldInst,<br>00252 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FastISel.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FastISel.html">FastISel</a></span><span class="c0">&nbsp;*FastIS);<br>00253 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;FinishBasicBlock();<br>00255 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;SelectBasicBlock(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ilist__iterator.html">BasicBlock::const_iterator</a></span><span class="c0">&nbsp;Begin,<br>00256 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ilist__iterator.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ilist__iterator.html">BasicBlock::const_iterator</a></span><span class="c0">&nbsp;End,<br>00257 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;&amp;HadTailCall);<br>00258 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;CodeGenAndEmitDAG();<br>00259 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;LowerArguments(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BasicBlock.html">BasicBlock</a></span><span class="c0">&nbsp;*BB);<br>00261 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;ComputeLiveOutVRegInfo();<br>00263 </span><span class="c0 c6">&nbsp;/// Create the scheduler. If a specific scheduler was specified</span><span class="c0"><br>00264 </span><span class="c0 c6">&nbsp;/// via the SchedulerRegistry, use it, otherwise select the</span><span class="c0"><br>00265 </span><span class="c0 c6">&nbsp;/// one preferred by the target.</span><span class="c0"><br>00267 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html">ScheduleDAGSDNodes</a></span><span class="c0">&nbsp;*CreateScheduler();<br>…........…..............<br>00278 };</span></p><p class="c17 c35"><span></span></p><p class="c17"><span class="c0 c9">virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a5276d410489e22e2f40aec94d12475cb">Select</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N) = 0 </span><span>&nbsp;is a pure virtual function and supposed to be implemented in a subclass of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html">SelectionDAGISel</a></span><span>&nbsp;to perform the main instruction selection work.</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html">SelectionDAGISel</a></span><span class="c0">’s </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ac27df519719929bb886ae92fca30b6d2">runOnMachineFunction()</a></span><span class="c0">&nbsp;function is the entry of the instruction selection phase and inside the function a lot of other important functions (e.g., </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a8ab5bf80d0bf28b785191c8033f4065e">set</a></span><span class="c0">(); SelectAllBasicBlocks(); CodeGenAndEmitDAG(); </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2b37615f95f3e2fdd5564188c0965132">CurDAG</a></span><span class="c0 c4">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a6f1e49f6f347835aa6b5a7423dd364d1">Legalize</a></span><span class="c0 c4">(); </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2b37615f95f3e2fdd5564188c0965132">CurDAG</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#abe7bd3138ea3703376dc622650b20ff3">Combine</a></span><span class="c0">(); Scheduler-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#aa00d73e05dee6c2701209bac3d7786b8">Run</a></span><span class="c0">(); etc.) are called directly or indirectly. </span><span class="c5 c11 c38">This function is detailed in &lt;Notes on LLVM 5 (SelectionDAG)&gt;.</span></p><p class="c17"><span class="c0">Note that the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#ac27df519719929bb886ae92fca30b6d2">runOnMachineFunction()</a></span><span class="c0">&nbsp;function is automatically called upon each machine function. See the following description about it:</span></p><h4 class="c45 c20"><a name="h.fsxc26gylkap"></a><span class="c0">&nbsp; &nbsp;</span><span class="c37 c5 c11 c48"><a class="c1" href="http://llvm.org/docs/WritingAnLLVMPass.html#id35">The </a></span><span class="c30 c5 c25"><a class="c1" href="http://llvm.org/docs/WritingAnLLVMPass.html#id35">runOnMachineFunction(MachineFunction &amp;MF)</a></span><span class="c37 c48 c5 c11"><a class="c1" href="http://llvm.org/docs/WritingAnLLVMPass.html#id35">&nbsp;method</a></span></h4><p class="c20"><span class="c18 c26 c5 c25">virtual</span><span class="c18 c5">&nbsp;</span><span class="c18 c5 c71">bool</span><span class="c18 c5">&nbsp;runOnMachineFunction(MachineFunction </span><span class="c18 c5 c27">&amp;</span><span class="c18 c5">MF) </span><span class="c18 c5 c27">=</span><span class="c18 c5">&nbsp;</span><span class="c3">0</span><span class="c18 c5">;<br></span></p><p class="c17"><span class="c10 c5">runOnMachineFunction</span><span class="c2">&nbsp;can be considered the main entry point of a </span><span class="c10 c5">MachineFunctionPass</span><span class="c2">; that is, you should override this method to do the work of your</span><span class="c10 c5">MachineFunctionPass</span><span class="c2">.</span></p><p class="c17"><span class="c2">The </span><span class="c10 c5">runOnMachineFunction</span><span class="c2">&nbsp;method is called on every </span><span class="c10 c5">MachineFunction</span><span class="c2">&nbsp;in a </span><span class="c10 c5">Module</span><span class="c2">, so that the </span><span class="c10 c5">MachineFunctionPass</span><span class="c2">&nbsp;may perform optimizations on the machine-dependent representation of the function. If you want to get at the LLVM </span><span class="c10 c5">Function</span><span class="c2">&nbsp;for the </span><span class="c10 c5">MachineFunction</span><span class="c2">&nbsp;you’re working on, use </span><span class="c10 c5">MachineFunction</span><span class="c2">‘s </span><span class="c10 c5">getFunction()</span><span class="c2">&nbsp;accessor method — but remember, you may not modify the LLVM </span><span class="c10 c5">Function</span><span class="c2">&nbsp;or its contents from a </span><span class="c10 c5">MachineFunctionPass</span><span class="c2">.</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c0">At this point, you may also ask what’s the relationship between </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a93adf9ddd2303e9bdc0d55beb171a868">SelectionDAGISel</a></span><span class="c0">&nbsp;and </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html">SelectionDAGBuilder</a></span><span class="c0">? </span><span class="c5 c11 c38">While, the following code indicates that the </span><span class="c4 c5 c11 c38"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a93adf9ddd2303e9bdc0d55beb171a868">SelectionDAGISel</a></span><span class="c5 c11 c38">&nbsp;class uses the </span><span class="c4 c5 c11 c38"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html">SelectionDAGBuilder</a></span><span class="c5 c11 c38">&nbsp;class to build Selection DAG):</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a93adf9ddd2303e9bdc0d55beb171a868">00268</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a93adf9ddd2303e9bdc0d55beb171a868">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a93adf9ddd2303e9bdc0d55beb171a868">SelectionDAGISel::SelectionDAGISel</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">&nbsp;&amp;tm,<br>00269 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a></span><span class="c0">&nbsp;OL) :<br>00270 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a></span><span class="c0">), TM(tm), TLI(*tm.getTargetLowering()),<br>00271 &nbsp; FuncInfo(new</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html">FunctionLoweringInfo</a></span><span class="c0">(TLI)),<br>00272 &nbsp; CurDAG(new</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c0">(tm, OL)),<br>00273 &nbsp; SDB(new</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html">SelectionDAGBuilder</a></span><span class="c0">(*CurDAG, *FuncInfo, OL)),<br>00274 &nbsp; GFI(),<br>00275 &nbsp; OptLevel(OL),<br>00276 &nbsp; DAGSize(0) {<br>00277 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a7c3c64daeddcc57785e85d30f13b1e55">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a7c3c64daeddcc57785e85d30f13b1e55">initializeGCModuleInfoPass</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a></span><span class="c0">());<br>00278 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#ae17e75337b30778fb9efa04723ab9d15">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#ae17e75337b30778fb9efa04723ab9d15">initializeAliasAnalysisAnalysisGroup</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a></span><span class="c0">());<br>00279 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a97af1e658073d9ee97afd0fbeffe1518">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a97af1e658073d9ee97afd0fbeffe1518">initializeBranchProbabilityInfoPass</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a></span><span class="c0">());<br>00280 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a96ab354096e7fc3598f3d675c1e5f0b6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a96ab354096e7fc3598f3d675c1e5f0b6">initializeTargetLibraryInfoPass</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a></span><span class="c0">());<br>00281 &nbsp; }</span></p><p class="c17"><span class="c0">A closer look at </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html">SelectionDAGISel</a></span><span class="c0">’s implementation in the </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/SelectionDAGISel_8cpp_source.html">SelectionDAGISel.cpp</a></span><span class="c0">&nbsp;file shows that </span><span class="c5 c11 c38">the </span><span class="c4 c5 c11 c38"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a93adf9ddd2303e9bdc0d55beb171a868">SelectionDAGISel</a></span><span class="c5 c11 c38">&nbsp;class actually heavily uses the </span><span class="c4 c5 c11 c38"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html">SelectionDAGBuilder</a></span><span class="c5 c11 c38">&nbsp;class.</span></p><p class="c17"><span class="c0">For example, the following code segment from the SelectionDAGISel::FinishBasicBlock() function has lots of invocations on through the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html">SelectionDAGBuilder</a></span><span class="c0">&nbsp;member </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">:</span></p><p class="c17"><span class="c0">01180 </span><span class="c0 c8">void</span><span class="c0"><br>01181 SelectionDAGISel::FinishBasicBlock() {<br>01182 <br>01183 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a></span><span class="c0">() &lt;&lt; </span><span class="c0 c14">"Total amount of phi nodes to update: "</span><span class="c0"><br>01184 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;&lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a99d5184cf5e487012782adccecbc2dd6">PHINodesToUpdate</a></span><span class="c0">.size() &lt;&lt; </span><span class="c0 c14">"\n"</span><span class="c0">;<br>01185 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i = 0, e =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a99d5184cf5e487012782adccecbc2dd6">PHINodesToUpdate</a></span><span class="c0">.size(); i != e; ++i)<br>01186 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a></span><span class="c0">() &lt;&lt; </span><span class="c0 c14">"Node "</span><span class="c0">&nbsp;&lt;&lt; i &lt;&lt; </span><span class="c0 c14">" : ("</span><span class="c0"><br>01187 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;&lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a99d5184cf5e487012782adccecbc2dd6">PHINodesToUpdate</a></span><span class="c0">[i].first<br>01188 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;&lt; </span><span class="c0 c14">", "</span><span class="c0">&nbsp;&lt;&lt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a99d5184cf5e487012782adccecbc2dd6">PHINodesToUpdate</a></span><span class="c0">[i].second &lt;&lt; </span><span class="c0 c14">")\n"</span><span class="c0">);<br>01189 <br>01190 &nbsp; </span><span class="c0 c6">// Next, now that we know what the last MBB the LLVM BB expanded is, update</span><span class="c0"><br>01191 &nbsp; </span><span class="c0 c6">// PHI nodes in successors.</span><span class="c0"><br>01192 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a2399a2e82821e050e9a00c8ad33e2aae">SwitchCases</a></span><span class="c0">.empty() &amp;&amp;<br>01193 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a9e9f0e8bba0c07aa975df97765117fa5">JTCases</a></span><span class="c0">.empty() &amp;&amp;<br>01194 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">.empty()) {<br>01195 &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i = 0, e =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a99d5184cf5e487012782adccecbc2dd6">PHINodesToUpdate</a></span><span class="c0">.size(); i != e; ++i) {<br>01196 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstrBuilder.html">MachineInstrBuilder</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a332cde6eadc39e042b35937d137c83f6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a332cde6eadc39e042b35937d137c83f6">PHI</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a23107e32342f5488a5edfa71aff54700">MF</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a99d5184cf5e487012782adccecbc2dd6">PHINodesToUpdate</a></span><span class="c0">[i].first);<br>01197 &nbsp; &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a332cde6eadc39e042b35937d137c83f6">PHI</a></span><span class="c0">-&gt;isPHI() &amp;&amp;<br>01198 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"This is not a machine PHI node that we are updating!"</span><span class="c0">);<br>01199 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a9893077f1825192ca0f3d173afefb573">MBB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a57f25804288bc580d7b2e4016a38aec9">isSuccessor</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a332cde6eadc39e042b35937d137c83f6">PHI</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Instruction.html#a9cd49851904f15060edb782ef4dd1b2d">getParent</a></span><span class="c0">()))<br>01200 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">continue</span><span class="c0">;<br>01201 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a332cde6eadc39e042b35937d137c83f6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a332cde6eadc39e042b35937d137c83f6">PHI</a></span><span class="c0">.addReg(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a99d5184cf5e487012782adccecbc2dd6">PHINodesToUpdate</a></span><span class="c0">[i].second).addMBB(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a9893077f1825192ca0f3d173afefb573">MBB</a></span><span class="c0">);<br>01202 &nbsp; &nbsp; }<br>01203 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">;<br>01204 &nbsp; }<br>01205 <br>01206 &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i = 0, e =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">.size(); i != e; ++i) {<br>01207 &nbsp; &nbsp; </span><span class="c0 c6">// Lower header first, if it wasn't already lowered</span><span class="c0"><br>01208 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">[i].Emitted) {<br>01209 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Set the current basic block to the mbb we wish to insert the code into</span><span class="c0"><br>01210 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a9893077f1825192ca0f3d173afefb573">MBB</a></span><span class="c0">&nbsp;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">[i].Parent;<br>01211 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a90b6dd55afe6936ce5854c71baadbf92">InsertPt</a></span><span class="c0">&nbsp;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a9893077f1825192ca0f3d173afefb573">MBB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a></span><span class="c0">();<br>01212 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Emit the code</span><span class="c0"><br>01213 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#aa57e81be4daba055c7fa4a6fea96ce8d">visitBitTestHeader</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">[i],</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a9893077f1825192ca0f3d173afefb573">MBB</a></span><span class="c0">);<br>01214 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2b37615f95f3e2fdd5564188c0965132">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2b37615f95f3e2fdd5564188c0965132">CurDAG</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a3d2e079387a6e69ce2c8bb27bf7c2f32">setRoot</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#aa3e946c1fc678a70e849244389bd929a">getRoot</a></span><span class="c0">());<br>01215 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a2c224fcb5175ab1e842dd2a1371eb3d8">clear</a></span><span class="c0">();<br>01216 &nbsp; &nbsp; &nbsp; CodeGenAndEmitDAG();<br>01217 &nbsp; &nbsp; }<br>01218 <br>01219 &nbsp; &nbsp; uint32_t UnhandledWeight = 0;<br>01220 &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;j = 0, ej =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">[i].Cases.size(); j != ej; ++j)<br>01221 &nbsp; &nbsp; &nbsp; UnhandledWeight +=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">[i].Cases[j].ExtraWeight;<br>01222 <br>01223 &nbsp; &nbsp; for (</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;j = 0, ej =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">[i].Cases.size(); j != ej; ++j) {<br>01224 &nbsp; &nbsp; &nbsp; UnhandledWeight -=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">[i].Cases[j].ExtraWeight;<br>01225 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Set the current basic block to the mbb we wish to insert the code into</span><span class="c0"><br>01226 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a9893077f1825192ca0f3d173afefb573">MBB</a></span><span class="c0">&nbsp;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">[i].Cases[j].ThisBB;<br>01227 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a90b6dd55afe6936ce5854c71baadbf92">InsertPt</a></span><span class="c0">&nbsp;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a9893077f1825192ca0f3d173afefb573">MBB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a></span><span class="c0">();<br>01228 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Emit the code</span><span class="c0"><br>01229 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(j+1 != ej)<br>01230 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a318504e3fe7e4589c750f145a1f663f3">visitBitTestCase</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">[i],<br>01231 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">[i].Cases[j+1].ThisBB,<br>01232 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UnhandledWeight,<br>01233 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">[i].Reg,<br>01234 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">[i].Cases[j],<br>01235 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a9893077f1825192ca0f3d173afefb573">MBB</a></span><span class="c0">);<br>01236 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">else</span><span class="c0"><br>01237 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a318504e3fe7e4589c750f145a1f663f3">visitBitTestCase</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">[i],<br>01238 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">[i].Default,<br>01239 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UnhandledWeight,<br>01240 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">[i].Reg,<br>01241 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a344f912d5c4f1ec4fdceb14d61a62331">BitTestCases</a></span><span class="c0">[i].Cases[j],<br>01242 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a9893077f1825192ca0f3d173afefb573">MBB</a></span><span class="c0">);<br>01243 <br>01244 <br>01245 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2b37615f95f3e2fdd5564188c0965132">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2b37615f95f3e2fdd5564188c0965132">CurDAG</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a3d2e079387a6e69ce2c8bb27bf7c2f32">setRoot</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#aa3e946c1fc678a70e849244389bd929a">getRoot</a></span><span class="c0">());<br>01246 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a2c224fcb5175ab1e842dd2a1371eb3d8">clear</a></span><span class="c0">();<br>01247 &nbsp; &nbsp; &nbsp; CodeGenAndEmitDAG();<br>01248 &nbsp; &nbsp; }</span></p><p class="c17"><span class="c0">…......................................</span></p><p class="c17"><span class="c0">01336 &nbsp; &nbsp; </span><span class="c0 c6">// Determine the unique successors.</span><span class="c0"><br>01337 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;MachineBasicBlock *, 2&gt;</a></span><span class="c0">&nbsp;Succs;<br>01338 &nbsp; &nbsp; Succs.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a2399a2e82821e050e9a00c8ad33e2aae">SwitchCases</a></span><span class="c0">[i].TrueBB);<br>01339 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a2399a2e82821e050e9a00c8ad33e2aae">SwitchCases</a></span><span class="c0">[i].TrueBB !=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a2399a2e82821e050e9a00c8ad33e2aae">SwitchCases</a></span><span class="c0">[i].FalseBB)<br>01340 &nbsp; &nbsp; &nbsp; Succs.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a2399a2e82821e050e9a00c8ad33e2aae">SwitchCases</a></span><span class="c0">[i].FalseBB);<br>01341 <br>01342 &nbsp; &nbsp; </span><span class="c0 c6">// Emit the code. Note that this could result in FuncInfo-&gt;MBB being split.</span><span class="c0"><br>01343 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a23e7312cc9cf434846a35684ccd4b28d">visitSwitchCase</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a2399a2e82821e050e9a00c8ad33e2aae">SwitchCases</a></span><span class="c0">[i],</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a67db3969c1e61b8d020a3817d1f755cb">FuncInfo</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionLoweringInfo.html#a9893077f1825192ca0f3d173afefb573">MBB</a></span><span class="c0">);<br>01344 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2b37615f95f3e2fdd5564188c0965132">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a2b37615f95f3e2fdd5564188c0965132">CurDAG</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html#a3d2e079387a6e69ce2c8bb27bf7c2f32">setRoot</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#aa3e946c1fc678a70e849244389bd929a">getRoot</a></span><span class="c0">());<br>01345 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html#a312f923b3a36e342969c005f7779f761">SDB</a></span><span class="c0">-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGBuilder.html#a2c224fcb5175ab1e842dd2a1371eb3d8">clear</a></span><span class="c0">();<br>01346 &nbsp; &nbsp; CodeGenAndEmitDAG();</span></p><p class="c17 c35"><span class="c0"><br></span></p><p class="c17"><span class="c2">In terms of inheritance </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html">SelectionDAGISel</a></span><span class="c2">&nbsp;has the following structure:</span></p><p class="c17 c35"><span class="c11 c16"></span></p><p class="c17"><img height="272" src="./Notes on LLVM 3 (Target Independent Code Generator)_files/image00.png" width="200"></p><p class="c17 c35"><span class="c19"></span></p><p class="c17"><span class="c57 c11 c16">Again, the above figure does not show the complete inheritance graph and omits the target-specific portion.</span><span class="c11 c16">&nbsp;For example, the </span><span class="c0">X86DAGToDAGISel </span><span class="c11 c16">class defined in the </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86ISelDAGToDAG_8cpp_source.html">X86ISelDAGToDAG.cpp</a></span><span class="c11 c16">&nbsp;file (lives in llvm-3.x.src\lib\Target\X86) inherits the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html">SelectionDAGISel</a></span><span class="c0">&nbsp;</span><span class="c11 c16">class. Portion of the target specific code for instruction selection in the </span><span class="c0">X86DAGToDAGISel</span><span class="c11 c16">&nbsp;class is generated automatically by the TableGen tool (see the line </span><span class="c0">00185 </span><span class="c0 c36">#include "X86GenDAGISel.inc"</span><span class="c11 c16">&nbsp;in the source code for </span><span class="c0">X86DAGToDAGISel</span><span class="c11 c16">). </span><span class="c0">X86DAGToDAGISel</span><span class="c11 c16">&nbsp;class is defined in </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86ISelDAGToDAG_8cpp_source.html">X86ISelDAGToDAG.cpp</a></span><span class="c11 c16">&nbsp;as follows:</span></p><p class="c17 c35"><span class="c19"></span></p><p class="c17"><span class="c0">00138 </span><span class="c0 c9">namespace </span><span class="c0">{<br>00139 &nbsp; </span><span class="c0 c6">//===--------------------------------------------------------------------===//</span><span class="c0"><br>00140 </span><span class="c0 c6">&nbsp;/// ISel - X86 specific code to select X86 machine instructions for</span><span class="c0"><br>00141 </span><span class="c0 c6">&nbsp;/// SelectionDAG operations.</span><span class="c0"><br>00143 &nbsp;</span><span class="c0 c9">class </span><span class="c0">X86DAGToDAGISel : </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html">SelectionDAGISel</a></span><span class="c0">&nbsp;{<br>00144 </span><span class="c0 c6">&nbsp; &nbsp;/// X86Lowering - This object fully describes how to lower LLVM code to an</span><span class="c0"><br>00145 </span><span class="c0 c6">&nbsp; &nbsp;/// X86-specific SelectionDAG.</span><span class="c0"><br>00146 &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86TargetLowering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86TargetLowering.html">X86TargetLowering</a></span><span class="c0">&nbsp;&amp;X86Lowering;<br>00148 </span><span class="c0 c6">&nbsp; &nbsp;/// Subtarget - Keep a pointer to the X86Subtarget around so that we can</span><span class="c0"><br>00149 </span><span class="c0 c6">&nbsp; &nbsp;/// make the right decision when generating code for different targets.</span><span class="c0"><br>00150 &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86Subtarget.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86Subtarget.html">X86Subtarget</a></span><span class="c0">&nbsp;*Subtarget;<br>00152 </span><span class="c0 c6">&nbsp; &nbsp;/// OptForSize - If true, selector should try to optimize for code size</span><span class="c0"><br>00153 </span><span class="c0 c6">&nbsp; &nbsp;/// instead of performance.</span><span class="c0"><br>00154 &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;OptForSize;<br>00156 &nbsp; </span><span class="c0 c9">public</span><span class="c0">:<br>00157 &nbsp; &nbsp; </span><span class="c0 c9">explicit</span><span class="c0">&nbsp;X86DAGToDAGISel(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86TargetMachine.html">X86TargetMachine</a></span><span class="c0">&nbsp;&amp;tm,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CodeGenOpt.html#a411055ea15209051c2370bbf655ec8d4">CodeGenOpt::Level</a></span><span class="c0">&nbsp;OptLevel)<br>00158 &nbsp; &nbsp; &nbsp; :</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html">SelectionDAGISel</a></span><span class="c0">(tm, OptLevel),<br>00159 &nbsp; &nbsp; &nbsp; &nbsp; X86Lowering(*tm.getTargetLowering()),<br>00160 &nbsp; &nbsp; &nbsp; &nbsp; Subtarget(&amp;tm.getSubtarget&lt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86Subtarget.html">X86Subtarget</a></span><span class="c0">&gt;()),<br>00161 &nbsp; &nbsp; &nbsp; &nbsp; OptForSize(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/AliasAnalysisEvaluator_8cpp.html#a3898a228575af19a9b2052f2b3677dce">false</a></span><span class="c0">) {}<br>00163 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0">&nbsp;*getPassName()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00164 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c14">"X86 DAG-&gt;DAG Instruction Selection"</span><span class="c0">;<br>00165 &nbsp; &nbsp; }<br>00167 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;EmitFunctionEntryCode();<br>00169 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;IsProfitableToFold(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;N,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*U,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Root) </span><span class="c0 c9">const</span><span class="c0">;<br>00171 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;PreprocessISelDAG();<br>00173 &nbsp; &nbsp; </span><span class="c0 c9">inline</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;immSext8(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00174 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a3e242f3485db990d043f2dcf91106ce7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a3e242f3485db990d043f2dcf91106ce7">isInt&lt;8&gt;</a></span><span class="c0">(cast&lt;ConstantSDNode&gt;(N)-&gt;getSExtValue());<br>00175 &nbsp; &nbsp; }<br>00177 &nbsp; &nbsp; </span><span class="c0 c6">// i64immSExt32 predicate - True if the 64-bit immediate fits in a 32-bit</span><span class="c0"><br>00178 &nbsp; &nbsp; </span><span class="c0 c6">// sign extended field.</span><span class="c0"><br>00179 &nbsp; &nbsp; </span><span class="c0 c9">inline</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;i64immSExt32(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00180 &nbsp; &nbsp; &nbsp; uint64_t v = cast&lt;ConstantSDNode&gt;(N)-&gt;getZExtValue();<br>00181 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;(int64_t)v == (int32_t)v;<br>00182 &nbsp; &nbsp; }<br>00184 </span><span class="c0 c6">// Include the pieces autogenerated from the target description.</span><span class="c0"><br>00185 </span><span class="c0 c36">#include "X86GenDAGISel.inc"</span><span class="c0"><br>00187 &nbsp; </span><span class="c0 c9">private</span><span class="c0">:<br>00188 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af3ab12efdd6b4902d711e72b7a81f13b">Select</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00189 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*SelectGather(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opc);<br>00190 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*SelectAtomic64(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Node, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Opc);<br>00191 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*SelectAtomicLoadArith(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Node,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;NVT);<br>00193 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;FoldOffsetIntoAddress(uint64_t Offset, X86ISelAddressMode &amp;AM);<br>00194 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;MatchLoadInAddress(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LoadSDNode.html">LoadSDNode</a></span><span class="c0">&nbsp;*N, X86ISelAddressMode &amp;AM);<br>00195 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;MatchWrapper(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;N, X86ISelAddressMode &amp;AM);<br>00196 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;MatchAddress(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;N, X86ISelAddressMode &amp;AM);<br>…........................................<br>00215 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;TryFoldLoad(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*P,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;N,<br>00216 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;&amp;Base,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;&amp;Scale,<br>00217 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;&amp;Index,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;&amp;Disp,<br>00218 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;&amp;Segment);<br>00220 </span><span class="c0 c6">&nbsp; &nbsp;/// SelectInlineAsmMemoryOperand - Implement addressing mode selection for</span><span class="c0"><br>00221 </span><span class="c0 c6">&nbsp; &nbsp;/// inline asm expressions.</span><span class="c0"><br>00222 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;SelectInlineAsmMemoryOperand(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;&amp;Op,<br>00223 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">char</span><span class="c0">&nbsp;ConstraintCode,<br>00224 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; std::vector&lt;SDValue&gt; &amp;OutOps);<br>00226 &nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;EmitSpecialCodeForMain(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*BB,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFrameInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a></span><span class="c0">&nbsp;*MFI);<br>00228 &nbsp; &nbsp; </span><span class="c0 c9">inline</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;getAddressOperands(X86ISelAddressMode &amp;AM,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;&amp;Base,<br>00229 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;&amp;Scale,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;&amp;Index,<br>00230 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;&amp;Disp,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;&amp;Segment) {<br>00231 &nbsp; &nbsp; &nbsp; Base &nbsp;= (AM.BaseType == X86ISelAddressMode::FrameIndexBase) ?<br>00232 &nbsp; &nbsp; &nbsp; &nbsp; CurDAG-&gt;getTargetFrameIndex(AM.Base_FrameIndex, TLI.getPointerTy()) :<br>00233 &nbsp; &nbsp; &nbsp; &nbsp; AM.Base_Reg;<br>00234 &nbsp; &nbsp; &nbsp; Scale = getI8Imm(AM.Scale);<br>00235 &nbsp; &nbsp; &nbsp; Index = AM.IndexReg;<br>….....................................................<br>00255 &nbsp; &nbsp; &nbsp; &nbsp; Disp = CurDAG-&gt;getTargetConstant(AM.Disp,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a></span><span class="c0">);<br>00257 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(AM.Segment.getNode())<br>00258 &nbsp; &nbsp; &nbsp; &nbsp; Segment = AM.Segment;<br>00259 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">else</span><span class="c0"><br>00260 &nbsp; &nbsp; &nbsp; &nbsp; Segment = CurDAG-&gt;getRegister(0,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a></span><span class="c0">);<br>00261 &nbsp; &nbsp; }<br>00263 </span><span class="c0 c6">&nbsp; &nbsp;/// getI8Imm - Return a target constant with the specified value, of type</span><span class="c0"><br>00264 </span><span class="c0 c6">&nbsp; &nbsp;/// i8.</span><span class="c0"><br>00265 &nbsp; &nbsp;</span><span class="c0 c9">inline</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;getI8Imm(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Imm) {<br>00266 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;CurDAG-&gt;getTargetConstant(Imm,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50caf777e086e32f60c0c87b460964eae7d0">MVT::i8</a></span><span class="c0">); }<br>00269 </span><span class="c0 c6">&nbsp; &nbsp;/// getI32Imm - Return a target constant with the specified value, of type</span><span class="c0"><br>00270 </span><span class="c0 c6">&nbsp; &nbsp;/// i32.</span><span class="c0"><br>00271 &nbsp; &nbsp;</span><span class="c0 c9">inline</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDValue.html">SDValue</a></span><span class="c0">&nbsp;getI32Imm(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Imm) {<br>00272 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;CurDAG-&gt;getTargetConstant(Imm,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MVT.html#afd69b4f2dff97a2d7c0192cc769ef50ca04cca8bc12888d0a7238f55a6c550ad0">MVT::i32</a></span><span class="c0">); }<br>00275 </span><span class="c0 c6">&nbsp; &nbsp;/// getGlobalBaseReg - Return an SDNode that returns the value of</span><span class="c0"><br>00276 </span><span class="c0 c6">&nbsp; &nbsp;/// the global base register. Output instructions required to</span><span class="c0"><br>00277 </span><span class="c0 c6">&nbsp; &nbsp;/// initialize the global base register, if necessary.</span><span class="c0"><br>00279 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*getGlobalBaseReg();<br>00281 </span><span class="c0 c6">&nbsp; &nbsp;/// getTargetMachine - Return a reference to the TargetMachine, casted</span><span class="c0"><br>00282 </span><span class="c0 c6">&nbsp; &nbsp;/// to the target-specific type.</span><span class="c0"><br>00283 &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86TargetMachine.html">X86TargetMachine</a></span><span class="c0">&nbsp;&amp;getTargetMachine() {<br>00284 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">static_cast&lt;const</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86TargetMachine.html">X86TargetMachine</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c9">&gt;</span><span class="c0">(TM);}<br>00287 </span><span class="c0 c6">&nbsp; &nbsp;/// getInstrInfo - Return a reference to the TargetInstrInfo, casted</span><span class="c0"><br>00288 </span><span class="c0 c6">&nbsp; &nbsp;/// to the target-specific type.</span><span class="c0"><br>00289 &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86InstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1X86InstrInfo.html">X86InstrInfo</a></span><span class="c0">&nbsp;*getInstrInfo() {<br>00290 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;getTargetMachine().getInstrInfo();<br>00291 &nbsp; &nbsp; }<br>00292 &nbsp; };<br>00293 }</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">For </span><span class="c5">X86 instruction selection please refer to the definition of the above function </span></p><p class="c17"><span class="c0">00188 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af3ab12efdd6b4902d711e72b7a81f13b">Select</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N)</span><span class="c5">&nbsp;</span><span class="c5">in the </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86ISelDAGToDAG_8cpp_source.html">X86ISelDAGToDAG.cpp</a></span><span class="c11 c16">&nbsp;</span><span class="c5">&nbsp;file. The source code for this function is very long and does the majority of the instruction selection work.</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c15 c44"><span class="c5"></span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c19">Part 7.5.5 Ins</span><span class="c19">truction</span><span class="c19">&nbsp;</span><span class="c19">s</span><span class="c19">cheduling </span><span class="c19">and</span><span class="c19">&nbsp;</span><span class="c19">f</span><span class="c19"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id45">ormation </a></span><span class="c19">in</span><span class="c19">&nbsp;SelectionDAG</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">Again, let’s first gain a high level overview of the instruction selection and formation phase by looking at the relevant description in the LLVM document:</span></p><p class="c17"><span class="c5">“</span><span class="c2">The scheduling phase takes the DAG of target instructions from the selection phase and assigns an order. The scheduler can pick an order depending on various constraints of the machines (i.e. order for minimal register pressure or try to cover instruction latencies). Once an order is established, the DAG is converted to a list of </span><span class="c29 c10 c5"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#machineinstr">MachineInstr</a></span><span class="c10 c5">s </span><span class="c2">and the SelectionDAG is destroyed.</span></p><p class="c17"><span class="c2">Note that this phase is logically separate from the instruction selection phase, but is tied to it closely in the code because it operates on SelectionDAGs.</span><span class="c2"><a class="c1" href="http://www.google.com/url?q=http%3A%2F%2Fllvm.org%2Fdocs%2Fdoxygen%2Fhtml%2Fnamespacellvm_1_1CodeGenOpt.html%23a411055ea15209051c2370bbf655ec8d4a3393aeca011bfa5bdd6a8e64edd7f565&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHLV-olsY9aShAX4ShZ51qTZ_RdZQ">”</a></span></p><p class="c17 c35"><span class="c5"></span></p><p class="c44 c20"><span class="c5">There are several files (ScheduleDAGSDNodes.cpp, ScheduleDAGSDNodes.h, ScheduleDAGRRList.cpp, ScheduleDAGFast.cpp and ScheduleDAGVLIW.cpp) living in the llvm-3.x.src\lib\CodeGen\SelectionDAG directory and header files (ScheduleDAG.h, ScheduleDAGILP.h, ScheduleDAGInstrs.h,ScheduleHazardRecognizer.h and SchedulerRegistry.h) related to the instruction scheduling. &nbsp;</span></p><p class="c15 c44"><span class="c5"></span></p><p class="c44 c20"><span class="c5">To get started, there are several basic structures defined in </span><span class="c12 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/ScheduleDAG_8h_source.html">ScheduleDAG.h</a></span><span class="c5">&nbsp;and implemented in </span><span class="c12 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/ScheduleDAG_8cpp_source.html">ScheduleDAG.cpp</a></span><span class="c5">. First, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html">ScheduleDAG</a></span><span class="c0">&nbsp;</span><span class="c5">class is a base class for other scheduler to inherit and only provide graph-related manipulation operations such as iterator,DFS, topological sorting, functions for moving nodes around, etc.</span></p><p class="c15 c44"><span></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html">00532</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html">ScheduleDAG</a></span><span class="c0">&nbsp;{<br>00533 &nbsp; </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a9aa31260fcd6b572eb34528673438c3c">00534</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a9aa31260fcd6b572eb34528673438c3c">TM</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Target processor</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a348590624c488b04d0f9e227e6c3960e">00535</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a348590624c488b04d0f9e227e6c3960e">TII</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Target instruction information</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a418bc6d3f660325fa6d5b9fb269add62">00536</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a418bc6d3f660325fa6d5b9fb269add62">TRI</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Target processor register info</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a5a3d3d075a208011a24a0918b58d7daa">00537</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a5a3d3d075a208011a24a0918b58d7daa">MF</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Machine function</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a1b09f4d9c91e25f7bc2ac60b3b929d11">00538</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a1b09f4d9c91e25f7bc2ac60b3b929d11">MRI</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Virtual/real register map</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">00539</a></span><span class="c0">&nbsp; &nbsp; &nbsp;std::vector&lt;SUnit&gt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// The scheduling units.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a521bf68518a92483130a58680716d153">00540</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a521bf68518a92483130a58680716d153">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a521bf68518a92483130a58680716d153">EntrySU</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Special node for the region entry.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#af81f734d7fb268c95c1c63c399a7c4a6">00541</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#af81f734d7fb268c95c1c63c399a7c4a6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#af81f734d7fb268c95c1c63c399a7c4a6">ExitSU</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Special node for the region exit.</span><span class="c0"><br>00549 &nbsp; &nbsp; </span><span class="c0 c9">explicit</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#ae2ebc23ff27164ec1d375d4bac6040de">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#ae2ebc23ff27164ec1d375d4bac6040de">ScheduleDAG</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;mf);<br>00551 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a40f40bf3808799abdd4411ba209215dc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a40f40bf3808799abdd4411ba209215dc">~ScheduleDAG</a></span><span class="c0">();<br>00553 </span><span class="c0 c6">&nbsp; &nbsp;/// clearDAG - clear the DAG state (between regions).</span><span class="c0"><br>00554 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a20e10e20ded7655f844479a648aa0c66">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a20e10e20ded7655f844479a648aa0c66">clearDAG</a></span><span class="c0">();<br>00556 </span><span class="c0 c6">&nbsp; &nbsp;/// getInstrDesc - Return the MCInstrDesc of this SUnit.</span><span class="c0"><br>00557 </span><span class="c0 c6">&nbsp; &nbsp;/// Return NULL for SDNodes without a machine opcode.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#afba135d7c0db77bea1737d0e88a99a0e">00558</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">MCInstrDesc</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#afba135d7c0db77bea1737d0e88a99a0e">getInstrDesc</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{<br>00559 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(SU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#acc4822000e06bd5f5de502b263778466">isInstr</a></span><span class="c0">()) </span><span class="c0 c7">return</span><span class="c0">&nbsp;&amp;SU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#adb119d63d924841b0523d67dfdd1bf61">getInstr</a></span><span class="c0">()-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a803a7424877fd049679b9aa2f07597b5">getDesc</a></span><span class="c0">();<br>00560 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;getNodeDesc(SU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ac899d0c77f6c945c60c451a69456ae1b">getNode</a></span><span class="c0">());<br>00561 &nbsp; &nbsp; }<br>00569 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#aea91269e2e90180d147f33a0fdde6994">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#aea91269e2e90180d147f33a0fdde6994">dumpNode</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU) </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br>…..............................</span></p><p class="c17"><span class="c0">00588 &nbsp; </span><span class="c0 c9">private</span><span class="c0">:<br>00589 &nbsp; &nbsp; </span><span class="c0 c6">// Return the MCInstrDesc of this SDNode or NULL.</span><span class="c0"><br>00590 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCInstrDesc.html">MCInstrDesc</a></span><span class="c0">&nbsp;*getNodeDesc(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Node) </span><span class="c0 c9">const</span><span class="c0">;<br>00591 &nbsp; };<br>00592 <br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnitIterator.html">00593</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnitIterator.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnitIterator.html">SUnitIterator</a></span><span class="c0">&nbsp;: </span><span class="c0 c9">public</span><span class="c0">&nbsp;std::iterator&lt;std::forward_iterator_tag,<br>00594 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SUnit, ptrdiff_t&gt; {<br>…................//definition of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnitIterator.html">SUnitIterator</a></span><span class="c0">&nbsp;</span></p><p class="c17"><span class="c0">00641 &nbsp; };<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html">00643</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">template</span><span class="c0">&nbsp;&lt;&gt; </span><span class="c0 c9">struct</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits.html">GraphTraits</a></span><span class="c0">&lt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">*&gt; {<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html#a04955093b8a37e8b27ebab4d25032e89">00644</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html#a04955093b8a37e8b27ebab4d25032e89">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html#a04955093b8a37e8b27ebab4d25032e89">NodeType</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html#a1a416b593c7ea98a3cd6648160e3fa37">00645</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnitIterator.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnitIterator.html">SUnitIterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html#a1a416b593c7ea98a3cd6648160e3fa37">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html#a1a416b593c7ea98a3cd6648160e3fa37">ChildIteratorType</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html#aaec86363060d779bb77f27ba9545ca7c">00646</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c9">inline</span><span class="c0">&nbsp;NodeType *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html#aaec86363060d779bb77f27ba9545ca7c">getEntryNode</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*N) { </span><span class="c0 c7">return</span><span class="c0">&nbsp;N; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html#a51fbb9b68ae5e534757b8c7ac867f57a">00647</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c9">inline</span><span class="c0">&nbsp;ChildIteratorType</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html#a51fbb9b68ae5e534757b8c7ac867f57a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html#a51fbb9b68ae5e534757b8c7ac867f57a">child_begin</a></span><span class="c0">(NodeType *N) {<br>00648 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnitIterator.html#a7fafbbefc8dae7eb2b3d348e0a6e4aa6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnitIterator.html#a7fafbbefc8dae7eb2b3d348e0a6e4aa6">SUnitIterator::begin</a></span><span class="c0">(N);<br>00649 &nbsp; &nbsp; }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html#af27af04c902d62fbc318f99445ba5d63">00650</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c9">inline</span><span class="c0">&nbsp;ChildIteratorType</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html#af27af04c902d62fbc318f99445ba5d63">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html#af27af04c902d62fbc318f99445ba5d63">child_end</a></span><span class="c0">(NodeType *N) {<br>00651 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnitIterator.html#a19cadb1ba98e4562c01f1b7df0999fe5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnitIterator.html#a19cadb1ba98e4562c01f1b7df0999fe5">SUnitIterator::end</a></span><span class="c0">(N);<br>00652 &nbsp; &nbsp; }<br>00653 &nbsp; };<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01ScheduleDAG_01_5_01_4.html">00655</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">template</span><span class="c0">&nbsp;&lt;&gt; </span><span class="c0 c9">struct</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits.html">GraphTraits</a></span><span class="c0">&lt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html">ScheduleDAG</a></span><span class="c0">*&gt; : </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits_3_01SUnit_01_5_01_4.html">GraphTraits&lt;SUnit*&gt;</a></span><span class="c0">&nbsp;{<br>….........//template definition for </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1GraphTraits.html">GraphTraits</a></span><span class="c0">&lt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html">ScheduleDAG</a></span><span class="c0">*&gt;.......</span><span class="c0"><br>00663 &nbsp; };<br>00665 </span><span class="c0 c6">&nbsp;/// ScheduleDAGTopologicalSort is a class that computes a topological</span><span class="c0"><br>00666 </span><span class="c0 c6">&nbsp;/// ordering for SUnits and provides methods for dynamically updating</span><span class="c0"><br>00667 </span><span class="c0 c6">&nbsp;/// the ordering as new edges are added.</span><span class="c0"><br>00669 </span><span class="c0 c6">&nbsp;/// This allows a very fast implementation of IsReachable, for example.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html">00671</a></span><span class="c0">&nbsp; </span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html">ScheduleDAGTopologicalSort</a></span><span class="c0">&nbsp;{<br>00672 </span><span class="c0 c6">&nbsp; &nbsp;/// SUnits - A reference to the ScheduleDAG's SUnits.</span><span class="c0"><br>00673 &nbsp; &nbsp;std::vector&lt;SUnit&gt; &amp;SUnits;<br>00674 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*ExitSU;<br>00676 </span><span class="c0 c6">&nbsp; &nbsp;/// Index2Node - Maps topological index to the node number.</span><span class="c0"><br>00677 &nbsp; &nbsp;std::vector&lt;int&gt; Index2Node;<br>00678 </span><span class="c0 c6">&nbsp; &nbsp;/// Node2Index - Maps the node number to its topological index.</span><span class="c0"><br>00679 &nbsp; &nbsp;std::vector&lt;int&gt; Node2Index;<br>00680 </span><span class="c0 c6">&nbsp; &nbsp;/// Visited - a set of nodes visited during a DFS traversal.</span><span class="c0"><br>00681 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BitVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BitVector.html">BitVector</a></span><span class="c0">&nbsp;Visited;<br>00683 </span><span class="c0 c6">&nbsp; &nbsp;/// DFS - make a DFS traversal and mark all nodes affected by the</span><span class="c0"><br>00684 </span><span class="c0 c6">&nbsp; &nbsp;/// edge insertion. These nodes will later get new topological indexes</span><span class="c0"><br>00685 </span><span class="c0 c6">&nbsp; &nbsp;/// by means of the Shift method.</span><span class="c0"><br>00686 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;DFS(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU, </span><span class="c0 c8">int</span><span class="c0">&nbsp;UpperBound, </span><span class="c0 c8">bool</span><span class="c0">&amp; HasLoop);<br>00688 </span><span class="c0 c6">&nbsp; &nbsp;/// Shift - reassign topological indexes for the nodes in the DAG</span><span class="c0"><br>00689 </span><span class="c0 c6">&nbsp; &nbsp;/// to preserve the topological ordering.</span><span class="c0"><br>00690 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;Shift(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BitVector.html">BitVector</a></span><span class="c0">&amp; Visited, </span><span class="c0 c8">int</span><span class="c0">&nbsp;LowerBound, </span><span class="c0 c8">int</span><span class="c0">&nbsp;UpperBound);<br>00692 </span><span class="c0 c6">&nbsp; &nbsp;/// Allocate - assign the topological index to the node n.</span><span class="c0"><br>00693 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;Allocate(</span><span class="c0 c8">int</span><span class="c0">&nbsp;n, </span><span class="c0 c8">int</span><span class="c0">&nbsp;index);<br>00695 &nbsp; </span><span class="c0 c9">public</span><span class="c0">:<br>00696 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a254598cfb0937d0bfd9a999c27370685">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a254598cfb0937d0bfd9a999c27370685">ScheduleDAGTopologicalSort</a></span><span class="c0">(std::vector&lt;SUnit&gt; &amp;SUnits,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*ExitSU);<br>00698 </span><span class="c0 c6">&nbsp; &nbsp;/// InitDAGTopologicalSorting - create the initial topological</span><span class="c0"><br>00699 </span><span class="c0 c6">&nbsp; &nbsp;/// ordering from the DAG to be scheduled.</span><span class="c0"><br>00700 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a44c5faa549f250a26b1303eb1a3ebd47">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a44c5faa549f250a26b1303eb1a3ebd47">InitDAGTopologicalSorting</a></span><span class="c0">();<br>00702 </span><span class="c0 c6">&nbsp; &nbsp;/// IsReachable - Checks if SU is reachable from TargetSU.</span><span class="c0"><br>00703 &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#af5fef42e8e1d446cf5e185b14dd4b8af">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#af5fef42e8e1d446cf5e185b14dd4b8af">IsReachable</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*TargetSU);<br>00705 </span><span class="c0 c6">&nbsp; &nbsp;/// WillCreateCycle - Returns true if adding an edge from SU to TargetSU</span><span class="c0"><br>00706 </span><span class="c0 c6">&nbsp; &nbsp;/// will create a cycle.</span><span class="c0"><br>00707 &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#aa0ff21ceac198585f7e860bc03cc20c8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#aa0ff21ceac198585f7e860bc03cc20c8">WillCreateCycle</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*TargetSU);<br>00709 </span><span class="c0 c6">&nbsp; &nbsp;/// AddPred - Updates the topological ordering to accommodate an edge</span><span class="c0"><br>00710 </span><span class="c0 c6">&nbsp; &nbsp;/// to be added from SUnit X to SUnit Y.</span><span class="c0"><br>00711 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a47144792598184237de69d6b25b35175">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a47144792598184237de69d6b25b35175">AddPred</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/OcamlGCPrinter_8cpp.html#a1bdbcdc4205781eefd549946d40ff378">Y</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a6569d00d31a5d74e563e2f39f82271ab">X</a></span><span class="c0">);<br>00713 </span><span class="c0 c6">&nbsp; &nbsp;/// RemovePred - Updates the topological ordering to accommodate an</span><span class="c0"><br>00714 </span><span class="c0 c6">&nbsp; &nbsp;/// an edge to be removed from the specified node N from the predecessors</span><span class="c0"><br>00715 </span><span class="c0 c6">&nbsp; &nbsp;/// of the current node M.</span><span class="c0"><br>00716 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a10a769ee13a9d9298d2c2b887dfae250">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a10a769ee13a9d9298d2c2b887dfae250">RemovePred</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*M,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></span><span class="c0">);<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a8fdbdc9caa07928630964a81447d53d3">00718</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0">&nbsp;std::vector&lt;int&gt;::iterator</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a8fdbdc9caa07928630964a81447d53d3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a8fdbdc9caa07928630964a81447d53d3">iterator</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a5fbba8dc1f6473b88462a3a451eb2254">00719</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0">&nbsp;std::vector&lt;int&gt;::const_iterator</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a5fbba8dc1f6473b88462a3a451eb2254">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a5fbba8dc1f6473b88462a3a451eb2254">const_iterator</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a6619b762bc4a668ff0fc63b0a9a9d405">00720</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a8fdbdc9caa07928630964a81447d53d3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a8fdbdc9caa07928630964a81447d53d3">iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a6619b762bc4a668ff0fc63b0a9a9d405">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a6619b762bc4a668ff0fc63b0a9a9d405">begin</a></span><span class="c0">() { </span><span class="c0 c7">return</span><span class="c0">&nbsp;Index2Node.begin(); }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a64c1ec02edb978f65a365d524d9d6bfc">00721</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a5fbba8dc1f6473b88462a3a451eb2254">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a5fbba8dc1f6473b88462a3a451eb2254">const_iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a64c1ec02edb978f65a365d524d9d6bfc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a64c1ec02edb978f65a365d524d9d6bfc">begin</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;Index2Node.begin(); }<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a2fc48fc617dea5bb51be4a7210f63c25">00722</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a8fdbdc9caa07928630964a81447d53d3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a8fdbdc9caa07928630964a81447d53d3">iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a2fc48fc617dea5bb51be4a7210f63c25">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGTopologicalSort.html#a2fc48fc617dea5bb51be4a7210f63c25">end</a></span><span class="c0">() { </span><span class="c0 c7">return</span><span class="c0">&nbsp;Index2Node.end(); }<br>…......// other iterators.........<br>00731 &nbsp; };</span></p><p class="c15 c44"><span></span></p><p class="c44 c20"><span class="c38">Note that in the above code the member </span><span class="c5 c11 c38">std::vector&lt;SUnit&gt;</span><span class="c5 c11 c38"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">&nbsp;</a></span><span class="c4 c5 c11 c38"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html#a3d5aacd5fc7d6a739ce913974ed1e53d">SUnits</a></span><span class="c38">&nbsp;in </span><span class="c4 c5 c11 c38"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html">ScheduleDAG</a></span><span class="c38">&nbsp;stores the scheduled nodes, or instructions.</span></p><p class="c15 c44"><span></span></p><p class="c44 c20"><span>Besides the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html">ScheduleDAG</a></span><span>&nbsp;the file </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/ScheduleDAG_8h_source.html">ScheduleDAG.h</a></span><span>&nbsp;also defines </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">SDep</a></span><span>,</span><span>&nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;and </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html">SchedulingPriorityQueue</a></span><span class="c0">. &nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">SDep</a></span><span>&nbsp;represents the dependency on the scheduling graph. </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span>&nbsp;is a scheduling unit, namely a graph node in the scheduling graph </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html">ScheduleDAG</a></span><span>. Each </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span>&nbsp;may has several dependent nodes represented in the data members</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;SDep, 4&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a></span><span class="c0">&nbsp; (</span><span class="c0 c6">// All sunit predecessors) </span><span class="c0">and </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;SDep, 4&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a></span><span class="c0">&nbsp;(</span><span class="c0 c6">// All sunit successors).</span><span>&nbsp; In addition, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span>&nbsp;has</span><span>&nbsp;many members to store certain information about the node such as </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a4ed9422117c4ca9e274a032428a6b8ac">isCallOp</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">(// Is a function call operand)</span><span class="c0">, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ac8cc028950511d3ae611681975c7831e">isTwoAddress</a></span><span class="c0 c8">&nbsp;andl</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ace667b502d54c947cf2f3a4c5d60f734">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ace667b502d54c947cf2f3a4c5d60f734">isCommutable</a></span><span class="c0">. &nbsp;Please look at the following code for more detailed information regarding </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">SDep</a></span><span>, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;and </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html">SchedulingPriorityQueue</a></span><span>:</span></p><p class="c15 c44"><span class="c0"></span></p><p class="c17"><span class="c0">00044 </span><span class="c0 c6">&nbsp;/// SDep - Scheduling dependency. This represents one direction of an</span><span class="c0"><br>00045 </span><span class="c0 c6">&nbsp;/// edge in the scheduling DAG.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">00046</a></span><span class="c0">&nbsp; </span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">SDep</a></span><span class="c0">&nbsp;{<br>00047 &nbsp; </span><span class="c0 c9">public</span><span class="c0">:<br>00048 </span><span class="c0 c6">&nbsp; &nbsp;/// Kind - These are the different kinds of scheduling dependencies.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732">00049</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0 c9">enum</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732">Kind</a></span><span class="c0">&nbsp;{<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732af91df2221290eaa1a368403ffad49a26">00050</a></span><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732af91df2221290eaa1a368403ffad49a26">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732af91df2221290eaa1a368403ffad49a26">Data</a></span><span class="c0">, &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">///&lt; Regular data dependence (aka true-dependence).</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732abe9561936346ab5c5e22fe544994b06e">00051</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732abe9561936346ab5c5e22fe544994b06e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732abe9561936346ab5c5e22fe544994b06e">Anti</a></span><span class="c0">, &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">///&lt; A register anti-dependedence (aka WAR).</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732a011a1d87822a7f70efee9e430a7ccc36">00052</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732a011a1d87822a7f70efee9e430a7ccc36">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732a011a1d87822a7f70efee9e430a7ccc36">Output</a></span><span class="c0">, &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">///&lt; A register output-dependence (aka WAW).</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732a67742b87d83369cad814985a4afc83d0">00053</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732a67742b87d83369cad814985a4afc83d0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732a67742b87d83369cad814985a4afc83d0">Order</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">///&lt; Any other ordering dependency.</span><span class="c0"><br>00054 &nbsp; &nbsp;};<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9">00056</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">enum</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9">OrderKind</a></span><span class="c0">&nbsp;{<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a3d026b42ef4cc00c58dd954b3c5eda65">00057</a></span><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a3d026b42ef4cc00c58dd954b3c5eda65">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a3d026b42ef4cc00c58dd954b3c5eda65">Barrier</a></span><span class="c0">, &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">///&lt; An unknown scheduling barrier.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9aa34e7b539ffb2975952fd58cbb2b75c2">00058</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9aa34e7b539ffb2975952fd58cbb2b75c2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9aa34e7b539ffb2975952fd58cbb2b75c2">MayAliasMem</a></span><span class="c0">, &nbsp;</span><span class="c0 c6">///&lt; Nonvolatile load/Store instructions that may alias.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9af1f76321cbfa20244f78ab9f7a40900c">00059</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9af1f76321cbfa20244f78ab9f7a40900c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9af1f76321cbfa20244f78ab9f7a40900c">MustAliasMem</a></span><span class="c0">, </span><span class="c0 c6">///&lt; Nonvolatile load/Store instructions that must alias.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a8afafe9e6f4c2fb9744242a6b369a0f1">00060</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a8afafe9e6f4c2fb9744242a6b369a0f1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a8afafe9e6f4c2fb9744242a6b369a0f1">Artificial</a></span><span class="c0">, &nbsp; </span><span class="c0 c6">///&lt; Arbitrary weak DAG edge (no actual dependence).</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a04d28e273cd30fa75243240b15d08352">00061</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a04d28e273cd30fa75243240b15d08352">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a04d28e273cd30fa75243240b15d08352">Cluster</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">///&lt; Weak DAG edge linking a chain of clustered instrs.</span><span class="c0"><br>00062 &nbsp; &nbsp;};<br>00064 &nbsp; </span><span class="c0 c9">private</span><span class="c0">:<br>00065 </span><span class="c0 c6">&nbsp; &nbsp;/// Dep - A pointer to the depending/depended-on SUnit, and an enum</span><span class="c0"><br>00066 </span><span class="c0 c6">&nbsp; &nbsp;/// indicating the kind of the dependency.</span><span class="c0"><br>00067 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PointerIntPair.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PointerIntPair.html">PointerIntPair&lt;SUnit *, 2, Kind&gt;</a></span><span class="c0">&nbsp;Dep;<br>00069 </span><span class="c0 c6">&nbsp; &nbsp;/// Contents - A union discriminated by the dependence kind.</span><span class="c0"><br>00070 &nbsp; &nbsp;</span><span class="c0 c9">union </span><span class="c0">{<br>00071 </span><span class="c0 c6">&nbsp; &nbsp; &nbsp;/// Reg - For Data, Anti, and Output dependencies, the associated</span><span class="c0"><br>00072 </span><span class="c0 c6">&nbsp; &nbsp; &nbsp;/// register. For Data dependencies that don't currently have a register</span><span class="c0"><br>00073 </span><span class="c0 c6">&nbsp; &nbsp; &nbsp;/// assigned, this is set to zero.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#ab0a6528b6785d72ed8ec4a8f486ee78d">00074</a></span><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#ab0a6528b6785d72ed8ec4a8f486ee78d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#ab0a6528b6785d72ed8ec4a8f486ee78d">Reg</a></span><span class="c0">;<br>00076 </span><span class="c0 c6">&nbsp; &nbsp; &nbsp;/// Order - Additional information about Order dependencies.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a5ad1b55cd1da72f5229dd7a0378ca99e">00077</a></span><span class="c0">&nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a5ad1b55cd1da72f5229dd7a0378ca99e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a5ad1b55cd1da72f5229dd7a0378ca99e">OrdKind</a></span><span class="c0">; </span><span class="c0 c6">// enum OrderKind</span><span class="c0"><br>00078 &nbsp; &nbsp; } Contents; <br>00080 </span><span class="c0 c6">&nbsp; &nbsp;/// Latency - The time associated with this edge. </span></p><p class="c17"><span class="c0">00083 &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Latency;<br>00084 </span><span class="c0 c6">&nbsp; &nbsp;/// Record MinLatency seperately from "expected" Latency.</span><span class="c0"><br>00088 &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;MinLatency;<br>00090 &nbsp; </span><span class="c0 c9">public</span><span class="c0">:<br>00091 </span><span class="c0 c6">&nbsp; &nbsp;/// SDep - Construct a null SDep. </span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a98b446ad86ee3581e0273ef2200d2585">00094</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a98b446ad86ee3581e0273ef2200d2585">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a98b446ad86ee3581e0273ef2200d2585">SDep</a></span><span class="c0">() : Dep(0,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732af91df2221290eaa1a368403ffad49a26">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732af91df2221290eaa1a368403ffad49a26">Data</a></span><span class="c0">) {}<br>00096 </span><span class="c0 c6">&nbsp; &nbsp;/// SDep - Construct an SDep with the specified values.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#afdd24e7642b757dd8b2ec8345bd9bda3">00097</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a98b446ad86ee3581e0273ef2200d2585">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a98b446ad86ee3581e0273ef2200d2585">SDep</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*S,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a07333f8ba53e0454b7ec6365860c0732">Kind</a></span><span class="c0">&nbsp;kind, </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">)<br>00098 &nbsp; &nbsp; &nbsp; : Dep(S, kind), Contents() {<br>…............. &nbsp; &nbsp;//definition of constructor }<br>00121 </span><span class="c0 c6">&nbsp; &nbsp;/// Return true if the specified SDep is equivalent except for latency.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a524ff572f1712db8869351ac1b2b5f06">00122</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a524ff572f1712db8869351ac1b2b5f06">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a524ff572f1712db8869351ac1b2b5f06">overlaps</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">SDep</a></span><span class="c0">&nbsp;&amp;Other)</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ }<br>00132 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></span><span class="c0">(</span><span class="c0 c14">"Invalid dependency kind!"</span><span class="c0">);<br>00133 &nbsp; &nbsp; }</span></p><p class="c17"><span class="c0">…..........................</span></p><p class="c17"><span class="c0">00258 </span><span class="c0 c6">&nbsp;/// SUnit - Scheduling unit. This is a node in the scheduling DAG.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">00259</a></span><span class="c0">&nbsp; </span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;{<br>00260 &nbsp; </span><span class="c0 c9">private</span><span class="c0">:<br>00261 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Node; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Representative node.</span><span class="c0"><br>00262 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*Instr; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Alternatively, a MachineInstr.</span><span class="c0"><br>00263 &nbsp; </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#af46433c376061aaf79670805e7843be0">00264</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#af46433c376061aaf79670805e7843be0">OrigNode</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// If not this, the node from which</span><span class="c0"><br>00265 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// this node was cloned.</span><span class="c0"><br>00266 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// (SD scheduling only)</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a2b2c6049e5141829267f4f9193b475d4">00268</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MCSchedClassDesc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1MCSchedClassDesc.html">MCSchedClassDesc</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a2b2c6049e5141829267f4f9193b475d4">SchedClass</a></span><span class="c0">; </span><span class="c0 c6">// NULL or resolved SchedClass.</span><span class="c0"><br>00270 &nbsp; &nbsp; </span><span class="c0 c6">// Preds/Succs - The SUnits before/after us in the graph.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">00271</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;SDep, 4&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a></span><span class="c0">; &nbsp;</span><span class="c0 c6">// All sunit predecessors.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">00272</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;SDep, 4&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a></span><span class="c0">; &nbsp;</span><span class="c0 c6">// All sunit successors.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#adb05da6f0a5d0c81b33021f845af4754">00274</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;SDep, 4&gt;::iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#adb05da6f0a5d0c81b33021f845af4754">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#adb05da6f0a5d0c81b33021f845af4754">pred_iterator</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ac36199fad77c5afad15cd5846624e593">00275</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;SDep, 4&gt;::iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ac36199fad77c5afad15cd5846624e593">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ac36199fad77c5afad15cd5846624e593">succ_iterator</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#af8cccf555cb6b0e79f7ad6fc702b7379">00276</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;SDep, 4&gt;::const_iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#af8cccf555cb6b0e79f7ad6fc702b7379">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#af8cccf555cb6b0e79f7ad6fc702b7379">const_pred_iterator</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#aea5d4f2e8b7c234f775558c74e395933">00277</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">typedef</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;SDep, 4&gt;::const_iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#aea5d4f2e8b7c234f775558c74e395933">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#aea5d4f2e8b7c234f775558c74e395933">const_succ_iterator</a></span><span class="c0">;<br>00278 <br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">00279</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Entry # of node in the node vector.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a26a3c0b6567d1e8cf9ac8492e6e5f62f">00280</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a26a3c0b6567d1e8cf9ac8492e6e5f62f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a26a3c0b6567d1e8cf9ac8492e6e5f62f">NodeQueueId</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Queue id of node.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a25329a072c76c185b8c5ff530c632762">00281</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a25329a072c76c185b8c5ff530c632762">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a25329a072c76c185b8c5ff530c632762">NumPreds</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// # of SDep::Data preds.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a1a6c1a29019b8f3fd988359ec5dd3d2f">00282</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a1a6c1a29019b8f3fd988359ec5dd3d2f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a1a6c1a29019b8f3fd988359ec5dd3d2f">NumSuccs</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// # of SDep::Data sucss.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a94f78042fbba3ea4cd1004353daa46aa">00283</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a94f78042fbba3ea4cd1004353daa46aa">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a94f78042fbba3ea4cd1004353daa46aa">NumPredsLeft</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// # of preds not scheduled.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a40c2dfbd170941dd4d20ee9b60c9d49d">00284</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a40c2dfbd170941dd4d20ee9b60c9d49d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a40c2dfbd170941dd4d20ee9b60c9d49d">NumSuccsLeft</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// # of succs not scheduled.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ab9e02660290b9557b547b57870133467">00285</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ab9e02660290b9557b547b57870133467">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ab9e02660290b9557b547b57870133467">WeakPredsLeft</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// # of weak preds not scheduled.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ae75d620ee809eaf50970a833f4a3ace9">00286</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ae75d620ee809eaf50970a833f4a3ace9">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ae75d620ee809eaf50970a833f4a3ace9">WeakSuccsLeft</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// # of weak succs not scheduled.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a74f8123e14985c7599ffca039e80b70a">00287</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">short</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a74f8123e14985c7599ffca039e80b70a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a74f8123e14985c7599ffca039e80b70a">NumRegDefsLeft</a></span><span class="c0">; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// # of reg defs with no scheduled use.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a72e0568b7bf0e9a97260c34264a549a0">00288</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;</span><span class="c0 c8">short</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a72e0568b7bf0e9a97260c34264a549a0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a72e0568b7bf0e9a97260c34264a549a0">Latency</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Node latency.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ad11870c750d0016478df39175d3088a1">00289</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ad11870c750d0016478df39175d3088a1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ad11870c750d0016478df39175d3088a1">isVRegCycle</a></span><span class="c0">&nbsp; &nbsp; &nbsp; : 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// May use and def the same vreg.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a0be1f84d53e90c247d75f2ed63636761">00290</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a0be1f84d53e90c247d75f2ed63636761">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a0be1f84d53e90c247d75f2ed63636761">isCall</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Is a function call.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a4ed9422117c4ca9e274a032428a6b8ac">00291</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a4ed9422117c4ca9e274a032428a6b8ac">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a4ed9422117c4ca9e274a032428a6b8ac">isCallOp</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Is a function call operand.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ac8cc028950511d3ae611681975c7831e">00292</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ac8cc028950511d3ae611681975c7831e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ac8cc028950511d3ae611681975c7831e">isTwoAddress</a></span><span class="c0">&nbsp; &nbsp; &nbsp;: 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Is a two-address instruction.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ace667b502d54c947cf2f3a4c5d60f734">00293</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ace667b502d54c947cf2f3a4c5d60f734">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ace667b502d54c947cf2f3a4c5d60f734">isCommutable</a></span><span class="c0">&nbsp; &nbsp; &nbsp;: 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Is a commutable instruction.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a9d9a8b8d5225f85cecbbada4ce4406b0">00294</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a9d9a8b8d5225f85cecbbada4ce4406b0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a9d9a8b8d5225f85cecbbada4ce4406b0">hasPhysRegDefs</a></span><span class="c0">&nbsp; &nbsp;: 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Has physreg defs that are being used.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a497fa3b21a696c8abd87e1be3e24229f">00295</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a497fa3b21a696c8abd87e1be3e24229f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a497fa3b21a696c8abd87e1be3e24229f">hasPhysRegClobbers</a></span><span class="c0">&nbsp;: 1; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Has any physreg defs, used or not.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a87f2a48b0ca074c06735b969c534349a">00296</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a87f2a48b0ca074c06735b969c534349a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a87f2a48b0ca074c06735b969c534349a">isPending</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; : 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// True once pending.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a90272947a7dad8b452be533c490a5e89">00297</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a90272947a7dad8b452be533c490a5e89">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a90272947a7dad8b452be533c490a5e89">isAvailable</a></span><span class="c0">&nbsp; &nbsp; &nbsp; : 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// True once available.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">00298</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a8c201d7a769bda1cd75d8d6788123068">isScheduled</a></span><span class="c0">&nbsp; &nbsp; &nbsp; : 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// True once scheduled.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a7faf5b0345dd1c2fd4b60d7f5108f3b5">00299</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a7faf5b0345dd1c2fd4b60d7f5108f3b5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a7faf5b0345dd1c2fd4b60d7f5108f3b5">isScheduleHigh</a></span><span class="c0">&nbsp; &nbsp;: 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// True if preferable to schedule high.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a95e0c4bc075b7e8974dd9dcc80609487">00300</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a95e0c4bc075b7e8974dd9dcc80609487">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a95e0c4bc075b7e8974dd9dcc80609487">isScheduleLow</a></span><span class="c0">&nbsp; &nbsp; : 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// True if preferable to schedule low.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a06b34dc1630e6e1ac6b9336bca455b0e">00301</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a06b34dc1630e6e1ac6b9336bca455b0e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a06b34dc1630e6e1ac6b9336bca455b0e">isCloned</a></span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// True if this node has been cloned.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ab5ecf23b4e7641cbd378b0a2e03e77fd">00302</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309e">Sched::Preference</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ab5ecf23b4e7641cbd378b0a2e03e77fd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ab5ecf23b4e7641cbd378b0a2e03e77fd">SchedulingPref</a></span><span class="c0">; &nbsp; </span><span class="c0 c6">// Scheduling preference.</span><span class="c0"><br>00303 <br>00304 &nbsp; </span><span class="c0 c9">private</span><span class="c0">:<br>00305 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;isDepthCurrent &nbsp; : 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// True if Depth is current.</span><span class="c0"><br>00306 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;isHeightCurrent &nbsp;: 1; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// True if Height is current.</span><span class="c0"><br>00307 &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Depth; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Node depth.</span><span class="c0"><br>00308 &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Height; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// Node height.</span><span class="c0"><br>00309 &nbsp; </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a2a6f92b9c5aba34d3b07f3ebe229ccff">00310</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a2a6f92b9c5aba34d3b07f3ebe229ccff">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a2a6f92b9c5aba34d3b07f3ebe229ccff">TopReadyCycle</a></span><span class="c0">; </span><span class="c0 c6">// Cycle relative to start when node is ready.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#aa1dfdcdc657e12c47e72d9dbe251ac85">00311</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#aa1dfdcdc657e12c47e72d9dbe251ac85">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#aa1dfdcdc657e12c47e72d9dbe251ac85">BotReadyCycle</a></span><span class="c0">; </span><span class="c0 c6">// Cycle relative to end when node is ready.</span><span class="c0"><br>00312 <br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a4f21db7c66af06c7473b77fd4395b92e">00313</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a4f21db7c66af06c7473b77fd4395b92e">CopyDstRC</a></span><span class="c0">; </span><span class="c0 c6">// Is a special copy node if not null.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#abc6086d9aae5e2c749134b47be689d78">00314</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#abc6086d9aae5e2c749134b47be689d78">CopySrcRC</a></span><span class="c0">;</span></p><p class="c44 c20"><span class="c0">….................................// get** and set** function members//.........</span></p><p class="c17"><span class="c0">00467 &nbsp; </span><span class="c0 c6">//===--------------------------------------------------------------------===//</span><span class="c0"><br>00468 </span><span class="c0 c6">&nbsp;/// SchedulingPriorityQueue - This interface is used to plug different</span><span class="c0"><br>00469 </span><span class="c0 c6">&nbsp;/// priorities computation algorithms into the list scheduler. It implements</span><span class="c0"><br>00470 </span><span class="c0 c6">&nbsp;/// the interface of a standard priority queue, where nodes are inserted in</span><span class="c0"><br>00471 </span><span class="c0 c6">&nbsp;/// arbitrary order and returned in priority order. &nbsp;The computation of the</span><span class="c0"><br>00472 </span><span class="c0 c6">&nbsp;/// priority and the representation of the queue are totally up to the</span><span class="c0"><br>00473 </span><span class="c0 c6">&nbsp;/// implementation to decide.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html">00475</a></span><span class="c0">&nbsp; </span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html">SchedulingPriorityQueue</a></span><span class="c0">&nbsp;{<br>00476 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;anchor();<br>00477 &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;CurCycle;<br>00478 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;HasReadyFilter;<br>00479 &nbsp; </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#a04cd6cf6939bcdd0f343bab335f7f82f">00480</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#a04cd6cf6939bcdd0f343bab335f7f82f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#a04cd6cf6939bcdd0f343bab335f7f82f">SchedulingPriorityQueue</a></span><span class="c0">(</span><span class="c0 c8">bool</span><span class="c0">&nbsp;rf = </span><span class="c0 c9">false</span><span class="c0">):<br>00481 &nbsp; &nbsp; &nbsp; CurCycle(0), HasReadyFilter(rf) {}<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#a5c1e10173f003c183e66cf99875d9bab">00482</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#a5c1e10173f003c183e66cf99875d9bab">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#a5c1e10173f003c183e66cf99875d9bab">~SchedulingPriorityQueue</a></span><span class="c0">() {}<br>00484 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#a30162f88748f91d1841ead3380d2a61c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#a30162f88748f91d1841ead3380d2a61c">isBottomUp</a></span><span class="c0">() </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br>00486 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#a9bf957359081fc81753d4f4b466a6577">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#a9bf957359081fc81753d4f4b466a6577">initNodes</a></span><span class="c0">(std::vector&lt;SUnit&gt; &amp;SUnits) = 0;<br>00487 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#ad3004ef364238e718cb706252ae0fe15">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#ad3004ef364238e718cb706252ae0fe15">addNode</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU) = 0;<br>00488 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#ae786b608765a20cdd6d9c9e3b40195f1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#ae786b608765a20cdd6d9c9e3b40195f1">updateNode</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU) = 0;<br>00489 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#a4a1424925a29a70383ebc11b7cac319d">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#a4a1424925a29a70383ebc11b7cac319d">releaseState</a></span><span class="c0">() = 0;<br>00491 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#aa19ea76a7eab9ab9d3c379c60c57e890">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#aa19ea76a7eab9ab9d3c379c60c57e890">empty</a></span><span class="c0">() </span><span class="c0 c9">const</span><span class="c0">&nbsp;= 0;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#a5192ecfb811ed7a72fdc76290a4ce50f">00493</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#a5192ecfb811ed7a72fdc76290a4ce50f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SchedulingPriorityQueue.html#a5192ecfb811ed7a72fdc76290a4ce50f">hasReadyFilter</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;HasReadyFilter; }</span></p><p class="c44 c20"><span class="c0">…..............................</span></p><p class="c15 c44"><span></span></p><p class="c17"><span>To make clear the global picture, let’s first look at the inheritance graph for instruction scheduling, as shown below:</span></p><p class="c17 c35"><span></span></p><p class="c17"><img height="272" src="./Notes on LLVM 3 (Target Independent Code Generator)_files/image09.png" width="524"></p><p class="c17 c35"><span></span></p><p class="c17"><span>Note that although not indicated by the above graph, the class </span><span class="c0 c4">ScheduleDAGFast </span><span>inherits the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html">ScheduleDAGSDNodes</a></span><span>, which has the following interface (in </span><span class="c0 c6">ScheduleDAGSDNodes.h</span><span>):</span></p><p class="c17"><span class="c0">00022 </span><span class="c0 c6">&nbsp;/// ScheduleDAGSDNodes - A ScheduleDAG for scheduling SDNode-based DAGs.</span><span class="c0"><br>00024 </span><span class="c0 c6">&nbsp;/// Edges between SUnits are initially based on edges in the SelectionDAG,</span><span class="c0"><br>00025 </span><span class="c0 c6">&nbsp;/// and additional edges can be added by the schedulers as heuristics.</span><span class="c0"><br>00026 </span><span class="c0 c6">&nbsp;/// SDNodes such as Constants, Registers, and a few others that are not</span><span class="c0"><br>00027 </span><span class="c0 c6">&nbsp;/// interesting to schedulers are not allocated SUnits.</span><span class="c0"><br>00029 </span><span class="c0 c6">&nbsp;/// SDNodes with MVT::Glue operands are grouped along with the flagged</span><span class="c0"><br>00030 </span><span class="c0 c6">&nbsp;/// nodes into a single SUnit so that they are scheduled together.</span><span class="c0"><br>00032 </span><span class="c0 c6">&nbsp;/// SDNode-based scheduling graphs do not use SDep::Anti or SDep::Output</span><span class="c0"><br>00033 </span><span class="c0 c6">&nbsp;/// edges. &nbsp;Physical register dependence information is not carried in</span><span class="c0"><br>00034 </span><span class="c0 c6">&nbsp;/// the DAG and must be handled explicitly by schedulers.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html">00036</a></span><span class="c0">&nbsp; </span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html">ScheduleDAGSDNodes</a></span><span class="c0">&nbsp;: </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html">ScheduleDAG</a></span><span class="c0">&nbsp;{<br>00037 &nbsp; </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a9f718397926caadcb301ca1e00aaf68c">00038</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a9f718397926caadcb301ca1e00aaf68c">BB</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a2dbfb92f74a3067ce823a76e3266b0e0">00039</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a2dbfb92f74a3067ce823a76e3266b0e0">DAG</a></span><span class="c0">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c6">// DAG of the current basic block</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a91db1a13eaa5f8a8ac8ac78b5a60791b">00040</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1InstrItineraryData.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1InstrItineraryData.html">InstrItineraryData</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a91db1a13eaa5f8a8ac8ac78b5a60791b">InstrItins</a></span><span class="c0">;<br>00042 </span><span class="c0 c6">&nbsp; &nbsp;/// The schedule. Null SUnit*'s represent noop instructions.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a9e9bf8e61a41a12bd87df9f4c671b2c2">00043</a></span><span class="c0">&nbsp; &nbsp; std::vector&lt;SUnit*&gt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a9e9bf8e61a41a12bd87df9f4c671b2c2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a9e9bf8e61a41a12bd87df9f4c671b2c2">Sequence</a></span><span class="c0">;<br>00045 &nbsp; &nbsp; </span><span class="c0 c9">explicit</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#ad73652eab6e03e092e32bde82040c8c7">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#ad73652eab6e03e092e32bde82040c8c7">ScheduleDAGSDNodes</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;mf);<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a606a3968bb4b336cb0caac9b682ca1c5">00047</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a606a3968bb4b336cb0caac9b682ca1c5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a606a3968bb4b336cb0caac9b682ca1c5">~ScheduleDAGSDNodes</a></span><span class="c0">() {}<br>00049 </span><span class="c0 c6">&nbsp; &nbsp;/// Run - perform scheduling.</span><span class="c0"><br>00051 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#aa00d73e05dee6c2701209bac3d7786b8">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#aa00d73e05dee6c2701209bac3d7786b8">Run</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAG.html">SelectionDAG</a></span><span class="c0">&nbsp;*dag,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*bb);<br>00053 </span><span class="c0 c6">&nbsp; &nbsp;/// isPassiveNode - Return true if the node is a non-scheduled leaf.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a901a96fb8eb2598eed200755554567c0">00055</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a901a96fb8eb2598eed200755554567c0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a901a96fb8eb2598eed200755554567c0">isPassiveNode</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*Node) {<br>00056 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(isa&lt;ConstantSDNode&gt;(Node)) &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00057 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(isa&lt;ConstantFPSDNode&gt;(Node)) &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>….....................<br>00068 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(Node-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html#af0d328f3f61168f4ea7d6e4044af4f97">getOpcode</a></span><span class="c0">() ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a926013f6dca240eca95aca66c8d3e74b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ISD.html#a22ea9cec080dd5f4f47ba234c2f59110a926013f6dca240eca95aca66c8d3e74b">ISD::EntryToken</a></span><span class="c0">&nbsp;||</span><span><br>0</span><span class="c0">0069 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isa&lt;MDNodeSDNode&gt;(Node)) </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00070 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>00071 &nbsp; &nbsp; }<br>00073 </span><span class="c0 c6">&nbsp; &nbsp;/// NewSUnit - Creates a new SUnit and return a ptr to it.</span><span class="c0"><br>00075 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a15c0200b4b6e12b97d270fbea215443e">newSUnit</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*N);<br>00077 </span><span class="c0 c6">&nbsp; &nbsp;/// Clone - Creates a clone of the specified SUnit. It does not copy the</span><span class="c0"><br>00078 </span><span class="c0 c6">&nbsp; &nbsp;/// predecessors / successors info nor the temporary scheduling states.</span><span class="c0"><br>00080 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a3a4bc523c204969228191d06465dad0c">Clone</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*N);<br>00082 </span><span class="c0 c6">&nbsp; &nbsp;/// BuildSchedGraph - Build the SUnit graph from the selection dag that we</span><span class="c0"><br>00083 </span><span class="c0 c6">&nbsp; &nbsp;/// are input. &nbsp;This SUnit graph is similar to the SelectionDAG, but</span><span class="c0"><br>00084 </span><span class="c0 c6">&nbsp; &nbsp;/// excludes nodes that aren't interesting to scheduling, and represents</span><span class="c0"><br>00085 </span><span class="c0 c6">&nbsp; &nbsp;/// flagged together nodes with a single SUnit.</span><span class="c0"><br>00086 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a3c3345f58d110bb14c409d80a8c34c64">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a3c3345f58d110bb14c409d80a8c34c64">BuildSchedGraph</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AliasAnalysis.html">AliasAnalysis</a></span><span class="c0">&nbsp;*AA);<br>00088 </span><span class="c0 c6">&nbsp; &nbsp;/// InitVRegCycleFlag - Set isVRegCycle if this node's single use is</span><span class="c0"><br>00089 </span><span class="c0 c6">&nbsp; &nbsp;/// CopyToReg and its only active data operands are CopyFromReg within a</span><span class="c0"><br>00090 </span><span class="c0 c6">&nbsp; &nbsp;/// single block loop.</span><span class="c0"><br>00092 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#ac8f6df53973157d119e2bf3fe0f4a91e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#ac8f6df53973157d119e2bf3fe0f4a91e">InitVRegCycleFlag</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU);<br>00094 </span><span class="c0 c6">&nbsp; &nbsp;/// InitNumRegDefsLeft - Determine the # of regs defined by this node.</span><span class="c0"><br>00096 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a9e19da5240e1c311814f574bb0c235a4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a9e19da5240e1c311814f574bb0c235a4">InitNumRegDefsLeft</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU);<br>00098 </span><span class="c0 c6">&nbsp; &nbsp;/// computeLatency - Compute node latency.</span><span class="c0"><br>00100 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a6ab45d1027ab01be9c371634c49d077b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a6ab45d1027ab01be9c371634c49d077b">computeLatency</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU);<br>00102 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a83980e58075cc47fa1a6dbc63bc81b8f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a83980e58075cc47fa1a6dbc63bc81b8f">computeOperandLatency</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDNode.html">SDNode</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Use.html">Use</a></span><span class="c0">,<br>00103 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;OpIdx,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">SDep</a></span><span class="c0">&amp; dep) </span><span class="c0 c9">const</span><span class="c0">;<br>00105 </span><span class="c0 c6">&nbsp; &nbsp;/// Schedule - Order nodes according to selected style, filling</span><span class="c0"><br>00106 </span><span class="c0 c6">&nbsp; &nbsp;/// in the Sequence member.</span><span class="c0"><br>00108 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a6730dde277dec2e2f901917520c8b3cc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a6730dde277dec2e2f901917520c8b3cc">Schedule</a></span><span class="c0">() = 0;<br>00110 </span><span class="c0 c6">&nbsp; &nbsp;/// VerifyScheduledSequence - Verify that all SUnits are scheduled and</span><span class="c0"><br>00111 </span><span class="c0 c6">&nbsp; &nbsp;/// consistent with the Sequence of scheduled instructions.</span><span class="c0"><br>00112 &nbsp; &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a4b8c5a6f17aa50ecc8f64f74d4ba5e47">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a4b8c5a6f17aa50ecc8f64f74d4ba5e47">VerifyScheduledSequence</a></span><span class="c0">(</span><span class="c0 c8">bool</span><span class="c0">&nbsp;isBottomUp);<br>00114 </span><span class="c0 c6">&nbsp; &nbsp;/// EmitSchedule - Insert MachineInstrs into the MachineBasicBlock</span><span class="c0"><br>00115 </span><span class="c0 c6">&nbsp; &nbsp;/// according to the order specified in Sequence.</span><span class="c0"><br>00117 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">*<br>00118 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a6f60ed03227dbeb711a3ae9b1f0238e9">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a6f60ed03227dbeb711a3ae9b1f0238e9">EmitSchedule</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock_1_1bundle__iterator.html">MachineBasicBlock::iterator</a></span><span class="c0">&nbsp;&amp;InsertPos);<br>00120 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a61e5fb038a9406e7c4d2677f386811f0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a61e5fb038a9406e7c4d2677f386811f0">dumpNode</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU) </span><span class="c0 c9">const</span><span class="c0">;<br>00122 &nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a3fd977c90e0dadc44ded650c2112c336">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a3fd977c90e0dadc44ded650c2112c336">dumpSchedule</a></span><span class="c0">() </span><span class="c0 c9">const</span><span class="c0">;<br>00124 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;std::string</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a3f67c644f91e157be556dd6aace59588">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a3f67c644f91e157be556dd6aace59588">getGraphNodeLabel</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU) </span><span class="c0 c9">const</span><span class="c0">;</span></p><p class="c17 c35"><span></span></p><p class="c17"><span>As can be seen from the above code, the method </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a6730dde277dec2e2f901917520c8b3cc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html#a6730dde277dec2e2f901917520c8b3cc">Schedule</a></span><span class="c0">() = 0;</span><span>&nbsp;is defined as a pure virtual function in </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html">ScheduleDAGSDNodes</a></span><span>. &nbsp; </span><span class="c0">ScheduleDAGFast (</span><span>defined in </span><span class="c28 c11 c25 c62"><a class="c1" href="http://llvm.org/docs/doxygen/html/ScheduleDAGFast_8cpp_source.html">ScheduleDAGFast.cpp</a></span><span class="c0">)</span><span>&nbsp;further inherits the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html">ScheduleDAGSDNodes</a></span><span>&nbsp;class and implements an actual scheduling (the scheduling is actually done in </span><span class="c0">ScheduleDAGFast::ListScheduleBottomUp(), </span><span>called by </span><span class="c0">ScheduleDAGFast::Schedule()</span><span>):</span></p><p class="c17 c35"><span></span></p><p class="c17"><span>0</span><span class="c0">0064 </span><span class="c0 c6">//===----------------------------------------------------------------------===//</span><span class="c0"><br>00065 </span><span class="c0 c6">/// ScheduleDAGFast - The actual "fast" list scheduler implementation.</span><span class="c0"><br>00067 </span><span class="c0 c9">class </span><span class="c0">ScheduleDAGFast : </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html">ScheduleDAGSDNodes</a></span><span class="c0">&nbsp;{<br>00068 </span><span class="c0 c9">private</span><span class="c0">:<br>00069 </span><span class="c0 c6">&nbsp;/// AvailableQueue - The priority queue to use for the available SUnits.</span><span class="c0"><br>00070 &nbsp;FastPriorityQueue AvailableQueue; <br>00072 </span><span class="c0 c6">&nbsp;/// LiveRegDefs - A set of physical registers and their definition</span><span class="c0"><br>00073 </span><span class="c0 c6">&nbsp;/// that are "live". These nodes must be scheduled before any other nodes that</span><span class="c0"><br>00074 </span><span class="c0 c6">&nbsp;/// modifies the registers can be scheduled.</span><span class="c0"><br>00075 &nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;NumLiveRegs;<br>00076 &nbsp; std::vector&lt;SUnit*&gt; LiveRegDefs;<br>00077 &nbsp; std::vector&lt;unsigned&gt; LiveRegCycles;<br>00078 <br>00079 </span><span class="c0 c9">public</span><span class="c0">:<br>00080 &nbsp; ScheduleDAGFast(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;mf)<br>00081 &nbsp; &nbsp; :</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGSDNodes.html">ScheduleDAGSDNodes</a></span><span class="c0">(mf) {}<br>00082 <br>00083 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;Schedule();<br>00084 <br>00085 </span><span class="c0 c6">&nbsp;/// AddPred - adds a predecessor edge to SUnit SU.</span><span class="c0"><br>00086 </span><span class="c0 c6">&nbsp;/// This returns true if this is a new predecessor.</span><span class="c0"><br>00087 &nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;AddPred(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">SDep</a></span><span class="c0">&nbsp;&amp;D) {<br>00088 &nbsp; &nbsp; SU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#af92bf49ed4846e026e68c380d74d7b15">addPred</a></span><span class="c0">(D);<br>00089 &nbsp; }<br>00090 <br>00091 </span><span class="c0 c6">&nbsp;/// RemovePred - removes a predecessor edge from SUnit SU.</span><span class="c0"><br>00092 </span><span class="c0 c6">&nbsp;/// This returns true if an edge was removed.</span><span class="c0"><br>00093 &nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;RemovePred(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">SDep</a></span><span class="c0">&nbsp;&amp;D) {<br>00094 &nbsp; &nbsp; SU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a6d3233165db1e6be5c44060cd4a95461">removePred</a></span><span class="c0">(D);<br>00095 &nbsp; }<br>00096 <br>00097 </span><span class="c0 c9">private</span><span class="c0">:<br>00098 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;ReleasePred(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">SDep</a></span><span class="c0">&nbsp;*PredEdge);<br>00099 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;ReleasePredecessors(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;CurCycle);<br>00100 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;ScheduleNodeBottomUp(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">*, </span><span class="c0 c8">unsigned</span><span class="c0">);<br>00101 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*CopyAndMoveSuccessors(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">*);<br>00102 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;InsertCopiesAndMoveSuccs(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">*, </span><span class="c0 c8">unsigned</span><span class="c0">,<br>00103 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">*,<br>00104 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">*,<br>00105 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;SUnit*, 2&gt;</a></span><span class="c0">&amp;);<br>00106 &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;DelayForLiveRegsBottomUp(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">*,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a></span><span class="c0">&amp;);<br>00107 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;ListScheduleBottomUp();<br>00108 <br>00109 </span><span class="c0 c6">&nbsp;/// forceUnitLatencies - The fast scheduler doesn't care about real latencies.</span><span class="c0"><br>00110 &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;forceUnitLatencies()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">; }<br>00111 };<br>00112 } &nbsp;</span><span class="c0 c6">// end anonymous namespace</span><span><br>0</span><span class="c0">0115 </span><span class="c0 c6">/// Schedule - Schedule the DAG using list scheduling.</span><span class="c0"><br>00116 </span><span class="c0 c8">void</span><span class="c0">&nbsp;ScheduleDAGFast::Schedule() {<br>00117 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a></span><span class="c0">() &lt;&lt; </span><span class="c0 c14">"********** List Scheduling **********\n"</span><span class="c0">);<br>00118 <br>00119 &nbsp; NumLiveRegs = 0;<br>00120 &nbsp; LiveRegDefs.resize(TRI-&gt;getNumRegs(), NULL);<br>00121 &nbsp; LiveRegCycles.resize(TRI-&gt;getNumRegs(), 0);<br>00122 <br>00123 &nbsp; </span><span class="c0 c6">// Build the scheduling graph.</span><span class="c0"><br>00124 &nbsp; BuildSchedGraph(NULL);<br>00125 <br>00126 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></span><span class="c0">(</span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;su = 0, e = SUnits.size(); su != e; ++su)<br>00127 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SUnits[su].dumpAll(</span><span class="c0 c9">this</span><span class="c0">));<br>00128 <br>00129 &nbsp; </span><span class="c0 c6">// Execute the actual scheduling loop.</span><span class="c0"><br>00130 &nbsp; ListScheduleBottomUp();<br>00131 }<br>00132 <br>00133 </span><span class="c0 c6">//===----------------------------------------------------------------------===//</span><span class="c0"><br>00134 </span><span class="c0 c6">// &nbsp;Bottom-Up Scheduling</span><span class="c0"><br>00135 </span><span class="c0 c6">//===----------------------------------------------------------------------===//</span><span class="c0"><br>00136 <br>00137 </span><span class="c0 c6">/// ReleasePred - Decrement the NumSuccsLeft count of a predecessor. Add it to</span><span class="c0"><br>00138 </span><span class="c0 c6">/// the AvailableQueue if the count reaches zero. Also update its cycle bound.</span><span class="c0"><br>00139 </span><span class="c0 c8">void</span><span class="c0">&nbsp;ScheduleDAGFast::ReleasePred(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">SDep</a></span><span class="c0">&nbsp;*PredEdge) {<br>00140 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*PredSU = PredEdge-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a0d3253aa89a8b7441f8401f1b6609811">getSUnit</a></span><span class="c0">();<br>00141 <br>00142 </span><span class="c0 c36">#ifndef NDEBUG</span><span class="c0"><br>00143 &nbsp;</span><span class="c0 c7">if</span><span class="c0">&nbsp;(PredSU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a40c2dfbd170941dd4d20ee9b60c9d49d">NumSuccsLeft</a></span><span class="c0">&nbsp;== 0) {<br>00144 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a></span><span class="c0">() &lt;&lt; </span><span class="c0 c14">"*** Scheduling failed! ***\n"</span><span class="c0">;<br>00145 &nbsp; &nbsp; PredSU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ac28b1882619718b4c6efb97899b845a1">dump</a></span><span class="c0">(</span><span class="c0 c9">this</span><span class="c0">);<br>00146 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a></span><span class="c0">() &lt;&lt; </span><span class="c0 c14">" has been released too many times!\n"</span><span class="c0">;<br>00147 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></span><span class="c0">(0);<br>00148 &nbsp; }<br>00149 </span><span class="c0 c36">#endif</span><span class="c0"><br>00150 &nbsp;--PredSU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a40c2dfbd170941dd4d20ee9b60c9d49d">NumSuccsLeft</a></span><span class="c0">;<br>00152 &nbsp; </span><span class="c0 c6">// If all the node's successors are scheduled, this node is ready</span><span class="c0"><br>00153 &nbsp; </span><span class="c0 c6">// to be scheduled. Ignore the special EntrySU node.</span><span class="c0"><br>00154 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(PredSU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a40c2dfbd170941dd4d20ee9b60c9d49d">NumSuccsLeft</a></span><span class="c0">&nbsp;== 0 &amp;&amp; PredSU != &amp;EntrySU) {<br>00155 &nbsp; &nbsp; PredSU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a90272947a7dad8b452be533c490a5e89">isAvailable</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">true</span><span class="c0">;<br>00156 &nbsp; &nbsp; AvailableQueue.push(PredSU);<br>00157 &nbsp; }<br>00158 }<br>00160 </span><span class="c0 c8">void</span><span class="c0">&nbsp;ScheduleDAGFast::ReleasePredecessors(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;CurCycle) {<br>00161 &nbsp; </span><span class="c0 c6">// Bottom up: release predecessors</span><span class="c0"><br>00162 &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#adb05da6f0a5d0c81b33021f845af4754">SUnit::pred_iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">&nbsp;= SU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a></span><span class="c0">.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a></span><span class="c0">(), E = SU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ae2b43854b542de66eec6475adc48f56c">Preds</a></span><span class="c0">.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a></span><span class="c0">();<br>00163 &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">&nbsp;!= E; ++</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">) {<br>00164 &nbsp; &nbsp; ReleasePred(SU, &amp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">);<br>00165 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">-&gt;isAssignedRegDep()) {<br>00166 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// This is a physical register dependency and it's impossible or</span><span class="c0"><br>00167 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// expensive to copy the register. Make sure nothing that can</span><span class="c0"><br>00168 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// clobber the register is scheduled between the predecessor and</span><span class="c0"><br>00169 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// this node.</span><span class="c0"><br>00170 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!LiveRegDefs[</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">-&gt;getReg()]) {<br>00171 &nbsp; &nbsp; &nbsp; &nbsp; ++NumLiveRegs;<br>00172 &nbsp; &nbsp; &nbsp; &nbsp; LiveRegDefs[</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">-&gt;getReg()] =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">-&gt;getSUnit();<br>00173 &nbsp; &nbsp; &nbsp; &nbsp; LiveRegCycles[</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">-&gt;getReg()] = CurCycle;<br>00174 &nbsp; &nbsp; &nbsp; }<br>00175 &nbsp; &nbsp; }<br>00176 &nbsp; }</span></p><p class="c17"><span class="c0">…............................................</span></p><p class="c17"><span class="c0">00526 </span><span class="c0 c8">void</span><span class="c0">&nbsp;ScheduleDAGFast::ListScheduleBottomUp() {<br>00527 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;CurCycle = 0;<br>00528 <br>00529 &nbsp; </span><span class="c0 c6">// Release any predecessors of the special Exit node.</span><span class="c0"><br>00530 &nbsp; ReleasePredecessors(&amp;ExitSU, CurCycle);<br>00531 <br>00532 &nbsp; </span><span class="c0 c6">// Add root to Available queue.</span><span class="c0"><br>00533 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!SUnits.empty()) {<br>00534 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*RootSU = &amp;SUnits[DAG-&gt;getRoot().getNode()-&gt;getNodeId()];<br>00535 &nbsp; &nbsp; assert(RootSU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#aab4a86c51e6b126c9c6ef58dbb574431">Succs</a></span><span class="c0">.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorBase.html#afdecfccba9b1fd8c9fd8eb27ae69e9a0">empty</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"Graph root shouldn't have successors!"</span><span class="c0">);<br>00536 &nbsp; &nbsp; RootSU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a90272947a7dad8b452be533c490a5e89">isAvailable</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">true</span><span class="c0">;<br>00537 &nbsp; &nbsp; AvailableQueue.push(RootSU);<br>00538 &nbsp; }<br>00539 <br>00540 &nbsp; </span><span class="c0 c6">// While Available queue is not empty, grab the node with the highest</span><span class="c0"><br>00541 &nbsp; </span><span class="c0 c6">// priority. If it is not ready put it back. &nbsp;Schedule the node.</span><span class="c0"><br>00542 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;SUnit*, 4&gt;</a></span><span class="c0">&nbsp;NotReady;<br>00543 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap&lt;SUnit*, SmallVector&lt;unsigned, 4&gt;</a></span><span class="c0">&nbsp;&gt; LRegsMap;<br>00544 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ObjCARC_8cpp.html#a7c6cee88be47642de240c7ed39a34ed3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ObjCARC_8cpp.html#a7c6cee88be47642de240c7ed39a34ed3">Sequence</a></span><span class="c0">.reserve(SUnits.size());<br>00545 &nbsp; </span><span class="c0 c7">while</span><span class="c0">&nbsp;(!AvailableQueue.empty()) {<br>00546 &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;Delayed = </span><span class="c0 c9">false</span><span class="c0">;<br>00547 &nbsp; &nbsp; LRegsMap.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMapBase.html#a6467bd6bb128c8b69a478548fc17351c">clear</a></span><span class="c0">();<br>00548 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*CurSU = AvailableQueue.pop();<br>00549 &nbsp; &nbsp; </span><span class="c0 c7">while</span><span class="c0">&nbsp;(CurSU) {<br>00550 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a></span><span class="c0">&nbsp;LRegs;<br>00551 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!DelayForLiveRegsBottomUp(CurSU, LRegs))<br>00552 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">break</span><span class="c0">;<br>00553 &nbsp; &nbsp; &nbsp; Delayed = </span><span class="c0 c9">true</span><span class="c0">;<br>00554 &nbsp; &nbsp; &nbsp; LRegsMap.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a></span><span class="c0">(std::make_pair(CurSU, LRegs));<br>00555 <br>00556 &nbsp; &nbsp; &nbsp; CurSU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a87f2a48b0ca074c06735b969c534349a">isPending</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">true</span><span class="c0">; &nbsp;</span><span class="c0 c6">// This SU is not in AvailableQueue right now.</span><span class="c0"><br>00557 &nbsp; &nbsp; &nbsp; NotReady.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a></span><span class="c0">(CurSU);<br>00558 &nbsp; &nbsp; &nbsp; CurSU = AvailableQueue.pop();<br>00559 &nbsp; &nbsp; }<br>00560 <br>00561 &nbsp; &nbsp; </span><span class="c0 c6">// All candidates are delayed due to live physical reg dependencies.</span><span class="c0"><br>00562 &nbsp; &nbsp; </span><span class="c0 c6">// Try code duplication or inserting cross class copies</span><span class="c0"><br>00563 &nbsp; &nbsp; </span><span class="c0 c6">// to resolve it.</span><span class="c0"><br>00564 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(Delayed &amp;&amp; !CurSU) {<br>00565 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!CurSU) {<br>00566 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Try duplicating the nodes that produces these</span><span class="c0"><br>00567 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// "expensive to copy" values to break the dependency. In case even</span><span class="c0"><br>00568 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// that doesn't work, insert cross class copies.</span><span class="c0"><br>00569 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*TrySU = NotReady[0];<br>00570 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a></span><span class="c0">&nbsp;&amp;LRegs = LRegsMap[TrySU];<br>00571 &nbsp; &nbsp; &nbsp; &nbsp; assert(LRegs.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a></span><span class="c0">() == 1 &amp;&amp; </span><span class="c0 c14">"Can't handle this yet!"</span><span class="c0">);<br>00572 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Reg = LRegs[0];<br>00573 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*LRDef = LiveRegDefs[</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">];<br>00574 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1EVT.html">EVT</a></span><span class="c0">&nbsp;VT =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ScheduleDAGFast_8cpp.html#a82b61d7e5d7b593cf7c07af84805448a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ScheduleDAGFast_8cpp.html#a82b61d7e5d7b593cf7c07af84805448a">getPhysicalRegisterVT</a></span><span class="c0">(LRDef-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#ac899d0c77f6c945c60c451a69456ae1b">getNode</a></span><span class="c0">(),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">, TII);<br>00575 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*RC =<br>00576 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TRI-&gt;getMinimalPhysRegClass(Reg, VT);<br>00577 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterClass.html">TargetRegisterClass</a></span><span class="c0">&nbsp;*DestRC = TRI-&gt;getCrossCopyRegClass(RC);<br>00578 <br>00579 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// If cross copy register class is the same as RC, then it must be</span><span class="c0"><br>00580 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// possible copy the value directly. Do not try duplicate the def.</span><span class="c0"><br>00581 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// If cross copy register class is not the same as RC, then it's</span><span class="c0"><br>00582 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// possible to copy the value but it require cross register class copies</span><span class="c0"><br>00583 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// and it is expensive.</span><span class="c0"><br>00584 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// If cross copy register class is null, then it's not possible to copy</span><span class="c0"><br>00585 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// the value at all.</span><span class="c0"><br>00586 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*NewDef = 0;<br>00587 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(DestRC != RC) {<br>00588 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NewDef = CopyAndMoveSuccessors(LRDef);<br>00589 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!DestRC &amp;&amp; !NewDef)<br>00590 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af9521f126aaffcc4bbe06c554b8b4bc1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#af9521f126aaffcc4bbe06c554b8b4bc1">report_fatal_error</a></span><span class="c0">(</span><span class="c0 c14">"Can't handle live physical "</span><span class="c0"><br>00591 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"register dependency!"</span><span class="c0">);<br>00592 &nbsp; &nbsp; &nbsp; &nbsp; }<br>00593 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!NewDef) {<br>00594 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Issue copies, these can be expensive cross register class copies.</span><span class="c0"><br>00595 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;SUnit*, 2&gt;</a></span><span class="c0">&nbsp;Copies;<br>00596 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; InsertCopiesAndMoveSuccs(LRDef, Reg, DestRC, RC, Copies);<br>00597 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a></span><span class="c0">() &lt;&lt; </span><span class="c0 c14">"Adding an edge from SU # "</span><span class="c0">&nbsp;&lt;&lt; TrySU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a></span><span class="c0"><br>00598 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;&lt; </span><span class="c0 c14">" to SU #"</span><span class="c0">&nbsp;&lt;&lt; Copies.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a58dc840fc84420b7f0b773794b8101c1">front</a></span><span class="c0">()-&gt;NodeNum &lt;&lt; </span><span class="c0 c14">"\n"</span><span class="c0">);<br>00599 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AddPred(TrySU,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">SDep</a></span><span class="c0">(Copies.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a58dc840fc84420b7f0b773794b8101c1">front</a></span><span class="c0">(),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a8afafe9e6f4c2fb9744242a6b369a0f1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a8afafe9e6f4c2fb9744242a6b369a0f1">SDep::Artificial</a></span><span class="c0">));<br>00600 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NewDef = Copies.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#acd9e771a3296c6b24146955754620557">back</a></span><span class="c0">();<br>00601 &nbsp; &nbsp; &nbsp; &nbsp; }<br>00602 <br>00603 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/Debug_8h.html#aef41e8aaf4c60819b30faf396cdf4978">DEBUG</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a></span><span class="c0">() &lt;&lt; </span><span class="c0 c14">"Adding an edge from SU # "</span><span class="c0">&nbsp;&lt;&lt; NewDef-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a></span><span class="c0"><br>00604 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;&lt; </span><span class="c0 c14">" to SU #"</span><span class="c0">&nbsp;&lt;&lt; TrySU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a3f708b119627541f144d703a1d183202">NodeNum</a></span><span class="c0">&nbsp;&lt;&lt; </span><span class="c0 c14">"\n"</span><span class="c0">);<br>00605 &nbsp; &nbsp; &nbsp; &nbsp; LiveRegDefs[</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">] = NewDef;<br>00606 &nbsp; &nbsp; &nbsp; &nbsp; AddPred(NewDef,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html">SDep</a></span><span class="c0">(TrySU,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a8afafe9e6f4c2fb9744242a6b369a0f1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SDep.html#a551060cb0333d9d0cfdacd2576d817b9a8afafe9e6f4c2fb9744242a6b369a0f1">SDep::Artificial</a></span><span class="c0">));<br>00607 &nbsp; &nbsp; &nbsp; &nbsp; TrySU-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html#a90272947a7dad8b452be533c490a5e89">isAvailable</a></span><span class="c0">&nbsp;= </span><span class="c0 c9">false</span><span class="c0">;<br>00608 &nbsp; &nbsp; &nbsp; &nbsp; CurSU = NewDef;<br>00609 &nbsp; &nbsp; &nbsp; }<br>00610 <br>00611 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!CurSU) {<br>00612 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></span><span class="c0">(</span><span class="c0 c14">"Unable to resolve live physical register dependencies!"</span><span class="c0">);<br>00613 &nbsp; &nbsp; &nbsp; }<br>00614 &nbsp; &nbsp; }<br>00615 <br>00616 &nbsp; &nbsp; </span><span class="c0 c6">// Add the nodes that aren't ready back onto the available list.</span><span class="c0"><br>00617 &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i = 0, e = NotReady.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a></span><span class="c0">(); i != e; ++i) {<br>00618 &nbsp; &nbsp; &nbsp; NotReady[i]-&gt;isPending = </span><span class="c0 c9">false</span><span class="c0">;<br>00619 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// May no longer be available due to backtracking.</span><span class="c0"><br>00620 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(NotReady[i]-&gt;isAvailable)<br>00621 &nbsp; &nbsp; &nbsp; &nbsp; AvailableQueue.push(NotReady[i]);<br>00622 &nbsp; &nbsp; }<br>00623 &nbsp; &nbsp; NotReady.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a></span><span class="c0">();<br>00624 <br>00625 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(CurSU)<br>00626 &nbsp; &nbsp; &nbsp; ScheduleNodeBottomUp(CurSU, CurCycle);<br>00627 &nbsp; &nbsp; ++CurCycle;<br>00628 &nbsp; }<br>00629 <br>00630 &nbsp; </span><span class="c0 c6">// Reverse the order since it is bottom up.</span><span class="c0"><br>00631 &nbsp; std::reverse(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ObjCARC_8cpp.html#a7c6cee88be47642de240c7ed39a34ed3">Sequence</a></span><span class="c0">.begin(),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/ObjCARC_8cpp.html#a7c6cee88be47642de240c7ed39a34ed3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/ObjCARC_8cpp.html#a7c6cee88be47642de240c7ed39a34ed3">Sequence</a></span><span class="c0">.end());<br>00632 <br>00633 </span><span class="c0 c36">#ifndef NDEBUG</span><span class="c0"><br>00634 &nbsp;VerifyScheduledSequence(</span><span class="c0 c6">/*isBottomUp=*/</span><span class="c0 c9">true</span><span class="c0">);<br>00635 </span><span class="c0 c36">#endif</span><span class="c0"><br>00636 }</span></p><p class="c15 c44"><span></span></p><p class="c15 c44"><span></span></p><p class="c17"><span>The </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html">ScheduleDAGInstrs</a></span><span class="c0">&nbsp;</span><span>class subclasses the base class </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html">ScheduleDAG</a></span><span class="c0">&nbsp;</span><span>&nbsp;and it further services as a base class for target specific schedulers since </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html">ScheduleDAGInstrs</a></span><span>&nbsp;has a pure virtual method </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#ac0cecc651db330128468e08794794f5c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#ac0cecc651db330128468e08794794f5c">schedule</a></span><span class="c0">() = 0.</span><span>&nbsp; Part of its definition is listed as follows: </span></p><p class="c17 c35"><span></span></p><p class="c17"><span class="c0">00107 </span><span class="c0 c6">&nbsp;/// ScheduleDAGInstrs - A ScheduleDAG subclass for scheduling lists of</span><span class="c0"><br>00108 </span><span class="c0 c6">&nbsp;/// MachineInstrs.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html">00109</a></span><span class="c0">&nbsp; </span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html">ScheduleDAGInstrs</a></span><span class="c0">&nbsp;: </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAG.html">ScheduleDAG</a></span><span class="c0">&nbsp;{<br>00110 &nbsp; </span><span class="c0 c9">protected</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a1a23f5e657727a730e585ad461d914d8">00111</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineLoopInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a1a23f5e657727a730e585ad461d914d8">MLI</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#ab805a4eee0a4f76e28dd11bcc86b1083">00112</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineDominatorTree.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a></span><span class="c0">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#ab805a4eee0a4f76e28dd11bcc86b1083">MDT</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a48dac2c15614f61bd7cb73fe322099fa">00113</a></span><span class="c0">&nbsp; &nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFrameInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFrameInfo.html">MachineFrameInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a48dac2c15614f61bd7cb73fe322099fa">MFI</a></span><span class="c0">;<br>00114 <br>00115 </span><span class="c0 c6">&nbsp; &nbsp;/// Live Intervals provides reaching defs in preRA scheduling.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a81f901b06e024f4f2f50e1831c0d4b9e">00116</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveIntervals.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveIntervals.html">LiveIntervals</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a81f901b06e024f4f2f50e1831c0d4b9e">LIS</a></span><span class="c0">;<br>00118 </span><span class="c0 c6">&nbsp; &nbsp;/// TargetSchedModel provides an interface to the machine model.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#abb11b650b88a61630eba2a1b2eaa6fd0">00119</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetSchedModel.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetSchedModel.html">TargetSchedModel</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#abb11b650b88a61630eba2a1b2eaa6fd0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#abb11b650b88a61630eba2a1b2eaa6fd0">SchedModel</a></span><span class="c0">;<br>00121 </span><span class="c0 c6">&nbsp; &nbsp;/// isPostRA flag indicates vregs cannot be present.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a73edb004de8911374552b25481e9e9c3">00122</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a73edb004de8911374552b25481e9e9c3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a73edb004de8911374552b25481e9e9c3">IsPostRA</a></span><span class="c0">;<br>00124 </span><span class="c0 c6">&nbsp; &nbsp;/// UnitLatencies (misnamed) flag avoids computing def-use latencies, using</span><span class="c0"><br>00125 </span><span class="c0 c6">&nbsp; &nbsp;/// the def-side latency only.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#ae0ca516c44b9cd0b3d2b67232020cd3f">00126</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#ae0ca516c44b9cd0b3d2b67232020cd3f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#ae0ca516c44b9cd0b3d2b67232020cd3f">UnitLatencies</a></span><span class="c0">;<br>00128 </span><span class="c0 c6">&nbsp; &nbsp;/// The standard DAG builder does not normally include terminators as DAG</span><span class="c0"><br>00129 </span><span class="c0 c6">&nbsp; &nbsp;/// nodes because it does not create the necessary dependencies to prevent</span><span class="c0"><br>00130 </span><span class="c0 c6">&nbsp; &nbsp;/// reordering. A specialized scheduler can overide</span><span class="c0"><br>00131 </span><span class="c0 c6">&nbsp; &nbsp;/// TargetInstrInfo::isSchedulingBoundary then enable this flag to indicate</span><span class="c0"><br>00132 </span><span class="c0 c6">&nbsp; &nbsp;/// it has taken responsibility for scheduling the terminator correctly.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a2ad332011e2040d133de24f33cf3f4cd">00133</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a2ad332011e2040d133de24f33cf3f4cd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a2ad332011e2040d133de24f33cf3f4cd">CanHandleTerminators</a></span><span class="c0">;<br>00135 </span><span class="c0 c6">&nbsp; &nbsp;/// State specific to the current scheduling region.</span><span class="c0"><br>00136 </span><span class="c0 c6">&nbsp; &nbsp;/// ------------------------------------------------</span><span class="c0"><br>00138 </span><span class="c0 c6">&nbsp; &nbsp;/// The block in which to insert instructions</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a254403f7804208ade3cb68086201cb7a">00139</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a254403f7804208ade3cb68086201cb7a">BB</a></span><span class="c0">;<br>00141 </span><span class="c0 c6">&nbsp; &nbsp;/// The beginning of the range to be scheduled.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#ae81ad8ece7681af658742f6d4e2fcfb1">00142</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#ae81ad8ece7681af658742f6d4e2fcfb1">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#ae81ad8ece7681af658742f6d4e2fcfb1">RegionBegin</a></span><span class="c0">;<br>00144 </span><span class="c0 c6">&nbsp; &nbsp;/// The end of the range to be scheduled.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a3f74b283acf0dfb537bc387e49344f04">00145</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a3f74b283acf0dfb537bc387e49344f04">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a3f74b283acf0dfb537bc387e49344f04">RegionEnd</a></span><span class="c0">;<br>00147 </span><span class="c0 c6">&nbsp; &nbsp;/// The index in BB of RegionEnd.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a4cc541e7d76b4d82b86a351a19addd32">00148</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a4cc541e7d76b4d82b86a351a19addd32">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a4cc541e7d76b4d82b86a351a19addd32">EndIndex</a></span><span class="c0">;<br>00150 </span><span class="c0 c6">&nbsp; &nbsp;/// After calling BuildSchedGraph, each machine instruction in the current</span><span class="c0"><br>00151 </span><span class="c0 c6">&nbsp; &nbsp;/// scheduling region is mapped to an SUnit.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a077eef2c61ca462db1800cc506092d38">00152</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap&lt;MachineInstr*, SUnit*&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a077eef2c61ca462db1800cc506092d38">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a077eef2c61ca462db1800cc506092d38">MISUnitMap</a></span><span class="c0">;<br>00154 </span><span class="c0 c6">&nbsp; &nbsp;/// State internal to DAG building.</span><span class="c0"><br>00155 </span><span class="c0 c6">&nbsp; &nbsp;/// -------------------------------</span><span class="c0"><br>00157 </span><span class="c0 c6">&nbsp; &nbsp;/// Defs, Uses - Remember where defs and uses of each register are as we</span><span class="c0"><br>00158 </span><span class="c0 c6">&nbsp; &nbsp;/// iterate upward through the instructions. This is allocated here instead</span><span class="c0"><br>00159 </span><span class="c0 c6">&nbsp; &nbsp;/// of inside BuildSchedGraph to avoid the need for it to be initialized and</span><span class="c0"><br>00160 </span><span class="c0 c6">&nbsp; &nbsp;/// destructed for each block.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#ae384109023f32441ff89f13b79be6b89">00161</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Reg2SUnitsMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Reg2SUnitsMap.html">Reg2SUnitsMap</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#ae384109023f32441ff89f13b79be6b89">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#ae384109023f32441ff89f13b79be6b89">Defs</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#af0b2bf4940e563082d1d2bf8a9e5521f">00162</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Reg2SUnitsMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Reg2SUnitsMap.html">Reg2SUnitsMap</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#af0b2bf4940e563082d1d2bf8a9e5521f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#af0b2bf4940e563082d1d2bf8a9e5521f">Uses</a></span><span class="c0">;</span></p><p class="c17"><span class="c0 c6">…......................................</span></p><p class="c17"><span class="c0">00239 </span><span class="c0 c6">&nbsp; &nbsp;/// schedule - Order nodes according to selected style, filling</span><span class="c0"><br>00240 </span><span class="c0 c6">&nbsp; &nbsp;/// in the Sequence member.</span><span class="c0"><br>00241 </span><span class="c0 c6">&nbsp; &nbsp;///</span><span class="c0"><br>00242 </span><span class="c0 c6">&nbsp; &nbsp;/// Typically, a scheduling algorithm will implement schedule() without</span><span class="c0"><br>00243 </span><span class="c0 c6">&nbsp; &nbsp;/// overriding enterRegion() or exitRegion().</span><span class="c0"><br>00244 &nbsp; &nbsp;</span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#ac0cecc651db330128468e08794794f5c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#ac0cecc651db330128468e08794794f5c">schedule</a></span><span class="c0">() = 0;<br>00246 </span><span class="c0 c6">&nbsp; &nbsp;/// finalizeSchedule - Allow targets to perform final scheduling actions at</span><span class="c0"><br>00247 </span><span class="c0 c6">&nbsp; &nbsp;/// the level of the whole MachineFunction. By default does nothing.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a7c30ee6cdef3f4784c192654dcb9bab0">00248</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a7c30ee6cdef3f4784c192654dcb9bab0">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#a7c30ee6cdef3f4784c192654dcb9bab0">finalizeSchedule</a></span><span class="c0">() {}<br>00250 &nbsp; &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#acf537095fbdef2feb908f3a2c001d362">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ScheduleDAGInstrs.html#acf537095fbdef2feb908f3a2c001d362">dumpNode</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SUnit.html">SUnit</a></span><span class="c0">&nbsp;*SU) </span><span class="c0 c9">const</span><span class="c0">;</span></p><p class="c17 c35"><span></span></p><p class="c17"><span class="c5">Other schedulers, e.g.,</span><span class="c5">&nbsp;those for VLIW, are omitted here and please refer to the relevant source code for details.</span></p><p class="c17 c35"><span></span></p><p class="c17"><span class="c19">Part</span><span class="c19"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SelectionDAGISel.html">&nbsp;7.5.6 </a></span><span class="c19">Live analysis </span></p><p class="c17 c35"><span class="c19"></span></p><p class="c17"><span class="c5">This section is highly related to the concept of “pass” in LLVM, which is implemented as a hierarchy of classes including the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Pass.html">Pass</a></span><span class="c5">&nbsp;class, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionPass.html">FunctionPass</a></span><span class="c5">&nbsp;class, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a></span></p><p class="c17"><span class="c5">&nbsp;class, etc. The live analysis to be discussed in this section is one type of many passes in LLVM and it inherits the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a></span><span class="c5">&nbsp;class. Let’s first introduces some background about various passes in LLVM. &nbsp;</span></p><p class="c17 c35"><span class="c5 c25"></span></p><p class="c17"><span class="c5">The </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Pass.html">Pass</a></span><span class="c5">&nbsp;class (in </span><span class="c12 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/Pass_8h_source.html">Pass.h</a></span><span class="c5">) is the base class that every pass should inherits. This class just keeps track of very basic information about a pass such as the pass id, pass kind, etc. It also defines simple methods to retrieve the information. &nbsp;Other than the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Pass.html">Pass</a></span><span class="c5">&nbsp; class the </span><span class="c12 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/Pass_8h_source.html">Pass.h</a></span><span class="c5">&nbsp;file also defines </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Pass.html">Pass</a></span><span class="c5">&nbsp;‘s subclasses such as the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ModulePass.html">ModulePass</a></span><span class="c5">&nbsp;class (can do anything to the program, used to implement</span><span class="c5">&nbsp;unstructured interprocedural optimizations and analyses</span><span class="c5">), the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ImmutablePass.html">ImmutablePass</a></span><span class="c5">&nbsp;</span><span class="c5">class (</span><span class="c0 c6">used to provide information that does</span><span class="c0">&nbsp;</span><span class="c0 c6">not need to be run. &nbsp;This is useful for things like target information</span><span class="c5">), the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionPass.html">FunctionPass</a></span><span class="c5">&nbsp; class (</span><span class="c0 c6">used to implement</span></p><p class="c17"><span class="c5">globally organized optimizations that only modify function-scope modifications and do not delete functions.</span><span class="c5">) and the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BasicBlockPass.html">BasicBlockPass</a></span><span class="c5">&nbsp;class (used to implement local optimizations that operate on bb or instructions). User should s</span><span class="c5">ubclass the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Pass.html">Pass</a></span><span class="c5">&nbsp;class only when implementing an interprocedural optimization or an optimization that does not fit into any of the more constrained passes described above. &nbsp;Specifically in &nbsp;the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionPass.html">FunctionPass</a></span><span class="c5">&nbsp;class, a pure virtual function is provided as an interface for its subclasses to inherit:</span></p><p class="c17"><span class="c0 c9">virtual</span><span class="c0 c6">&nbsp;</span><span class="c0 c8">bool</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionPass.html#a8b8e6ad43353cadea1dcea5d5f5f8e76">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionPass.html#a8b8e6ad43353cadea1dcea5d5f5f8e76">runOnFunction</a></span><span class="c0 c6">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html">Function</a></span><span class="c0 c6">&nbsp;&amp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></span><span class="c0 c6">) = 0;</span></p><p class="c17"><span class="c5">The </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a></span><span class="c5">&nbsp;class &nbsp;further inherits the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionPass.html">FunctionPass</a></span><span class="c5">&nbsp;class and adapts the &nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionPass.html">FunctionPass</a></span><span class="c5">&nbsp;interface to allow convenient creation of passes that operate on the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c5">&nbsp;</span><span class="c5">representation. Instead of overriding </span><span class="c0 c4 c25"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionPass.html#a8b8e6ad43353cadea1dcea5d5f5f8e76">runOnFunction</a></span><span class="c5">()</span><span class="c5">, subclasses<br>override </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html#abb98ed32e4e5acae62ef3edd7bf04fb5">runOnMachineFunction():</a></span></p><p class="c17"><span class="c0 c9 c49">virtual</span><span class="c0 c4">&nbsp;</span><span class="c0 c49 c8">bool</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html#abb98ed32e4e5acae62ef3edd7bf04fb5">&nbsp;runOnMachineFunction</a></span><span class="c0 c4">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0 c4">&nbsp;&amp;MF) = 0;</span></p><p class="c17 c35"><span class="c0 c4"></span></p><p class="c17"><span class="c5">Most methods defined in the above classes are virtual and supposed to be re-implemented in a more specific pass.</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">Now let’s look at the live analysis in LLVM. The live analysis involves the files whose names start with Live** in the llvm-3.x.src\lib\CodeGen directory. Live analysis in LLVM is mainly implemented as two components: live variable analysis (implemented by the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html">LiveVariables</a></span><span class="c5">&nbsp;class, which inherits the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a></span><span class="c5">&nbsp;class) and live interval analysis (implemented by the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html">LiveInterval</a></span><span class="c5">&nbsp;class). Regarding the live variable analysis the LLVM document has the following description:</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">“</span><span class="c5">The first step in determining the live intervals of variables is to calculate the set of registers that are immediately dead after the instruction (i.e., the instruction calculates the value, but it is never used) and the set of registers that are used by the instruction, but are never used after the instruction (i.e., they are killed). Live variable information is computed for each </span><span class="c5">virtual</span><span class="c5">&nbsp;register and </span><span class="c5">register allocatable</span><span class="c5">&nbsp;physical register in the function. This is done in a very efficient manner because it uses SSA to sparsely compute lifetime information for virtual registers (which are in SSA form) and only has to track physical registers within a block. Before register allocation, LLVM can assume that physical registers are only live within a single basic block. This allows it to do a single, local analysis to resolve physical register lifetimes within each basic block. If a physical register is not register allocatable (e.g., a stack pointer or condition codes), it is not tracked.</span></p><p class="c17"><span class="c5">Physical registers may be live in to or out of a function. Live in values are typically arguments in registers. Live out values are typically return values in registers. Live in values are marked as such, and are given a dummy “defining” instruction during live intervals analysis. If the last basic block of a function is a </span><span class="c5">return</span><span class="c5">, then it’s marked as using all live out values in the function.</span></p><p class="c17"><span class="c5">PHI</span><span class="c5">&nbsp;nodes need to be handled specially, because the calculation of the live variable information from a depth first traversal of the CFG of the function won’t guarantee that a virtual register used by the </span><span class="c5">PHI</span><span class="c5">&nbsp;node is defined before it’s used. When a </span><span class="c5">PHI</span><span class="c5">&nbsp;node is encountered, only the definition is handled, because the uses will be handled in other basic blocks.</span></p><p class="c17"><span class="c5">For each </span><span class="c5">PHI</span><span class="c5">&nbsp;node of the current basic block, we simulate an assignment at the end of the current basic block and traverse the successor basic blocks. If a successor basic block has a </span><span class="c5">PHI</span><span class="c5">&nbsp;node and one of the </span><span class="c5">PHI</span><span class="c5">&nbsp;node’s operands is coming from the current basic block, then the variable is marked as </span><span class="c5">alive</span><span class="c5">&nbsp;within the current basic block and all of its predecessor basic blocks, until the basic block with the defining instruction is encountered.</span><span class="c5">“</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">The interface of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html">LiveVariables</a></span><span class="c0">&nbsp;</span><span class="c5">&nbsp;is as follows:</span></p><p class="c17 c35"><span class="c5"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html#abb98ed32e4e5acae62ef3edd7bf04fb5"></a></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html">00048</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html">LiveVariables</a></span><span class="c0">&nbsp;: </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a></span><span class="c0">&nbsp;{<br>00049 </span><span class="c0 c9">public</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a42e1e6f4c393e0339a1583d20eb06b42">00050</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a42e1e6f4c393e0339a1583d20eb06b42">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a42e1e6f4c393e0339a1583d20eb06b42">ID</a></span><span class="c0">; </span><span class="c0 c6">// Pass identification, replacement for typeid</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a6d2a86ed97aa0b672ce6ee3925fd619c">00051</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a6d2a86ed97aa0b672ce6ee3925fd619c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a6d2a86ed97aa0b672ce6ee3925fd619c">LiveVariables</a></span><span class="c0">() :</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a42e1e6f4c393e0339a1583d20eb06b42">ID</a></span><span class="c0">) {<br>00052 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a670c29c3981606f3244d31fd19d1d90f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a670c29c3981606f3244d31fd19d1d90f">initializeLiveVariablesPass</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a></span><span class="c0">());<br>00053 &nbsp; }<br>00055 </span><span class="c0 c6">&nbsp;/// VarInfo - This represents the regions where a virtual register is live in</span><span class="c0"><br>00056 </span><span class="c0 c6">&nbsp;/// the program. &nbsp;We represent this with three different pieces of</span><span class="c0"><br>00057 </span><span class="c0 c6">&nbsp;/// information: the set of blocks in which the instruction is live</span><span class="c0"><br>00058 </span><span class="c0 c6">&nbsp;/// throughout, the set of blocks in which the instruction is actually used,</span><span class="c0"><br>00059 </span><span class="c0 c6">&nbsp;/// and the set of non-phi instructions that are the last users of the value.</span><span class="c0"><br>00060 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00061 </span><span class="c0 c6">&nbsp;/// In the common case where a value is defined and killed in the same block,</span><span class="c0"><br>00062 </span><span class="c0 c6">&nbsp;/// There is one killing instruction, and AliveBlocks is empty.</span><span class="c0"><br>00063 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00064 </span><span class="c0 c6">&nbsp;/// Otherwise, the value is live out of the block. &nbsp;If the value is live</span><span class="c0"><br>00065 </span><span class="c0 c6">&nbsp;/// throughout any blocks, these blocks are listed in AliveBlocks. &nbsp;Blocks</span><span class="c0"><br>00066 </span><span class="c0 c6">&nbsp;/// where the liveness range ends are not included in AliveBlocks, instead</span><span class="c0"><br>00067 </span><span class="c0 c6">&nbsp;/// being captured by the Kills set. &nbsp;In these blocks, the value is live into</span><span class="c0"><br>00068 </span><span class="c0 c6">&nbsp;/// the block (unless the value is defined and killed in the same block) and</span><span class="c0"><br>00069 </span><span class="c0 c6">&nbsp;/// lives until the specified instruction. &nbsp;Note that there cannot ever be a</span><span class="c0"><br>00070 </span><span class="c0 c6">&nbsp;/// value whose Kills set contains two instructions from the same basic block.</span><span class="c0"><br>00071 </span><span class="c0 c6">&nbsp;///</span><span class="c0"><br>00072 </span><span class="c0 c6">&nbsp;/// PHI nodes complicate things a bit. &nbsp;If a PHI node is the last user of a</span><span class="c0"><br>00073 </span><span class="c0 c6">&nbsp;/// value in one of its predecessor blocks, it is not listed in the kills set,</span><span class="c0"><br>00074 </span><span class="c0 c6">&nbsp;/// but does include the predecessor block in the AliveBlocks set (unless that</span><span class="c0"><br>00075 </span><span class="c0 c6">&nbsp;/// block also defines the value). &nbsp;This leads to the (perfectly sensical)</span><span class="c0"><br>00076 </span><span class="c0 c6">&nbsp;/// situation where a value is defined in a block, and the last use is a phi</span><span class="c0"><br>00077 </span><span class="c0 c6">&nbsp;/// node in the successor. &nbsp;In this case, AliveBlocks is empty (the value is</span><span class="c0"><br>00078 </span><span class="c0 c6">&nbsp;/// not live across any &nbsp;blocks) and Kills is empty (phi nodes are not</span><span class="c0"><br>00079 </span><span class="c0 c6">&nbsp;/// included). This is sensical because the value must be live to the end of</span><span class="c0"><br>00080 </span><span class="c0 c6">&nbsp;/// the block, but is not live in any successor blocks.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html">00081</a></span><span class="c0">&nbsp; </span><span class="c0 c9">struct</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html">VarInfo</a></span><span class="c0">&nbsp;{<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a76321b20db4feab750d85c2329cfcbc6">00086</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SparseBitVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SparseBitVector.html">SparseBitVector&lt;&gt;</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a76321b20db4feab750d85c2329cfcbc6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a76321b20db4feab750d85c2329cfcbc6">AliveBlocks</a></span><span class="c0">;<br>00088 </span><span class="c0 c6">&nbsp; &nbsp;// Kills - List of MachineInstruction's which are the last use of this</span><span class="c0"><br>00089 </span><span class="c0 c6">&nbsp; &nbsp;/// virtual register (kill it) in their basic block</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">00091</a></span><span class="c0">&nbsp; &nbsp; std::vector&lt;MachineInstr*&gt;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">Kills</a></span><span class="c0">;<br>00093 </span><span class="c0 c6">&nbsp; &nbsp;/// removeKill - Delete a kill corresponding to the specified</span><span class="c0"><br>00094 </span><span class="c0 c6">&nbsp; &nbsp;/// machine instruction. Returns true if there was a kill</span><span class="c0"><br>00095 </span><span class="c0 c6">&nbsp; &nbsp;/// corresponding to this instruction, false otherwise.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a2d9cf11e60a209eeb22d2086603ad432">00096</a></span><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a2d9cf11e60a209eeb22d2086603ad432">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a2d9cf11e60a209eeb22d2086603ad432">removeKill</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">) {<br>00097 &nbsp; &nbsp; &nbsp; std::vector&lt;MachineInstr*&gt;::iterator<br>00098 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">&nbsp;= std::find(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">Kills</a></span><span class="c0">.begin(),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">Kills</a></span><span class="c0">.end(),</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">);<br>00099 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(I ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">Kills</a></span><span class="c0">.end())<br>00100 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>00101 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">Kills</a></span><span class="c0">.erase(I);<br>00102 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00103 &nbsp; &nbsp; }<br>00105 </span><span class="c0 c6">&nbsp; &nbsp;/// findKill - Find a kill instruction in MBB. Return NULL if none is found.</span><span class="c0"><br>00106 &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a4853b234bc065eca92fa645560686430">findKill</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*MBB) </span><span class="c0 c9">const</span><span class="c0">;<br>00108 </span><span class="c0 c6">&nbsp; &nbsp;/// isLiveIn - Is Reg live in to MBB? This means that Reg is live through</span><span class="c0"><br>00109 </span><span class="c0 c6">&nbsp; &nbsp;/// MBB, or it is killed in MBB. If Reg is only used by PHI instructions in</span><span class="c0"><br>00110 </span><span class="c0 c6">&nbsp; &nbsp;/// MBB, it is not considered live in.</span><span class="c0"><br>00111 &nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a209642ea22a7ba5f53d9e21d4db72978">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a209642ea22a7ba5f53d9e21d4db72978">isLiveIn</a></span><span class="c0">(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;&amp;MBB,<br>00112 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">,<br>00113 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a></span><span class="c0">&nbsp;&amp;MRI);<br>00114 <br>00115 &nbsp; &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a2fa3b873292be3972e6cc01ce51db4a4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a2fa3b873292be3972e6cc01ce51db4a4">dump</a></span><span class="c0">() </span><span class="c0 c9">const</span><span class="c0">;<br>00116 &nbsp; };<br>00118 </span><span class="c0 c9">private</span><span class="c0">:<br>00119 </span><span class="c0 c6">&nbsp;/// VirtRegInfo - This list is a mapping from virtual register number to</span><span class="c0"><br>00120 </span><span class="c0 c6">&nbsp;/// variable information.</span><span class="c0"><br>00122 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1IndexedMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1IndexedMap.html">IndexedMap&lt;VarInfo, VirtReg2IndexFunctor&gt;</a></span><span class="c0">&nbsp;VirtRegInfo;<br>00124 </span><span class="c0 c6">&nbsp;/// PHIJoins - list of virtual registers that are PHI joins. These registers</span><span class="c0"><br>00125 </span><span class="c0 c6">&nbsp;/// may have multiple definitions, and they require special handling when</span><span class="c0"><br>00126 </span><span class="c0 c6">&nbsp;/// building live intervals.</span><span class="c0"><br>00127 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SparseBitVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SparseBitVector.html">SparseBitVector&lt;&gt;</a></span><span class="c0">&nbsp;PHIJoins;<br>00129 </span><span class="c0 c9">private</span><span class="c0">: &nbsp; </span><span class="c0 c6">// Intermediate data structures</span><span class="c0"><br>00130 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;*MF;<br>00132 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a></span><span class="c0">* MRI<br>00134 &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a></span><span class="c0">&nbsp;*TRI;<br>00136 &nbsp; </span><span class="c0 c6">// PhysRegInfo - Keep track of which instruction was the last def of a</span><span class="c0"><br>00137 &nbsp; </span><span class="c0 c6">// physical register. This is a purely local property, because all physical</span><span class="c0"><br>00138 &nbsp; </span><span class="c0 c6">// register references are presumed dead across basic blocks.</span><span class="c0"><br>00139 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;**PhysRegDef;<br>00141 &nbsp; </span><span class="c0 c6">// PhysRegInfo - Keep track of which instruction was the last use of a</span><span class="c0"><br>00142 &nbsp; </span><span class="c0 c6">// physical register. This is a purely local property, because all physical</span><span class="c0"><br>00143 &nbsp; </span><span class="c0 c6">// register references are presumed dead across basic blocks.</span><span class="c0"><br>00144 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;**PhysRegUse;<br>00146 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a></span><span class="c0">&nbsp;*PHIVarInfo;<br>00148 &nbsp; </span><span class="c0 c6">// DistanceMap - Keep track the distance of a MI from the start of the</span><span class="c0"><br>00149 &nbsp; </span><span class="c0 c6">// current basic block.</span><span class="c0"><br>00150 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMap.html">DenseMap&lt;MachineInstr*, unsigned&gt;</a></span><span class="c0">&nbsp;DistanceMap;<br>00152 </span><span class="c0 c6">&nbsp;/// HandlePhysRegKill - Add kills of Reg and its sub-registers to the</span><span class="c0"><br>00153 </span><span class="c0 c6">&nbsp;/// uses. Pay special attention to the sub-register uses which may come below</span><span class="c0"><br>00154 </span><span class="c0 c6">&nbsp;/// the last use of the whole register.</span><span class="c0"><br>00155 &nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;HandlePhysRegKill(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">)<br>00157 </span><span class="c0 c6">&nbsp;/// HandleRegMask - Call HandlePhysRegKill for all registers clobbered by Mask.</span><span class="c0"><br>00158 &nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;HandleRegMask(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html">MachineOperand</a></span><span class="c0">&amp;);<br>00160 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;HandlePhysRegUse(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">);<br>00161 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;HandlePhysRegDef(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">,<br>00162 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a></span><span class="c0">&nbsp;&amp;Defs);<br>00163 &nbsp; </span><span class="c0 c8">void</span><span class="c0">&nbsp;UpdatePhysRegDefs(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a></span><span class="c0">&nbsp;&amp;Defs);<br>00165 </span><span class="c0 c6">&nbsp;/// FindLastRefOrPartRef - Return the last reference or partial reference of</span><span class="c0"><br>00166 </span><span class="c0 c6">&nbsp;/// the specified register.</span><span class="c0"><br>00167 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*FindLastRefOrPartRef(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">);<br>00172 </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*FindLastPartialDef(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">,<br>00173 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallSet.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallSet.html">SmallSet&lt;unsigned,4&gt;</a></span><span class="c0">&nbsp;&amp;PartDefRegs)<br>00179 &nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;analyzePHINodes(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&amp; Fn);<br>00180 </span><span class="c0 c9">public</span><span class="c0">:<br>00182 &nbsp; </span><span class="c0 c9">virtual</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a944222171f774f59e974a97879ab66bc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a944222171f774f59e974a97879ab66bc">runOnMachineFunction</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;MF);<br>00184 </span><span class="c0 c6">&nbsp;/// RegisterDefIsDead - Return true if the specified instruction defines the</span><span class="c0"><br>00185 </span><span class="c0 c6">&nbsp;/// specified register, but that definition is dead.</span><span class="c0"><br>00186 &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a0841277798fc48d4eae0524235297f0a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a0841277798fc48d4eae0524235297f0a">RegisterDefIsDead</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">, </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">) </span><span class="c0 c9">const</span><span class="c0">;<br>00188 &nbsp; </span><span class="c0 c6">//===--------------------------------------------------------------------===//</span><span class="c0"><br>00189 &nbsp; </span><span class="c0 c6">// &nbsp;API to update live variable information</span><span class="c0"><br>00191 </span><span class="c0 c6">&nbsp;/// replaceKillInstruction - Update register kill info by replacing a kill</span><span class="c0"><br>00192 </span><span class="c0 c6">&nbsp;/// instruction with a new one.</span><span class="c0"><br>00193 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a41eac39d1f0317209d712bbecea8eb1f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a41eac39d1f0317209d712bbecea8eb1f">replaceKillInstruction</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*OldMI,<br>00194 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*NewMI);<br>00196 </span><span class="c0 c6">&nbsp;/// addVirtualRegisterKilled - Add information about the fact that the</span><span class="c0"><br>00197 </span><span class="c0 c6">&nbsp;/// specified register is killed after being used by the specified</span><span class="c0"><br>00198 </span><span class="c0 c6">&nbsp;/// instruction. If AddIfNotFound is true, add a implicit operand if it's</span><span class="c0"><br>00199 </span><span class="c0 c6">&nbsp;/// not found.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a9f49d5526aacaa90fbf6eb8f21503fa3">00200</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a9f49d5526aacaa90fbf6eb8f21503fa3">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a9f49d5526aacaa90fbf6eb8f21503fa3">addVirtualRegisterKilled</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;IncomingReg,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">,<br>00201 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;AddIfNotFound = </span><span class="c0 c9">false</span><span class="c0">) {<br>00202 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(MI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#ab8fd10f439804d8d7872bc1389653fce">addRegisterKilled</a></span><span class="c0">(IncomingReg, TRI, AddIfNotFound))<br>00203 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a434b7516027126339021e18d66c34864">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a434b7516027126339021e18d66c34864">getVarInfo</a></span><span class="c0">(IncomingReg).</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">Kills</a></span><span class="c0">.push_back(MI); <br>00204 &nbsp; }<br>00206 </span><span class="c0 c6">&nbsp;/// removeVirtualRegisterKilled - Remove the specified kill of the virtual</span><span class="c0"><br>00207 </span><span class="c0 c6">&nbsp;/// register from the live variable information. Returns true if the</span><span class="c0"><br>00208 </span><span class="c0 c6">&nbsp;/// variable was marked as killed by the specified instruction,</span><span class="c0"><br>00209 </span><span class="c0 c6">&nbsp;/// false otherwise.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a60e731c66fb9d4143edaf2c11befb221">00210</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a60e731c66fb9d4143edaf2c11befb221">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a60e731c66fb9d4143edaf2c11befb221">removeVirtualRegisterKilled</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;reg,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">) <br>00229 </span><span class="c0 c6">&nbsp;/// removeVirtualRegistersKilled - Remove all killed info for the specified</span><span class="c0"><br>00230 </span><span class="c0 c6">&nbsp;/// instruction.</span><span class="c0"><br>00231 &nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a4006a483e02178ac854923dde8e5cc35">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a4006a483e02178ac854923dde8e5cc35">removeVirtualRegistersKilled</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">);<br>00233 </span><span class="c0 c6">&nbsp;/// addVirtualRegisterDead - Add information about the fact that the specified</span><span class="c0"><br>00234 </span><span class="c0 c6">&nbsp;/// register is dead after being used by the specified instruction. If</span><span class="c0"><br>00235 </span><span class="c0 c6">&nbsp;/// AddIfNotFound is true, add a implicit operand if it's not found.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#abb9d34248326780608aad1a7ea2fa1d6">00236</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#abb9d34248326780608aad1a7ea2fa1d6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#abb9d34248326780608aad1a7ea2fa1d6">addVirtualRegisterDead</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;IncomingReg,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">,<br>00237 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;AddIfNotFound = </span><span class="c0 c9">false</span><span class="c0">) {<br>00238 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(MI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#af30461d94263a5dc8a22baeea4ba5c2a">addRegisterDead</a></span><span class="c0">(IncomingReg, TRI, AddIfNotFound))<br>00239 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a434b7516027126339021e18d66c34864">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a434b7516027126339021e18d66c34864">getVarInfo</a></span><span class="c0">(IncomingReg).</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">Kills</a></span><span class="c0">.push_back(MI);<br>00240 &nbsp; }<br>00242 </span><span class="c0 c6">&nbsp;/// removeVirtualRegisterDead - Remove the specified kill of the virtual</span><span class="c0"><br>00243 </span><span class="c0 c6">&nbsp;/// register from the live variable information. Returns true if the</span><span class="c0"><br>00244 </span><span class="c0 c6">&nbsp;/// variable was marked dead at the specified instruction, false</span><span class="c0"><br>00245 </span><span class="c0 c6">&nbsp;/// otherwise.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a85a22f6c153c4dea2e32bb6754a8ae49">00246</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a85a22f6c153c4dea2e32bb6754a8ae49">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a85a22f6c153c4dea2e32bb6754a8ae49">removeVirtualRegisterDead</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;reg,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">) {<br>00264 &nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a2e56eb54efdaa4723f43237784e6c0bd">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a2e56eb54efdaa4723f43237784e6c0bd">getAnalysisUsage</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AnalysisUsage.html">AnalysisUsage</a></span><span class="c0">&nbsp;&amp;AU) </span><span class="c0 c9">const</span><span class="c0">;<br>….............<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a0bcfca5f6b640c8065c5d16fc0741f72">00283</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a0bcfca5f6b640c8065c5d16fc0741f72">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a0bcfca5f6b640c8065c5d16fc0741f72">isLiveIn</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;&amp;MBB) {<br>00284 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a434b7516027126339021e18d66c34864">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a434b7516027126339021e18d66c34864">getVarInfo</a></span><span class="c0">(Reg).</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a209642ea22a7ba5f53d9e21d4db72978">isLiveIn</a></span><span class="c0">(MBB, Reg, *MRI);<br>00285 &nbsp; }<br>00287 </span><span class="c0 c6">&nbsp;/// isLiveOut - Determine if Reg is live out from MBB, when not considering</span><span class="c0"><br>00288 </span><span class="c0 c6">&nbsp;/// PHI nodes. This means that Reg is either killed by a successor block or</span><span class="c0"><br>00289 </span><span class="c0 c6">&nbsp;/// passed through one.</span><span class="c0"><br>00290 &nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a64a9ca767d7e09e699416b60132b4208">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a64a9ca767d7e09e699416b60132b4208">isLiveOut</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">, </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;&amp;MBB);<br>…................<br>00300 </span><span class="c0 c6">&nbsp;/// isPHIJoin - Return true if Reg is a phi join register.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a75f1c829705e905d845d4165b6433773">00301</a></span><span class="c0">&nbsp; </span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a75f1c829705e905d845d4165b6433773">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a75f1c829705e905d845d4165b6433773">isPHIJoin</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">) { </span><span class="c0 c7">return</span><span class="c0">&nbsp;PHIJoins.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SparseBitVector.html#a3d8d6ee56adcc32a008fd2ff69a68b24">test</a></span><span class="c0">(Reg); }<br>00303 </span><span class="c0 c6">&nbsp;/// setPHIJoin - Mark Reg as a phi join register.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a518c4c86e62bb8a82de9e6ede1b92fc4">00304</a></span><span class="c0">&nbsp; </span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a518c4c86e62bb8a82de9e6ede1b92fc4">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a518c4c86e62bb8a82de9e6ede1b92fc4">setPHIJoin</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">) { PHIJoins.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SparseBitVector.html#a613c1e44c4e88e9a1e0be386cb5fa828">set</a></span><span class="c0">(Reg); }<br>00305 };</span></p><p class="c15 c44"><span class="c5"></span></p><p class="c17"><span class="c5">The above code provides enough comments to explain each function members defined in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html">LiveVariables</a></span><span class="c5">&nbsp;class. Out of these function members the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a944222171f774f59e974a97879ab66bc">runOnMachineFunction</a></span><span class="c5">() is the entry function for live variable analysis and does the primary work. To see how live variable analysis flows we need to dig into the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a944222171f774f59e974a97879ab66bc">runOnMachineFunction</a></span><span class="c5">() function in the </span><span class="c11 c16">&nbsp;</span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/LiveVariables_8cpp_source.html">LiveVariables.cpp</a></span><span class="c5">&nbsp;file. </span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">The function </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a944222171f774f59e974a97879ab66bc">runOnMachineFunction</a></span><span class="c5">() first tests if the registers used in current machine function is in SSA form (-O0 does not produce SSA) and if so invokes </span><span class="c0">analyzePHINodes():</span></p><p class="c17"><span class="c0">00723 </span><span class="c0 c6">/// analyzePHINodes - Gather information about the PHI nodes in here. In</span><span class="c0"><br>00724 </span><span class="c0 c6">/// particular, we want to map the variable information of a virtual register</span><span class="c0"><br>00725 </span><span class="c0 c6">/// which is used in a PHI node. We map that to the BB the vreg is coming from.</span><span class="c0"><br>00726 </span><span class="c0 c6">///</span><span class="c0"><br>00727 </span><span class="c0 c8">void</span><span class="c0">&nbsp;LiveVariables::analyzePHINodes(</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&amp; Fn) {<br>00728 &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1ilist__iterator.html">MachineFunction::const_iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">&nbsp;= Fn.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a></span><span class="c0">(), E = Fn.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a></span><span class="c0">();<br>00729 &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">&nbsp;!= E; ++</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">)<br>00730 &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a654b11787ac7c4344084d98bea7cf626">MachineBasicBlock::const_iterator</a></span><span class="c0">&nbsp;BBI =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">-&gt;begin(), BBE =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">-&gt;end();<br>00731 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;BBI != BBE &amp;&amp; BBI-&gt;isPHI(); ++BBI)<br>00732 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i = 1, e = BBI-&gt;getNumOperands(); i != e; i += 2)<br>00733 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(BBI-&gt;getOperand(i).readsReg())<br>00734 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PHIVarInfo[BBI-&gt;getOperand(i + 1).getMBB()-&gt;getNumber()]<br>00735 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .push_back(BBI-&gt;getOperand(i).getReg());<br>00736 }</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c5">Basically it iterates every PHI instruction and gets its read registers and MBBs where these registers are coming from. These registers are then stored in the entries that correspond to the registers’ MBBs in the </span><span class="c0">PHIVarInfo </span><span class="c5">array. Note that the innermost loop use i += 2 for the iteration. This is clear if you know how operands are organized in the PHI instruction. The following is an example of PHI instruction:</span></p><p class="c17"><span class="c18 c69 c5 c25">true:</span><span class="c18 c5"><br> &nbsp;</span><span class="c18 c5 c25 c26">store</span><span class="c18 c5">&nbsp;</span><span class="c18 c26 c5 c25">volatile</span><span class="c18 c5">&nbsp;</span><span class="c18 c26 c5 c25">i32</span><span class="c18 c5">&nbsp;</span><span class="c3">0</span><span class="c18 c5">, </span><span class="c18 c26 c5 c25">i32</span><span class="c18 c5">* </span><span class="c18 c5 c21">@g</span><span class="c18 c5">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c18 c22 c5">; This is control-dependent on %cmp, so</span><span class="c18 c5"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c18 c5 c22">; it has undefined behavior.</span><span class="c18 c5"><br> &nbsp;</span><span class="c18 c26 c5 c25">br</span><span class="c18 c5">&nbsp;</span><span class="c18 c5 c71">label</span><span class="c18 c5">&nbsp;</span><span class="c18 c5 c21">%end</span><span class="c18 c5"><br><br></span><span class="c18 c5 c25 c69">end:</span><span class="c18 c5"><br> &nbsp;</span><span class="c18 c5 c21">%p</span><span class="c18 c5">&nbsp;= </span><span class="c18 c26 c5 c25">phi</span><span class="c18 c5">&nbsp;</span><span class="c18 c26 c5 c25">i32</span><span class="c18 c5">&nbsp;[ </span><span class="c3">0</span><span class="c18 c5">, </span><span class="c18 c5 c21">%entry</span><span class="c18 c5">&nbsp;], [ </span><span class="c3">1</span><span class="c18 c5">, </span><span class="c18 c5 c21">%true</span><span class="c18 c5">&nbsp;]<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c18 c22 c5">; Both edges into this PHI are</span><span class="c18 c5"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c18 c22 c5">; control-dependent on %cmp, so this</span><span class="c18 c5"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c18 c22 c5">; always results in a poison value.</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">Next the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a944222171f774f59e974a97879ab66bc">runOnMachineFunction</a></span><span class="c5">&nbsp;function</span><span class="c5">&nbsp;gets into an outer loop to calculate live variable information in depth first order (using the </span><span class="c28 c11 c25 c75"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1df__ext__iterator.html">llvm::df_ext_iterator</a></span><span class="c5">&nbsp;</span><span class="c5">defined in the </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/DepthFirstIterator_8h_source.html">DepthFirstIterator.h</a></span><span class="c5">&nbsp;</span><span class="c5">file ) on the CFG of the function (For where does the CFG come from please refer to the clang front end source code). &nbsp;This guarantees that we will see the definition of a virtual register before its uses due to dominance properties of SSA (except for PHI </span><span class="c5">n</span><span class="c5">odes, which are treated as a special case). </span></p><p class="c17"><span class="c5">The outer loop begins with:</span></p><p class="c17"><span class="c0">00522 &nbsp; </span><span class="c0 c6">// Calculate live variable information in depth first order on the CFG of the</span><span class="c0"><br>00523 &nbsp; </span><span class="c0 c6">// function. &nbsp;This guarantees that we will see the definition of a virtual</span><span class="c0"><br>00524 &nbsp; </span><span class="c0 c6">// register before its uses due to dominance properties of SSA (except for PHI</span><span class="c0"><br>00525 &nbsp; </span><span class="c0 c6">// nodes, which are treated as a special case).</span><span class="c0"><br>00526 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*Entry = MF-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a></span><span class="c0">();<br>00527 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallPtrSet.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineBasicBlock*,16&gt;</a></span><span class="c0">&nbsp;Visited;<br>00529 &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1df__ext__iterator.html">df_ext_iterator</a></span><span class="c0">&lt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">*,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallPtrSet.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineBasicBlock*,16&gt;</a></span><span class="c0">&nbsp;&gt;<br>00530 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DFI =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a79d4face7022f4be1d51b785a83de44f">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a79d4face7022f4be1d51b785a83de44f">df_ext_begin</a></span><span class="c0">(Entry, Visited), E =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aaa67df70b3bc20ef65f8fe523c41da0e">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aaa67df70b3bc20ef65f8fe523c41da0e">df_ext_end</a></span><span class="c0">(Entry, Visited);<br>00531 &nbsp; &nbsp; &nbsp; &nbsp;DFI != E; ++DFI) {<br>00532 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*MBB = *DFI;</span></p><p class="c15 c44"><span class="c5"></span></p><p class="c17"><span class="c5">In this outer loop live in physical registers are first marked:</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c0">00534 &nbsp; &nbsp; </span><span class="c0 c6">// Mark live-in registers as live-in.</span><span class="c0"><br>00535 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a></span><span class="c0">&nbsp;Defs;<br>00536 &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a7bab64c02d740522f94f5f45959a22fc">MachineBasicBlock::livein_iterator</a></span><span class="c0">&nbsp;II = MBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a6833d4f80b7e44f505b2184b04ea2693">livein_begin</a></span><span class="c0">(),<br>00537 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;EE = MBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#aa314325c7062fd067a3c0b9339aa8ea6">livein_end</a></span><span class="c0">(); II != EE; ++II) {<br>00538 &nbsp; &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a></span><span class="c0">(*II) &amp;&amp;<br>00539 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"Cannot have a live-in virtual register!"</span><span class="c0">);<br>00540 &nbsp; &nbsp; &nbsp; HandlePhysRegDef(*II, 0, Defs);<br>00541 &nbsp; &nbsp; }</span></p><p class="c17"><span class="c5">&nbsp;</span></p><p class="c17"><span class="c5">Note that in part 7.3.1 we mentioned that the structure of the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;</span><span class="c5">class, which has a </span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a></span><span class="c0">&nbsp;*RegInfo </span><span class="c5">member. This member has the following data members that are used to keep track of the physical registers that are livein/liveout of the function (LiveIn values are allowed to have virtual registers associated with them, stored in the second element):<br></span><span class="c0">00107 &nbsp; std::vector&lt;std::pair&lt;unsigned, unsigned&gt; &gt; LiveIns;<br>00108 &nbsp; std::vector&lt;unsigned&gt; LiveOuts;</span></p><p class="c17"><span class="c5">Similarly, the </span><span class="c4 c62 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c5">&nbsp;class also has the </span><span class="c0">LiveIns</span><span class="c5">&nbsp;and </span><span class="c0">LiveOuts</span><span class="c5">&nbsp;members:</span></p><p class="c17"><span class="c0">00082 </span><span class="c0 c6">&nbsp;/// LiveIns - Keep track of the </span><span class="c0 c6 c25">physical</span><span class="c0 c6">&nbsp;registers that are livein of</span><span class="c0"><br>00083 </span><span class="c0 c6">&nbsp;/// the basicblock.</span><span class="c0"><br>00084 &nbsp;std::vector&lt;unsigned&gt; LiveIns;</span></p><p class="c17"><span class="c5">and the iterator </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a7bab64c02d740522f94f5f45959a22fc">livein_iterator</a></span><span class="c5">&nbsp;provides access to them:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a7bab64c02d740522f94f5f45959a22fc">livein_iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a6833d4f80b7e44f505b2184b04ea2693">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a6833d4f80b7e44f505b2184b04ea2693">livein_begin</a></span><span class="c0">()</span><span class="c0 c9">&nbsp;const </span><span class="c0">{ </span><span class="c0 c7">return</span><span class="c0">&nbsp;LiveIns.begin(); }</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">Now back to the above code snippet (line 534~541) we can see it iterates through live in physical registers of the machine basic block and call </span><span class="c0">HandlePhysRegDef()</span><span class="c0">,</span><span class="c5">&nbsp;which further invokes <br></span><span class="c0">HandlePhysRegKill(Reg, MI)</span><span class="c5">&nbsp;and pushes </span><span class="c0">Reg</span><span class="c5">&nbsp;into </span><span class="c0">Defs</span><span class="c5">. The </span><span class="c0">HandlePhysRegKill() </span><span class="c5">function adds kills of </span><span class="c0">Reg </span><span class="c5">and its sub-registers to the uses. It pays special attention to the sub-register uses which may come below the last use of the whole register. &nbsp;The following code is simplified, along with my comments, to illustrate the logic of the </span><span class="c0">HandlePhysRegKill() </span><span class="c5">function:</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0">00311 </span><span class="c0 c8">bool</span><span class="c0">&nbsp;LiveVariables::HandlePhysRegKill(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Reg,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*MI) {<br>00312 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*LastDef = PhysRegDef[</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">];<br>00313 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*LastUse = PhysRegUse[</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">];<br>00314 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!LastDef &amp;&amp; !LastUse) &nbsp;<br>00315 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>00317 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*LastRefOrPartRef = LastUse ? LastUse : LastDef;<br>00318 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;LastRefOrPartRefDist = DistanceMap[LastRefOrPartRef];</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c5 c38">…...// If there are sub-registers, then iterate to find the last def or use, store def into variable </span><span class="c4 c5 c11 c38"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c5 c11 c38">&nbsp;*LastPartDef and use into variable </span><span class="c4 c5 c11 c38"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c5 c11 c38">&nbsp;*LastRefOrPartRef</span><span class="c5 c38">&nbsp;//....</span></p><p class="c17 c35"><span class="c5 c38"></span></p><p class="c17"><span class="c5 c11 c38">//if there is an instruction def this Reg (no use)</span></p><p class="c17"><span class="c0">00364 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!PhysRegUse[Reg]) { &nbsp;</span></p><p class="c17"><span class="c5 c11 c38">//then set the Reg operand of this instruction to dead using </span><span class="c4 c5 c11 c38"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#a61a42c85bd86c6ca4554e27d33c3f798">setIsDead</a></span><span class="c5 c11 c38">()</span></p><p class="c17"><span class="c0">00369 &nbsp; &nbsp; PhysRegDef[</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">]-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#af30461d94263a5dc8a22baeea4ba5c2a">addRegisterDead</a></span><span class="c0">(Reg, TRI, </span><span class="c0 c9">true</span><span class="c0">); &nbsp;</span></p><p class="c17"><span class="c0">00370 &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSubRegIterator.html">MCSubRegIterator</a></span><span class="c0">&nbsp;SubRegs(Reg, TRI); SubRegs.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a></span><span class="c0">(); ++SubRegs) {<br></span><span class="c5 c11 c38">….//kill sub-registers (for use?)//...</span></p><p class="c17"><span class="c0">00385 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*LastSubRef = FindLastRefOrPartRef(SubReg);<br>00386 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(LastSubRef)<br>00387 &nbsp; &nbsp; &nbsp; &nbsp; LastSubRef-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#ab8fd10f439804d8d7872bc1389653fce">addRegisterKilled</a></span><span class="c0">(SubReg, TRI, </span><span class="c0 c9">true</span><span class="c0">);<br>00388 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">else</span><span class="c0">&nbsp;{<br>00389 &nbsp; &nbsp; &nbsp; &nbsp; LastRefOrPartRef-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#ab8fd10f439804d8d7872bc1389653fce">addRegisterKilled</a></span><span class="c0">(SubReg, TRI, </span><span class="c0 c9">true</span><span class="c0">);<br>00390 &nbsp; &nbsp; &nbsp; &nbsp; PhysRegUse[SubReg] = LastRefOrPartRef;<br>00391 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCSubRegIterator.html">MCSubRegIterator</a></span><span class="c0">&nbsp;SS(SubReg, TRI); SS.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#abccd358b92366e5284e7e674e86b241f">isValid</a></span><span class="c0">(); ++SS)<br>00392 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PhysRegUse[*SS] = LastRefOrPartRef;<br>00393 &nbsp; &nbsp; &nbsp; }<br>00396 &nbsp; &nbsp; }</span></p><p class="c17"><span class="c5 c11 c38">//if there is an instruction use and it equals to PhysRegDef[Reg] but not to MI</span></p><p class="c17"><span class="c5 c11 c38">//I didn’t fully understand the following logic<br></span><span class="c0">00397 &nbsp; } </span><span class="c0 c7">else</span><span class="c0">&nbsp;</span><span class="c0 c7">if</span><span class="c0">&nbsp;(LastRefOrPartRef == PhysRegDef[Reg] &amp;&amp; LastRefOrPartRef != MI) {<br>00398 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(LastPartDef) //<br>00399 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// The last partial def kills the register.</span><span class="c0"><br>00400 &nbsp; &nbsp; &nbsp; LastPartDef-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a469e271fba3a9b52dad4fa54eaf44e2b">addOperand</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#a18124eff2d5106b9bf041f948a1912cc">MachineOperand::CreateReg</a></span><span class="c0">(Reg, </span><span class="c0 c9">false</span><span class="c0 c6">/*IsDef*/</span><span class="c0">,<br>00401 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c9">true</span><span class="c0 c6">/*IsImp*/</span><span class="c0">, </span><span class="c0 c9">true</span><span class="c0 c6">/*IsKill*/</span><span class="c0">));<br>00402 &nbsp; &nbsp; </span><span class="c0 c7">else</span><span class="c0">&nbsp;{<br>00403 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html">MachineOperand</a></span><span class="c0">&nbsp;*MO =<br>00404 &nbsp; &nbsp; &nbsp; &nbsp; LastRefOrPartRef-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#aba17bed4584b57d8a22902d8da162498">findRegisterDefOperand</a></span><span class="c0">(Reg, </span><span class="c0 c9">false</span><span class="c0">, TRI);<br>00405 &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">bool</span><span class="c0">&nbsp;NeedEC = MO-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#a11d72231fe6da4abec10afff58dede5d">isEarlyClobber</a></span><span class="c0">() &amp;&amp; MO-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a></span><span class="c0">() !=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">;<br>00406 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// If the last reference is the last def, then it's not used at all.</span><span class="c0"><br>00407 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// That is, unless we are currently processing the last reference itself.</span><span class="c0"><br>00408 &nbsp; &nbsp; &nbsp; LastRefOrPartRef-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#af30461d94263a5dc8a22baeea4ba5c2a">addRegisterDead</a></span><span class="c0">(Reg, TRI, </span><span class="c0 c9">true</span><span class="c0">);<br>00409 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(NeedEC) {<br>00410 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// If we are adding a subreg def and the superreg def is marked early</span><span class="c0"><br>00411 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// clobber, add an early clobber marker to the subreg def.</span><span class="c0"><br>00412 &nbsp; &nbsp; &nbsp; &nbsp; MO = LastRefOrPartRef-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#aba17bed4584b57d8a22902d8da162498">findRegisterDefOperand</a></span><span class="c0">(Reg);<br>00413 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(MO)<br>00414 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MO-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#a9fcb795c017b82c1a259882b060ddc06">setIsEarlyClobber</a></span><span class="c0">();<br>00415 &nbsp; &nbsp; &nbsp; }<br>00416 &nbsp; &nbsp; }<br>00417 &nbsp; } </span><span class="c0 c7">else &nbsp;</span><span class="c5 c11 c38">//if there is an instruction use, kill the Reg operand of that instruction</span><span class="c0"><br>00418 &nbsp; &nbsp; LastRefOrPartRef-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#ab8fd10f439804d8d7872bc1389653fce">addRegisterKilled</a></span><span class="c0">(Reg, TRI, </span><span class="c0 c9">true</span><span class="c0">);<br>00419 &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00420 }</span></p><p class="c15 c44"><span class="c5"></span></p><p class="c17"><span class="c5">After marking all live-in physical registers the outer loop gets into an inner loop to iterate and process each instructions:</span></p><p class="c17"><span class="c0">00546 &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ac51be7ff80fe8d6ae5e8c0acb194908a">MachineBasicBlock::iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">&nbsp;= MBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a></span><span class="c0">(), E = MBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#acbc921830578e2741be6549db716c0ce">end</a></span><span class="c0">();<br>00547 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">&nbsp;!= E; ++</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">) {<br>00551 &nbsp; &nbsp; &nbsp; DistanceMap.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1DenseMapBase.html#a699a66e504b48fdeff124e82f6c61917">insert</a></span><span class="c0">(std::make_pair(MI, Dist++));<br>00553 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Process all of the operands of the instruction...</span><span class="c0"><br>00554 &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;NumOperandsToProcess = MI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a7b5fe96d88954efc855e6c466207e535">getNumOperands</a></span><span class="c0">();<br>00556 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Unless it is a PHI node. &nbsp;In this case, ONLY process the DEF, not any</span><span class="c0"><br>00557 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// of the uses. &nbsp;They will be handled in other basic blocks.</span><span class="c0"><br>00558 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(MI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#ad70025709baab4e42d5d9d83023bc402">isPHI</a></span><span class="c0">())<br>00559 &nbsp; &nbsp; &nbsp; &nbsp; NumOperandsToProcess = 1;</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">Inside the inner loop the kill and dead marker are first cleared: </span></p><p class="c17"><span class="c0">00561 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Clear kill and dead markers. LV will recompute them.</span><span class="c0"><br>00562 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a></span><span class="c0">&nbsp;UseRegs;<br>00563 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a></span><span class="c0">&nbsp;DefRegs;<br>00564 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 1&gt;</a></span><span class="c0">&nbsp;RegMasks;<br>00565 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i = 0; i != NumOperandsToProcess; ++i) {<br>00566 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html">MachineOperand</a></span><span class="c0">&nbsp;&amp;MO = MI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a></span><span class="c0">(i);<br>00567 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(MO.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#a2c5eddfba64e7a44deba1b5a0d45a017">isRegMask</a></span><span class="c0">()) {<br>00568 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RegMasks.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a></span><span class="c0">(i);<br>00569 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">continue</span><span class="c0">;<br>00570 &nbsp; &nbsp; &nbsp; &nbsp; }<br>00571 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!MO.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#ad8198d6d83af9410d867136e33fbf4b2">isReg</a></span><span class="c0">() || MO.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a></span><span class="c0">() == 0)<br>00572 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">continue</span><span class="c0">;<br>00573 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;MOReg = MO.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#ab75f703d251cc0ce0206fe00a999db86">getReg</a></span><span class="c0">();<br>00574 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(MO.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#a57bf9ee7219097ff0f98da23a3b3b782">isUse</a></span><span class="c0">()) {<br>00575 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MO.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">setIsKill</a></span><span class="c0">(</span><span class="c0 c9">false</span><span class="c0">);<br>00576 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(MO.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#a0e4e5eef3cc7c47acbb753b9d3872348">readsReg</a></span><span class="c0">())<br>00577 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UseRegs.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a></span><span class="c0">(MOReg);<br>00578 &nbsp; &nbsp; &nbsp; &nbsp; } </span><span class="c0 c7">else</span><span class="c0">&nbsp;</span><span class="c0 c6">/*MO.isDef()*/</span><span class="c0">&nbsp;{<br>00579 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MO.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#a61a42c85bd86c6ca4554e27d33c3f798">setIsDead</a></span><span class="c0">(</span><span class="c0 c9">false</span><span class="c0">);<br>00580 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DefRegs.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a></span><span class="c0">(MOReg);<br>00581 &nbsp; &nbsp; &nbsp; &nbsp; }<br>00582 &nbsp; &nbsp; &nbsp; }</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">Then all register uses, both physical and virtual ones, of the current machine instruction are processed:</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0">00584 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Process all uses.</span><span class="c0"><br>00585 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i = 0, e = UseRegs.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a></span><span class="c0">(); i != e; ++i) {<br>00586 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;MOReg = UseRegs[i];<br>00587 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a></span><span class="c0">(MOReg))<br>00588 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a82720de5ebc9a6c0e4838b2db127bea5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a82720de5ebc9a6c0e4838b2db127bea5">HandleVirtRegUse</a></span><span class="c0">(MOReg, MBB, MI);<br>00589 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">else</span><span class="c0">&nbsp;</span><span class="c0 c7">if</span><span class="c0">&nbsp;(!MRI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html#a008f499ae277e4936b5b897ddb4bcb7e">isReserved</a></span><span class="c0">(MOReg))<br>00590 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HandlePhysRegUse(MOReg, MI);<br>00591 &nbsp; &nbsp; &nbsp; }</span></p><p class="c17"><span class="c5">in which the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a82720de5ebc9a6c0e4838b2db127bea5">HandleVirtRegUse</a></span><span class="c0">()</span><span class="c5">&nbsp;function has the</span><span class="c5">&nbsp;following definition:</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a82720de5ebc9a6c0e4838b2db127bea5">00131</a></span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a82720de5ebc9a6c0e4838b2db127bea5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a82720de5ebc9a6c0e4838b2db127bea5">LiveVariables::HandleVirtRegUse</a></span><span class="c0">(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;reg,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*MBB,<br>00132 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">) {<br>00133 &nbsp; assert(MRI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a></span><span class="c0">(reg) &amp;&amp; </span><span class="c0 c14">"Register use before def!"</span><span class="c0">);<br>00135 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;BBNum = MBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a></span><span class="c0">();<br>00137 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html">VarInfo</a></span><span class="c0">&amp; VRInfo =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a434b7516027126339021e18d66c34864">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a434b7516027126339021e18d66c34864">getVarInfo</a></span><span class="c0">(reg);<br>00139 &nbsp; </span><span class="c0 c6">// Check to see if this basic block is already a kill block.</span><span class="c0"><br>00140 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!VRInfo.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">Kills</a></span><span class="c0">.empty() &amp;&amp; VRInfo.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">Kills</a></span><span class="c0">.back()-&gt;getParent() == MBB) {<br></span><span class="c5 c11 c40">00141 &nbsp; &nbsp; </span><span class="c6 c5 c11 c40">// Yes, this register is killed in this basic block already. Increase the</span><span class="c5 c11 c40"><br>00142 &nbsp; &nbsp; </span><span class="c6 c5 c11 c40">// live range by updating the kill instruction.</span><span class="c0"><br>00143 &nbsp; &nbsp; VRInfo.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">Kills</a></span><span class="c0">.back() =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">;<br>00144 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">;<br>00145 &nbsp; }<br>00152 &nbsp; </span><span class="c0 c6">// This situation can occur:</span><span class="c0"><br>00154 &nbsp; </span><span class="c0 c6">// &nbsp; &nbsp; ,------.</span><span class="c0"><br>00155 &nbsp; </span><span class="c0 c6">// &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp;|</span><span class="c0"><br>00156 &nbsp; </span><span class="c0 c6">// &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp;v</span><span class="c0"><br>00157 &nbsp; </span><span class="c0 c6">// &nbsp; &nbsp; | &nbsp; t2 = phi ... t1 ...</span><span class="c0"><br>00158 &nbsp; </span><span class="c0 c6">// &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp;|</span><span class="c0"><br>00159 &nbsp; </span><span class="c0 c6">// &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp;v</span><span class="c0"><br>00160 &nbsp; </span><span class="c0 c6">// &nbsp; &nbsp; | &nbsp; t1 = ...</span><span class="c0"><br>00161 &nbsp; </span><span class="c0 c6">// &nbsp; &nbsp; | &nbsp;... = ... t1 ...</span><span class="c0"><br>00162 &nbsp; </span><span class="c0 c6">// &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp;|</span><span class="c0"><br>00163 &nbsp; </span><span class="c0 c6">// &nbsp; &nbsp; `------'</span><span class="c0"><br>00165 &nbsp; </span><span class="c0 c6">// where there is a use in a PHI node that's a predecessor to the defining</span><span class="c0"><br>00166 &nbsp; </span><span class="c0 c6">// block. We don't want to mark all predecessors as having the value "alive"</span><span class="c0"><br>00167 &nbsp; </span><span class="c0 c6">// in this case.</span><span class="c0"><br>00168 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(MBB == MRI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a></span><span class="c0">(reg)-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a></span><span class="c0">()) </span><span class="c0 c7">return</span><span class="c0">;<br>00170 &nbsp; </span><span class="c0 c6">// Add a new kill entry for this basic block. If this virtual register is</span><span class="c0"><br>00171 &nbsp; </span><span class="c0 c6">// already marked as alive in this basic block, that means it is alive in at</span><span class="c0"><br>00172 &nbsp; </span><span class="c0 c6">// least one of the successor blocks, it's not a kill.</span><span class="c0"><br>00173 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!VRInfo.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a76321b20db4feab750d85c2329cfcbc6">AliveBlocks</a></span><span class="c0">.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SparseBitVector.html#a3d8d6ee56adcc32a008fd2ff69a68b24">test</a></span><span class="c0">(BBNum))<br>00174 &nbsp; &nbsp; VRInfo.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a65c816771eca7465f5e3e0bb6624ad88">Kills</a></span><span class="c0">.push_back(MI);<br>00176 &nbsp; </span><span class="c0 c6">// Update all dominating blocks to mark them as "known live".</span><span class="c0"><br>00177 &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a502516f71f7824d46325d30ea41f34ba">MachineBasicBlock::const_pred_iterator</a></span><span class="c0">&nbsp;PI = MBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ab644fcf07a4c2708333cf66276282357">pred_begin</a></span><span class="c0">(),<br>00178 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;E = MBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a0359a738e0412c5a7ea55d61175e0661">pred_end</a></span><span class="c0">(); PI != E; ++PI)<br>00179 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a051cfe914c1c4eb2ceabb758d018a966">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a051cfe914c1c4eb2ceabb758d018a966">MarkVirtRegAliveInBlock</a></span><span class="c0">(VRInfo, MRI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a></span><span class="c0">(reg)-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a></span><span class="c0">(), *PI);<br>00180 }</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c5">From the above code we can see that an use in a later encountered instruction will prolong the live range of a register (pay attention to the comments in the red background color). </span><span class="c0">&nbsp;</span><span class="c5">After uses are processed, go ahead to process the masked registers:</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0">00593 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Process all masked registers. (Call clobbers).</span><span class="c0"><br>00594 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i = 0, e = RegMasks.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a></span><span class="c0">(); i != e; ++i)<br>00595 &nbsp; &nbsp; &nbsp; &nbsp; HandleRegMask(MI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a302e45878c6dc1714334c7ce96d56846">getOperand</a></span><span class="c0">(RegMasks[i]));</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c5">After masked registers are processed, defs are processed:</span></p><p class="c17"><span class="c0"><br>00597 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Process all defs.</span><span class="c0"><br>00598 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i = 0, e = DefRegs.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a22a311dfe4c28a897de8a9365a4f0a84">size</a></span><span class="c0">(); i != e; ++i) {<br>00599 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;MOReg = DefRegs[i];<br>00600 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#ae62c5ea35b71f9020caa94340bc78f37">TargetRegisterInfo::isVirtualRegister</a></span><span class="c0">(MOReg))<br>00601 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#aaf4d133ff60d62006326804b5401bca2">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#aaf4d133ff60d62006326804b5401bca2">HandleVirtRegDef</a></span><span class="c0">(MOReg, MI);<br>00602 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">else</span><span class="c0">&nbsp;</span><span class="c0 c7">if</span><span class="c0">&nbsp;(!MRI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html#a008f499ae277e4936b5b897ddb4bcb7e">isReserved</a></span><span class="c0">(MOReg))<br>00603 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HandlePhysRegDef(MOReg, MI, Defs);<br>00604 &nbsp; &nbsp; &nbsp; }<br>00605 &nbsp; &nbsp; &nbsp; UpdatePhysRegDefs(MI, Defs);<br>00606 &nbsp; &nbsp; }</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">At this point the inner loop (Loop over all of the instructions) terminates. Now it’s time to take care of PHI nodes:</span></p><p class="c17"><span class="c0">00608 &nbsp; &nbsp; </span><span class="c0 c6">// Handle any virtual assignments from PHI nodes which might be at the</span><span class="c0"><br>00609 &nbsp; &nbsp; </span><span class="c0 c6">// bottom of this basic block. &nbsp;We check all of our successor blocks to see</span><span class="c0"><br>00610 &nbsp; &nbsp; </span><span class="c0 c6">// if they have PHI nodes, and if so, we simulate an assignment at the end</span><span class="c0"><br>00611 &nbsp; &nbsp; </span><span class="c0 c6">// of the current block.</span><span class="c0"><br>00612 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!PHIVarInfo[MBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a></span><span class="c0">()].</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorBase.html#afdecfccba9b1fd8c9fd8eb27ae69e9a0">empty</a></span><span class="c0">()) {<br>00613 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;</a></span><span class="c0">&amp; VarInfoVec = PHIVarInfo[MBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a6acda287e5c19ffb173b0bf8f1dd9c5e">getNumber</a></span><span class="c0">()];<br>00614 <br>00615 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVector.html">SmallVector&lt;unsigned, 4&gt;::iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">&nbsp;= VarInfoVec.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a8a045d250952c0867382a9840ee18fdf">begin</a></span><span class="c0">(),<br>00616 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;E = VarInfoVec.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateCommon.html#a075e34e98605d0e7c289763a104869ac">end</a></span><span class="c0">();</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">&nbsp;!= E; ++</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">)<br>00617 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Mark it alive only in the block we are representing.</span><span class="c0"><br>00618 &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a051cfe914c1c4eb2ceabb758d018a966">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a051cfe914c1c4eb2ceabb758d018a966">MarkVirtRegAliveInBlock</a></span><span class="c0">(</span><span class="c4 c62 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a434b7516027126339021e18d66c34864">getVarInfo</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">),MRI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a></span><span class="c0">(*I)-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a></span><span class="c0">(),<br>00619 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MBB);<br>00620 &nbsp; &nbsp; }</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">Next, do some special processing on the last instruction of a basic block:</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0">00622 &nbsp; &nbsp; </span><span class="c0 c6">// Finally, if the last instruction in the block is a return, make sure to</span><span class="c0"><br>00623 &nbsp; &nbsp; </span><span class="c0 c6">// mark it as using all of the live-out values in the function.</span><span class="c0"><br>00624 &nbsp; &nbsp; </span><span class="c0 c6">// Things marked both call and return are tail calls; do not do this for</span><span class="c0"><br>00625 &nbsp; &nbsp; </span><span class="c0 c6">// them. &nbsp;The tail callee need not take the same registers as input</span><span class="c0"><br>00626 &nbsp; &nbsp; </span><span class="c0 c6">// that it produces as output, and there are dependencies for its input</span><span class="c0"><br>00627 &nbsp; &nbsp; </span><span class="c0 c6">// registers elsewhere.</span><span class="c0"><br>00628 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!MBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#aa37d95a1d7bc824da0c596d8334c4ceb">empty</a></span><span class="c0">() &amp;&amp; MBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ace3ed0412f841777b7de55d47883890e">back</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a059149938a94c2d38fc5b8796bd26cce">isReturn</a></span><span class="c0">()<br>00629 &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; !MBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ace3ed0412f841777b7de55d47883890e">back</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#ac4de5f228c299d7c4b7de72a4a6dd28c">isCall</a></span><span class="c0">()) {<br>00630 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1MBlazeISD.html#a4cbef502356ec86269d324dc7be5cbf7a4e52b775450b88b95f31bae9c160fe01">Ret</a></span><span class="c0">&nbsp;= &amp;MBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#ace3ed0412f841777b7de55d47883890e">back</a></span><span class="c0">();<br>00631 <br>00632 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html#a2578d2d9806af1206c5d0f653e8ef721">MachineRegisterInfo::liveout_iterator</a></span><span class="c0"><br>00633 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">&nbsp;= MF-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html#a7adf426d6eeac663a75185e49bbaa32c">liveout_begin</a></span><span class="c0">(),<br>00634 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;E = MF-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a></span><span class="c0">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html#a37c4adfde9d9fd393d447b03b5596acf">liveout_end</a></span><span class="c0">();</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">&nbsp;!= E; ++</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">) {<br>00635 &nbsp; &nbsp; &nbsp; &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a055858b14215864ed367a8db6c19d6f6">TargetRegisterInfo::isPhysicalRegister</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">) &amp;&amp;<br>00636 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c14">"Cannot have a live-out virtual register!"</span><span class="c0">);<br>00637 &nbsp; &nbsp; &nbsp; &nbsp; HandlePhysRegUse(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">, Ret);<br>00638 <br>00639 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Add live-out registers as implicit uses.</span><span class="c0"><br>00640 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!Ret-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a8b64b30189b85c9dd54292b7d1d08a70">readsRegister</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">))<br>00641 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Ret-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#a469e271fba3a9b52dad4fa54eaf44e2b">addOperand</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineOperand.html#a18124eff2d5106b9bf041f948a1912cc">MachineOperand::CreateReg</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">, </span><span class="c0 c9">false</span><span class="c0">, </span><span class="c0 c9">true</span><span class="c0">));<br>00642 &nbsp; &nbsp; &nbsp; }<br>00643 &nbsp; &nbsp; }</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">Finally in the outer loop CSE (</span><span class="c0 c6">common subexpression elimination</span><span class="c5">) instructions are handled:</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0">00645 &nbsp; &nbsp; </span><span class="c0 c6">// MachineCSE may CSE instructions which write to non-allocatable physical</span><span class="c0"><br>00646 &nbsp; &nbsp; </span><span class="c0 c6">// registers across MBBs. Remember if any reserved register is liveout.</span><span class="c0"><br>00647 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallSet.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallSet.html">SmallSet&lt;unsigned, 4&gt;</a></span><span class="c0">&nbsp;LiveOuts;<br>00648 &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a6198e2abdd4f41355b1a0931affde1a6">MachineBasicBlock::const_succ_iterator</a></span><span class="c0">&nbsp;SI = MBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a6321b189ea8fd5058663f8a87d6c23e9">succ_begin</a></span><span class="c0">(),<br>00649 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SE = MBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a3ddd708642d60c1661992ff8ba1b215d">succ_end</a></span><span class="c0">(); SI != SE; ++SI) {<br>00650 &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*SuccMBB = *SI;<br>00651 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(SuccMBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a3f522ae33859d693fb5781efe690e9e6">isLandingPad</a></span><span class="c0">())<br>00652 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">continue</span><span class="c0">;<br>00653 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a7bab64c02d740522f94f5f45959a22fc">MachineBasicBlock::livein_iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></span><span class="c0">&nbsp;= SuccMBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#a6833d4f80b7e44f505b2184b04ea2693">livein_begin</a></span><span class="c0">(),<br>00654 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6a59df2d2242b1477e41d1d160980ed371">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6a59df2d2242b1477e41d1d160980ed371">LE</a></span><span class="c0">&nbsp;= SuccMBB-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html#aa314325c7062fd067a3c0b9339aa8ea6">livein_end</a></span><span class="c0">();</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></span><span class="c0">&nbsp;!=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6a59df2d2242b1477e41d1d160980ed371">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6a59df2d2242b1477e41d1d160980ed371">LE</a></span><span class="c0">; ++</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></span><span class="c0">) {<br>00655 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;LReg = *</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></span><span class="c0">;<br>00656 &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!TRI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#aa3adf149b595b297d3acb46f7e3aa8ed">isInAllocatableClass</a></span><span class="c0">(LReg))<br>00657 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Ignore other live-ins, e.g. those that are live into landing pads.</span><span class="c0"><br>00658 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LiveOuts.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallSet.html#a8d8348060ccdeeba13fb8bc651dfbf82">insert</a></span><span class="c0">(LReg);<br>00659 &nbsp; &nbsp; &nbsp; }<br>00660 &nbsp; &nbsp; }</span></p><p class="c17 c35"><span class="c5 c11"></span></p><p class="c17"><span class="c5 c11">and kill available registers at the end of the basic block:</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c0">00662 &nbsp; &nbsp; </span><span class="c0 c6">// Loop over PhysRegDef / PhysRegUse, killing any registers that are</span><span class="c0"><br>00663 &nbsp; &nbsp; </span><span class="c0 c6">// available at the end of the basic block.</span><span class="c0"><br>00664 &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i = 0; i != NumRegs; ++i)<br>00665 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;((PhysRegDef[i] || PhysRegUse[i]) &amp;&amp; !LiveOuts.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallSet.html#ab28aa342862f6d16361be514fd98c22e">count</a></span><span class="c0">(i))<br>00666 &nbsp; &nbsp; &nbsp; &nbsp; HandlePhysRegDef(i, 0, Defs);<br>00667 <br>00668 &nbsp; &nbsp; std::fill(PhysRegDef, &nbsp;PhysRegDef &nbsp;+ NumRegs, (</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">*)0);<br>00669 &nbsp; &nbsp; std::fill(PhysRegUse, &nbsp;PhysRegUse &nbsp;+ NumRegs, (</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">*)0);</span></p><p class="c15 c44"><span class="c5"></span></p><p class="c17"><span class="c5">At this point the outer loop finishes. The</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a944222171f774f59e974a97879ab66bc">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveVariables.html#a944222171f774f59e974a97879ab66bc">LiveVariables::runOnMachineFunction</a></span><span class="c0">()</span><span class="c5">&nbsp;executes the following code to store the dead/kill information into machine instructions (MIs) and deletes temporary memories.</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0">00672 &nbsp; </span><span class="c0 c6">// Convert and transfer the dead / killed information we have gathered into</span><span class="c0"><br>00673 &nbsp; </span><span class="c0 c6">// VirtRegInfo onto MI's.</span><span class="c0"><br>00674 &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;i = 0, e1 = VirtRegInfo.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1IndexedMap.html#a665936c9a74ae539c0f4dd590a871016">size</a></span><span class="c0">(); i != e1; ++i) {<br>00675 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0">&nbsp;</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Reg =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a70cd177cd3198c912817a21f373b5651">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a70cd177cd3198c912817a21f373b5651">TargetRegisterInfo::index2VirtReg</a></span><span class="c0">(i);<br>00676 &nbsp; &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;j = 0, e2 = VirtRegInfo[Reg].Kills.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1IndexedMap.html#a665936c9a74ae539c0f4dd590a871016">size</a></span><span class="c0">(); j != e2; ++j)<br>00677 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(VirtRegInfo[Reg].Kills[j] == MRI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html#abf69f92f1977440a4e443a26baeb73c0">getVRegDef</a></span><span class="c0">(Reg))<br>00678 &nbsp; &nbsp; &nbsp; &nbsp; VirtRegInfo[Reg].Kills[j]-&gt;addRegisterDead(Reg, TRI);<br>00679 &nbsp; &nbsp; &nbsp; </span><span class="c0 c7">else</span><span class="c0"><br>00680 &nbsp; &nbsp; &nbsp; &nbsp; VirtRegInfo[</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">].Kills[j]-&gt;addRegisterKilled(Reg, TRI);<br>00681 &nbsp; }</span></p><p class="c17"><span class="c0">….........</span></p><p class="c17"><span class="c0">00691 &nbsp; </span><span class="c0 c9">delete</span><span class="c0">[] PhysRegDef;<br>00692 &nbsp; </span><span class="c0 c9">delete</span><span class="c0">[] PhysRegUse;<br>00693 &nbsp; </span><span class="c0 c9">delete</span><span class="c0">[] PHIVarInfo;<br>00694 <br>00695 &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">false</span><span class="c0">;<br>00696 }</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">Now we are done with the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a4853b234bc065eca92fa645560686430">LiveVariables</a></span><span class="c5">&nbsp;component of the live analysis in LLVM</span><span class="c5">. Another component of the live analysis in LLVM is the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html">LiveInterval</a></span><span class="c5">&nbsp;class. </span><span class="c5">This class represents some number of live ranges for a register or value. This class also contains a bit of register allocator state. The following comments from the file </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/LiveInterval_8h_source.html">LiveInterval.h</a></span><span class="c5">&nbsp;gives a high-level overview of the relevant concepts:</span></p><p class="c17 c35"><span class="c0"></span></p><p class="c17"><span class="c0">00010 </span><span class="c0 c6">// This file implements the LiveRange and LiveInterval classes. &nbsp;Given some</span><span class="c0"><br>00011 </span><span class="c0 c6">// numbering of each the machine instructions an interval [i, j) is said to be a</span><span class="c0"><br>00012 </span><span class="c0 c6">// live interval for register v if there is no instruction with number j' &gt;= j</span><span class="c0"><br>00013 </span><span class="c0 c6">// such that v is live at j' and there is no instruction with number i' &lt; i such</span><span class="c0"><br>00014 </span><span class="c0 c6">// that v is live at i'. In this implementation intervals can have holes,</span><span class="c0"><br>00015 </span><span class="c0 c6">// i.e. an interval might look like [1,20), [50,65), [1000,1001). &nbsp;Each</span><span class="c0"><br>00016 </span><span class="c0 c6">// individual range is represented as an instance of LiveRange, and the whole</span><span class="c0"><br>00017 </span><span class="c0 c6">// interval is represented as an instance of LiveInterval.</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">The </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html">LiveInterval</a></span><span class="c5">&nbsp;class relies on</span><sup class="c5"><a href="https://people.cs.pitt.edu/~yongli/notes/llvm3/LLVM3.html#ftnt3" name="ftnt_ref3">[3]</a></sup><span class="c5">&nbsp;the information computed by the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a4853b234bc065eca92fa645560686430">LiveVariables</a></span><span class="c5">&nbsp;class and stored in the machine instructions and operands. &nbsp;Regarding the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html">LiveInterval</a></span><span class="c5">&nbsp;class the LLVM has the following description:</span></p><p class="c17"><span class="c5">“We now (after </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveVariables_1_1VarInfo.html#a4853b234bc065eca92fa645560686430">LiveVariables</a></span><span class="c5">&nbsp;analysis) have the information available to perform the live intervals analysis and build the live intervals themselves. We start off by numbering the basic blocks and machine instructions. We then handle the “live-in” values. These are in physical registers, so the physical register is assumed to be killed by the end of the basic block. Live intervals for virtual registers are computed for some ordering of the machine instructions </span><span class="c5">[1, N]</span><span class="c5">. A live interval is an interval </span><span class="c5">[i, j)</span><span class="c5">, where </span><span class="c5">1 &gt;= i &gt;= j &gt; N</span><span class="c5">, for which a variable is live.”</span></p><p class="c17 c35"><span class="c11 c16"></span></p><p class="c17"><span class="c5">Note that other than the </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/LiveInterval_8h_source.html">LiveInterval.h</a></span><span class="c11 c16">&nbsp;</span><span class="c5">and </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/LiveInterval_8cpp_source.html">LiveInterval.cpp</a></span><span class="c5">&nbsp;files</span><span class="c5">&nbsp;a large portion of </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html">LiveInterval</a></span><span class="c5">&nbsp;‘s implementation resides in the </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/LiveIntervalAnalysis_8cpp_source.html">LiveIntervalAnalysis.cpp</a></span><span class="c5">&nbsp;file, which contains the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveIntervals.html#a5c4ad3a3c5be8ed406e28b90d27353b9">runOnMachineFunction</a></span><span class="c0 c4">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0 c4">&nbsp;&amp;fn)</span><span class="c5">&nbsp;entry function defined as follows:</span></p><p class="c17 c35"><span class="c11 c51"></span></p><p class="c17"><span class="c0">00099 </span><span class="c0 c6">/// runOnMachineFunction - Register allocate the whole function</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveIntervals.html#a5c4ad3a3c5be8ed406e28b90d27353b9">00101</a></span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveIntervals.html#a5c4ad3a3c5be8ed406e28b90d27353b9">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveIntervals.html#a5c4ad3a3c5be8ed406e28b90d27353b9">LiveIntervals::runOnMachineFunction</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;&amp;fn) {<br>00102 &nbsp; MF = &amp;fn;<br>00103 &nbsp; MRI = &amp;MF-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a></span><span class="c0">();<br>00104 &nbsp; TM = &amp;fn.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a></span><span class="c0">();<br>00105 &nbsp; TRI = TM-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a70b47eca6a99c87b81f4c1b1455dc090">getRegisterInfo</a></span><span class="c0">();<br>00106 &nbsp; TII = TM-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ac13d0f6f2c915757013b101ef6e8afbc">getInstrInfo</a></span><span class="c0">();<br>00107 &nbsp; AA = &amp;getAnalysis&lt;AliasAnalysis&gt;();<br>00108 &nbsp; LV = &amp;getAnalysis&lt;LiveVariables&gt;();<br>00109 &nbsp; Indexes = &amp;getAnalysis&lt;SlotIndexes&gt;();<br>00110 &nbsp; DomTree = &amp;getAnalysis&lt;MachineDominatorTree&gt;();<br>00111 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(!LRCalc)<br>00112 &nbsp; &nbsp; LRCalc = </span><span class="c0 c9">new</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRangeCalc.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRangeCalc.html">LiveRangeCalc</a></span><span class="c0">();<br>00114 &nbsp; </span><span class="c0 c6">// Allocate space for all virtual registers.</span><span class="c0"><br>00115 &nbsp; VirtRegIntervals.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1IndexedMap.html#a111ef7f4e0b778519ee17c52fdbd2583">resize</a></span><span class="c0">(MRI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html#a78278263fc4c2deaf913ec1bbf98a8d2">getNumVirtRegs</a></span><span class="c0">());<br>00117 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LiveIntervalAnalysis_8cpp.html#ab691a6e5f970fae9e1f4c20a3ff062d1">NewLiveIntervals</a></span><span class="c0">) {<br>00118 &nbsp; &nbsp; </span><span class="c0 c6">// This is the new way of computing live intervals.</span><span class="c0"><br>00119 &nbsp; &nbsp; </span><span class="c0 c6">// It is independent of LiveVariables, and it can run at any time.</span><span class="c0"><br>00120 &nbsp; &nbsp; computeVirtRegs();<br>00121 &nbsp; &nbsp; computeRegMasks();<br>00122 &nbsp; } </span><span class="c0 c7">else</span><span class="c0">&nbsp;{<br>00123 &nbsp; &nbsp; </span><span class="c0 c6">// This is the old way of computing live intervals.</span><span class="c0"><br>00124 &nbsp; &nbsp; </span><span class="c0 c6">// It depends on LiveVariables.</span><span class="c0"><br>00125 &nbsp; &nbsp; computeIntervals(); &nbsp; }<br>00127 &nbsp; computeLiveInRegUnits();<br>00130 &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;</span><span class="c0 c9">true</span><span class="c0">;<br>00131 }</span></p><p class="c17 c35"><span class="c11 c51"></span></p><p class="c17"><span class="c5">As can bee seen, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveIntervals.html">LiveIntervals</a></span><span class="c5">&nbsp;</span><span class="c5">relies on various information including machine register information and target register/instruction information, and depends other analyses such as the alias, live variable, slot index and dominator tree passes. The data member </span><span class="c0">VirtRegIntervals</span><span class="c5">&nbsp;is a map that contains the computed interval for all virtual registers. Now let’s focus on its new way of computing live intervals (the first if branch). The function &nbsp;</span><span class="c0">computeVirtRegs() </span><span class="c5">loops through every virtual register </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c5">, creates and assigns a </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html">LiveInterval</a></span><span class="c0">&nbsp;</span><span class="c5">(stored in </span><span class="c0">VirtRegIntervals[</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">]</span><span class="c5">) and call </span><span class="c0">computeVirtRegInterval() </span><span class="c5">to compute the interval based on defs and uses. &nbsp;The function </span><span class="c0">computeVirtRegInterval()</span><span class="c5">&nbsp;further invokes the statements:</span></p><p class="c17"><span class="c0">00472 &nbsp; LRCalc-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRangeCalc.html#a9eb39ce20c00b6457b9645ce03e7f128">createDeadDefs</a></span><span class="c0">(LI);<br>00473 &nbsp; LRCalc-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRangeCalc.html#a9e2b899296490c0c4583160f24afeb99">extendToUses</a></span><span class="c0">(LI);</span></p><p class="c17"><span class="c5">to calculate the dead defs and killing uses. </span><span class="c5 c50">The function </span><span class="c4 c5 c11 c50"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRangeCalc.html#a9eb39ce20c00b6457b9645ce03e7f128">createDeadDefs</a></span><span class="c5 c50">()</span><span class="c5 c50">&nbsp;creates a dead def in LI for every def operand of Reg (This means that prior defs of Reg are dead, we get a new def, which marks a new live interval from this def to the last kill/use of this def).</span><span class="c5">&nbsp;Each instruction defining Reg gets a new </span><span class="c5"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1VNInfo.html">VNInfo</a></span><span class="c5">&nbsp;(</span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Value.html">Value</a></span><span class="c5">&nbsp;number information)</span><span class="c5">&nbsp;with a corresponding minimal live range. Relevant function definitions are as follows:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRangeCalc.html#a9eb39ce20c00b6457b9645ce03e7f128">00038</a></span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRangeCalc.html#a9eb39ce20c00b6457b9645ce03e7f128">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRangeCalc.html#a9eb39ce20c00b6457b9645ce03e7f128">LiveRangeCalc::createDeadDefs</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html">LiveInterval</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LoopInfoImpl_8h.html#ab7b7f3fe4279386eae18cf924053d077">LI</a></span><span class="c0">, </span><span class="c0 c8">unsigned</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/X86DisassemblerDecoder_8h.html#a546839a5c4bcf9f9450967155f48de41">Reg</a></span><span class="c0">) {<br>00039 &nbsp; assert(MRI &amp;&amp; Indexes &amp;&amp; </span><span class="c0 c14">"call reset() first"</span><span class="c0">);<br>00041 &nbsp; </span><span class="c0 c6">// Visit all def operands. If the same instruction has multiple defs of Reg,</span><span class="c0"><br>00042 &nbsp; </span><span class="c0 c6">// LI-&gt;createDeadDef() will deduplicate.</span><span class="c0"><br>00043 &nbsp; </span><span class="c0 c7">for</span><span class="c0">&nbsp;(</span><span class="c4 c62 c5 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo_1_1defusechain__iterator.html">MachineRegisterInfo::def_iterator</a></span><span class="c0"><br>00044 &nbsp; &nbsp; &nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">&nbsp;= MRI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html#a66efe5c5561969cd4506c421daaf9bf3">def_begin</a></span><span class="c0">(Reg), E = MRI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html#aa21b132afc12ed3cead7a879506f277a">def_end</a></span><span class="c0">();</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">&nbsp;!= E; ++</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">) {<br>00045 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html">MachineInstr</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARMCC.html#ac8391dd6b8083baa870dee5142ff22b6af6284b830f5e4fe2a8ddb9ff1a25ee46">MI</a></span><span class="c0">&nbsp;= &amp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">;<br>00046 &nbsp; &nbsp; </span><span class="c0 c6">// Find the corresponding slot index.</span><span class="c0"><br>00047 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SlotIndex.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SlotIndex.html">SlotIndex</a></span><span class="c0">&nbsp;Idx;<br>00048 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(MI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#ad70025709baab4e42d5d9d83023bc402">isPHI</a></span><span class="c0">())<br>00049 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// PHI defs begin at the basic block start index.</span><span class="c0"><br>00050 &nbsp; &nbsp; &nbsp; Idx = Indexes-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SlotIndexes.html#a7d9e911655267def875c265ae774cf68">getMBBStartIdx</a></span><span class="c0">(MI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineInstr.html#aabad9b72f6d20d3462efc34020d39f73">getParent</a></span><span class="c0">());<br>00051 &nbsp; &nbsp; </span><span class="c0 c7">else</span><span class="c0"><br>00052 &nbsp; &nbsp; &nbsp; </span><span class="c0 c6">// Instructions are either normal 'r', or early clobber 'e'.</span><span class="c0"><br>00053 &nbsp; &nbsp; &nbsp; Idx = Indexes-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SlotIndexes.html#ada895ec8deba28c17ee5d45cddf1882d">getInstructionIndex</a></span><span class="c0">(MI)<br>00054 &nbsp; &nbsp; &nbsp; &nbsp; .</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SlotIndex.html#a04196b5e551d63690ede0244f80f2503">getRegSlot</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">.getOperand().isEarlyClobber());<br>00056 &nbsp; &nbsp; </span><span class="c0 c6">// Create the def in LI. This may find an existing def.</span><span class="c0"><br>00057 &nbsp; &nbsp; </span><span class="c0">LI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html#a2efd4fc389c41afc7bcdf8c96ba78e49">createDeadDef</a></span><span class="c0">(Idx, *Alloc);</span><span class="c0"><br>00058 &nbsp; }<br>00059 }</span></p><p class="c17"><span class="c5 c11">where the last statement </span><span class="c0">LI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html#a2efd4fc389c41afc7bcdf8c96ba78e49">createDeadDef</a></span><span class="c0">(Idx, *Alloc) </span><span class="c5 c11">calls the following function:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html#a2efd4fc389c41afc7bcdf8c96ba78e49">00052</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1VNInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1VNInfo.html">VNInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html#a2efd4fc389c41afc7bcdf8c96ba78e49">LiveInterval::createDeadDef</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SlotIndex.html">SlotIndex</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a></span><span class="c0">,<br>00053 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BumpPtrAllocator.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BumpPtrAllocator.html">VNInfo::Allocator</a></span><span class="c0">&nbsp;&amp;VNInfoAllocator) {<br>00054 &nbsp; assert(!Def.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SlotIndex.html#a2014a1212e531c3fd57620efe15992a8">isDead</a></span><span class="c0">() &amp;&amp; </span><span class="c0 c14">"Cannot define a value at the dead slot"</span><span class="c0">);<br>00055 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveRange.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveRange.html">iterator</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0">&nbsp;=</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html#a78953ea57d65b343371f8c466c024a13">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html#a78953ea57d65b343371f8c466c024a13">find</a></span><span class="c0">(Def);<br>00056 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(I ==</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html#a6fc741e36990a0dd66855e7f39f95a3b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html#a6fc741e36990a0dd66855e7f39f95a3b">end</a></span><span class="c0">()) {<br>00057 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1VNInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1VNInfo.html">VNInfo</a></span><span class="c0">&nbsp;*VNI =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html#a3af29c063ea820a43ae5030a1cc6849c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html#a3af29c063ea820a43ae5030a1cc6849c">getNextValue</a></span><span class="c0">(Def, VNInfoAllocator);<br>00058 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html#a39a9844625f28ad28c39a168652b5f52">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html#a39a9844625f28ad28c39a168652b5f52">ranges</a></span><span class="c0">.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorTemplateBase.html#ae1a10b90f22c0478960fb5798ff73916">push_back</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveRange.html">LiveRange</a></span><span class="c0">(Def, Def.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SlotIndex.html#af0fdc9086e9065592b7fcd8b43d558c5">getDeadSlot</a></span><span class="c0">(), VNI));<br>00059 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;VNI; }<br>00061 &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SlotIndex.html#a0b73244049319d841fd11a238f35b5d1">SlotIndex::isSameInstr</a></span><span class="c0">(Def, I-&gt;start)) {<br>00062 &nbsp; &nbsp; assert(I-&gt;valno-&gt;def == I-&gt;start &amp;&amp; </span><span class="c0 c14">"Inconsistent existing value def"</span><span class="c0">);<br>00064 &nbsp; &nbsp; </span><span class="c0 c6">// It is possible to have both normal and early-clobber defs of the same</span><span class="c0"><br>00065 &nbsp; &nbsp; </span><span class="c0 c6">// register on an instruction. It doesn't make a lot of sense, but it is</span><span class="c0"><br>00066 &nbsp; &nbsp; </span><span class="c0 c6">// possible to specify in inline assembly.</span><span class="c0"><br>00068 &nbsp; &nbsp; </span><span class="c0 c6">// Just convert everything to early-clobber.</span><span class="c0"><br>00069 &nbsp; &nbsp; Def = std::min(Def, I-&gt;start);<br>00070 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0">&nbsp;(Def != I-&gt;start)<br>00071 &nbsp; &nbsp; &nbsp; I-&gt;start = I-&gt;valno-&gt;def =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aceb138f68fe183995736614928e3394a">Def</a></span><span class="c0">;<br>00072 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;I-&gt;valno; }<br>00074 &nbsp; assert(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SlotIndex.html#a19695ead28a0fbdcea66c6253aebc44f">SlotIndex::isEarlierInstr</a></span><span class="c0">(Def, I-&gt;start) &amp;&amp; </span><span class="c0 c14">"Already live at def"</span><span class="c0">);<br>00075 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1VNInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1VNInfo.html">VNInfo</a></span><span class="c0">&nbsp;*VNI =</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html#a3af29c063ea820a43ae5030a1cc6849c">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html#a3af29c063ea820a43ae5030a1cc6849c">getNextValue</a></span><span class="c0">(Def, VNInfoAllocator);<br>00076 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html#a39a9844625f28ad28c39a168652b5f52">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveInterval.html#a39a9844625f28ad28c39a168652b5f52">ranges</a></span><span class="c0">.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SmallVectorImpl.html#af622128e353515efebccad40eae495cb">insert</a></span><span class="c0">(I,</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveRange.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/structllvm_1_1LiveRange.html">LiveRange</a></span><span class="c0">(Def, Def.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SlotIndex.html#af0fdc9086e9065592b7fcd8b43d558c5">getDeadSlot</a></span><span class="c0">(), VNI));<br>00077 &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;VNI;<br>00078 }</span></p><p class="c15 c44"><span class="c5"></span></p><p class="c15 c44"><span class="c5"></span></p><p class="c17"><span class="c5">Another function called in </span><span class="c0">computeVirtRegInterval()</span><span class="c5">, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRangeCalc.html#a9e2b899296490c0c4583160f24afeb99">extendToUses</a></span><span class="c5">(), </span><span class="c5 c50">e</span><span class="c5 c50">x</span><span class="c5 c50">tends the live range of LI to reach Kill (Now we can see this works closely with </span><span class="c4 c5 c11 c50"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRangeCalc.html#a9eb39ce20c00b6457b9645ce03e7f128">createDeadDefs</a></span><span class="c5 c50">(), which creates the interval. Thus, </span><span class="c4 c5 c11 c50"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRangeCalc.html#a9eb39ce20c00b6457b9645ce03e7f128">createDeadDefs</a></span><span class="c5 c50">() needs to be called first before </span><span class="c4 c5 c11 c50"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRangeCalc.html#a9e2b899296490c0c4583160f24afeb99">extendToUses</a></span><span class="c5 c50">() can be called).</span><span class="c5">&nbsp; </span><span class="c5">The existing values in LI must be live so they jointly dominate Kill. If Kill is not dominated by a single existing value, PHI-defs are inserted as required to preserve SSA form. If Kill is known to be dominated by a single existing value, Alloc may be null. &nbsp;At a high-level, </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRangeCalc.html#a9e2b899296490c0c4583160f24afeb99">extendToUses</a></span><span class="c5">() bears some similarities with </span><span class="c4 c5 c11 c50"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRangeCalc.html#a9eb39ce20c00b6457b9645ce03e7f128">createDeadDefs</a></span><span class="c5 c50">()</span><span class="c5">. Thus we do not get into any details into it. For complete and detailed code understanding please refer to the relevant source code.</span></p><p class="c17 c35"><span class="c11 c16"></span></p><p class="c17"><span class="c11 c16">A</span><span class="c5">&nbsp;inheritance graph for live analysis (also other passes) can be found at: </span><span class="c37 c5"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionPass.html">http://llvm.org/docs/doxygen/html/classllvm_1_1FunctionPass.html</a></span><span class="c5">&nbsp;</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c19">Part 7.5.7 Register allocation </span></p><p class="c17 c35"><span class="c19"></span></p><p class="c17"><span class="c5">Register allocation is highly dependent on the live interval analysis introduced in the previous section. LLVM provides several different register allocation algorithms implemented in the </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/RegAllocBase_8cpp_source.html">RegAllocBase.cpp</a></span><span class="c5">, </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/RegAllocBasic_8cpp_source.html">RegAllocBasic.cpp</a></span><span class="c5">, </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/RegAllocFast_8cpp_source.html">RegAllocFast.cpp</a></span><span class="c5">, </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/RegAllocGreedy_8cpp_source.html">RegAllocGreedy.cpp</a></span><span class="c5">, </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/RegAllocPBQP_8cpp_source.html">RegAllocPBQP.cpp</a></span><span class="c5">&nbsp;</span><span class="c5">files located in the llvm-3.x.src\lib\CodeGen directory. The following are relevant class definition snapshots, along with descriptive comments, picked from these source files: </span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0">00053 </span><span class="c0 c6">/// RegAllocBase provides the register allocation driver and interface that can</span><span class="c0"><br>00054 </span><span class="c0 c6">/// be extended to add interesting heuristics.</span><span class="c0"><br>00056 </span><span class="c0 c6">/// Register allocators must override the selectOrSplit() method to implement</span><span class="c0"><br>00057 </span><span class="c0 c6">/// live range splitting. They must also override enqueue/dequeue to provide an</span><span class="c0"><br>00058 </span><span class="c0 c6">/// assignment order.</span><span class="c0"><br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html">00059</a></span><span class="c0">&nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html">RegAllocBase</a></span><span class="c0">&nbsp;{<br>00060 </span><span class="c0 c9">protected</span><span class="c0">:<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html#a523cbc58f79fe5e9e95dc87f9cee8a36">00061</a></span><span class="c0">&nbsp; &nbsp;</span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html#a523cbc58f79fe5e9e95dc87f9cee8a36">TRI</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html#aba058f684e1b6704e5b4a09f889ec18c">00062</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html#aba058f684e1b6704e5b4a09f889ec18c">MRI</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html#a96bb57a8041a40ded1ba0ef3b411a615">00063</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1VirtRegMap.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1VirtRegMap.html">VirtRegMap</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html#a96bb57a8041a40ded1ba0ef3b411a615">VRM</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html#a575345318339b28557a6c8ea57708434">00064</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveIntervals.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveIntervals.html">LiveIntervals</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html#a575345318339b28557a6c8ea57708434">LIS</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html#a865e0247c5f922b8afaaaec481e4939c">00065</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRegMatrix.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRegMatrix.html">LiveRegMatrix</a></span><span class="c0">&nbsp;*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html#a865e0247c5f922b8afaaaec481e4939c">Matrix</a></span><span class="c0">;<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html#aa6330bc662bf646d769c2a0771282eaf">00066</a></span><span class="c0">&nbsp; </span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegisterClassInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegisterClassInfo.html">RegisterClassInfo</a></span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html#aa6330bc662bf646d769c2a0771282eaf">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html#aa6330bc662bf646d769c2a0771282eaf">RegClassInfo</a></span><span class="c0">;</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0">00056 </span><span class="c0 c6">/// RABasic provides a minimal implementation of the basic register allocation</span><span class="c0"><br>00057 </span><span class="c0 c6">/// algorithm. It prioritizes live virtual registers by spill weight and spills</span><span class="c0"><br>00058 </span><span class="c0 c6">/// whenever a register is unavailable. This is not practical in production but</span><span class="c0"><br>00059 </span><span class="c0 c6">/// provides a useful baseline both for measuring other allocators and comparing</span><span class="c0"><br>00060 </span><span class="c0 c6">/// the speed of the basic algorithm against other styles of allocators.</span><span class="c0"><br>00061 </span><span class="c0 c9">class </span><span class="c0">RABasic : </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a></span><span class="c0">, </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html">RegAllocBase</a></span><span class="c0"><br>00062 {<br>00063 &nbsp; </span><span class="c0 c6">// context</span><span class="c0"><br>00064 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;*MF;<br>00065 <br>00066 &nbsp; </span><span class="c0 c6">// state</span><span class="c0"><br>00067 &nbsp; std::auto_ptr&lt;Spiller&gt; SpillerInstance;<br>00068 &nbsp; std::priority_queue&lt;LiveInterval*, std::vector&lt;LiveInterval*&gt;,<br>00069 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CompSpillWeight&gt; Queue;<br>00070 <br>00071 &nbsp; </span><span class="c0 c6">// Scratch space. &nbsp;Allocated here to avoid repeated malloc calls in</span><span class="c0"><br>00072 &nbsp; </span><span class="c0 c6">// selectOrSplit().</span><span class="c0"><br>00073 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BitVector.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1BitVector.html">BitVector</a></span><span class="c0">&nbsp;UsableRegs;</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c0">00008 </span><span class="c0 c6">//===----------------------------------------------------------------------===//</span><span class="c0"><br>00009 </span><span class="c0 c6">//</span><span class="c0"><br>00010 </span><span class="c0 c6">// This register allocator allocates registers to a basic block at a time,</span><span class="c0"><br>00011 </span><span class="c0 c6">// attempting to keep values in registers and reusing registers as appropriate.</span><span class="c0"><br>00012 </span><span class="c0 c6">//</span><span class="c0"><br>00013 </span><span class="c0 c6">//===----------------------------------------------------------------------===//</span></p><p class="c17"><span class="c5">…......................................</span></p><p class="c17"><span class="c0">00049 &nbsp; </span><span class="c0 c9">class </span><span class="c0">RAFast : </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a></span><span class="c0">&nbsp;{<br>00050 &nbsp; </span><span class="c0 c9">public</span><span class="c0">:<br>00051 &nbsp; &nbsp; </span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a></span><span class="c0">;<br>00052 &nbsp; &nbsp; RAFast() :</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a></span><span class="c0">), StackSlotForVirtReg(-1),<br>00053 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;isBulkSpilling(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/AliasAnalysisEvaluator_8cpp.html#a3898a228575af19a9b2052f2b3677dce">false</a></span><span class="c0">) {}<br>00054 &nbsp; </span><span class="c0 c9">private</span><span class="c0">:<br>00055 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html">TargetMachine</a></span><span class="c0">&nbsp;*TM;<br>00056 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;*MF;<br>00057 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a></span><span class="c0">&nbsp;*MRI;<br>00058 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a></span><span class="c0">&nbsp;*TRI;<br>00059 &nbsp; &nbsp; </span><span class="c0 c9">const</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a></span><span class="c0">&nbsp;*TII;<br>00060 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegisterClassInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegisterClassInfo.html">RegisterClassInfo</a></span><span class="c0">&nbsp;RegClassInfo;<br>00061 <br>00062 &nbsp; &nbsp; </span><span class="c0 c6">// Basic block currently being allocated.</span><span class="c0"><br>00063 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a></span><span class="c0">&nbsp;*MBB;<br>00064 <br>00065 &nbsp; &nbsp; </span><span class="c0 c6">// StackSlotForVirtReg - Maps virtual regs to the frame index where these</span><span class="c0"><br></span></p><p class="c17"><span class="c0">00066 </span><span class="c0 c9">class </span><span class="c0">RAGreedy : </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a></span><span class="c0">,<br>00067 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegAllocBase.html">RegAllocBase</a></span><span class="c0">,<br>00068 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0 c9">private</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRangeEdit.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveRangeEdit.html">LiveRangeEdit</a></span><span class="c0">::Delegate {<br>00069 <br>00070 &nbsp; </span><span class="c0 c6">// context</span><span class="c0"><br>00071 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0">&nbsp;*MF;<br>00072 <br>00073 &nbsp; </span><span class="c0 c6">// analyses</span><span class="c0"><br>00074 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SlotIndexes.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SlotIndexes.html">SlotIndexes</a></span><span class="c0">&nbsp;*Indexes;<br>00075 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineDominatorTree.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineDominatorTree.html">MachineDominatorTree</a></span><span class="c0">&nbsp;*DomTree;<br>00076 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineLoopInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a></span><span class="c0">&nbsp;*Loops;<br>00077 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1EdgeBundles.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1EdgeBundles.html">EdgeBundles</a></span><span class="c0">&nbsp;*Bundles;<br>00078 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SpillPlacement.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SpillPlacement.html">SpillPlacement</a></span><span class="c0">&nbsp;*SpillPlacer;<br>00079 &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveDebugVariables.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1LiveDebugVariables.html">LiveDebugVariables</a></span><span class="c0">&nbsp;*DebugVars;<br>00080 <br>00081 &nbsp; </span><span class="c0 c6">// state</span><span class="c0"><br>00082 &nbsp; std::auto_ptr&lt;Spiller&gt; SpillerInstance;<br>00083 &nbsp; std::priority_queue&lt;std::pair&lt;unsigned, unsigned&gt; &gt; Queue;<br>00084 &nbsp; </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;NextCascade;<br>00085 <br>00086 &nbsp; </span><span class="c0 c6">// Live ranges pass through a number of stages as we try to allocate them.</span><span class="c0"><br>00087 &nbsp; </span><span class="c0 c6">// Some of the stages may also create new live ranges:</span><span class="c0"><br>00088 &nbsp; </span><span class="c0 c6">//</span><span class="c0"><br>00089 &nbsp; </span><span class="c0 c6">// - Region splitting.</span><span class="c0"><br>00090 &nbsp; </span><span class="c0 c6">// - Per-block splitting.</span><span class="c0"><br>00091 &nbsp; </span><span class="c0 c6">// - Local splitting.</span><span class="c0"><br>00092 &nbsp; </span><span class="c0 c6">// - Spilling.</span></p><p class="c15"><span class="c0"></span></p><p class="c15"><span class="c0"></span></p><p class="c17"><span class="c0">00008 </span><span class="c0 c6">//===----------------------------------------------------------------------===//</span><span class="c0"><br>00009 </span><span class="c0 c6">//</span><span class="c0"><br>00010 </span><span class="c0 c6">// This file contains a Partitioned Boolean Quadratic Programming (PBQP) based</span><span class="c0"><br>00011 </span><span class="c0 c6">// register allocator for LLVM. This allocator works by constructing a PBQP</span><span class="c0"><br>00012 </span><span class="c0 c6">// problem representing the register allocation problem under consideration,</span><span class="c0"><br>00013 </span><span class="c0 c6">// solving this using a PBQP solver, and mapping the solution back to a</span><span class="c0"><br>00014 </span><span class="c0 c6">// register assignment. If any variables are selected for spilling then spill</span><span class="c0"><br>00015 </span><span class="c0 c6">// code is inserted and the process repeated.</span><span class="c0"><br>00016 </span><span class="c0 c6">//</span><span class="c0"><br>00017 </span><span class="c0 c6">// The PBQP solver (pbqp.c) provided for this allocator uses a heuristic tuned</span><span class="c0"><br>00018 </span><span class="c0 c6">// for register allocation. For more information on PBQP for register</span><span class="c0"><br>00019 </span><span class="c0 c6">// allocation, see the following papers:</span><span class="c0"><br>00020 </span><span class="c0 c6">//</span><span class="c0"><br>00021 </span><span class="c0 c6">// &nbsp; (1) Hames, L. and Scholz, B. 2006. Nearly optimal register allocation with</span><span class="c0"><br>00022 </span><span class="c0 c6">// &nbsp; PBQP. In Proceedings of the 7th Joint Modular Languages Conference</span><span class="c0"><br>00023 </span><span class="c0 c6">// &nbsp; (JMLC'06). LNCS, vol. 4228. Springer, New York, NY, USA. 346-361.</span><span class="c0"><br>00024 </span><span class="c0 c6">//</span><span class="c0"><br>00025 </span><span class="c0 c6">// &nbsp; (2) Scholz, B., Eckstein, E. 2002. Register allocation for irregular</span><span class="c0"><br>00026 </span><span class="c0 c6">// &nbsp; architectures. In Proceedings of the Joint Conference on Languages,</span><span class="c0"><br>00027 </span><span class="c0 c6">// &nbsp; Compilers and Tools for Embedded Systems (LCTES'02), ACM Press, New York,</span><span class="c0"><br>00028 </span><span class="c0 c6">// &nbsp; NY, USA, 139-148.</span><span class="c0"><br>00029 </span><span class="c0 c6">//</span><span class="c0"><br>00030 </span><span class="c0 c6">//===----------------------------------------------------------------------===//</span></p><p class="c20"><span class="c0">….......................................</span></p><p class="c17"><span class="c0">00083 </span><span class="c0 c6">/// PBQP based allocators solve the register allocation problem by mapping</span><span class="c0"><br>00084 </span><span class="c0 c6">/// register allocation problems to Partitioned Boolean Quadratic</span><span class="c0"><br>00085 </span><span class="c0 c6">/// Programming problems.</span><span class="c0"><br>00086 </span><span class="c0 c9">class </span><span class="c0">RegAllocPBQP : </span><span class="c0 c9">public</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a></span><span class="c0">&nbsp;{<br>00087 </span><span class="c0 c9">public</span><span class="c0">:<br>00088 <br>00089 &nbsp; </span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c8">char</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a></span><span class="c0">;<br>00090 <br>00091 </span><span class="c0 c6">&nbsp;/// Construct a PBQP register allocator.</span><span class="c0"><br>00092 &nbsp;RegAllocPBQP(std::auto_ptr&lt;PBQPBuilder&gt; b, </span><span class="c0 c8">char</span><span class="c0">&nbsp;*cPassID=0)<br>00093 &nbsp; &nbsp; &nbsp; :</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a></span><span class="c0">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1CallingConv.html#a4f861731fc6dbfdccc05af5968d98974">ID</a></span><span class="c0">), builder(b), customPassID(cPassID) {<br>00094 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa68a1c0afe039658609beebc96121f39">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aa68a1c0afe039658609beebc96121f39">initializeSlotIndexesPass</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a></span><span class="c0">());<br>00095 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aea2ef5e4ec532aa42606902e9001f712">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#aea2ef5e4ec532aa42606902e9001f712">initializeLiveIntervalsPass</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a></span><span class="c0">());<br>00096 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a00060f1af12b2970e8b871a2b7fc6f27">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a00060f1af12b2970e8b871a2b7fc6f27">initializeCalculateSpillWeightsPass</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a></span><span class="c0">());<br>00097 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a7aeb11cd960ff18ae0b12e678dfcae57">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a7aeb11cd960ff18ae0b12e678dfcae57">initializeLiveStacksPass</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a></span><span class="c0">());<br>00098 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#ac6ce5e3d2a1edf66c1beb80be260ea0b">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#ac6ce5e3d2a1edf66c1beb80be260ea0b">initializeMachineLoopInfoPass</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a></span><span class="c0">());<br>00099 &nbsp; &nbsp;</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a49962b01687c86f2c8bcf37a9037ff85">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a49962b01687c86f2c8bcf37a9037ff85">initializeVirtRegMapPass</a></span><span class="c0">(*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a></span><span class="c0">());<br>00100 &nbsp; }</span></p><p class="c15 c44"><span class="c5"></span></p><p class="c17"><span class="c5">From a design point of view, this blog is a nice description of the register allocation algorithms in LLVM:</span></p><p class="c17"><span class="c37 c5"><a class="c1" href="http://blog.llvm.org/2011/09/greedy-register-allocation-in-llvm-30.html">http://blog.llvm.org/2011/09/greedy-register-allocation-in-llvm-30.html</a></span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">Regarding the spill weight calculation during the register allocation process, please refer to the files &nbsp;</span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/CalcSpillWeights_8h_source.html">CalcSpillWeights.h</a></span><span class="c5">&nbsp;and </span><span class="c11 c12"><a class="c1" href="http://llvm.org/docs/doxygen/html/CalcSpillWeights_8cpp_source.html">CalcSpillWeights.cpp</a></span><span class="c5">. Basically the following function is provided to calculate the spill weight:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a778ad60e4d519fe298022d004f34df93">00031</a></span><span class="c0">&nbsp; </span><span class="c0 c9">static</span><span class="c0">&nbsp;</span><span class="c0 c9">inline</span><span class="c0">&nbsp;</span><span class="c0 c8">float</span><span class="c0"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a778ad60e4d519fe298022d004f34df93">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm.html#a778ad60e4d519fe298022d004f34df93">normalizeSpillWeight</a></span><span class="c0">(</span><span class="c0 c8">float</span><span class="c0">&nbsp;UseDefFreq, </span><span class="c0 c8">unsigned</span><span class="c0">&nbsp;Size) {<br>00032 &nbsp; &nbsp; </span><span class="c0 c6">// The constant 25 instructions is added to avoid depending too much on</span><span class="c0"><br>00033 &nbsp; &nbsp; </span><span class="c0 c6">// accidental SlotIndex gaps for small intervals. The effect is that small</span><span class="c0"><br>00034 &nbsp; &nbsp; </span><span class="c0 c6">// intervals have a spill weight that is mostly proportional to the number</span><span class="c0"><br>00035 &nbsp; &nbsp; </span><span class="c0 c6">// of uses, while large intervals get a spill weight that is closer to a use</span><span class="c0"><br>00036 &nbsp; &nbsp; </span><span class="c0 c6">// density.</span><span class="c0"><br>00037 &nbsp; &nbsp; </span><span class="c0 c7">return</span><span class="c0">&nbsp;UseDefFreq / (Size + 25*</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1SlotIndex.html#a3297c5b80eccbba982cc90da90e1e1dea0d0c291488b64cffb191fda8a4e90ef0">SlotIndex::InstrDist</a></span><span class="c0">);<br>00038 &nbsp; }</span></p><p class="c17"><span class="c5">When the above function is called, for example in the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1VirtRegAuxInfo.html#a2bc85fed96a6ff499b3d6caa23c8526c">VirtRegAuxInfo::CalculateWeightAndHint()</a></span></p><p class="c17"><span class="c5">function in the </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/CalcSpillWeights_8cpp_source.html">CalcSpillWeights.cpp</a></span><span class="c5">&nbsp;file, the parameter </span><span class="c0">UseDefFreq </span><span class="c5">is passed with a value calculated based on various factors including the loop depth of the corresponding read/write instructions, whether rematerializable or not (</span><span class="c5 c11 c64">means there is no need to find a way to preserve the value in a register : the instruction can be just be reissued whenever the value is needed. This remove some pressure on register alloc, and avoid unnecessary spilling</span><span class="c5">), allocation hits, etc.</span></p><p class="c15 c44"><span class="c5"></span></p><h3 class="c20"><a name="h.hy1ayapdgm0b"></a><span class="c24">Part 7.5.8 </span><span class="c24"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#id58">Prolog/Epilog Code Insertion</a></span></h3><p class="c17 c35"><span></span></p><p class="c17"><span class="c5">The official document has a short description of prolog and epilog code insertion.</span></p><p class="c17"><span class="c5">“Compact Unwind</span></p><p class="c17"><span class="c5">Throwing an exception requires </span><span class="c5">unwinding</span><span class="c5">&nbsp;out of a function. The information on how to unwind a given function is traditionally expressed in DWARF unwind (a.k.a. frame) info. But that format was originally developed for debuggers to backtrace, and each Frame Description Entry (FDE) requires ~20-30 bytes per function. There is also the cost of mapping from an address in a function to the corresponding FDE at runtime. An alternative unwind encoding is called </span><span class="c5">compact unwind</span><span class="c5">&nbsp;and requires just 4-bytes per function.</span></p><p class="c17"><span class="c5">The compact unwind encoding is a 32-bit value, which is encoded in an architecture-specific way. It specifies which registers to restore and from where, and how to unwind out of the function. When the linker creates a final linked image, it will create a </span><span class="c5">__TEXT,__unwind_info</span><span class="c5">&nbsp;section. This section is a small and fast way for the runtime to access unwind info for any given function. If we emit compact unwind info for the function, that compact unwind info will be encoded in the </span><span class="c5">__TEXT,__unwind_info</span><span class="c5">section. If we emit DWARF unwind info, the </span><span class="c5">__TEXT,__unwind_info</span><span class="c5">&nbsp;section will contain the offset of the FDE in the </span><span class="c5">__TEXT,__eh_frame</span><span class="c5">&nbsp;section in the final linked image.</span></p><p class="c17"><span class="c5">For X86, there are three modes for the compact unwind encoding:</span></p><p class="c17"><span class="c5">Function with a Frame Pointer (``EBP`` or ``RBP``)</span></p><p class="c17"><span class="c5">EBP/RBP</span><span class="c5">-based frame, where </span><span class="c5">EBP/RBP</span><span class="c5">&nbsp;is pushed onto the stack immediately after the return address, then </span><span class="c5">ESP/RSP</span><span class="c5">&nbsp;is moved to </span><span class="c5">EBP/RBP</span><span class="c5">. Thus to unwind, </span><span class="c5">ESP/RSP</span><span class="c5">&nbsp;is restored with the current </span><span class="c5">EBP/RBP</span><span class="c5">&nbsp;value, then </span><span class="c5">EBP/RBP</span><span class="c5">&nbsp;is restored by popping the stack, and the return is done by popping the stack once more into the PC. All non-volatile registers that need to be restored must have been saved in a small range on the stack that starts </span><span class="c5">EBP-4</span><span class="c5">&nbsp;to </span><span class="c5">EBP-1020</span><span class="c5">&nbsp;(</span><span class="c5">RBP-8</span><span class="c5">&nbsp;to </span><span class="c5">RBP-1020</span><span class="c5">). The offset (divided by 4 in 32-bit mode and 8 in 64-bit mode) is encoded in bits 16-23 (mask: </span><span class="c5">0x00FF0000</span><span class="c5">). The registers saved are encoded in bits 0-14 (mask: </span><span class="c5">0x00007FFF</span><span class="c5">) as five 3-bit entries from the following table:</span></p><a href="https://people.cs.pitt.edu/~yongli/notes/llvm3/LLVM3.html#" name="0e2154cafd5cff47c93a1b5a1d5c5ff0286c7dbf"></a><a href="https://people.cs.pitt.edu/~yongli/notes/llvm3/LLVM3.html#" name="1"></a><table cellpadding="0" cellspacing="0" class="c53"><tbody><tr><td class="c42"><p class="c17"><span class="c5">Compact Number</span></p></td><td class="c42"><p class="c17"><span class="c5">i386 Register</span></p></td><td class="c42"><p class="c17"><span class="c5">x86-64 Register</span></p></td></tr><tr><td class="c42"><p class="c17"><span class="c5">1</span></p></td><td class="c42"><p class="c17"><span class="c5">EBX</span></p></td><td class="c42"><p class="c17"><span class="c5">RBX</span></p></td></tr><tr><td class="c42"><p class="c17"><span class="c5">2</span></p></td><td class="c42"><p class="c17"><span class="c5">ECX</span></p></td><td class="c42"><p class="c17"><span class="c5">R12</span></p></td></tr><tr><td class="c42"><p class="c17"><span class="c5">3</span></p></td><td class="c42"><p class="c17"><span class="c5">EDX</span></p></td><td class="c42"><p class="c17"><span class="c5">R13</span></p></td></tr><tr><td class="c42"><p class="c17"><span class="c5">4</span></p></td><td class="c42"><p class="c17"><span class="c5">EDI</span></p></td><td class="c42"><p class="c17"><span class="c5">R14</span></p></td></tr><tr><td class="c42"><p class="c17"><span class="c5">5</span></p></td><td class="c42"><p class="c17"><span class="c5">ESI</span></p></td><td class="c42"><p class="c17"><span class="c5">R15</span></p></td></tr><tr><td class="c42"><p class="c17"><span class="c5">6</span></p></td><td class="c42"><p class="c17"><span class="c5">EBP</span></p></td><td class="c42"><p class="c17"><span class="c5">RBP</span></p></td></tr></tbody></table><p class="c17"><span class="c5">Frameless with a Small Constant Stack Size (``EBP`` or ``RBP`` is not used as a frame pointer)</span></p><p class="c17"><span class="c5">To return, a constant (encoded in the compact unwind encoding) is added to the </span><span class="c5">ESP/RSP</span><span class="c5">. Then the return is done by popping the stack into the PC. All non-volatile registers that need to be restored must have been saved on the stack immediately after the return address. The stack size (divided by 4 in 32-bit mode and 8 in 64-bit mode) is encoded in bits 16-23 (mask: </span><span class="c5">0x00FF0000</span><span class="c5">). There is a maximum stack size of 1024 bytes in 32-bit mode and 2048 in 64-bit mode. The number of registers saved is encoded in bits 9-12 (mask: </span><span class="c5">0x00001C00</span><span class="c5">). Bits 0-9 (mask: </span><span class="c5">0x000003FF</span><span class="c5">) contain which registers were saved and their order. (See the</span><span class="c5">encodeCompactUnwindRegistersWithoutFrame()</span><span class="c5">&nbsp;function in </span><span class="c5">lib/Target/X86FrameLowering.cpp</span><span class="c5">&nbsp;for the encoding algorithm.)</span></p><p class="c17"><span class="c5">Frameless with a Large Constant Stack Size (``EBP`` or ``RBP`` is not used as a frame pointer)</span></p><p class="c17"><span class="c5">This case is like the “Frameless with a Small Constant Stack Size” case, but the stack size is too large to encode in the compact unwind encoding. Instead it requires that the function contains “</span><span class="c5">subl $nnnnnn, %esp</span><span class="c5">” in its prolog. The compact encoding contains the offset to the </span><span class="c5">$nnnnnn</span><span class="c5">&nbsp;value in the function in bits 9-12 (mask:</span><span class="c5">0x00001C00</span><span class="c5">).”</span></p><p class="c17 c35"><span></span></p><p class="c17 c35"><span></span></p><p class="c17"><span class="c5">While the above description only discuss the stack unwinding, prolog/epilog insertion does much more than that. Prolog and epilog insertion is implemented in the </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/PrologEpilogInserter_8cpp_source.html">PrologEpilogInserter.cpp</a></span><span>&nbsp;and </span><span class="c12 c11"><a class="c1" href="http://llvm.org/docs/doxygen/html/PrologEpilogInserter_8h_source.html">PrologEpilogInserter</a></span><span class="c12 c11">.h</span><span>&nbsp;</span><span class="c5">files as the </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PEI.html">PEI</a></span><span class="c5">&nbsp;class:</span></p><p class="c17"><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PEI.html">00036</a></span><span class="c0 c6">&nbsp; &nbsp;</span><span class="c0 c9">class</span><span class="c0 c9"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PEI.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PEI.html">PEI</a></span><span class="c0 c6">&nbsp;: </span><span class="c0 c9">public</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a></span><span class="c0 c6">&nbsp;{...</span></p><p class="c17 c35"><span class="c0 c6"></span></p><p class="c17"><span class="c5">This pass is responsible for finalizing the functions frame layout, saving callee saved registers, and for emitting prolog &amp; epilog code for the function. This pass must be run after register allocation. As all other passes do, prolog/epilog insertion starts with the entry function </span><span class="c0 c6">runOnMachineFunction():</span></p><p class="c17 c35"><span class="c0 c6"></span></p><p class="c17"><span class="c0 c6">00064 /// runOnMachineFunction - Insert prolog/epilog code and replace abstract<br>00065 /// frame indexes with appropriate references.<br></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1PEI.html#a4c72d0ec2686460b5d080d434c81334e">00067</a></span><span class="c0 c6">&nbsp;</span><span class="c0 c8">bool</span><span class="c0 c6">&nbsp;PEI::runOnMachineFunction(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0 c6">&nbsp;&amp;Fn) {<br>00068 &nbsp; </span><span class="c0 c9">const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html">Function</a></span><span class="c0 c6">*</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/LLParser_8cpp.html#a33ece1ef8074506a15d7f86eb76dbae6">F</a></span><span class="c0 c6">&nbsp;= Fn.getFunction();<br>00069 &nbsp; </span><span class="c0 c9">const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a></span><span class="c0 c6">&nbsp;*TRI = Fn.getTarget().getRegisterInfo();<br>00070 &nbsp; </span><span class="c0 c9">const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html">TargetFrameLowering</a></span><span class="c0 c6">&nbsp;*TFI = Fn.getTarget().getFrameLowering();<br>00072 &nbsp; assert(!Fn.getRegInfo().getNumVirtRegs() &amp;&amp; </span><span class="c0 c14">"Regalloc must assign all vregs"</span><span class="c0 c6">);<br>00074 &nbsp; RS = TRI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a6dffe4b1c9f6b9f85a9448c1c8b16a9b">requiresRegisterScavenging</a></span><span class="c0 c6">(Fn) ? </span><span class="c0 c9">new</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegScavenger.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1RegScavenger.html">RegScavenger</a></span><span class="c0 c6">() : NULL;<br>00075 &nbsp; FrameIndexVirtualScavenging = TRI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a27f0c6b9dfbaa9e6a10f15768e772029">requiresFrameIndexScavenging</a></span><span class="c0 c6">(Fn);<br>00077 &nbsp; // Calculate the MaxCallFrameSize and AdjustsStack variables for the<br>00078 &nbsp; // function's frame information. Also eliminates call frame pseudo<br>00079 &nbsp; // instructions.<br>00080 &nbsp; calculateCallsInformation(Fn);<br>00082 &nbsp; // Allow the target machine to make some adjustments to the function<br>00083 &nbsp; // e.g. UsedPhysRegs before calculateCalleeSavedRegisters.<br>00084 &nbsp; TFI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a0f01e29790499891efeb10ed97bb983f">processFunctionBeforeCalleeSavedScan</a></span><span class="c0 c6">(Fn, RS);<br>00086 &nbsp; // Scan the function for modified callee saved registers and insert spill code<br>00087 &nbsp; // for any callee saved registers that are modified.<br>00088 &nbsp; calculateCalleeSavedRegisters(Fn);<br>00090 &nbsp; // Determine placement of CSR spill/restore code:<br>00091 &nbsp; // &nbsp;- With shrink wrapping, place spills and restores to tightly<br>00092 &nbsp; // &nbsp; &nbsp;enclose regions in the Machine CFG of the function where<br>00093 &nbsp; // &nbsp; &nbsp;they are used.<br>00094 &nbsp; // &nbsp;- Without shink wrapping (default), place all spills in the<br>00095 &nbsp; // &nbsp; &nbsp;entry block, all restores in return blocks.<br>00096 &nbsp; placeCSRSpillsAndRestores(Fn);<br>00098 &nbsp; // Add the code to save and restore the callee saved registers<br>00099 &nbsp; </span><span class="c0 c7">if</span><span class="c0 c6">&nbsp;(!F-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html#a127b7171a700b31d577dc76386d25637">getAttributes</a></span><span class="c0 c6">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AttributeSet.html#a54abbe67d4a53c92652f1666dc19281f">hasAttribute</a></span><span class="c0 c6">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AttributeSet.html#a78e5bd45ff85f58ed21fa3f04e6fc8f5a5def2a8e87d621842043dd252c2ad0cb">AttributeSet::FunctionIndex</a></span><span class="c0 c6">,<br>00100 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea8e13906a502f0a86ae2e2d8142fae055">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea8e13906a502f0a86ae2e2d8142fae055">Attribute::Naked</a></span><span class="c0 c6">))<br>00101 &nbsp; &nbsp; insertCSRSpillsAndRestores(Fn);<br>00103 &nbsp; // Allow the target machine to make final modifications to the function<br>00104 &nbsp; // before the frame layout is finalized.<br>00105 &nbsp; TFI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a52d1ce8013aac9fc9b589e5a943fb511">processFunctionBeforeFrameFinalized</a></span><span class="c0 c6">(Fn);<br>00107 &nbsp; // Calculate actual frame offsets for all abstract stack objects...<br>00108 &nbsp; calculateFrameObjectOffsets(Fn);<br>00110 &nbsp; // Add prolog and epilog code to the function. &nbsp;This function is required<br>00111 &nbsp; // to align the stack frame as necessary for any stack variables or<br>00112 &nbsp; // called functions. &nbsp;Because of this, calculateCalleeSavedRegisters()<br>00113 &nbsp; // must be called before this function in order to set the AdjustsStack<br>00114 &nbsp; // and MaxCallFrameSize variables.<br>00115 &nbsp; </span><span class="c0 c7">if</span><span class="c0 c6">&nbsp;(!F-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html#a127b7171a700b31d577dc76386d25637">getAttributes</a></span><span class="c0 c6">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AttributeSet.html#a54abbe67d4a53c92652f1666dc19281f">hasAttribute</a></span><span class="c0 c6">(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1AttributeSet.html#a78e5bd45ff85f58ed21fa3f04e6fc8f5a5def2a8e87d621842043dd252c2ad0cb">AttributeSet::FunctionIndex</a></span><span class="c0 c6">,<br>00116 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea8e13906a502f0a86ae2e2d8142fae055">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1Attribute.html#aab7ee4b8fd1d3e7e4cea87868855e60ea8e13906a502f0a86ae2e2d8142fae055">Attribute::Naked</a></span><span class="c0 c6">))<br>00117 &nbsp; &nbsp; insertPrologEpilogCode(Fn);<br>00119 &nbsp; // Replace all MO_FrameIndex operands with physical register references<br>00120 &nbsp; // and actual offsets.<br>00122 &nbsp; replaceFrameIndices(Fn);<br>00124 &nbsp; // If register scavenging is needed, as we've enabled doing it as a<br>00125 &nbsp; // post-pass, scavenge the virtual registers that frame index elimiation<br>00126 &nbsp; // inserted.<br>00127 &nbsp; </span><span class="c0 c7">if</span><span class="c0 c6">&nbsp;(TRI-&gt;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetRegisterInfo.html#a6dffe4b1c9f6b9f85a9448c1c8b16a9b">requiresRegisterScavenging</a></span><span class="c0 c6">(Fn) &amp;&amp; FrameIndexVirtualScavenging)<br>00128 &nbsp; &nbsp; scavengeFrameVirtualRegs(Fn);<br>00130 &nbsp; // Clear any vregs created by virtual scavenging.<br>00131 &nbsp; Fn.getRegInfo().clearVirtRegs();<br>00133 &nbsp; </span><span class="c0 c9">delete</span><span class="c0 c6">&nbsp;RS;<br>00134 &nbsp; clearAllSets();<br>00135 &nbsp; </span><span class="c0 c7">return</span><span class="c0 c6">&nbsp;</span><span class="c0 c9">true</span><span class="c0 c6">;<br>00136 }</span></p><p class="c17 c35"><span class="c0 c6"></span></p><p class="c17"><span class="c5">The above code calls the </span><span class="c0 c6">insertPrologEpilogCode()</span><span class="c5">&nbsp;function:</span></p><p class="c17 c35"><span class="c0 c6"></span></p><p class="c17"><span class="c0 c6">00673 /// insertPrologEpilogCode - Scan the function for modified callee saved<br>00674 /// registers, insert spill code for these callee saved registers, then add<br>00675 /// prolog and epilog code to the function.<br>00677 </span><span class="c0 c8">void</span><span class="c0 c6">&nbsp;PEI::insertPrologEpilogCode(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html">MachineFunction</a></span><span class="c0 c6">&nbsp;&amp;Fn) {<br>00678 &nbsp; </span><span class="c0 c9">const</span><span class="c0 c6"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html">&nbsp;</a></span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html">TargetFrameLowering</a></span><span class="c0 c6">&nbsp;&amp;TFI = *Fn.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a></span><span class="c0 c6">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#a02aa9d4cbd6ffcc70dfe1143ec0995ef">getFrameLowering</a></span><span class="c0 c6">();<br>00680 &nbsp; // Add prologue to the function...<br>00681 &nbsp; TFI.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ae9ba6ae38e8083d7d5baa7e14fb33728">emitPrologue</a></span><span class="c0 c6">(Fn);<br>00683 &nbsp; // Add epilogue to restore the callee-save registers in each exiting block<br>00684 &nbsp; </span><span class="c0 c7">for</span><span class="c0 c6">&nbsp;(</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a340712de3e78fec11c338735cab17df7">MachineFunction::iterator</a></span><span class="c0 c6">&nbsp;I = Fn.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#ab0789854909cf47f640a85fa2bac29c7">begin</a></span><span class="c0 c6">(), E = Fn.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a9d017af749f76484cb9aec9ff6e4330c">end</a></span><span class="c0 c6">(); I != E; ++</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/namespacellvm_1_1ARM__PROC.html#aac31dd660a6f18140efdd62b351cb11ba41e4a98ca287d35fab0923aa355d63a5">I</a></span><span class="c0 c6">) {<br>00685 &nbsp; &nbsp; // If last instruction is a return instruction, add an epilogue<br>00686 &nbsp; &nbsp; </span><span class="c0 c7">if</span><span class="c0 c6">&nbsp;(!I-&gt;empty() &amp;&amp; I-&gt;back().isReturn())<br>00687 &nbsp; &nbsp; &nbsp; TFI.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a12d7286898851b396d8fb5fb78db2deb">emitEpilogue</a></span><span class="c0 c6">(Fn, *I);<br>00688 &nbsp; }<br>00690 &nbsp; // Emit additional code that is required to support segmented stacks, if<br>00691 &nbsp; // we've been asked for it. &nbsp;This, when linked with a runtime with support<br>00692 &nbsp; // for segmented stacks (libgcc is one), will result in allocating stack<br>00693 &nbsp; // space in small chunks instead of one large contiguous block.<br>00694 &nbsp; </span><span class="c0 c7">if</span><span class="c0 c6">&nbsp;(Fn.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1MachineFunction.html#a6745c3bfdfc5b0643b078b96df2db252">getTarget</a></span><span class="c0 c6">().</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetMachine.html#ab1fb67187fc37e569cc5171cbebba873">Options</a></span><span class="c0 c6">.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetOptions.html#a0c579d66df87322b3f963638eddc1cf5">EnableSegmentedStacks</a></span><span class="c0 c6">)<br>00695 &nbsp; &nbsp; TFI.</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a23cfb8fc7aa94c96fe3f790aed5162b6">adjustForSegmentedStacks</a></span><span class="c0 c6">(Fn);<br>00696 }</span></p><p class="c17 c35"><span class="c19"></span></p><p class="c17"><span class="c5">Note that the above code invokes </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#a12d7286898851b396d8fb5fb78db2deb">emitEpilogue</a></span><span class="c5">() and </span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ae9ba6ae38e8083d7d5baa7e14fb33728">emitPrologue</a></span><span class="c5">() functions in the </span><span class="c5">&nbsp;</span><span class="c0 c4"><a class="c1" href="http://llvm.org/docs/doxygen/html/classllvm_1_1TargetFrameLowering.html#ae6cf8c66d083faae1a35ec6e8bddd5e1">TargetFrameLowering</a></span><span class="c16">&nbsp;</span><span class="c5">class, which has been discussed in part 7.2.4.</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17 c35"><span class="c19"></span></p><p class="c17"><span class="c19">Part 7.5.9 &nbsp;Code emission</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c5">The following LLVM document says something about code emission:</span></p><p class="c17 c35"><span class="c5"></span></p><p class="c17"><span class="c2">“The code emission step of code generation is responsible for lowering from the code generator abstractions (like </span><span class="c2 c29"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#machinefunction">MachineFunction</a></span><span class="c2">, </span><span class="c2 c29"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#machineinstr">MachineInstr</a></span><span class="c2">, etc) down to the abstractions used by the MC layer (</span><span class="c2 c29"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#mcinst">MCInst</a></span><span class="c2">, </span><span class="c2 c29"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#mcstreamer">MCStreamer</a></span><span class="c2">, etc). This is done with a combination of several different classes: the (misnamed) target-independent AsmPrinter class, target-specific subclasses of AsmPrinter (such as SparcAsmPrinter), and the TargetLoweringObjectFile class.</span></p><p class="c17"><span class="c2">Since the MC layer works at the level of abstraction of object files, it doesn’t have a notion of functions, global variables etc. Instead, it thinks about labels, directives, and instructions. A key class used at this time is the MCStreamer class. This is an abstract API that is implemented in different ways (e.g. to output a .s file, output an ELF .o file, etc) that is effectively an “assembler API”. MCStreamer has one method per directive, such as EmitLabel, EmitSymbolAttribute, SwitchSection, etc, which directly correspond to assembly level directives.</span></p><p class="c17"><span class="c2">If you are interested in implementing a code generator for a target, there are three important things that you have to implement for your target:</span></p><ol class="c60" start="1"><li class="c32 c20"><span class="c2">First, you need a subclass of AsmPrinter for your target. This class implements the general lowering process converting MachineFunction’s into MC label constructs. The AsmPrinter base class provides a number of useful methods and routines, and also allows you to override the lowering process in some important ways. You should get much of the lowering for free if you are implementing an ELF, COFF, or MachO target, because the TargetLoweringObjectFile class implements much of the common logic.</span></li><li class="c32 c20"><span class="c2">Second, you need to implement an instruction printer for your target. The instruction printer takes an </span><span class="c2 c29"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#mcinst">MCInst</a></span><span class="c2">&nbsp;and renders it to a raw_ostream as text. Most of this is automatically generated from the .td file (when you specify something like “</span><span class="c10 c5">add $dst, $src1, $src2</span><span class="c2">” in the instructions), but you need to implement routines to print operands.</span></li><li class="c32 c20"><span class="c2">Third, you need to implement code that lowers a </span><span class="c2 c29"><a class="c1" href="http://llvm.org/docs/CodeGenerator.html#machineinstr">MachineInstr</a></span><span class="c2">&nbsp;to an MCInst, usually implemented in “&lt;target&gt;MCInstLower.cpp”. This lowering process is often target specific, and is responsible for turning jump table entries, constant pool indices, global variable addresses, etc into MCLabels as appropriate. This translation layer is also responsible for expanding pseudo ops used by the code generator into the actual machine instructions they correspond to. The MCInsts that are generated by this are fed into the instruction printer or the encoder.</span></li></ol><p class="c20"><span class="c2">Finally, at your choosing, you can also implement an subclass of MCCodeEmitter which lowers MCInst’s into machine code bytes and relocations. This is important if you want to support direct .o file emission, or would like to implement an assembler for your target.”</span></p><p class="c17 c35"><span class="c5"></span></p><div><p class="c15 c66"><span></span></p></div><hr class="c74"><div><p class="c20"><a href="https://people.cs.pitt.edu/~yongli/notes/llvm3/LLVM3.html#ftnt_ref1" name="ftnt1">[1]</a><span class="c65">&nbsp;Fixup is a linker term. </span><span class="c16 c65">“Whenever an object file (.o, .obj) refers to some external symbol it will output placeholder code like "Put address 0 to register 5" and a note that says "Fill in that 0 with the actual address of symbol 'foo'". Some other object file will define 'foo', the linker will then go back and "fix up" the 0 to be the correct address.”</span></p></div><div><p class="c20"><a href="https://people.cs.pitt.edu/~yongli/notes/llvm3/LLVM3.html#ftnt_ref2" name="ftnt2">[2]</a><span class="c5">&nbsp;Instruction relaxing is a process to adjust instructions when finalizing the layout of a program.</span></p><p class="c20"><span class="c5">&nbsp;For details please refer to </span><span class="c37 c5"><a class="c1" href="http://mclinker.googlecode.com/files/instruction_relaxing.pdf">http://mclinker.googlecode.com/files/instruction_relaxing.pdf</a></span></p></div><div><p class="c20"><a href="https://people.cs.pitt.edu/~yongli/notes/llvm3/LLVM3.html#ftnt_ref3" name="ftnt3">[3]</a><span class="c5">&nbsp;There are two ways for computing live intervals: old and new. The new approach does not depend on the live variable analysis. </span></p></div><audio controls="controls" style="display: none;"></audio></body><style type="text/css">#yddContainer{display:block;font-family:Microsoft YaHei;position:relative;width:100%;height:100%;top:-4px;left:-4px;font-size:12px;border:1px solid}#yddTop{display:block;height:22px}#yddTopBorderlr{display:block;position:static;height:17px;padding:2px 28px;line-height:17px;font-size:12px;color:#5079bb;font-weight:bold;border-style:none solid;border-width:1px}#yddTopBorderlr .ydd-sp{position:absolute;top:2px;height:0;overflow:hidden}.ydd-icon{left:5px;width:17px;padding:0px 0px 0px 0px;padding-top:17px;background-position:-16px -44px}.ydd-close{right:5px;width:16px;padding-top:16px;background-position:left -44px}#yddKeyTitle{float:left;text-decoration:none}#yddMiddle{display:block;margin-bottom:10px}.ydd-tabs{display:block;margin:5px 0;padding:0 5px;height:18px;border-bottom:1px solid}.ydd-tab{display:block;float:left;height:18px;margin:0 5px -1px 0;padding:0 4px;line-height:18px;border:1px solid;border-bottom:none}.ydd-trans-container{display:block;line-height:160%}.ydd-trans-container a{text-decoration:none;}#yddBottom{position:absolute;bottom:0;left:0;width:100%;height:22px;line-height:22px;overflow:hidden;background-position:left -22px}.ydd-padding010{padding:0 10px}#yddWrapper{color:#252525;z-index:10001;background:url(chrome-extension://eopjamdnofihpioajgfdikhhbobonhbb/ab20.png);}#yddContainer{background:#fff;border-color:#4b7598}#yddTopBorderlr{border-color:#f0f8fc}#yddWrapper .ydd-sp{background-image:url(chrome-extension://eopjamdnofihpioajgfdikhhbobonhbb/ydd-sprite.png)}#yddWrapper a,#yddWrapper a:hover,#yddWrapper a:visited{color:#50799b}#yddWrapper .ydd-tabs{color:#959595}.ydd-tabs,.ydd-tab{background:#fff;border-color:#d5e7f3}#yddBottom{color:#363636}#yddWrapper{min-width:250px;max-width:400px;}</style></html>